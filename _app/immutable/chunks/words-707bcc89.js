import{A as y}from"./index-a0aa925d.js";function g(t){return t.word.toLowerCase()+t.parts.map(e=>{const n=e.synonyms.length!=0?" "+e.synonyms.join(" ").toLowerCase():"",o=e.antonyms.length!=0?" "+e.antonyms.join(" ").toLowerCase():"";return e.definition.toLowerCase()+n+o}).join(" ")}const p={lookup:t=>_(v(t),A)},$={free_dict:p};async function _(t,e){const n=await fetch(t);if(!n.ok)return console.log("Invalid url response"),console.log(n),null;const o=await n.json();return e(o)}function v(t){return"https://api.dictionaryapi.dev/api/v2/entries/en/"+t}function A(t){const e=t[0];if(!e.word)return null;let n=e.word;if(!e.meanings||!Array.isArray(e.meanings))return null;function o(r){let s=[];return r.meanings.forEach(i=>{if(!i.partOfSpeech)return;const d=i.partOfSpeech;Array.isArray(i.definitions)&&i.definitions.forEach(c=>{if(!c.definition)return;const w={definition:c.definition,part:d,synonyms:c.synonyms&&Array.isArray(c.synonyms)?c.synonyms:[],antonyms:c.antonyms&&Array.isArray(c.antonyms)?c.antonyms:[]};s.push(w)})}),s}function a(r){let s=[];return r.phonetics&&Array.isArray(r.phonetics)&&r.phonetics.forEach(i=>{if(i.audio){const d={phonetics:i.text?i.text:"",url:i.audio};s.push(d)}}),s}return{word:n,parts:o(e),audio:a(e)}}function M(t){const e=t.trim();return e!=""?e:void 0}function P(t){return t.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()})}function b(t){return new Promise(e=>{const n=new IntersectionObserver(([o])=>{e(o.intersectionRatio===1),n.disconnect()});n.observe(t)})}async function C(t,e){if(t){const n=await b(t);t.classList.add("highlight"),setTimeout(()=>{t==null||t.classList.remove("highlight")},3e3),n||t.scrollIntoView({behavior:"smooth",block:"center"})}}async function T(t,e){if(!Number.isNaN(t)){await y();const n=document.getElementById(e+"-"+t);n&&C(n)}}function W(t,e){for(let n=0;n<e.length;n++){const o=new RegExp(`(${e[n]})`,"gi");t=t.replace(o,"<mark>$1</mark>")}return t}function J(t){return t.replaceAll(/<\/?mark>/gi,"")}function I(){const t=new Date;return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`}var f=(t=>(t.Word="word",t.Id="id",t))(f||{});const k="word";var u=(t=>(t[t.Asc=0]="Asc",t[t.Desc=1]="Desc",t))(u||{});const x=0,L=[],m=L.sort().map((t,e)=>h({word:t,id:e,def:void 0,favorite:!1,tags:void 0,dict_def:void 0}));function l(t){var e,n;return{word:t.word.toLowerCase(),def:(e=t.def)==null?void 0:e.toLocaleLowerCase(),dict_def:t.dict_def?g(t.dict_def):void 0,tags:(n=t.tags)==null?void 0:n.map(o=>"#"+o.toLowerCase())}}function h(t){return t.cache=l(t),t}function j(t){let e={words:m,next_id:m.length,sort_by:k,sort_order:x,key:t};return D(e),e}function O(t){const e=localStorage.getItem(t);return e?JSON.parse(e):j(t)}function R(t,e){return h(e),e.id=t.next_id,t.next_id+=1,t.words.push(e)-1}function U(t,e,n){const o=t.words.findIndex(a=>a.id==e.id);return o>=0&&n(t.words[o],e)}function V(t,e,n){const o=t.words.findIndex(a=>a.id==e);return o<0?!1:(t.words[o].word=n,console.log("updating cache for %o",t.words[o]),t.words[o].cache=l(t.words[o]),console.log("updated cache to %o",t.words[o].cache),!0)}function B(t,e,n){const o=t.words.findIndex(a=>a.id==e);return o<0?!1:(t.words[o].def=n,t.words[o].cache=l(t.words[o]),!0)}function F(t,e){const n=t.words.findIndex(o=>o.id==e);return n>=0?(t.words.splice(n,1),!0):!1}function Y(t){t.words.sort(E(t.sort_by,t.sort_order))}function D(t){localStorage.setItem(t.key,JSON.stringify(t))}function E(t,e,n=!0){let o;switch(t){case f.Id:e==u.Asc?o=(r,s)=>r.id-s.id:o=(r,s)=>s.id-r.id;break;case f.Word:e==u.Desc?o=(r,s)=>s.word.localeCompare(r.word):o=(r,s)=>r.word.localeCompare(s.word);break}return(r,s)=>{const i=Math.pow(-1,Number(e===u.Asc)),d=(Number(r.favorite)-Number(s.favorite))*i;return d!==0?d:o(r,s)}}function q(t,e){for(let n=0;n<t.length;n++)if(!N(e,t[n].toLowerCase()))return!1;return!0}function N(t,e){return e==""||t.cache===void 0||t.cache.word.includes(e)||t.cache.def!==void 0&&t.cache.def.includes(e)||t.cache.dict_def!==void 0&&t.cache.dict_def.includes(e)||t.cache.tags!==void 0&&t.cache.tags.some(n=>n==e)}function z(){const t=localStorage.getItem("words");if(!t)return!1;const e="data:text/json;charset=utf-8,"+encodeURIComponent(t);let n=document.createElement("a");return n.setAttribute("href",e),n.setAttribute("download","vocab"+I()+".json"),document.body.appendChild(n),n.click(),n.remove(),!0}export{$ as A,f as S,R as a,Y as b,D as c,z as d,u as e,W as f,q as g,V as h,B as i,U as j,F as k,O as l,M as m,l as n,J as r,T as s,P as t,h as w};
