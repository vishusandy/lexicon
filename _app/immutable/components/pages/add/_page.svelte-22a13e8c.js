import{S as ye,i as Ee,s as ke,I as Te,J as Ae,k as b,q as B,a as q,w as ae,l as w,m as E,r as C,h,c as M,x as re,n as i,K as Ve,b as X,G as l,L as ge,y as ie,M as P,N as Le,O as ze,f as Q,g as We,t as ee,d as Be,z as le,P as Ce,u as Ie,A as Ne,B as Pe}from"../../../chunks/index-a0aa925d.js";import{T as qe,D as Me,e as Se}from"../../../chunks/DictDef-0a3b0142.js";import{l as He,A as be,a as Fe,b as Oe,c as Re,m as Ue,t as Ge,w as Je}from"../../../chunks/words-707bcc89.js";function we(a){let e,t;return e=new Me({props:{dict:a[5]}}),{c(){ae(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,c){ie(e,s,c),t=!0},p(s,c){const d={};c&32&&(d.dict=s[5]),e.$set(d)},i(s){t||(Q(e.$$.fragment,s),t=!0)},o(s){ee(e.$$.fragment,s),t=!1},d(s){le(e,s)}}}function Ke(a){let e,t,s,c=a[4].word+"",d,v,o;return{c(){e=b("div"),t=B("Added word "),s=b("a"),d=B(c),this.h()},l(p){e=w(p,"DIV",{id:!0,class:!0});var n=E(e);t=C(n,"Added word "),s=w(n,"A",{href:!0});var _=E(s);d=C(_,c),_.forEach(h),n.forEach(h),this.h()},h(){i(s,"href",v="../list?word="+a[4].id),i(e,"id",o=a[0]+"-added-alert"),i(e,"class","added-alert alert alert-success svelte-d3husz")},m(p,n){X(p,e,n),l(e,t),l(e,s),l(s,d)},p(p,n){n&16&&c!==(c=p[4].word+"")&&Ie(d,c),n&16&&v!==(v="../list?word="+p[4].id)&&i(s,"href",v),n&1&&o!==(o=p[0]+"-added-alert")&&i(e,"id",o)},d(p){p&&h(e)}}}function je(a){let e,t,s,c,d,v=a[1].trim()+"",o,p,n;return{c(){e=b("div"),t=b("p"),s=B("Word "),c=b("a"),d=b("dfn"),o=B(v),n=B(" exists"),this.h()},l(_){e=w(_,"DIV",{class:!0});var r=E(e);t=w(r,"P",{class:!0});var k=E(t);s=C(k,"Word "),c=w(k,"A",{href:!0});var V=E(c);d=w(V,"DFN",{class:!0});var g=E(d);o=C(g,v),g.forEach(h),V.forEach(h),n=C(k," exists"),k.forEach(h),r.forEach(h),this.h()},h(){i(d,"class","word"),i(c,"href",p="../list/?word="+a[6].id),i(t,"class","svelte-d3husz"),i(e,"class","duplicate-alert alert alert-danger svelte-d3husz")},m(_,r){X(_,e,r),l(e,t),l(t,s),l(t,c),l(c,d),l(d,o),l(t,n)},p(_,r){r&2&&v!==(v=_[1].trim()+"")&&Ie(o,v),r&64&&p!==(p="../list/?word="+_[6].id)&&i(c,"href",p)},d(_){_&&h(e)}}}function Qe(a){let e,t,s,c,d,v,o,p,n,_,r,k,V,g,S,Y,L,G,J,O,R,z,Z,$,K,N,x,W,H,y,f,I,A,F,se,oe;function De(u){a[14](u)}let ne={key:a[0]};a[3]!==void 0&&(ne.tags=a[3]),z=new qe({props:ne}),Te.push(()=>Ae(z,"tags",De,a[3]));let D=a[5]&&we(a);function fe(u,m){if(u[6])return je;if(u[4])return Ke}let j=fe(a),T=j&&j(a);return{c(){e=b("form"),t=b("div"),s=b("label"),c=B("Word"),v=q(),o=b("input"),n=q(),_=b("div"),r=b("div"),k=B("Notes"),V=q(),g=b("div"),Y=q(),L=b("div"),G=B("Tags"),J=q(),O=b("div"),R=b("div"),ae(z.$$.fragment),$=q(),D&&D.c(),K=q(),N=b("div"),T&&T.c(),x=q(),W=b("div"),H=b("button"),y=B("Add Word "),f=b("br"),this.h()},l(u){e=w(u,"FORM",{id:!0,class:!0});var m=E(e);t=w(m,"DIV",{class:!0});var U=E(t);s=w(U,"LABEL",{for:!0,class:!0});var ue=E(s);c=C(ue,"Word"),ue.forEach(h),v=M(U),o=w(U,"INPUT",{id:!0,type:!0,class:!0}),U.forEach(h),n=M(m),_=w(m,"DIV",{class:!0});var te=E(_);r=w(te,"DIV",{class:!0});var ce=E(r);k=C(ce,"Notes"),ce.forEach(h),V=M(te),g=w(te,"DIV",{contenteditable:!0,id:!0,class:!0}),E(g).forEach(h),te.forEach(h),Y=M(m),L=w(m,"DIV",{class:!0});var _e=E(L);G=C(_e,"Tags"),_e.forEach(h),J=M(m),O=w(m,"DIV",{class:!0});var me=E(O);R=w(me,"DIV",{class:!0});var ve=E(R);re(z.$$.fragment,ve),ve.forEach(h),me.forEach(h),$=M(m),D&&D.l(m),K=M(m),N=w(m,"DIV",{class:!0});var he=E(N);T&&T.l(he),he.forEach(h),x=M(m),W=w(m,"DIV",{id:!0,class:!0});var de=E(W);H=w(de,"BUTTON",{type:!0,class:!0});var pe=E(H);y=C(pe,"Add Word "),pe.forEach(h),f=w(de,"BR",{}),de.forEach(h),m.forEach(h),this.h()},h(){i(s,"for",d=a[0]+"-add-input"),i(s,"class","form-label"),i(o,"id",p=a[0]+"-add-input"),o.required=!0,i(o,"type","text"),i(o,"class","word empty form-control svelte-d3husz"),i(t,"class","mb-3"),i(r,"class","label form-label svelte-d3husz"),i(g,"contenteditable","true"),i(g,"id",S=a[0]+"-add-def"),i(g,"class","def form-control svelte-d3husz"),a[2]===void 0&&Ve(()=>a[13].call(g)),i(_,"class","mb-3"),i(L,"class","label svelte-d3husz"),i(R,"class","tag-list svelte-d3husz"),i(O,"class","tag-container svelte-d3husz"),i(N,"class","alert-box svelte-d3husz"),i(H,"type","submit"),i(H,"class","add btn btn-primary svelte-d3husz"),i(W,"id",I=a[0]+"-add-container"),i(W,"class","add-container svelte-d3husz"),i(e,"id",A=a[0]+"-add-form"),i(e,"class","mt-4")},m(u,m){X(u,e,m),l(e,t),l(t,s),l(s,c),l(t,v),l(t,o),ge(o,a[1]),l(e,n),l(e,_),l(_,r),l(r,k),l(_,V),l(_,g),a[2]!==void 0&&(g.innerHTML=a[2]),l(e,Y),l(e,L),l(L,G),l(e,J),l(e,O),l(O,R),ie(z,R,null),l(e,$),D&&D.m(e,null),l(e,K),l(e,N),T&&T.m(N,null),l(e,x),l(e,W),l(W,H),l(H,y),l(W,f),F=!0,se||(oe=[P(o,"input",a[12]),P(o,"input",a[7]),P(o,"focusout",a[8]),P(r,"keydown",a[9]),P(r,"click",a[9]),P(g,"keydown",Se),P(g,"input",a[13]),P(L,"keydown",a[10]),P(L,"click",a[10]),P(e,"submit",Le(a[11]))],se=!0)},p(u,[m]){(!F||m&1&&d!==(d=u[0]+"-add-input"))&&i(s,"for",d),(!F||m&1&&p!==(p=u[0]+"-add-input"))&&i(o,"id",p),m&2&&o.value!==u[1]&&ge(o,u[1]),(!F||m&1&&S!==(S=u[0]+"-add-def"))&&i(g,"id",S),m&4&&u[2]!==g.innerHTML&&(g.innerHTML=u[2]);const U={};m&1&&(U.key=u[0]),!Z&&m&8&&(Z=!0,U.tags=u[3],ze(()=>Z=!1)),z.$set(U),u[5]?D?(D.p(u,m),m&32&&Q(D,1)):(D=we(u),D.c(),Q(D,1),D.m(e,K)):D&&(We(),ee(D,1,1,()=>{D=null}),Be()),j===(j=fe(u))&&T?T.p(u,m):(T&&T.d(1),T=j&&j(u),T&&(T.c(),T.m(N,null))),(!F||m&1&&I!==(I=u[0]+"-add-container"))&&i(W,"id",I),(!F||m&1&&A!==(A=u[0]+"-add-form"))&&i(e,"id",A)},i(u){F||(Q(z.$$.fragment,u),Q(D),F=!0)},o(u){ee(z.$$.fragment,u),ee(D),F=!1},d(u){u&&h(e),le(z),D&&D.d(),T&&T.d(),se=!1,Ce(oe)}}}let Xe=!1;const Ye=300;function Ze(a,e,t){let{key:s}=e,c=He(s),d="",v="",o=[],p,n,_="",r,k,V,g;function S(){L(),Y()}function Y(){g&&(clearTimeout(g),g=void 0),g=setTimeout(()=>J(),Ye)}function L(){let y=d.trim().toLocaleLowerCase();t(6,r=c.words.find(I=>{var A;return((A=I.cache)==null?void 0:A.word)===y}));const f=document.getElementById(s+"-add-form");if(f){const I=f.querySelector("input.word"),A=f.querySelector("button.add");I&&(I.setCustomValidity(r?"Duplicate word":""),d?I.classList.remove("empty"):I.classList.add("empty")),A&&(r?(A.setCustomValidity("Duplicate word"),A.disabled=!0):(A.setCustomValidity(""),A.disabled=!1))}}function G(){return L(),r?(t(1,d=d.trim()),t(2,v=v.trim()),!0):!1}function J(){d!=""&&d!=_&&be.free_dict.lookup(d).then(y=>{y?(_=d,t(5,n=y)):(t(5,n=void 0),_="")})}function O(){G(),J()}function R(){const y=Ue(v),f=o.length===0?void 0:o.map(A=>A.trim());let I={id:0,word:Ge(d.trim()),favorite:Xe,def:y,dict_def:void 0,tags:f,cache:void 0};return Je(I),I}function z(y){const f=document.getElementById(s+"-add-def");f&&f.focus()}function Z(y){const f=document.getElementById(s+"-tags");f&&f.focus()}async function $(y){k&&(clearTimeout(k),k=void 0),V&&(clearTimeout(V),V=void 0),t(4,p=y),await Ne(),k=setTimeout(()=>{const f=document.getElementById(s+"-added-alert");f&&(f.style.opacity="0")},8e3),V=setTimeout(()=>{const f=document.getElementById(s+"-added-alert");f&&f.remove(),t(4,p=void 0)},12e3)}function K(y){if(G())return!1;let f=R();$(f),!n||d!=_?be.free_dict.lookup(f.word).then(I=>{f.dict_def=I||void 0,console.log("Added dictionary def: %o",f.dict_def)}).finally(()=>{N(f)}):(f.dict_def=n,N(f))}function N(y){var I;Fe(c,y),Oe(c),Re(c);const f=(I=document.getElementById(s+"-add-form"))==null?void 0:I.querySelector("input.word");f&&f.classList.add("empty"),t(3,o=[]),t(1,d=""),t(2,v=""),t(6,r=void 0),t(5,n=void 0),_=""}function x(){d=this.value,t(1,d)}function W(){v=this.innerHTML,t(2,v)}function H(y){o=y,t(3,o)}return a.$$set=y=>{"key"in y&&t(0,s=y.key)},[s,d,v,o,p,n,r,S,O,z,Z,K,x,W,H]}class $e extends ye{constructor(e){super(),Ee(this,e,Ze,Qe,ke,{key:0})}}function xe(a){let e,t,s,c,d,v,o,p,n,_;return n=new $e({props:{key:"words"}}),{c(){e=b("nav"),t=b("a"),s=B("List words"),c=q(),d=b("div"),v=b("h1"),o=B("Add Word"),p=q(),ae(n.$$.fragment),this.h()},l(r){e=w(r,"NAV",{class:!0});var k=E(e);t=w(k,"A",{href:!0});var V=E(t);s=C(V,"List words"),V.forEach(h),k.forEach(h),c=M(r),d=w(r,"DIV",{class:!0});var g=E(d);v=w(g,"H1",{});var S=E(v);o=C(S,"Add Word"),S.forEach(h),p=M(g),re(n.$$.fragment,g),g.forEach(h),this.h()},h(){i(t,"href","../list/"),i(e,"class","main"),i(d,"class","add-vocab")},m(r,k){X(r,e,k),l(e,t),l(t,s),X(r,c,k),X(r,d,k),l(d,v),l(v,o),l(d,p),ie(n,d,null),_=!0},p:Pe,i(r){_||(Q(n.$$.fragment,r),_=!0)},o(r){ee(n.$$.fragment,r),_=!1},d(r){r&&h(e),r&&h(c),r&&h(d),le(n)}}}class dt extends ye{constructor(e){super(),Ee(this,e,null,xe,ke,{})}}export{dt as default};
