import{S as Ne,i as Pe,s as Se,J as $e,K as Fe,k as g,q,a as S,w as ie,l as b,m as w,r as W,h as v,c as C,x as oe,n as l,b as se,G as d,L as le,y as ne,M as L,N as Oe,O as Re,f as z,g as Me,t as Q,d as Ue,z as ue,P as je,u as Ce,A as ze,B as Ge}from"../../../chunks/index-e56e8534.js";import{N as He}from"../../../chunks/Nav-6346eff5.js";import{b as fe}from"../../../chunks/paths-b4419565.js";import{T as Je,D as Ke}from"../../../chunks/DictDef-8a4adf15.js";import{l as Xe,a as Qe,A as We,b as Ye,c as Ze,d as xe,m as et,t as tt,w as st}from"../../../chunks/words-d2f0d323.js";function Be(i){let e,a;return e=new Ke({props:{dict:i[5],scheme:"dark"}}),{c(){ie(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,n){ne(e,s,n),a=!0},p(s,n){const r={};n&32&&(r.dict=s[5]),e.$set(r)},i(s){a||(z(e.$$.fragment,s),a=!0)},o(s){Q(e.$$.fragment,s),a=!1},d(s){ue(e,s)}}}function at(i){let e,a,s,n=i[4].word+"",r,h,_;return{c(){e=g("div"),a=q("Added word "),s=g("a"),r=q(n),this.h()},l(p){e=b(p,"DIV",{id:!0,class:!0});var t=w(e);a=W(t,"Added word "),s=b(t,"A",{href:!0});var f=w(s);r=W(f,n),f.forEach(v),t.forEach(v),this.h()},h(){l(s,"href",h=fe+"/list?word="+i[4].id),l(e,"id",_=i[0]+"-added-alert"),l(e,"class","added-alert alert alert-success svelte-150ds77")},m(p,t){se(p,e,t),d(e,a),d(e,s),d(s,r)},p(p,t){t&16&&n!==(n=p[4].word+"")&&Ce(r,n),t&16&&h!==(h=fe+"/list?word="+p[4].id)&&l(s,"href",h),t&1&&_!==(_=p[0]+"-added-alert")&&l(e,"id",_)},d(p){p&&v(e)}}}function dt(i){let e,a,s,n,r,h=i[1].trim()+"",_,p,t;return{c(){e=g("div"),a=g("p"),s=q("Word "),n=g("a"),r=g("dfn"),_=q(h),t=q(" exists"),this.h()},l(f){e=b(f,"DIV",{class:!0});var E=w(e);a=b(E,"P",{class:!0});var k=w(a);s=W(k,"Word "),n=b(k,"A",{href:!0});var I=w(n);r=b(I,"DFN",{class:!0});var B=w(r);_=W(B,h),B.forEach(v),I.forEach(v),t=W(k," exists"),k.forEach(v),E.forEach(v),this.h()},h(){l(r,"class","word"),l(n,"href",p=fe+"/list?word="+i[6].id),l(a,"class","svelte-150ds77"),l(e,"class","duplicate-alert alert alert-danger svelte-150ds77")},m(f,E){se(f,e,E),d(e,a),d(a,s),d(a,n),d(n,r),d(r,_),d(a,t)},p(f,E){E&2&&h!==(h=f[1].trim()+"")&&Ce(_,h),E&64&&p!==(p=fe+"/list?word="+f[6].id)&&l(n,"href",p)},d(f){f&&v(e)}}}function rt(i){let e,a,s,n,r,h,_,p,t,f,E,k,I,B,Y,V,U,G,N,Z,x,O,R,P,ee,H,J,$,te,m,o,D,T,ae,ce,j,K,_e,me,de,F,ve,be;function Le(c){i[14](c)}let we={key:i[0]};i[3]!==void 0&&(we.tags=i[3]),P=new Je({props:we}),$e.push(()=>Fe(P,"tags",Le,i[3]));let y=i[5]&&Be(i);function Ee(c,u){if(c[6])return dt;if(c[4])return at}let X=Ee(i),A=X&&X(i);return{c(){e=g("form"),a=g("div"),s=g("label"),n=q("Word"),r=g("span"),h=q("*"),p=S(),t=g("input"),E=S(),k=g("div"),I=g("div"),B=q("Notes"),Y=S(),V=g("textarea"),G=S(),N=g("div"),Z=q("Tags"),x=S(),O=g("div"),R=g("div"),ie(P.$$.fragment),H=S(),y&&y.c(),J=S(),$=g("div"),A&&A.c(),te=S(),m=g("div"),o=g("button"),D=q("Add Word "),T=g("br"),ce=S(),j=g("div"),K=g("span"),_e=q("*"),me=q(" denotes a required field"),this.h()},l(c){e=b(c,"FORM",{id:!0,class:!0});var u=w(e);a=b(u,"DIV",{class:!0});var M=w(a);s=b(M,"LABEL",{for:!0,class:!0,title:!0});var pe=w(s);n=W(pe,"Word"),r=b(pe,"SPAN",{class:!0});var ye=w(r);h=W(ye,"*"),ye.forEach(v),pe.forEach(v),p=C(M),t=b(M,"INPUT",{id:!0,type:!0,class:!0}),M.forEach(v),E=C(u),k=b(u,"DIV",{class:!0});var re=w(k);I=b(re,"DIV",{class:!0});var ke=w(I);B=W(ke,"Notes"),ke.forEach(v),Y=C(re),V=b(re,"TEXTAREA",{id:!0,class:!0}),w(V).forEach(v),re.forEach(v),G=C(u),N=b(u,"DIV",{class:!0});var De=w(N);Z=W(De,"Tags"),De.forEach(v),x=C(u),O=b(u,"DIV",{class:!0});var Ie=w(O);R=b(Ie,"DIV",{class:!0});var Ae=w(R);oe(P.$$.fragment,Ae),Ae.forEach(v),Ie.forEach(v),H=C(u),y&&y.l(u),J=C(u),$=b(u,"DIV",{class:!0});var Te=w($);A&&A.l(Te),Te.forEach(v),te=C(u),m=b(u,"DIV",{id:!0,class:!0});var he=w(m);o=b(he,"BUTTON",{type:!0,class:!0});var Ve=w(o);D=W(Ve,"Add Word "),Ve.forEach(v),T=b(he,"BR",{}),he.forEach(v),ce=C(u),j=b(u,"DIV",{class:!0});var ge=w(j);K=b(ge,"SPAN",{class:!0});var qe=w(K);_e=W(qe,"*"),qe.forEach(v),me=W(ge," denotes a required field"),ge.forEach(v),u.forEach(v),this.h()},h(){l(r,"class","required svelte-150ds77"),l(s,"for",_=i[0]+"-add-input"),l(s,"class","form-label"),l(s,"title","required"),l(t,"id",f=i[0]+"-add-input"),t.required=!0,l(t,"type","text"),l(t,"class","word form-control svelte-150ds77"),t.autofocus=!0,l(a,"class","mb-3"),l(I,"class","label form-label svelte-150ds77"),l(V,"id",U=i[0]+"-add-input"),l(V,"class","def form-control svelte-150ds77"),l(k,"class","mb-3"),l(N,"class","label svelte-150ds77"),l(R,"class","tag-list svelte-150ds77"),l(O,"class","tag-container svelte-150ds77"),l($,"class","alert-box svelte-150ds77"),l(o,"type","submit"),l(o,"class","add btn btn-primary svelte-150ds77"),l(m,"id",ae=i[0]+"-add-container"),l(m,"class","add-container svelte-150ds77"),l(K,"class","required svelte-150ds77"),l(j,"class","required-description svelte-150ds77"),l(e,"id",de=i[0]+"-add-form"),l(e,"class","add-form-container mt-4 svelte-150ds77")},m(c,u){se(c,e,u),d(e,a),d(a,s),d(s,n),d(s,r),d(r,h),d(a,p),d(a,t),le(t,i[1]),d(e,E),d(e,k),d(k,I),d(I,B),d(k,Y),d(k,V),le(V,i[2]),d(e,G),d(e,N),d(N,Z),d(e,x),d(e,O),d(O,R),ne(P,R,null),d(e,H),y&&y.m(e,null),d(e,J),d(e,$),A&&A.m($,null),d(e,te),d(e,m),d(m,o),d(o,D),d(m,T),d(e,ce),d(e,j),d(j,K),d(K,_e),d(j,me),F=!0,t.focus(),ve||(be=[L(t,"input",i[12]),L(t,"input",i[7]),L(t,"focusout",i[8]),L(I,"keydown",i[9]),L(I,"click",i[9]),L(V,"input",i[13]),L(V,"input",Qe),L(N,"keydown",i[10]),L(N,"click",i[10]),L(e,"submit",Oe(i[11]))],ve=!0)},p(c,[u]){(!F||u&1&&_!==(_=c[0]+"-add-input"))&&l(s,"for",_),(!F||u&1&&f!==(f=c[0]+"-add-input"))&&l(t,"id",f),u&2&&t.value!==c[1]&&le(t,c[1]),(!F||u&1&&U!==(U=c[0]+"-add-input"))&&l(V,"id",U),u&4&&le(V,c[2]);const M={};u&1&&(M.key=c[0]),!ee&&u&8&&(ee=!0,M.tags=c[3],Re(()=>ee=!1)),P.$set(M),c[5]?y?(y.p(c,u),u&32&&z(y,1)):(y=Be(c),y.c(),z(y,1),y.m(e,J)):y&&(Me(),Q(y,1,1,()=>{y=null}),Ue()),X===(X=Ee(c))&&A?A.p(c,u):(A&&A.d(1),A=X&&X(c),A&&(A.c(),A.m($,null))),(!F||u&1&&ae!==(ae=c[0]+"-add-container"))&&l(m,"id",ae),(!F||u&1&&de!==(de=c[0]+"-add-form"))&&l(e,"id",de)},i(c){F||(z(P.$$.fragment,c),z(y),F=!0)},o(c){Q(P.$$.fragment,c),Q(y),F=!1},d(c){c&&v(e),ue(P),y&&y.d(),A&&A.d(),ve=!1,je(be)}}}let lt=!1;const it=300;function ot(i,e,a){let{key:s}=e,n=Xe(s),r="",h="",_=[],p,t,f="",E,k,I,B;function Y(){U(),V()}function V(){B&&(clearTimeout(B),B=void 0),B=setTimeout(()=>N(),it)}function U(){let m=r.trim().toLowerCase();a(6,E=n.words.find(D=>{var T;return((T=D.cache)==null?void 0:T.word)===m}));const o=document.getElementById(s+"-add-form");if(o){const D=o.querySelector("input.word"),T=o.querySelector("button.add");D&&D.setCustomValidity(E?"Duplicate word":""),T&&(E?(T.setCustomValidity("Duplicate word"),T.disabled=!0):(T.setCustomValidity(""),T.disabled=!1))}}function G(){return U(),E?(a(1,r=r.trim()),a(2,h=h.trim()),!0):!1}function N(){r!=""&&r!=f&&We.default.lookup(r).then(m=>{m&&r!==""?(f=r,a(5,t=m)):(a(5,t=void 0),f="")})}function Z(){G(),N()}function x(){const m=et(h),o=_.length===0?void 0:_.map(T=>T.trim());let D={id:0,word:tt(r.trim()),favorite:lt,def:m,dict_def:void 0,tags:o,cache:void 0};return st(D),D}function O(m){const o=document.getElementById(s+"-add-def");o&&o.focus()}function R(m){const o=document.getElementById(s+"-tags");o&&o.focus()}async function P(m){k&&(clearTimeout(k),k=void 0),I&&(clearTimeout(I),I=void 0),a(4,p=m),await ze(),k=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&(o.style.opacity="0")},8e3),I=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&o.remove(),a(4,p=void 0)},12e3)}function ee(m){if(G())return!1;let o=x();P(o),!t||r!=f?We.default.lookup(o.word).then(D=>{o.dict_def=D||void 0}).finally(()=>{H(o)}):(o.dict_def=t,H(o))}function H(m){var D;Ye(n,m),Ze(n),xe(n);const o=(D=document.getElementById(s+"-add-form"))==null?void 0:D.querySelector("input.word");o&&o.classList.add("empty"),a(3,_=[]),a(1,r=""),a(2,h=""),a(6,E=void 0),a(5,t=void 0),f=""}function J(){r=this.value,a(1,r)}function $(){h=this.value,a(2,h)}function te(m){_=m,a(3,_)}return i.$$set=m=>{"key"in m&&a(0,s=m.key)},[s,r,h,_,p,t,E,Y,Z,O,R,ee,J,$,te]}class nt extends Ne{constructor(e){super(),Pe(this,e,ot,rt,Se,{key:0})}}function ut(i){let e,a,s,n,r,h,_,p;return e=new He({props:{current:"add"}}),_=new nt({props:{key:"words"}}),{c(){ie(e.$$.fragment),a=S(),s=g("div"),n=g("h1"),r=q("Add Word"),h=S(),ie(_.$$.fragment),this.h()},l(t){oe(e.$$.fragment,t),a=C(t),s=b(t,"DIV",{class:!0});var f=w(s);n=b(f,"H1",{});var E=w(n);r=W(E,"Add Word"),E.forEach(v),h=C(f),oe(_.$$.fragment,f),f.forEach(v),this.h()},h(){l(s,"class","add-vocab")},m(t,f){ne(e,t,f),se(t,a,f),se(t,s,f),d(s,n),d(n,r),d(s,h),ne(_,s,null),p=!0},p:Ge,i(t){p||(z(e.$$.fragment,t),z(_.$$.fragment,t),p=!0)},o(t){Q(e.$$.fragment,t),Q(_.$$.fragment,t),p=!1},d(t){ue(e,t),t&&v(a),t&&v(s),ue(_)}}}class pt extends Ne{constructor(e){super(),Pe(this,e,null,ut,Se,{})}}export{pt as default};
