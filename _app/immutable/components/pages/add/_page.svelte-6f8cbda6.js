import{S as Ne,i as Se,s as Le,J as Fe,K as $e,k as g,q as V,a as N,w as oe,l as b,m as k,r as q,h as v,c as S,x as ne,n as r,b as ae,G as d,L as ie,y as ue,M as C,N as Oe,O as Re,f as G,g as Me,t as Y,d as Ue,z as fe,P as je,u as Pe,A as Ge,B as He}from"../../../chunks/index-e56e8534.js";import{N as Je}from"../../../chunks/Nav-34f01931.js";import{b as ce}from"../../../chunks/paths-b4419565.js";import{T as Ke,D as Xe}from"../../../chunks/DictDef-50549400.js";import{l as Qe,a as Ye,A as We,b as Ze,c as xe,d as et,m as tt,t as st,w as at}from"../../../chunks/words-6d2fe7f5.js";function Be(l){let e,a;return e=new Xe({props:{dict:l[5],scheme:"dark"}}),{c(){oe(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,n){ue(e,s,n),a=!0},p(s,n){const i={};n&32&&(i.dict=s[5]),e.$set(i)},i(s){a||(G(e.$$.fragment,s),a=!0)},o(s){Y(e.$$.fragment,s),a=!1},d(s){fe(e,s)}}}function dt(l){let e,a,s,n=l[4].word+"",i,h,c;return{c(){e=g("div"),a=V("Added word "),s=g("a"),i=V(n),this.h()},l(p){e=b(p,"DIV",{id:!0,class:!0});var t=k(e);a=q(t,"Added word "),s=b(t,"A",{href:!0});var _=k(s);i=q(_,n),_.forEach(v),t.forEach(v),this.h()},h(){r(s,"href",h=ce+"/list?word="+l[4].id),r(e,"id",c=l[0]+"-added-alert"),r(e,"class","added-alert alert alert-success svelte-kez7d6")},m(p,t){ae(p,e,t),d(e,a),d(e,s),d(s,i)},p(p,t){t&16&&n!==(n=p[4].word+"")&&Pe(i,n),t&16&&h!==(h=ce+"/list?word="+p[4].id)&&r(s,"href",h),t&1&&c!==(c=p[0]+"-added-alert")&&r(e,"id",c)},d(p){p&&v(e)}}}function rt(l){let e,a,s,n,i,h=l[1].trim()+"",c,p,t;return{c(){e=g("div"),a=g("p"),s=V("Word "),n=g("a"),i=g("dfn"),c=V(h),t=V(" exists"),this.h()},l(_){e=b(_,"DIV",{class:!0});var w=k(e);a=b(w,"P",{class:!0});var y=k(a);s=q(y,"Word "),n=b(y,"A",{href:!0});var A=k(n);i=b(A,"DFN",{class:!0});var B=k(i);c=q(B,h),B.forEach(v),A.forEach(v),t=q(y," exists"),y.forEach(v),w.forEach(v),this.h()},h(){r(i,"class","word"),r(n,"href",p=ce+"/list?word="+l[6].id),r(a,"class","svelte-kez7d6"),r(e,"class","duplicate-alert alert alert-danger svelte-kez7d6")},m(_,w){ae(_,e,w),d(e,a),d(a,s),d(a,n),d(n,i),d(i,c),d(a,t)},p(_,w){w&2&&h!==(h=_[1].trim()+"")&&Pe(c,h),w&64&&p!==(p=ce+"/list?word="+_[6].id)&&r(n,"href",p)},d(_){_&&v(e)}}}function lt(l){let e,a,s,n,i,h,c,p,t,_,w,y,A,B,H,Z,T,M,J,L,x,ee,$,O,W,te,U,K,F,se,m,o,D,z,de,_e,j,X,me,ve,re,P,pe,ke;function Ce(f){l[15](f)}let we={key:l[0]};l[3]!==void 0&&(we.tags=l[3]),W=new Ke({props:we}),Fe.push(()=>$e(W,"tags",Ce,l[3])),W.$on("updateTags",l[8]);let E=l[5]&&Be(l);function Ee(f,u){if(f[6])return rt;if(f[4])return dt}let Q=Ee(l),I=Q&&Q(l);return{c(){e=g("form"),a=g("div"),s=g("label"),n=V("Word"),i=g("span"),h=V("*"),p=N(),t=g("input"),w=N(),y=g("div"),A=g("label"),B=V("Notes"),Z=N(),T=g("textarea"),J=N(),L=g("div"),x=V("Tags"),ee=N(),$=g("div"),O=g("div"),oe(W.$$.fragment),U=N(),E&&E.c(),K=N(),F=g("div"),I&&I.c(),se=N(),m=g("div"),o=g("button"),D=V("Add Word "),z=g("br"),_e=N(),j=g("div"),X=g("span"),me=V("*"),ve=V(" required field"),this.h()},l(f){e=b(f,"FORM",{id:!0,class:!0});var u=k(e);a=b(u,"DIV",{class:!0});var R=k(a);s=b(R,"LABEL",{for:!0,class:!0,title:!0});var he=k(s);n=q(he,"Word"),i=b(he,"SPAN",{class:!0});var ye=k(i);h=q(ye,"*"),ye.forEach(v),he.forEach(v),p=S(R),t=b(R,"INPUT",{id:!0,type:!0,class:!0}),R.forEach(v),w=S(u),y=b(u,"DIV",{class:!0});var le=k(y);A=b(le,"LABEL",{class:!0,for:!0});var Ae=k(A);B=q(Ae,"Notes"),Ae.forEach(v),Z=S(le),T=b(le,"TEXTAREA",{id:!0,class:!0}),k(T).forEach(v),le.forEach(v),J=S(u),L=b(u,"DIV",{class:!0});var De=k(L);x=q(De,"Tags"),De.forEach(v),ee=S(u),$=b(u,"DIV",{class:!0});var Ie=k($);O=b(Ie,"DIV",{class:!0});var Te=k(O);ne(W.$$.fragment,Te),Te.forEach(v),Ie.forEach(v),U=S(u),E&&E.l(u),K=S(u),F=b(u,"DIV",{class:!0});var ze=k(F);I&&I.l(ze),ze.forEach(v),se=S(u),m=b(u,"DIV",{id:!0,class:!0});var ge=k(m);o=b(ge,"BUTTON",{type:!0,class:!0});var Ve=k(o);D=q(Ve,"Add Word "),Ve.forEach(v),z=b(ge,"BR",{}),ge.forEach(v),_e=S(u),j=b(u,"DIV",{class:!0});var be=k(j);X=b(be,"SPAN",{class:!0});var qe=k(X);me=q(qe,"*"),qe.forEach(v),ve=q(be," required field"),be.forEach(v),u.forEach(v),this.h()},h(){r(i,"class","required svelte-kez7d6"),r(s,"for",c=l[0]+"-add-input"),r(s,"class","form-label svelte-kez7d6"),r(s,"title","required"),r(t,"id",_=l[0]+"-add-input"),t.required=!0,r(t,"type","text"),r(t,"class","word form-control svelte-kez7d6"),t.autofocus=!0,r(a,"class","mb-3 word-group svelte-kez7d6"),r(A,"class","label form-label svelte-kez7d6"),r(A,"for",H=l[0]+"-add-input"),r(T,"id",M=l[0]+"-add-input"),r(T,"class","def form-control svelte-kez7d6"),r(y,"class","mb-3 note-group svelte-kez7d6"),r(L,"class","label svelte-kez7d6"),r(O,"class","tag-list svelte-kez7d6"),r($,"class","tag-container svelte-kez7d6"),r(F,"class","alert-box svelte-kez7d6"),r(o,"type","submit"),r(o,"class","add btn btn-primary svelte-kez7d6"),r(m,"id",de=l[0]+"-add-container"),r(m,"class","add-container svelte-kez7d6"),r(X,"class","required svelte-kez7d6"),r(j,"class","required-description svelte-kez7d6"),r(e,"id",re=l[0]+"-add-form"),r(e,"class","add-form-container mt-4")},m(f,u){ae(f,e,u),d(e,a),d(a,s),d(s,n),d(s,i),d(i,h),d(a,p),d(a,t),ie(t,l[1]),d(e,w),d(e,y),d(y,A),d(A,B),d(y,Z),d(y,T),ie(T,l[2]),d(e,J),d(e,L),d(L,x),d(e,ee),d(e,$),d($,O),ue(W,O,null),d(e,U),E&&E.m(e,null),d(e,K),d(e,F),I&&I.m(F,null),d(e,se),d(e,m),d(m,o),d(o,D),d(m,z),d(e,_e),d(e,j),d(j,X),d(X,me),d(j,ve),P=!0,t.focus(),pe||(ke=[C(t,"input",l[13]),C(t,"input",l[7]),C(t,"focusout",l[9]),C(A,"keydown",l[10]),C(A,"click",l[10]),C(T,"input",l[14]),C(T,"input",Ye),C(L,"keydown",l[11]),C(L,"click",l[11]),C(e,"submit",Oe(l[12]))],pe=!0)},p(f,[u]){(!P||u&1&&c!==(c=f[0]+"-add-input"))&&r(s,"for",c),(!P||u&1&&_!==(_=f[0]+"-add-input"))&&r(t,"id",_),u&2&&t.value!==f[1]&&ie(t,f[1]),(!P||u&1&&H!==(H=f[0]+"-add-input"))&&r(A,"for",H),(!P||u&1&&M!==(M=f[0]+"-add-input"))&&r(T,"id",M),u&4&&ie(T,f[2]);const R={};u&1&&(R.key=f[0]),!te&&u&8&&(te=!0,R.tags=f[3],Re(()=>te=!1)),W.$set(R),f[5]?E?(E.p(f,u),u&32&&G(E,1)):(E=Be(f),E.c(),G(E,1),E.m(e,K)):E&&(Me(),Y(E,1,1,()=>{E=null}),Ue()),Q===(Q=Ee(f))&&I?I.p(f,u):(I&&I.d(1),I=Q&&Q(f),I&&(I.c(),I.m(F,null))),(!P||u&1&&de!==(de=f[0]+"-add-container"))&&r(m,"id",de),(!P||u&1&&re!==(re=f[0]+"-add-form"))&&r(e,"id",re)},i(f){P||(G(W.$$.fragment,f),G(E),P=!0)},o(f){Y(W.$$.fragment,f),Y(E),P=!1},d(f){f&&v(e),fe(W),E&&E.d(),I&&I.d(),pe=!1,je(ke)}}}let it=!1;const ot=300;function nt(l,e,a){let{key:s}=e,n=Qe(s),i="",h="",c=[],p,t,_="",w,y,A,B;function H(){T(),Z()}function Z(){B&&(clearTimeout(B),B=void 0),B=setTimeout(()=>J(),ot)}function T(){let m=i.trim().toLowerCase();a(6,w=n.words.find(D=>{var z;return((z=D.cache)==null?void 0:z.word)===m}));const o=document.getElementById(s+"-add-form");if(o){const D=o.querySelector("input.word"),z=o.querySelector("button.add");D&&D.setCustomValidity(w?"Duplicate word":""),z&&(w?(z.setCustomValidity("Duplicate word"),z.disabled=!0):(z.setCustomValidity(""),z.disabled=!1))}}function M(){return T(),w?(a(1,i=i.trim()),a(2,h=h.trim()),!0):!1}function J(){n.auto_defs===!0&&i!=""&&i!=_&&We.default.lookup(i).then(m=>{m&&i!==""?(_=i,a(5,t=m)):(a(5,t=void 0),_="")})}function L(){a(3,c=[...new Set(c)])}function x(){M(),J()}function ee(){const m=tt(h),o=c.length===0?void 0:c.map(z=>z.trim());let D={id:0,word:st(i.trim()),favorite:it,def:m,dict_def:void 0,tags:o,cache:void 0};return at(D),D}function $(m){const o=document.getElementById(s+"-add-def");o&&o.focus()}function O(m){const o=document.getElementById(s+"-tags");o&&o.focus()}async function W(m){y&&(clearTimeout(y),y=void 0),A&&(clearTimeout(A),A=void 0),a(4,p=m),await Ge(),y=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&(o.style.opacity="0")},8e3),A=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&o.remove(),a(4,p=void 0)},12e3)}function te(m){if(M())return!1;let o=ee();if(W(o),!n.auto_defs){U(o);return}!t||i!=_?We.default.lookup(o.word).then(D=>{o.dict_def=D||void 0}).finally(()=>{U(o)}):(o.dict_def=t,U(o))}function U(m){var D;Ze(n,m),xe(n),et(n);const o=(D=document.getElementById(s+"-add-form"))==null?void 0:D.querySelector("input.word");o&&o.classList.add("empty"),a(3,c=[]),a(1,i=""),a(2,h=""),a(6,w=void 0),a(5,t=void 0),_=""}function K(){i=this.value,a(1,i)}function F(){h=this.value,a(2,h)}function se(m){c=m,a(3,c)}return l.$$set=m=>{"key"in m&&a(0,s=m.key)},[s,i,h,c,p,t,w,H,L,x,$,O,te,K,F,se]}class ut extends Ne{constructor(e){super(),Se(this,e,nt,lt,Le,{key:0})}}function ft(l){let e,a,s,n,i,h,c,p;return e=new Je({props:{current:"add"}}),c=new ut({props:{key:"words"}}),{c(){oe(e.$$.fragment),a=N(),s=g("div"),n=g("h1"),i=V("Add Word"),h=N(),oe(c.$$.fragment),this.h()},l(t){ne(e.$$.fragment,t),a=S(t),s=b(t,"DIV",{class:!0});var _=k(s);n=b(_,"H1",{});var w=k(n);i=q(w,"Add Word"),w.forEach(v),h=S(_),ne(c.$$.fragment,_),_.forEach(v),this.h()},h(){r(s,"class","add-vocab")},m(t,_){ue(e,t,_),ae(t,a,_),ae(t,s,_),d(s,n),d(n,i),d(s,h),ue(c,s,null),p=!0},p:He,i(t){p||(G(e.$$.fragment,t),G(c.$$.fragment,t),p=!0)},o(t){Y(e.$$.fragment,t),Y(c.$$.fragment,t),p=!1},d(t){fe(e,t),t&&v(a),t&&v(s),fe(c)}}}class ht extends Ne{constructor(e){super(),Se(this,e,null,ft,Le,{})}}export{ht as default};
