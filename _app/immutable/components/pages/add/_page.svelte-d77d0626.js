import{S as Le,i as Pe,s as Se,J as Fe,K as Oe,k as h,q,a as L,w as ie,l as g,m as b,r as W,h as p,c as P,x as oe,n as l,b as se,G as r,L as de,y as ne,M as $,N as Re,O as Me,f as z,g as Ue,t as Y,d as je,z as ue,P as ze,u as Ce,A as Ge,B as He}from"../../../chunks/index-e56e8534.js";import{N as Je}from"../../../chunks/Nav-6346eff5.js";import{b as fe}from"../../../chunks/paths-b4419565.js";import{T as Ke,D as Xe}from"../../../chunks/DictDef-8a4adf15.js";import{l as Qe,a as Ye,A as Be,b as Ze,c as xe,d as et,m as tt,t as st,w as at}from"../../../chunks/words-d2f0d323.js";function Ne(d){let e,a;return e=new Xe({props:{dict:d[5],scheme:"dark"}}),{c(){ie(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,u){ne(e,s,u),a=!0},p(s,u){const i={};u&32&&(i.dict=s[5]),e.$set(i)},i(s){a||(z(e.$$.fragment,s),a=!0)},o(s){Y(e.$$.fragment,s),a=!1},d(s){ue(e,s)}}}function rt(d){let e,a,s,u=d[4].word+"",i,v,_;return{c(){e=h("div"),a=q("Added word "),s=h("a"),i=q(u),this.h()},l(m){e=g(m,"DIV",{id:!0,class:!0});var t=b(e);a=W(t,"Added word "),s=g(t,"A",{href:!0});var c=b(s);i=W(c,u),c.forEach(p),t.forEach(p),this.h()},h(){l(s,"href",v=fe+"/list?word="+d[4].id),l(e,"id",_=d[0]+"-added-alert"),l(e,"class","added-alert alert alert-success svelte-1p3951")},m(m,t){se(m,e,t),r(e,a),r(e,s),r(s,i)},p(m,t){t&16&&u!==(u=m[4].word+"")&&Ce(i,u),t&16&&v!==(v=fe+"/list?word="+m[4].id)&&l(s,"href",v),t&1&&_!==(_=m[0]+"-added-alert")&&l(e,"id",_)},d(m){m&&p(e)}}}function lt(d){let e,a,s,u,i,v=d[1].trim()+"",_,m,t;return{c(){e=h("div"),a=h("p"),s=q("Word "),u=h("a"),i=h("dfn"),_=q(v),t=q(" exists"),this.h()},l(c){e=g(c,"DIV",{class:!0});var E=b(e);a=g(E,"P",{class:!0});var A=b(a);s=W(A,"Word "),u=g(A,"A",{href:!0});var D=b(u);i=g(D,"DFN",{class:!0});var B=b(i);_=W(B,v),B.forEach(p),D.forEach(p),t=W(A," exists"),A.forEach(p),E.forEach(p),this.h()},h(){l(i,"class","word"),l(u,"href",m=fe+"/list?word="+d[6].id),l(a,"class","svelte-1p3951"),l(e,"class","duplicate-alert alert alert-danger svelte-1p3951")},m(c,E){se(c,e,E),r(e,a),r(a,s),r(a,u),r(u,i),r(i,_),r(a,t)},p(c,E){E&2&&v!==(v=c[1].trim()+"")&&Ce(_,v),E&64&&m!==(m=fe+"/list?word="+c[6].id)&&l(u,"href",m)},d(c){c&&p(e)}}}function dt(d){let e,a,s,u,i,v,_,m,t,c,E,A,D,B,G,Z,T,U,H,S,x,ee,O,R,N,J,te,K,F,w,o,y,V,ce,ae,_e,j,X,pe,me,re,C,ve,we;function $e(f){d[14](f)}let Ee={key:d[0]};d[3]!==void 0&&(Ee.tags=d[3]),N=new Ke({props:Ee}),Fe.push(()=>Oe(N,"tags",$e,d[3]));let k=d[5]&&Ne(d);function ye(f,n){if(f[6])return lt;if(f[4])return rt}let Q=ye(d),I=Q&&Q(d);return{c(){e=h("form"),a=h("div"),s=h("label"),u=q("Word"),i=h("span"),v=q("*"),m=L(),t=h("input"),E=L(),A=h("div"),D=h("label"),B=q("Notes"),Z=L(),T=h("textarea"),H=L(),S=h("div"),x=q("Tags"),ee=L(),O=h("div"),R=h("div"),ie(N.$$.fragment),te=L(),k&&k.c(),K=L(),F=h("div"),I&&I.c(),w=L(),o=h("div"),y=h("button"),V=q("Add Word "),ce=h("br"),_e=L(),j=h("div"),X=h("span"),pe=q("*"),me=q(" required field"),this.h()},l(f){e=g(f,"FORM",{id:!0,class:!0});var n=b(e);a=g(n,"DIV",{class:!0});var M=b(a);s=g(M,"LABEL",{for:!0,class:!0,title:!0});var he=b(s);u=W(he,"Word"),i=g(he,"SPAN",{class:!0});var ke=b(i);v=W(ke,"*"),ke.forEach(p),he.forEach(p),m=P(M),t=g(M,"INPUT",{id:!0,type:!0,class:!0}),M.forEach(p),E=P(n),A=g(n,"DIV",{class:!0});var le=b(A);D=g(le,"LABEL",{class:!0,for:!0});var Ae=b(D);B=W(Ae,"Notes"),Ae.forEach(p),Z=P(le),T=g(le,"TEXTAREA",{id:!0,class:!0}),b(T).forEach(p),le.forEach(p),H=P(n),S=g(n,"DIV",{class:!0});var De=b(S);x=W(De,"Tags"),De.forEach(p),ee=P(n),O=g(n,"DIV",{class:!0});var Ie=b(O);R=g(Ie,"DIV",{class:!0});var Te=b(R);oe(N.$$.fragment,Te),Te.forEach(p),Ie.forEach(p),te=P(n),k&&k.l(n),K=P(n),F=g(n,"DIV",{class:!0});var Ve=b(F);I&&I.l(Ve),Ve.forEach(p),w=P(n),o=g(n,"DIV",{id:!0,class:!0});var ge=b(o);y=g(ge,"BUTTON",{type:!0,class:!0});var qe=b(y);V=W(qe,"Add Word "),qe.forEach(p),ce=g(ge,"BR",{}),ge.forEach(p),_e=P(n),j=g(n,"DIV",{class:!0});var be=b(j);X=g(be,"SPAN",{class:!0});var We=b(X);pe=W(We,"*"),We.forEach(p),me=W(be," required field"),be.forEach(p),n.forEach(p),this.h()},h(){l(i,"class","required svelte-1p3951"),l(s,"for",_=d[0]+"-add-input"),l(s,"class","form-label svelte-1p3951"),l(s,"title","required"),l(t,"id",c=d[0]+"-add-input"),t.required=!0,l(t,"type","text"),l(t,"class","word form-control svelte-1p3951"),t.autofocus=!0,l(a,"class","mb-3 word-group svelte-1p3951"),l(D,"class","label form-label svelte-1p3951"),l(D,"for",G=d[0]+"-add-input"),l(T,"id",U=d[0]+"-add-input"),l(T,"class","def form-control svelte-1p3951"),l(A,"class","mb-3 note-group svelte-1p3951"),l(S,"class","label svelte-1p3951"),l(R,"class","tag-list svelte-1p3951"),l(O,"class","tag-container svelte-1p3951"),l(F,"class","alert-box svelte-1p3951"),l(y,"type","submit"),l(y,"class","add btn btn-primary svelte-1p3951"),l(o,"id",ae=d[0]+"-add-container"),l(o,"class","add-container svelte-1p3951"),l(X,"class","required svelte-1p3951"),l(j,"class","required-description svelte-1p3951"),l(e,"id",re=d[0]+"-add-form"),l(e,"class","add-form-container mt-4 svelte-1p3951")},m(f,n){se(f,e,n),r(e,a),r(a,s),r(s,u),r(s,i),r(i,v),r(a,m),r(a,t),de(t,d[1]),r(e,E),r(e,A),r(A,D),r(D,B),r(A,Z),r(A,T),de(T,d[2]),r(e,H),r(e,S),r(S,x),r(e,ee),r(e,O),r(O,R),ne(N,R,null),r(e,te),k&&k.m(e,null),r(e,K),r(e,F),I&&I.m(F,null),r(e,w),r(e,o),r(o,y),r(y,V),r(o,ce),r(e,_e),r(e,j),r(j,X),r(X,pe),r(j,me),C=!0,t.focus(),ve||(we=[$(t,"input",d[12]),$(t,"input",d[7]),$(t,"focusout",d[8]),$(D,"keydown",d[9]),$(D,"click",d[9]),$(T,"input",d[13]),$(T,"input",Ye),$(S,"keydown",d[10]),$(S,"click",d[10]),$(e,"submit",Re(d[11]))],ve=!0)},p(f,[n]){(!C||n&1&&_!==(_=f[0]+"-add-input"))&&l(s,"for",_),(!C||n&1&&c!==(c=f[0]+"-add-input"))&&l(t,"id",c),n&2&&t.value!==f[1]&&de(t,f[1]),(!C||n&1&&G!==(G=f[0]+"-add-input"))&&l(D,"for",G),(!C||n&1&&U!==(U=f[0]+"-add-input"))&&l(T,"id",U),n&4&&de(T,f[2]);const M={};n&1&&(M.key=f[0]),!J&&n&8&&(J=!0,M.tags=f[3],Me(()=>J=!1)),N.$set(M),f[5]?k?(k.p(f,n),n&32&&z(k,1)):(k=Ne(f),k.c(),z(k,1),k.m(e,K)):k&&(Ue(),Y(k,1,1,()=>{k=null}),je()),Q===(Q=ye(f))&&I?I.p(f,n):(I&&I.d(1),I=Q&&Q(f),I&&(I.c(),I.m(F,null))),(!C||n&1&&ae!==(ae=f[0]+"-add-container"))&&l(o,"id",ae),(!C||n&1&&re!==(re=f[0]+"-add-form"))&&l(e,"id",re)},i(f){C||(z(N.$$.fragment,f),z(k),C=!0)},o(f){Y(N.$$.fragment,f),Y(k),C=!1},d(f){f&&p(e),ue(N),k&&k.d(),I&&I.d(),ve=!1,ze(we)}}}let it=!1;const ot=300;function nt(d,e,a){let{key:s}=e,u=Qe(s),i="",v="",_=[],m,t,c="",E,A,D,B;function G(){T(),Z()}function Z(){B&&(clearTimeout(B),B=void 0),B=setTimeout(()=>H(),ot)}function T(){let w=i.trim().toLowerCase();a(6,E=u.words.find(y=>{var V;return((V=y.cache)==null?void 0:V.word)===w}));const o=document.getElementById(s+"-add-form");if(o){const y=o.querySelector("input.word"),V=o.querySelector("button.add");y&&y.setCustomValidity(E?"Duplicate word":""),V&&(E?(V.setCustomValidity("Duplicate word"),V.disabled=!0):(V.setCustomValidity(""),V.disabled=!1))}}function U(){return T(),E?(a(1,i=i.trim()),a(2,v=v.trim()),!0):!1}function H(){i!=""&&i!=c&&Be.default.lookup(i).then(w=>{w&&i!==""?(c=i,a(5,t=w)):(a(5,t=void 0),c="")})}function S(){U(),H()}function x(){const w=tt(v),o=_.length===0?void 0:_.map(V=>V.trim());let y={id:0,word:st(i.trim()),favorite:it,def:w,dict_def:void 0,tags:o,cache:void 0};return at(y),y}function ee(w){const o=document.getElementById(s+"-add-def");o&&o.focus()}function O(w){const o=document.getElementById(s+"-tags");o&&o.focus()}async function R(w){A&&(clearTimeout(A),A=void 0),D&&(clearTimeout(D),D=void 0),a(4,m=w),await Ge(),A=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&(o.style.opacity="0")},8e3),D=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&o.remove(),a(4,m=void 0)},12e3)}function N(w){if(U())return!1;let o=x();R(o),!t||i!=c?Be.default.lookup(o.word).then(y=>{o.dict_def=y||void 0}).finally(()=>{J(o)}):(o.dict_def=t,J(o))}function J(w){var y;Ze(u,w),xe(u),et(u);const o=(y=document.getElementById(s+"-add-form"))==null?void 0:y.querySelector("input.word");o&&o.classList.add("empty"),a(3,_=[]),a(1,i=""),a(2,v=""),a(6,E=void 0),a(5,t=void 0),c=""}function te(){i=this.value,a(1,i)}function K(){v=this.value,a(2,v)}function F(w){_=w,a(3,_)}return d.$$set=w=>{"key"in w&&a(0,s=w.key)},[s,i,v,_,m,t,E,G,S,ee,O,N,te,K,F]}class ut extends Le{constructor(e){super(),Pe(this,e,nt,dt,Se,{key:0})}}function ft(d){let e,a,s,u,i,v,_,m;return e=new Je({props:{current:"add"}}),_=new ut({props:{key:"words"}}),{c(){ie(e.$$.fragment),a=L(),s=h("div"),u=h("h1"),i=q("Add Word"),v=L(),ie(_.$$.fragment),this.h()},l(t){oe(e.$$.fragment,t),a=P(t),s=g(t,"DIV",{class:!0});var c=b(s);u=g(c,"H1",{});var E=b(u);i=W(E,"Add Word"),E.forEach(p),v=P(c),oe(_.$$.fragment,c),c.forEach(p),this.h()},h(){l(s,"class","add-vocab")},m(t,c){ne(e,t,c),se(t,a,c),se(t,s,c),r(s,u),r(u,i),r(s,v),ne(_,s,null),m=!0},p:He,i(t){m||(z(e.$$.fragment,t),z(_.$$.fragment,t),m=!0)},o(t){Y(e.$$.fragment,t),Y(_.$$.fragment,t),m=!1},d(t){ue(e,t),t&&p(a),t&&p(s),ue(_)}}}class ht extends Le{constructor(e){super(),Pe(this,e,null,ft,Se,{})}}export{ht as default};
