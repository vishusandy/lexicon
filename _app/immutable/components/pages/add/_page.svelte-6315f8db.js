import{S as Le,i as Ne,s as Pe,I as Me,J as He,k as b,q as W,a as P,w as le,l as g,m as w,r as q,h as v,c as S,x as ie,n as i,K as $e,b as se,G as d,L as We,y as oe,M as C,N as Fe,O as Oe,f as U,g as Re,t as X,d as Ue,z as ne,P as ze,u as Se,A as Ge,B as Je}from"../../../chunks/index-d8102d1a.js";import{N as Ke}from"../../../chunks/Nav-11fb0fa3.js";import{b as fe}from"../../../chunks/paths-b4419565.js";import{T as je,D as Qe,e as Xe}from"../../../chunks/DictDef-8c78fe28.js";import{l as Ye,A as qe,a as Ze,b as xe,c as et,m as tt,t as st,w as at}from"../../../chunks/words-2bbd4318.js";function Be(r){let e,a;return e=new Qe({props:{dict:r[5]}}),{c(){le(e.$$.fragment)},l(s){ie(e.$$.fragment,s)},m(s,n){oe(e,s,n),a=!0},p(s,n){const l={};n&32&&(l.dict=s[5]),e.$set(l)},i(s){a||(U(e.$$.fragment,s),a=!0)},o(s){X(e.$$.fragment,s),a=!1},d(s){ne(e,s)}}}function dt(r){let e,a,s,n=r[4].word+"",l,h,_;return{c(){e=b("div"),a=W("Added word "),s=b("a"),l=W(n),this.h()},l(p){e=g(p,"DIV",{id:!0,class:!0});var t=w(e);a=q(t,"Added word "),s=g(t,"A",{href:!0});var c=w(s);l=q(c,n),c.forEach(v),t.forEach(v),this.h()},h(){i(s,"href",h=fe+"/list?word="+r[4].id),i(e,"id",_=r[0]+"-added-alert"),i(e,"class","added-alert alert alert-success svelte-ywpf9b")},m(p,t){se(p,e,t),d(e,a),d(e,s),d(s,l)},p(p,t){t&16&&n!==(n=p[4].word+"")&&Se(l,n),t&16&&h!==(h=fe+"/list?word="+p[4].id)&&i(s,"href",h),t&1&&_!==(_=p[0]+"-added-alert")&&i(e,"id",_)},d(p){p&&v(e)}}}function rt(r){let e,a,s,n,l,h=r[1].trim()+"",_,p,t;return{c(){e=b("div"),a=b("p"),s=W("Word "),n=b("a"),l=b("dfn"),_=W(h),t=W(" exists"),this.h()},l(c){e=g(c,"DIV",{class:!0});var y=w(e);a=g(y,"P",{class:!0});var k=w(a);s=q(k,"Word "),n=g(k,"A",{href:!0});var D=w(n);l=g(D,"DFN",{class:!0});var B=w(l);_=q(B,h),B.forEach(v),D.forEach(v),t=q(k," exists"),k.forEach(v),y.forEach(v),this.h()},h(){i(l,"class","word"),i(n,"href",p=fe+"/list?word="+r[6].id),i(a,"class","svelte-ywpf9b"),i(e,"class","duplicate-alert alert alert-danger svelte-ywpf9b")},m(c,y){se(c,e,y),d(e,a),d(a,s),d(a,n),d(n,l),d(l,_),d(a,t)},p(c,y){y&2&&h!==(h=c[1].trim()+"")&&Se(_,h),y&64&&p!==(p=fe+"/list?word="+c[6].id)&&i(n,"href",p)},d(c){c&&v(e)}}}function lt(r){let e,a,s,n,l,h,_,p,t,c,y,k,D,B,Y,T,R,z,L,Z,x,$,F,N,ee,G,J,M,te,m,o,I,V,ae,ue,K,j,ce,_e,de,H,me,be;function Ce(f){r[14](f)}let ge={key:r[0]};r[3]!==void 0&&(ge.tags=r[3]),N=new je({props:ge}),Me.push(()=>He(N,"tags",Ce,r[3]));let E=r[5]&&Be(r);function we(f,u){if(f[6])return rt;if(f[4])return dt}let Q=we(r),A=Q&&Q(r);return{c(){e=b("form"),a=b("div"),s=b("label"),n=W("Word"),l=b("span"),h=W("*"),p=P(),t=b("input"),y=P(),k=b("div"),D=b("div"),B=W("Notes"),Y=P(),T=b("div"),z=P(),L=b("div"),Z=W("Tags"),x=P(),$=b("div"),F=b("div"),le(N.$$.fragment),G=P(),E&&E.c(),J=P(),M=b("div"),A&&A.c(),te=P(),m=b("div"),o=b("button"),I=W("Add Word "),V=b("br"),ue=P(),K=b("div"),j=b("span"),ce=W("*"),_e=W(" denotes a required field"),this.h()},l(f){e=g(f,"FORM",{id:!0,class:!0});var u=w(e);a=g(u,"DIV",{class:!0});var O=w(a);s=g(O,"LABEL",{for:!0,class:!0,title:!0});var ve=w(s);n=q(ve,"Word"),l=g(ve,"SPAN",{class:!0});var ye=w(l);h=q(ye,"*"),ye.forEach(v),ve.forEach(v),p=S(O),t=g(O,"INPUT",{id:!0,type:!0,class:!0}),O.forEach(v),y=S(u),k=g(u,"DIV",{class:!0});var re=w(k);D=g(re,"DIV",{class:!0});var Ee=w(D);B=q(Ee,"Notes"),Ee.forEach(v),Y=S(re),T=g(re,"DIV",{contenteditable:!0,id:!0,class:!0}),w(T).forEach(v),re.forEach(v),z=S(u),L=g(u,"DIV",{class:!0});var ke=w(L);Z=q(ke,"Tags"),ke.forEach(v),x=S(u),$=g(u,"DIV",{class:!0});var Ie=w($);F=g(Ie,"DIV",{class:!0});var De=w(F);ie(N.$$.fragment,De),De.forEach(v),Ie.forEach(v),G=S(u),E&&E.l(u),J=S(u),M=g(u,"DIV",{class:!0});var Te=w(M);A&&A.l(Te),Te.forEach(v),te=S(u),m=g(u,"DIV",{id:!0,class:!0});var pe=w(m);o=g(pe,"BUTTON",{type:!0,class:!0});var Ae=w(o);I=q(Ae,"Add Word "),Ae.forEach(v),V=g(pe,"BR",{}),pe.forEach(v),ue=S(u),K=g(u,"DIV",{});var he=w(K);j=g(he,"SPAN",{class:!0});var Ve=w(j);ce=q(Ve,"*"),Ve.forEach(v),_e=q(he," denotes a required field"),he.forEach(v),u.forEach(v),this.h()},h(){i(l,"class","required svelte-ywpf9b"),i(s,"for",_=r[0]+"-add-input"),i(s,"class","form-label"),i(s,"title","required"),i(t,"id",c=r[0]+"-add-input"),t.required=!0,i(t,"type","text"),i(t,"class","word form-control svelte-ywpf9b"),t.autofocus=!0,i(a,"class","mb-3"),i(D,"class","label form-label svelte-ywpf9b"),i(T,"contenteditable","true"),i(T,"id",R=r[0]+"-add-def"),i(T,"class","def form-control svelte-ywpf9b"),r[2]===void 0&&$e(()=>r[13].call(T)),i(k,"class","mb-3"),i(L,"class","label svelte-ywpf9b"),i(F,"class","tag-list svelte-ywpf9b"),i($,"class","tag-container svelte-ywpf9b"),i(M,"class","alert-box svelte-ywpf9b"),i(o,"type","submit"),i(o,"class","add btn btn-primary svelte-ywpf9b"),i(m,"id",ae=r[0]+"-add-container"),i(m,"class","add-container svelte-ywpf9b"),i(j,"class","required svelte-ywpf9b"),i(e,"id",de=r[0]+"-add-form"),i(e,"class","mt-4")},m(f,u){se(f,e,u),d(e,a),d(a,s),d(s,n),d(s,l),d(l,h),d(a,p),d(a,t),We(t,r[1]),d(e,y),d(e,k),d(k,D),d(D,B),d(k,Y),d(k,T),r[2]!==void 0&&(T.innerHTML=r[2]),d(e,z),d(e,L),d(L,Z),d(e,x),d(e,$),d($,F),oe(N,F,null),d(e,G),E&&E.m(e,null),d(e,J),d(e,M),A&&A.m(M,null),d(e,te),d(e,m),d(m,o),d(o,I),d(m,V),d(e,ue),d(e,K),d(K,j),d(j,ce),d(K,_e),H=!0,t.focus(),me||(be=[C(t,"input",r[12]),C(t,"input",r[7]),C(t,"focusout",r[8]),C(D,"keydown",r[9]),C(D,"click",r[9]),C(T,"keydown",Xe),C(T,"input",r[13]),C(L,"keydown",r[10]),C(L,"click",r[10]),C(e,"submit",Fe(r[11]))],me=!0)},p(f,[u]){(!H||u&1&&_!==(_=f[0]+"-add-input"))&&i(s,"for",_),(!H||u&1&&c!==(c=f[0]+"-add-input"))&&i(t,"id",c),u&2&&t.value!==f[1]&&We(t,f[1]),(!H||u&1&&R!==(R=f[0]+"-add-def"))&&i(T,"id",R),u&4&&f[2]!==T.innerHTML&&(T.innerHTML=f[2]);const O={};u&1&&(O.key=f[0]),!ee&&u&8&&(ee=!0,O.tags=f[3],Oe(()=>ee=!1)),N.$set(O),f[5]?E?(E.p(f,u),u&32&&U(E,1)):(E=Be(f),E.c(),U(E,1),E.m(e,J)):E&&(Re(),X(E,1,1,()=>{E=null}),Ue()),Q===(Q=we(f))&&A?A.p(f,u):(A&&A.d(1),A=Q&&Q(f),A&&(A.c(),A.m(M,null))),(!H||u&1&&ae!==(ae=f[0]+"-add-container"))&&i(m,"id",ae),(!H||u&1&&de!==(de=f[0]+"-add-form"))&&i(e,"id",de)},i(f){H||(U(N.$$.fragment,f),U(E),H=!0)},o(f){X(N.$$.fragment,f),X(E),H=!1},d(f){f&&v(e),ne(N),E&&E.d(),A&&A.d(),me=!1,ze(be)}}}let it=!1;const ot=300;function nt(r,e,a){let{key:s}=e,n=Ye(s),l="",h="",_=[],p,t,c="",y,k,D,B;function Y(){R(),T()}function T(){B&&(clearTimeout(B),B=void 0),B=setTimeout(()=>L(),ot)}function R(){let m=l.trim().toLowerCase();a(6,y=n.words.find(I=>{var V;return((V=I.cache)==null?void 0:V.word)===m}));const o=document.getElementById(s+"-add-form");if(o){const I=o.querySelector("input.word"),V=o.querySelector("button.add");I&&I.setCustomValidity(y?"Duplicate word":""),V&&(y?(V.setCustomValidity("Duplicate word"),V.disabled=!0):(V.setCustomValidity(""),V.disabled=!1))}}function z(){return R(),y?(a(1,l=l.trim()),a(2,h=h.trim()),!0):!1}function L(){l!=""&&l!=c&&qe.default.lookup(l).then(m=>{m&&l!==""?(c=l,a(5,t=m)):(a(5,t=void 0),c="")})}function Z(){z(),L()}function x(){const m=tt(h),o=_.length===0?void 0:_.map(V=>V.trim());let I={id:0,word:st(l.trim()),favorite:it,def:m,dict_def:void 0,tags:o,cache:void 0};return at(I),I}function $(m){const o=document.getElementById(s+"-add-def");o&&o.focus()}function F(m){const o=document.getElementById(s+"-tags");o&&o.focus()}async function N(m){k&&(clearTimeout(k),k=void 0),D&&(clearTimeout(D),D=void 0),a(4,p=m),await Ge(),k=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&(o.style.opacity="0")},8e3),D=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&o.remove(),a(4,p=void 0)},12e3)}function ee(m){if(z())return!1;let o=x();N(o),!t||l!=c?qe.default.lookup(o.word).then(I=>{o.dict_def=I||void 0}).finally(()=>{G(o)}):(o.dict_def=t,G(o))}function G(m){var I;Ze(n,m),xe(n),et(n);const o=(I=document.getElementById(s+"-add-form"))==null?void 0:I.querySelector("input.word");o&&o.classList.add("empty"),a(3,_=[]),a(1,l=""),a(2,h=""),a(6,y=void 0),a(5,t=void 0),c=""}function J(){l=this.value,a(1,l)}function M(){h=this.innerHTML,a(2,h)}function te(m){_=m,a(3,_)}return r.$$set=m=>{"key"in m&&a(0,s=m.key)},[s,l,h,_,p,t,y,Y,Z,$,F,ee,J,M,te]}class ft extends Le{constructor(e){super(),Ne(this,e,nt,lt,Pe,{key:0})}}function ut(r){let e,a,s,n,l,h,_,p;return e=new Ke({props:{current:"add"}}),_=new ft({props:{key:"words"}}),{c(){le(e.$$.fragment),a=P(),s=b("div"),n=b("h1"),l=W("Add Word"),h=P(),le(_.$$.fragment),this.h()},l(t){ie(e.$$.fragment,t),a=S(t),s=g(t,"DIV",{class:!0});var c=w(s);n=g(c,"H1",{});var y=w(n);l=q(y,"Add Word"),y.forEach(v),h=S(c),ie(_.$$.fragment,c),c.forEach(v),this.h()},h(){i(s,"class","add-vocab")},m(t,c){oe(e,t,c),se(t,a,c),se(t,s,c),d(s,n),d(n,l),d(s,h),oe(_,s,null),p=!0},p:Je,i(t){p||(U(e.$$.fragment,t),U(_.$$.fragment,t),p=!0)},o(t){X(e.$$.fragment,t),X(_.$$.fragment,t),p=!1},d(t){ne(e,t),t&&v(a),t&&v(s),ne(_)}}}class ht extends Le{constructor(e){super(),Ne(this,e,null,ut,Pe,{})}}export{ht as default};
