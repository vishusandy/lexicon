import{S as Be,i as Ne,s as Pe,I as Me,J as He,k as h,q as W,a as P,w as ve,l as b,m as E,r as q,h as _,c as S,x as me,n as i,K as Fe,b as Z,G as d,L as Le,y as pe,M as C,N as Oe,O as Re,f as Y,g as Ue,t as se,d as ze,z as he,P as Ge,u as Se,A as Je,B as Ke}from"../../../chunks/index-71376991.js";import{b as ae}from"../../../chunks/paths-b4419565.js";import{T as je,D as Qe,e as Xe}from"../../../chunks/DictDef-781ec808.js";import{l as Ye,A as We,a as Ze,b as $e,c as xe,m as et,t as tt,w as st}from"../../../chunks/words-56918134.js";function qe(l){let e,t;return e=new Qe({props:{dict:l[5]}}),{c(){ve(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,c){pe(e,s,c),t=!0},p(s,c){const a={};c&32&&(a.dict=s[5]),e.$set(a)},i(s){t||(Y(e.$$.fragment,s),t=!0)},o(s){se(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function at(l){let e,t,s,c=l[4].word+"",a,v,g;return{c(){e=h("div"),t=W("Added word "),s=h("a"),a=W(c),this.h()},l(w){e=b(w,"DIV",{id:!0,class:!0});var r=E(e);t=q(r,"Added word "),s=b(r,"A",{href:!0});var p=E(s);a=q(p,c),p.forEach(_),r.forEach(_),this.h()},h(){i(s,"href",v=ae+"/list?word="+l[4].id),i(e,"id",g=l[0]+"-added-alert"),i(e,"class","added-alert alert alert-success svelte-ywpf9b")},m(w,r){Z(w,e,r),d(e,t),d(e,s),d(s,a)},p(w,r){r&16&&c!==(c=w[4].word+"")&&Se(a,c),r&16&&v!==(v=ae+"/list?word="+w[4].id)&&i(s,"href",v),r&1&&g!==(g=w[0]+"-added-alert")&&i(e,"id",g)},d(w){w&&_(e)}}}function dt(l){let e,t,s,c,a,v=l[1].trim()+"",g,w,r;return{c(){e=h("div"),t=h("p"),s=W("Word "),c=h("a"),a=h("dfn"),g=W(v),r=W(" exists"),this.h()},l(p){e=b(p,"DIV",{class:!0});var n=E(e);t=b(n,"P",{class:!0});var y=E(t);s=q(y,"Word "),c=b(y,"A",{href:!0});var I=E(c);a=b(I,"DFN",{class:!0});var A=E(a);g=q(A,v),A.forEach(_),I.forEach(_),r=q(y," exists"),y.forEach(_),n.forEach(_),this.h()},h(){i(a,"class","word"),i(c,"href",w=ae+"/list?word="+l[6].id),i(t,"class","svelte-ywpf9b"),i(e,"class","duplicate-alert alert alert-danger svelte-ywpf9b")},m(p,n){Z(p,e,n),d(e,t),d(t,s),d(t,c),d(c,a),d(a,g),d(t,r)},p(p,n){n&2&&v!==(v=p[1].trim()+"")&&Se(g,v),n&64&&w!==(w=ae+"/list?word="+p[6].id)&&i(c,"href",w)},d(p){p&&_(e)}}}function rt(l){let e,t,s,c,a,v,g,w,r,p,n,y,I,A,F,T,z,G,B,$,x,O,R,N,ee,J,K,M,te,m,o,D,L,de,ie,j,Q,oe,ne,re,H,fe,be;function Ce(f){l[14](f)}let we={key:l[0]};l[3]!==void 0&&(we.tags=l[3]),N=new je({props:we}),Me.push(()=>He(N,"tags",Ce,l[3]));let k=l[5]&&qe(l);function ge(f,u){if(f[6])return dt;if(f[4])return at}let X=ge(l),V=X&&X(l);return{c(){e=h("form"),t=h("div"),s=h("label"),c=W("Word"),a=h("span"),v=W("*"),w=P(),r=h("input"),n=P(),y=h("div"),I=h("div"),A=W("Notes"),F=P(),T=h("div"),G=P(),B=h("div"),$=W("Tags"),x=P(),O=h("div"),R=h("div"),ve(N.$$.fragment),J=P(),k&&k.c(),K=P(),M=h("div"),V&&V.c(),te=P(),m=h("div"),o=h("button"),D=W("Add Word "),L=h("br"),ie=P(),j=h("div"),Q=h("span"),oe=W("*"),ne=W(" denotes a required field"),this.h()},l(f){e=b(f,"FORM",{id:!0,class:!0});var u=E(e);t=b(u,"DIV",{class:!0});var U=E(t);s=b(U,"LABEL",{for:!0,class:!0,title:!0});var ue=E(s);c=q(ue,"Word"),a=b(ue,"SPAN",{class:!0});var ye=E(a);v=q(ye,"*"),ye.forEach(_),ue.forEach(_),w=S(U),r=b(U,"INPUT",{id:!0,type:!0,class:!0}),U.forEach(_),n=S(u),y=b(u,"DIV",{class:!0});var le=E(y);I=b(le,"DIV",{class:!0});var Ee=E(I);A=q(Ee,"Notes"),Ee.forEach(_),F=S(le),T=b(le,"DIV",{contenteditable:!0,id:!0,class:!0}),E(T).forEach(_),le.forEach(_),G=S(u),B=b(u,"DIV",{class:!0});var ke=E(B);$=q(ke,"Tags"),ke.forEach(_),x=S(u),O=b(u,"DIV",{class:!0});var Ie=E(O);R=b(Ie,"DIV",{class:!0});var De=E(R);me(N.$$.fragment,De),De.forEach(_),Ie.forEach(_),J=S(u),k&&k.l(u),K=S(u),M=b(u,"DIV",{class:!0});var Ae=E(M);V&&V.l(Ae),Ae.forEach(_),te=S(u),m=b(u,"DIV",{id:!0,class:!0});var ce=E(m);o=b(ce,"BUTTON",{type:!0,class:!0});var Te=E(o);D=q(Te,"Add Word "),Te.forEach(_),L=b(ce,"BR",{}),ce.forEach(_),ie=S(u),j=b(u,"DIV",{});var _e=E(j);Q=b(_e,"SPAN",{class:!0});var Ve=E(Q);oe=q(Ve,"*"),Ve.forEach(_),ne=q(_e," denotes a required field"),_e.forEach(_),u.forEach(_),this.h()},h(){i(a,"class","required svelte-ywpf9b"),i(s,"for",g=l[0]+"-add-input"),i(s,"class","form-label"),i(s,"title","required"),i(r,"id",p=l[0]+"-add-input"),r.required=!0,i(r,"type","text"),i(r,"class","word empty form-control svelte-ywpf9b"),i(t,"class","mb-3"),i(I,"class","label form-label svelte-ywpf9b"),i(T,"contenteditable","true"),i(T,"id",z=l[0]+"-add-def"),i(T,"class","def form-control svelte-ywpf9b"),l[2]===void 0&&Fe(()=>l[13].call(T)),i(y,"class","mb-3"),i(B,"class","label svelte-ywpf9b"),i(R,"class","tag-list svelte-ywpf9b"),i(O,"class","tag-container svelte-ywpf9b"),i(M,"class","alert-box svelte-ywpf9b"),i(o,"type","submit"),i(o,"class","add btn btn-primary svelte-ywpf9b"),i(m,"id",de=l[0]+"-add-container"),i(m,"class","add-container svelte-ywpf9b"),i(Q,"class","required svelte-ywpf9b"),i(e,"id",re=l[0]+"-add-form"),i(e,"class","mt-4")},m(f,u){Z(f,e,u),d(e,t),d(t,s),d(s,c),d(s,a),d(a,v),d(t,w),d(t,r),Le(r,l[1]),d(e,n),d(e,y),d(y,I),d(I,A),d(y,F),d(y,T),l[2]!==void 0&&(T.innerHTML=l[2]),d(e,G),d(e,B),d(B,$),d(e,x),d(e,O),d(O,R),pe(N,R,null),d(e,J),k&&k.m(e,null),d(e,K),d(e,M),V&&V.m(M,null),d(e,te),d(e,m),d(m,o),d(o,D),d(m,L),d(e,ie),d(e,j),d(j,Q),d(Q,oe),d(j,ne),H=!0,fe||(be=[C(r,"input",l[12]),C(r,"input",l[7]),C(r,"focusout",l[8]),C(I,"keydown",l[9]),C(I,"click",l[9]),C(T,"keydown",Xe),C(T,"input",l[13]),C(B,"keydown",l[10]),C(B,"click",l[10]),C(e,"submit",Oe(l[11]))],fe=!0)},p(f,[u]){(!H||u&1&&g!==(g=f[0]+"-add-input"))&&i(s,"for",g),(!H||u&1&&p!==(p=f[0]+"-add-input"))&&i(r,"id",p),u&2&&r.value!==f[1]&&Le(r,f[1]),(!H||u&1&&z!==(z=f[0]+"-add-def"))&&i(T,"id",z),u&4&&f[2]!==T.innerHTML&&(T.innerHTML=f[2]);const U={};u&1&&(U.key=f[0]),!ee&&u&8&&(ee=!0,U.tags=f[3],Re(()=>ee=!1)),N.$set(U),f[5]?k?(k.p(f,u),u&32&&Y(k,1)):(k=qe(f),k.c(),Y(k,1),k.m(e,K)):k&&(Ue(),se(k,1,1,()=>{k=null}),ze()),X===(X=ge(f))&&V?V.p(f,u):(V&&V.d(1),V=X&&X(f),V&&(V.c(),V.m(M,null))),(!H||u&1&&de!==(de=f[0]+"-add-container"))&&i(m,"id",de),(!H||u&1&&re!==(re=f[0]+"-add-form"))&&i(e,"id",re)},i(f){H||(Y(N.$$.fragment,f),Y(k),H=!0)},o(f){se(N.$$.fragment,f),se(k),H=!1},d(f){f&&_(e),he(N),k&&k.d(),V&&V.d(),fe=!1,Ge(be)}}}let lt=!1;const it=300;function ot(l,e,t){let{key:s}=e,c=Ye(s),a="",v="",g=[],w,r,p="",n,y,I,A;function F(){z(),T()}function T(){A&&(clearTimeout(A),A=void 0),A=setTimeout(()=>B(),it)}function z(){let m=a.trim().toLocaleLowerCase();t(6,n=c.words.find(D=>{var L;return((L=D.cache)==null?void 0:L.word)===m}));const o=document.getElementById(s+"-add-form");if(o){const D=o.querySelector("input.word"),L=o.querySelector("button.add");D&&(D.setCustomValidity(n?"Duplicate word":""),a?D.classList.remove("empty"):D.classList.add("empty")),L&&(n?(L.setCustomValidity("Duplicate word"),L.disabled=!0):(L.setCustomValidity(""),L.disabled=!1))}}function G(){return z(),n?(t(1,a=a.trim()),t(2,v=v.trim()),!0):!1}function B(){a!=""&&a!=p&&We.default.lookup(a).then(m=>{m&&a!==""?(p=a,t(5,r=m)):(t(5,r=void 0),p="")})}function $(){G(),B()}function x(){const m=et(v),o=g.length===0?void 0:g.map(L=>L.trim());let D={id:0,word:tt(a.trim()),favorite:lt,def:m,dict_def:void 0,tags:o,cache:void 0};return st(D),D}function O(m){const o=document.getElementById(s+"-add-def");o&&o.focus()}function R(m){const o=document.getElementById(s+"-tags");o&&o.focus()}async function N(m){y&&(clearTimeout(y),y=void 0),I&&(clearTimeout(I),I=void 0),t(4,w=m),await Je(),y=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&(o.style.opacity="0")},8e3),I=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&o.remove(),t(4,w=void 0)},12e3)}function ee(m){if(G())return!1;let o=x();N(o),!r||a!=p?We.default.lookup(o.word).then(D=>{o.dict_def=D||void 0}).finally(()=>{J(o)}):(o.dict_def=r,J(o))}function J(m){var D;Ze(c,m),$e(c),xe(c);const o=(D=document.getElementById(s+"-add-form"))==null?void 0:D.querySelector("input.word");o&&o.classList.add("empty"),t(3,g=[]),t(1,a=""),t(2,v=""),t(6,n=void 0),t(5,r=void 0),p=""}function K(){a=this.value,t(1,a)}function M(){v=this.innerHTML,t(2,v)}function te(m){g=m,t(3,g)}return l.$$set=m=>{"key"in m&&t(0,s=m.key)},[s,a,v,g,w,r,n,F,$,O,R,ee,K,M,te]}class nt extends Be{constructor(e){super(),Ne(this,e,ot,rt,Pe,{key:0})}}function ft(l){let e,t,s,c,a,v,g,w,r,p;return r=new nt({props:{key:"words"}}),{c(){e=h("nav"),t=h("a"),s=W("List words"),c=P(),a=h("div"),v=h("h1"),g=W("Add Word"),w=P(),ve(r.$$.fragment),this.h()},l(n){e=b(n,"NAV",{class:!0});var y=E(e);t=b(y,"A",{href:!0});var I=E(t);s=q(I,"List words"),I.forEach(_),y.forEach(_),c=S(n),a=b(n,"DIV",{class:!0});var A=E(a);v=b(A,"H1",{});var F=E(v);g=q(F,"Add Word"),F.forEach(_),w=S(A),me(r.$$.fragment,A),A.forEach(_),this.h()},h(){i(t,"href",ae+"/list"),i(e,"class","main"),i(a,"class","add-vocab")},m(n,y){Z(n,e,y),d(e,t),d(t,s),Z(n,c,y),Z(n,a,y),d(a,v),d(v,g),d(a,w),pe(r,a,null),p=!0},p:Ke,i(n){p||(Y(r.$$.fragment,n),p=!0)},o(n){se(r.$$.fragment,n),p=!1},d(n){n&&_(e),n&&_(c),n&&_(a),he(r)}}}class mt extends Be{constructor(e){super(),Ne(this,e,null,ft,Pe,{})}}export{mt as default};
