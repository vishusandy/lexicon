import{S as Le,i as Pe,s as Se,J as Fe,K as Oe,k as h,q,a as L,w as ie,l as g,m as b,r as W,h as m,c as P,x as oe,n as d,b as se,G as r,L as le,y as ne,M as $,N as Re,O as Me,f as G,g as Ue,t as Y,d as je,z as ue,P as ze,u as Ce,A as Ge,B as He}from"../../../chunks/index-e56e8534.js";import{N as Je}from"../../../chunks/Nav-7c0a439a.js";import{b as fe}from"../../../chunks/paths-b4419565.js";import{T as Ke,D as Xe}from"../../../chunks/DictDef-8a4adf15.js";import{l as Qe,a as Ye,A as Be,b as Ze,c as xe,d as et,m as tt,t as st,w as at}from"../../../chunks/words-00315205.js";function Ne(l){let e,a;return e=new Xe({props:{dict:l[5],scheme:"dark"}}),{c(){ie(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,n){ne(e,s,n),a=!0},p(s,n){const i={};n&32&&(i.dict=s[5]),e.$set(i)},i(s){a||(G(e.$$.fragment,s),a=!0)},o(s){Y(e.$$.fragment,s),a=!1},d(s){ue(e,s)}}}function rt(l){let e,a,s,n=l[4].word+"",i,p,_;return{c(){e=h("div"),a=q("Added word "),s=h("a"),i=q(n),this.h()},l(v){e=g(v,"DIV",{id:!0,class:!0});var t=b(e);a=W(t,"Added word "),s=g(t,"A",{href:!0});var c=b(s);i=W(c,n),c.forEach(m),t.forEach(m),this.h()},h(){d(s,"href",p=fe+"/list?word="+l[4].id),d(e,"id",_=l[0]+"-added-alert"),d(e,"class","added-alert alert alert-success svelte-1x7e28t")},m(v,t){se(v,e,t),r(e,a),r(e,s),r(s,i)},p(v,t){t&16&&n!==(n=v[4].word+"")&&Ce(i,n),t&16&&p!==(p=fe+"/list?word="+v[4].id)&&d(s,"href",p),t&1&&_!==(_=v[0]+"-added-alert")&&d(e,"id",_)},d(v){v&&m(e)}}}function dt(l){let e,a,s,n,i,p=l[1].trim()+"",_,v,t;return{c(){e=h("div"),a=h("p"),s=q("Word "),n=h("a"),i=h("dfn"),_=q(p),t=q(" exists"),this.h()},l(c){e=g(c,"DIV",{class:!0});var E=b(e);a=g(E,"P",{class:!0});var A=b(a);s=W(A,"Word "),n=g(A,"A",{href:!0});var D=b(n);i=g(D,"DFN",{class:!0});var B=b(i);_=W(B,p),B.forEach(m),D.forEach(m),t=W(A," exists"),A.forEach(m),E.forEach(m),this.h()},h(){d(i,"class","word"),d(n,"href",v=fe+"/list?word="+l[6].id),d(a,"class","svelte-1x7e28t"),d(e,"class","duplicate-alert alert alert-danger svelte-1x7e28t")},m(c,E){se(c,e,E),r(e,a),r(a,s),r(a,n),r(n,i),r(i,_),r(a,t)},p(c,E){E&2&&p!==(p=c[1].trim()+"")&&Ce(_,p),E&64&&v!==(v=fe+"/list?word="+c[6].id)&&d(n,"href",v)},d(c){c&&m(e)}}}function lt(l){let e,a,s,n,i,p,_,v,t,c,E,A,D,B,H,Z,T,U,J,S,x,ee,O,R,N,j,te,K,F,w,o,y,V,ce,ae,_e,z,X,me,ve,re,C,pe,we;function $e(f){l[14](f)}let Ee={key:l[0]};l[3]!==void 0&&(Ee.tags=l[3]),N=new Ke({props:Ee}),Fe.push(()=>Oe(N,"tags",$e,l[3]));let k=l[5]&&Ne(l);function ye(f,u){if(f[6])return dt;if(f[4])return rt}let Q=ye(l),I=Q&&Q(l);return{c(){e=h("form"),a=h("div"),s=h("label"),n=q("Word"),i=h("span"),p=q("*"),v=L(),t=h("input"),E=L(),A=h("div"),D=h("label"),B=q("Notes"),Z=L(),T=h("textarea"),J=L(),S=h("div"),x=q("Tags"),ee=L(),O=h("div"),R=h("div"),ie(N.$$.fragment),te=L(),k&&k.c(),K=L(),F=h("div"),I&&I.c(),w=L(),o=h("div"),y=h("button"),V=q("Add Word "),ce=h("br"),_e=L(),z=h("div"),X=h("span"),me=q("*"),ve=q(" required field"),this.h()},l(f){e=g(f,"FORM",{id:!0,class:!0});var u=b(e);a=g(u,"DIV",{class:!0});var M=b(a);s=g(M,"LABEL",{for:!0,class:!0,title:!0});var he=b(s);n=W(he,"Word"),i=g(he,"SPAN",{class:!0});var ke=b(i);p=W(ke,"*"),ke.forEach(m),he.forEach(m),v=P(M),t=g(M,"INPUT",{id:!0,type:!0,class:!0}),M.forEach(m),E=P(u),A=g(u,"DIV",{class:!0});var de=b(A);D=g(de,"LABEL",{class:!0,for:!0});var Ae=b(D);B=W(Ae,"Notes"),Ae.forEach(m),Z=P(de),T=g(de,"TEXTAREA",{id:!0,class:!0}),b(T).forEach(m),de.forEach(m),J=P(u),S=g(u,"DIV",{class:!0});var De=b(S);x=W(De,"Tags"),De.forEach(m),ee=P(u),O=g(u,"DIV",{class:!0});var Ie=b(O);R=g(Ie,"DIV",{class:!0});var Te=b(R);oe(N.$$.fragment,Te),Te.forEach(m),Ie.forEach(m),te=P(u),k&&k.l(u),K=P(u),F=g(u,"DIV",{class:!0});var Ve=b(F);I&&I.l(Ve),Ve.forEach(m),w=P(u),o=g(u,"DIV",{id:!0,class:!0});var ge=b(o);y=g(ge,"BUTTON",{type:!0,class:!0});var qe=b(y);V=W(qe,"Add Word "),qe.forEach(m),ce=g(ge,"BR",{}),ge.forEach(m),_e=P(u),z=g(u,"DIV",{class:!0});var be=b(z);X=g(be,"SPAN",{class:!0});var We=b(X);me=W(We,"*"),We.forEach(m),ve=W(be," required field"),be.forEach(m),u.forEach(m),this.h()},h(){d(i,"class","required svelte-1x7e28t"),d(s,"for",_=l[0]+"-add-input"),d(s,"class","form-label svelte-1x7e28t"),d(s,"title","required"),d(t,"id",c=l[0]+"-add-input"),t.required=!0,d(t,"type","text"),d(t,"class","word form-control svelte-1x7e28t"),t.autofocus=!0,d(a,"class","mb-3 word-group svelte-1x7e28t"),d(D,"class","label form-label svelte-1x7e28t"),d(D,"for",H=l[0]+"-add-input"),d(T,"id",U=l[0]+"-add-input"),d(T,"class","def form-control svelte-1x7e28t"),d(A,"class","mb-3 note-group svelte-1x7e28t"),d(S,"class","label svelte-1x7e28t"),d(R,"class","tag-list svelte-1x7e28t"),d(O,"class","tag-container svelte-1x7e28t"),d(F,"class","alert-box svelte-1x7e28t"),d(y,"type","submit"),d(y,"class","add btn btn-primary svelte-1x7e28t"),d(o,"id",ae=l[0]+"-add-container"),d(o,"class","add-container svelte-1x7e28t"),d(X,"class","required svelte-1x7e28t"),d(z,"class","required-description svelte-1x7e28t"),d(e,"id",re=l[0]+"-add-form"),d(e,"class","add-form-container mt-4")},m(f,u){se(f,e,u),r(e,a),r(a,s),r(s,n),r(s,i),r(i,p),r(a,v),r(a,t),le(t,l[1]),r(e,E),r(e,A),r(A,D),r(D,B),r(A,Z),r(A,T),le(T,l[2]),r(e,J),r(e,S),r(S,x),r(e,ee),r(e,O),r(O,R),ne(N,R,null),r(e,te),k&&k.m(e,null),r(e,K),r(e,F),I&&I.m(F,null),r(e,w),r(e,o),r(o,y),r(y,V),r(o,ce),r(e,_e),r(e,z),r(z,X),r(X,me),r(z,ve),C=!0,t.focus(),pe||(we=[$(t,"input",l[12]),$(t,"input",l[7]),$(t,"focusout",l[8]),$(D,"keydown",l[9]),$(D,"click",l[9]),$(T,"input",l[13]),$(T,"input",Ye),$(S,"keydown",l[10]),$(S,"click",l[10]),$(e,"submit",Re(l[11]))],pe=!0)},p(f,[u]){(!C||u&1&&_!==(_=f[0]+"-add-input"))&&d(s,"for",_),(!C||u&1&&c!==(c=f[0]+"-add-input"))&&d(t,"id",c),u&2&&t.value!==f[1]&&le(t,f[1]),(!C||u&1&&H!==(H=f[0]+"-add-input"))&&d(D,"for",H),(!C||u&1&&U!==(U=f[0]+"-add-input"))&&d(T,"id",U),u&4&&le(T,f[2]);const M={};u&1&&(M.key=f[0]),!j&&u&8&&(j=!0,M.tags=f[3],Me(()=>j=!1)),N.$set(M),f[5]?k?(k.p(f,u),u&32&&G(k,1)):(k=Ne(f),k.c(),G(k,1),k.m(e,K)):k&&(Ue(),Y(k,1,1,()=>{k=null}),je()),Q===(Q=ye(f))&&I?I.p(f,u):(I&&I.d(1),I=Q&&Q(f),I&&(I.c(),I.m(F,null))),(!C||u&1&&ae!==(ae=f[0]+"-add-container"))&&d(o,"id",ae),(!C||u&1&&re!==(re=f[0]+"-add-form"))&&d(e,"id",re)},i(f){C||(G(N.$$.fragment,f),G(k),C=!0)},o(f){Y(N.$$.fragment,f),Y(k),C=!1},d(f){f&&m(e),ue(N),k&&k.d(),I&&I.d(),pe=!1,ze(we)}}}let it=!1;const ot=300;function nt(l,e,a){let{key:s}=e,n=Qe(s),i="",p="",_=[],v,t,c="",E,A,D,B;function H(){T(),Z()}function Z(){B&&(clearTimeout(B),B=void 0),B=setTimeout(()=>J(),ot)}function T(){let w=i.trim().toLowerCase();a(6,E=n.words.find(y=>{var V;return((V=y.cache)==null?void 0:V.word)===w}));const o=document.getElementById(s+"-add-form");if(o){const y=o.querySelector("input.word"),V=o.querySelector("button.add");y&&y.setCustomValidity(E?"Duplicate word":""),V&&(E?(V.setCustomValidity("Duplicate word"),V.disabled=!0):(V.setCustomValidity(""),V.disabled=!1))}}function U(){return T(),E?(a(1,i=i.trim()),a(2,p=p.trim()),!0):!1}function J(){n.auto_defs===!0&&i!=""&&i!=c&&Be.default.lookup(i).then(w=>{w&&i!==""?(c=i,a(5,t=w)):(a(5,t=void 0),c="")})}function S(){U(),J()}function x(){const w=tt(p),o=_.length===0?void 0:_.map(V=>V.trim());let y={id:0,word:st(i.trim()),favorite:it,def:w,dict_def:void 0,tags:o,cache:void 0};return at(y),y}function ee(w){const o=document.getElementById(s+"-add-def");o&&o.focus()}function O(w){const o=document.getElementById(s+"-tags");o&&o.focus()}async function R(w){A&&(clearTimeout(A),A=void 0),D&&(clearTimeout(D),D=void 0),a(4,v=w),await Ge(),A=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&(o.style.opacity="0")},8e3),D=setTimeout(()=>{const o=document.getElementById(s+"-added-alert");o&&o.remove(),a(4,v=void 0)},12e3)}function N(w){if(U())return!1;let o=x();if(R(o),!n.auto_defs){j(o);return}!t||i!=c?Be.default.lookup(o.word).then(y=>{o.dict_def=y||void 0}).finally(()=>{j(o)}):(o.dict_def=t,j(o))}function j(w){var y;Ze(n,w),xe(n),et(n);const o=(y=document.getElementById(s+"-add-form"))==null?void 0:y.querySelector("input.word");o&&o.classList.add("empty"),a(3,_=[]),a(1,i=""),a(2,p=""),a(6,E=void 0),a(5,t=void 0),c=""}function te(){i=this.value,a(1,i)}function K(){p=this.value,a(2,p)}function F(w){_=w,a(3,_)}return l.$$set=w=>{"key"in w&&a(0,s=w.key)},[s,i,p,_,v,t,E,H,S,ee,O,N,te,K,F]}class ut extends Le{constructor(e){super(),Pe(this,e,nt,lt,Se,{key:0})}}function ft(l){let e,a,s,n,i,p,_,v;return e=new Je({props:{current:"add"}}),_=new ut({props:{key:"words"}}),{c(){ie(e.$$.fragment),a=L(),s=h("div"),n=h("h1"),i=q("Add Word"),p=L(),ie(_.$$.fragment),this.h()},l(t){oe(e.$$.fragment,t),a=P(t),s=g(t,"DIV",{class:!0});var c=b(s);n=g(c,"H1",{});var E=b(n);i=W(E,"Add Word"),E.forEach(m),p=P(c),oe(_.$$.fragment,c),c.forEach(m),this.h()},h(){d(s,"class","add-vocab")},m(t,c){ne(e,t,c),se(t,a,c),se(t,s,c),r(s,n),r(n,i),r(s,p),ne(_,s,null),v=!0},p:He,i(t){v||(G(e.$$.fragment,t),G(_.$$.fragment,t),v=!0)},o(t){Y(e.$$.fragment,t),Y(_.$$.fragment,t),v=!1},d(t){ue(e,t),t&&m(a),t&&m(s),ue(_)}}}class ht extends Le{constructor(e){super(),Pe(this,e,null,ft,Se,{})}}export{ht as default};
