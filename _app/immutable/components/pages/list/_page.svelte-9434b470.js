import{S as we,i as be,s as ke,k as v,q as te,a as j,l as w,m as E,r as le,h as c,c as H,n as a,K as vt,b as Y,G as f,T as Je,M as U,N as ct,B as _e,P as je,R as Ve,U as wt,V as bt,W as Qe,u as ye,I as ht,J as _t,w as de,x as fe,y as ue,f as K,g as Ee,t as Z,d as Te,O as pt,z as ce,o as kt,j as yt,Q as Et,L as Xe,e as ve,X as Tt,Y as It,A as Dt}from"../../../chunks/index-d8102d1a.js";import{S as Ne,e as Pe,g as ge,f as Fe,r as Le,l as St,b as Ue,s as Ze,h as qt,c as he,i as At,j as Nt,k as Oe,A as Wt,n as xe,o as et}from"../../../chunks/words-37495ea3.js";import{T as Lt,e as mt,D as Mt,a as jt}from"../../../chunks/DictDef-f5d89843.js";import{A as Ht}from"../../../chunks/Alert-83fe2429.js";import{N as Bt}from"../../../chunks/Nav-12d3b04f.js";function Pt(o){let e,s,r,l,t,i,d,u,k,p,m,h,D,S,O,V,R,x;return{c(){e=v("div"),s=v("form"),r=v("select"),l=v("option"),t=te("Word"),d=v("option"),u=te("Date"),m=j(),h=v("input"),S=j(),O=v("label"),this.h()},l(q){e=w(q,"DIV",{class:!0});var T=E(e);s=w(T,"FORM",{});var $=E(s);r=w($,"SELECT",{id:!0,title:!0,class:!0});var B=E(r);l=w(B,"OPTION",{});var Q=E(l);t=le(Q,"Word"),Q.forEach(c),d=w(B,"OPTION",{});var X=E(d);u=le(X,"Date"),X.forEach(c),B.forEach(c),m=H($),h=w($,"INPUT",{id:!0,type:!0,title:!0,class:!0}),S=H($),O=w($,"LABEL",{for:!0,class:!0,title:!0}),E(O).forEach(c),$.forEach(c),T.forEach(c),this.h()},h(){l.__value="word",l.value=l.__value,l.selected=i=o[0]==Ne.Word,d.__value="id",d.value=d.__value,d.selected=k=o[0]==Ne.Id,a(r,"id",p=o[1]+"-sort-by"),a(r,"title","Sort by"),a(r,"class","svelte-x4vm2d"),o[0]===void 0&&vt(()=>o[7].call(r)),a(h,"id",D=o[1]+"-sort-order"),a(h,"type","checkbox"),a(h,"title",o[3]),a(h,"class","sort-checkbox form-check-input svelte-x4vm2d"),a(O,"for",V=o[1]+"-sort-order"),a(O,"class","sort-checkbox-label form-check-label svelte-x4vm2d"),a(O,"title",o[3]),a(e,"class","sort-container svelte-x4vm2d")},m(q,T){Y(q,e,T),f(e,s),f(s,r),f(r,l),f(l,t),f(r,d),f(d,u),Je(r,o[0]),f(s,m),f(s,h),h.checked=o[2],f(s,S),f(s,O),R||(x=[U(r,"change",o[7]),U(r,"change",o[4]),U(h,"change",o[8]),U(h,"change",o[4]),U(s,"submit",ct(o[6]))],R=!0)},p(q,[T]){T&1&&i!==(i=q[0]==Ne.Word)&&(l.selected=i),T&1&&k!==(k=q[0]==Ne.Id)&&(d.selected=k),T&2&&p!==(p=q[1]+"-sort-by")&&a(r,"id",p),T&1&&Je(r,q[0]),T&2&&D!==(D=q[1]+"-sort-order")&&a(h,"id",D),T&8&&a(h,"title",q[3]),T&4&&(h.checked=q[2]),T&2&&V!==(V=q[1]+"-sort-order")&&a(O,"for",V),T&8&&a(O,"title",q[3])},i:_e,o:_e,d(q){q&&c(e),R=!1,je(x)}}}function Ft(o,e,s){const r=Ve();let{key:l}=e,{sort_by:t}=e,{sort_order:i}=e,d,u=i===Pe.Desc;function k(D){r("updateSort",{sort_by:t,sort_order:i,key:l})}function p(D){wt.call(this,o,D)}function m(){t=bt(this),s(0,t)}function h(){u=this.checked,s(2,u)}return o.$$set=D=>{"key"in D&&s(1,l=D.key),"sort_by"in D&&s(0,t=D.sort_by),"sort_order"in D&&s(5,i=D.sort_order)},o.$$.update=()=>{o.$$.dirty&4&&s(5,i=u?Pe.Desc:Pe.Asc),o.$$.dirty&4&&s(3,d=u?"Descending sort order":"Ascending sort order")},[t,l,u,d,k,i,p,m,h]}class Ut extends we{constructor(e){super(),be(this,e,Ft,Pt,ke,{key:1,sort_by:0,sort_order:5})}}function Ot(o){let e,s,r,l,t,i,d,u,k,p;return{c(){e=v("button"),s=v("span"),r=te(o[1]),l=j(),t=v("audio"),i=v("a"),d=te("Audio"),this.h()},l(m){e=w(m,"BUTTON",{class:!0});var h=E(e);s=w(h,"SPAN",{class:!0});var D=E(s);r=le(D,o[1]),D.forEach(c),l=H(h),t=w(h,"AUDIO",{src:!0});var S=E(t);i=w(S,"A",{href:!0});var O=E(i);d=le(O,"Audio"),O.forEach(c),S.forEach(c),h.forEach(c),this.h()},h(){a(s,"class","phonetics svelte-1owj048"),a(i,"href",o[0]),Qe(t.src,u=o[0])||a(t,"src",u),a(e,"class","svelte-1owj048")},m(m,h){Y(m,e,h),f(e,s),f(s,r),f(e,l),f(e,t),f(t,i),f(i,d),k||(p=U(e,"click",Vt),k=!0)},p(m,[h]){h&2&&ye(r,m[1]),h&1&&a(i,"href",m[0]),h&1&&!Qe(t.src,u=m[0])&&a(t,"src",u)},i:_e,o:_e,d(m){m&&c(e),k=!1,p()}}}function Vt(o){var s;const e=(s=o.target)==null?void 0:s.querySelector("audio");e&&e.play()}function $t(o,e,s){let{src:r}=e,{title:l=""}=e;return o.$$set=t=>{"src"in t&&s(0,r=t.src),"title"in t&&s(1,l=t.title)},[r,l]}class Ct extends we{constructor(e){super(),be(this,e,$t,Ot,ke,{src:0,title:1})}}function tt(o,e,s){const r=o.slice();return r[23]=e[s],r}function lt(o){let e,s,r=o[0].dict_def.audio,l=[];for(let i=0;i<r.length;i+=1)l[i]=rt(tt(o,r,i));const t=i=>Z(l[i],1,1,()=>{l[i]=null});return{c(){e=v("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=w(i,"DIV",{class:!0});var d=E(e);for(let u=0;u<l.length;u+=1)l[u].l(d);d.forEach(c),this.h()},h(){a(e,"class","audio-entries svelte-1qj4dd1")},m(i,d){Y(i,e,d);for(let u=0;u<l.length;u+=1)l[u].m(e,null);s=!0},p(i,d){if(d&1){r=i[0].dict_def.audio;let u;for(u=0;u<r.length;u+=1){const k=tt(i,r,u);l[u]?(l[u].p(k,d),K(l[u],1)):(l[u]=rt(k),l[u].c(),K(l[u],1),l[u].m(e,null))}for(Ee(),u=r.length;u<l.length;u+=1)t(u);Te()}},i(i){if(!s){for(let d=0;d<r.length;d+=1)K(l[d]);s=!0}},o(i){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)Z(l[d]);s=!1},d(i){i&&c(e),Et(l,i)}}}function rt(o){let e,s;return e=new Ct({props:{src:o[23].url,title:o[23].phonetics}}),{c(){de(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,l){ue(e,r,l),s=!0},p(r,l){const t={};l&1&&(t.src=r[23].url),l&1&&(t.title=r[23].phonetics),e.$set(t)},i(r){s||(K(e.$$.fragment,r),s=!0)},o(r){Z(e.$$.fragment,r),s=!1},d(r){ce(e,r)}}}function st(o){let e,s;return e=new Mt({props:{dict:o[0].dict_def}}),{c(){de(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,l){ue(e,r,l),s=!0},p(r,l){const t={};l&1&&(t.dict=r[0].dict_def),e.$set(t)},i(r){s||(K(e.$$.fragment,r),s=!0)},o(r){Z(e.$$.fragment,r),s=!1},d(r){ce(e,r)}}}function ot(o){let e=o[0].def+"",s;return{c(){s=te(e)},l(r){s=le(r,e)},m(r,l){Y(r,s,l)},p(r,l){l&1&&e!==(e=r[0].def+"")&&ye(s,e)},d(r){r&&c(s)}}}function Rt(o){let e,s,r,l,t,i,d,u,k,p,m,h,D,S,O,V,R,x,q,T,$,B,Q=o[0].word+"",X,re,b,M,W,A,ie,P,L,_,n,g,I,C,F,J,se,pe,ne,He,Ie,De,oe,Be,$e,z=o[0].dict_def&&o[0].dict_def.audio.length>0&&lt(o),G=o[0].dict_def&&st(o),ee=o[0].def&&ot(o);function gt(y){o[17](y)}let Ce={key:o[1]};return o[0].tags!==void 0&&(Ce.tags=o[0].tags),ne=new Lt({props:Ce}),ht.push(()=>_t(ne,"tags",gt,o[0].tags)),ne.$on("updateTags",o[6]),{c(){e=v("hr"),r=j(),l=v("li"),t=v("input"),d=j(),u=v("button"),k=v("i"),p=j(),m=v("button"),h=v("i"),D=j(),S=v("input"),V=j(),R=v("label"),q=j(),T=v("details"),$=v("summary"),B=v("dfn"),X=te(Q),b=j(),M=v("div"),W=j(),A=v("div"),z&&z.c(),ie=j(),G&&G.c(),P=j(),L=v("span"),_=te("Notes:"),n=j(),g=v("div"),ee&&ee.c(),C=j(),F=v("div"),J=v("span"),se=te("Tags:"),pe=j(),de(ne.$$.fragment),this.h()},l(y){e=w(y,"HR",{id:!0,class:!0}),r=H(y),l=w(y,"LI",{id:!0,class:!0});var N=E(l);t=w(N,"INPUT",{class:!0,type:!0,"data-id":!0}),d=H(N),u=w(N,"BUTTON",{class:!0});var me=E(u);k=w(me,"I",{class:!0}),E(k).forEach(c),me.forEach(c),p=H(N),m=w(N,"BUTTON",{class:!0,title:!0});var Re=E(m);h=w(Re,"I",{class:!0}),E(h).forEach(c),Re.forEach(c),D=H(N),S=w(N,"INPUT",{id:!0,title:!0,class:!0,type:!0}),V=H(N),R=w(N,"LABEL",{for:!0,class:!0}),E(R).forEach(c),q=H(N),T=w(N,"DETAILS",{class:!0});var Se=E(T);$=w(Se,"SUMMARY",{class:!0});var qe=E($);B=w(qe,"DFN",{id:!0,class:!0,contenteditable:!0});var Ke=E(B);X=le(Ke,Q),Ke.forEach(c),b=H(qe),M=w(qe,"DIV",{class:!0}),E(M).forEach(c),qe.forEach(c),W=H(Se),A=w(Se,"DIV",{class:!0});var ae=E(A);z&&z.l(ae),ie=H(ae),G&&G.l(ae),P=H(ae),L=w(ae,"SPAN",{class:!0});var Ye=E(L);_=le(Ye,"Notes:"),Ye.forEach(c),n=H(ae),g=w(ae,"DIV",{id:!0,class:!0,contenteditable:!0});var ze=E(g);ee&&ee.l(ze),ze.forEach(c),C=H(ae),F=w(ae,"DIV",{class:!0});var Ae=E(F);J=w(Ae,"SPAN",{class:!0});var Ge=E(J);se=le(Ge,"Tags:"),Ge.forEach(c),pe=H(Ae),fe(ne.$$.fragment,Ae),Ae.forEach(c),ae.forEach(c),Se.forEach(c),N.forEach(c),this.h()},h(){a(e,"id",s=o[1]+"-hr-"+o[0].id),a(e,"class","svelte-1qj4dd1"),a(t,"class","select-word svelte-1qj4dd1"),a(t,"type","checkbox"),a(t,"data-id",i=o[0].id),a(k,"class","fa-solid fa-xmark"),a(u,"class","remove-word-btn remove-btn svelte-1qj4dd1"),a(h,"class","fa-solid fa-arrows-rotate"),a(m,"class","refresh-btn svelte-1qj4dd1"),a(m,"title","Refresh defintion"),a(S,"id",O=o[1]+"-fav-"+o[0].id),a(S,"title","Favorite"),a(S,"class","fav-checkbox svelte-1qj4dd1"),a(S,"type","checkbox"),a(R,"for",x=o[1]+"-fav-"+o[0].id),a(R,"class","fav-label svelte-1qj4dd1"),a(B,"id",re=o[1]+"-word-"+o[0].id),a(B,"class","word svelte-1qj4dd1"),a(B,"contenteditable","true"),a(M,"class","detail-arrow svelte-1qj4dd1"),a($,"class","svelte-1qj4dd1"),a(L,"class","def-label svelte-1qj4dd1"),a(g,"id",I=o[1]+"-def-"+o[0].id),a(g,"class","word-definition svelte-1qj4dd1"),a(g,"contenteditable","true"),a(J,"class","tags-label svelte-1qj4dd1"),a(F,"class","tag-list svelte-1qj4dd1"),a(A,"class","detail-content svelte-1qj4dd1"),T.open=Ie=Array.isArray(o[2])&&o[2].length>0,a(T,"class","svelte-1qj4dd1"),a(l,"id",De=o[1]+"-"+o[0].id),a(l,"class","word-item svelte-1qj4dd1")},m(y,N){Y(y,e,N),Y(y,r,N),Y(y,l,N),f(l,t),f(l,d),f(l,u),f(u,k),f(l,p),f(l,m),f(m,h),f(l,D),f(l,S),S.checked=o[0].favorite,f(l,V),f(l,R),f(l,q),f(l,T),f(T,$),f($,B),f(B,X),f($,b),f($,M),f(T,W),f(T,A),z&&z.m(A,null),f(A,ie),G&&G.m(A,null),f(A,P),f(A,L),f(L,_),f(A,n),f(A,g),ee&&ee.m(g,null),f(A,C),f(A,F),f(F,J),f(J,se),f(F,pe),ue(ne,F,null),oe=!0,Be||($e=[U(u,"click",o[12]),U(m,"click",o[10]),U(S,"change",o[13]),U(S,"change",o[7]),U(B,"blur",o[14]),U(B,"keydown",o[11]),U(B,"click",Kt),U(g,"keydown",mt),U(g,"blur",o[15]),U(g,"focus",o[16])],Be=!0)},p(y,[N]){(!oe||N&3&&s!==(s=y[1]+"-hr-"+y[0].id))&&a(e,"id",s),(!oe||N&1&&i!==(i=y[0].id))&&a(t,"data-id",i),(!oe||N&3&&O!==(O=y[1]+"-fav-"+y[0].id))&&a(S,"id",O),N&1&&(S.checked=y[0].favorite),(!oe||N&3&&x!==(x=y[1]+"-fav-"+y[0].id))&&a(R,"for",x),(!oe||N&1)&&Q!==(Q=y[0].word+"")&&ye(X,Q),(!oe||N&3&&re!==(re=y[1]+"-word-"+y[0].id))&&a(B,"id",re),y[0].dict_def&&y[0].dict_def.audio.length>0?z?(z.p(y,N),N&1&&K(z,1)):(z=lt(y),z.c(),K(z,1),z.m(A,ie)):z&&(Ee(),Z(z,1,1,()=>{z=null}),Te()),y[0].dict_def?G?(G.p(y,N),N&1&&K(G,1)):(G=st(y),G.c(),K(G,1),G.m(A,P)):G&&(Ee(),Z(G,1,1,()=>{G=null}),Te()),y[0].def?ee?ee.p(y,N):(ee=ot(y),ee.c(),ee.m(g,null)):ee&&(ee.d(1),ee=null),(!oe||N&3&&I!==(I=y[1]+"-def-"+y[0].id))&&a(g,"id",I);const me={};N&2&&(me.key=y[1]),!He&&N&1&&(He=!0,me.tags=y[0].tags,pt(()=>He=!1)),ne.$set(me),(!oe||N&4&&Ie!==(Ie=Array.isArray(y[2])&&y[2].length>0))&&(T.open=Ie),(!oe||N&3&&De!==(De=y[1]+"-"+y[0].id))&&a(l,"id",De)},i(y){oe||(K(z),K(G),K(ne.$$.fragment,y),oe=!0)},o(y){Z(z),Z(G),Z(ne.$$.fragment,y),oe=!1},d(y){y&&c(e),y&&c(r),y&&c(l),z&&z.d(),G&&G.d(),ee&&ee.d(),ce(ne),Be=!1,je($e)}}}const Kt=o=>{o.preventDefault()};function Yt(o,e,s){const r=Ve();let{key:l}=e,{item:t}=e,{highlight:i}=e;function d(){return l+"-def-"+t.id}function u(){return document.getElementById(`${l}-${t.id}`)}function k(){return document.getElementById(d())}kt(()=>{const b=ge(l,t.id);b&&D(b)}),yt(()=>{const b=ge(l,t.id),M=k();b&&(b.innerHTML=t.word),M&&t.def&&(M.innerHTML=t.def),V()});function p(){const b=ge(l,t.id);if(b){if(s(0,t.word=b.innerHTML,t),t.word==""){h(t)||s(0,t.word=b.title,t);return}b.title!=t.word&&r("updateWord",{word:t,key:l})}}function m(){const b=k();b&&s(0,t.def=b.innerHTML.replaceAll("<br>",""),t),r("updateDefinition",{word:t,key:l})}function h(b){return window.confirm("Delete word?")?(r("deleteWord",{word:b,key:l}),!0):!1}function D(b){b.title=t.word}function S(){r("updateWordTags",{word:t,key:l})}function O(){r("updateFavorite",{word:t,key:l})}function V(){if(R(),i.length===0)return;const b=k(),M=u(),W=ge(l,t.id);W&&(W.innerHTML=Fe(t.word,i)),b&&t.def&&(b.innerHTML=Fe(t.def,i)),M&&(M.querySelectorAll(".pos, .def, .syn, .ant").forEach(A=>A.innerHTML=Fe(A.innerHTML,i)),M.querySelectorAll(".tag").forEach(A=>{var ie;i.some(P=>P=="#"+A.innerHTML.toLowerCase())&&((ie=A.parentElement)==null||ie.classList.add("highlight-tag"))}))}function R(){const b=k(),M=u(),W=ge(l,t.id);W&&(W.innerHTML=Le(W.innerHTML)),b&&(b.innerHTML=Le(b.innerHTML)),M&&M.querySelectorAll(".pos, .def, .syn, .ant").forEach(A=>A.innerHTML=Le(A.innerHTML))}function x(){var M;const b=(M=u())==null?void 0:M.querySelector("details");b&&(b.open=!0),r("refreshWord",{word:t,key:l})}function q(b){const M=b.target;if(b.code=="Escape"&&M){M.innerHTML=M.title,M.blur();return}mt(b)}const T=()=>h(t);function $(){t.favorite=this.checked,s(0,t)}const B=()=>p(),Q=()=>{m(),V()},X=()=>R();function re(b){o.$$.not_equal(t.tags,b)&&(t.tags=b,s(0,t))}return o.$$set=b=>{"key"in b&&s(1,l=b.key),"item"in b&&s(0,t=b.item),"highlight"in b&&s(2,i=b.highlight)},[t,l,i,p,m,h,S,O,V,R,x,q,T,$,B,Q,X,re]}class zt extends we{constructor(e){super(),be(this,e,Yt,Rt,ke,{key:1,item:0,highlight:2})}}function it(o){let e,s,r,l;return{c(){e=v("button"),s=v("i"),this.h()},l(t){e=w(t,"BUTTON",{class:!0});var i=E(e);s=w(i,"I",{class:!0}),E(s).forEach(c),i.forEach(c),this.h()},h(){a(s,"class","fa-solid fa-x"),a(e,"class","reset-btn svelte-8w6wqe")},m(t,i){Y(t,e,i),f(e,s),r||(l=U(e,"click",o[3]),r=!0)},p:_e,d(t){t&&c(e),r=!1,l()}}}function Gt(o){let e,s,r,l,t,i,d,u,k,p=o[0]&&it(o);return{c(){e=v("div"),s=v("form"),r=v("div"),l=v("i"),t=j(),i=v("input"),d=j(),p&&p.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var h=E(e);s=w(h,"FORM",{});var D=E(s);r=w(D,"DIV",{class:!0});var S=E(r);l=w(S,"I",{class:!0}),E(l).forEach(c),S.forEach(c),t=H(D),i=w(D,"INPUT",{placeholder:!0,class:!0}),d=H(D),p&&p.l(D),D.forEach(c),h.forEach(c),this.h()},h(){a(l,"class","fa-solid fa-magnifying-glass"),a(r,"class","search-icon svelte-8w6wqe"),a(i,"placeholder","filter"),a(i,"class","search-input form-control svelte-8w6wqe"),a(e,"class","search-container svelte-8w6wqe")},m(m,h){Y(m,e,h),f(e,s),f(s,r),f(r,l),f(s,t),f(s,i),Xe(i,o[0]),f(s,d),p&&p.m(s,null),u||(k=[U(i,"input",o[5]),U(i,"input",o[1]),U(i,"keydown",o[2]),U(s,"submit",ct(o[1]))],u=!0)},p(m,[h]){h&1&&i.value!==m[0]&&Xe(i,m[0]),m[0]?p?p.p(m,h):(p=it(m),p.c(),p.m(s,null)):p&&(p.d(1),p=null)},i:_e,o:_e,d(m){m&&c(e),p&&p.d(),u=!1,je(k)}}}function Jt(o,e,s){const r=Ve();let{key:l}=e,t;function i(p){r("updateFilter",{search:t,key:l})}function d(p){jt(p)&&(s(0,t=""),r("updateFilter",{search:t,key:l}))}function u(p){s(0,t=""),r("updateFilter",{search:t,key:l})}function k(){t=this.value,s(0,t)}return o.$$set=p=>{"key"in p&&s(4,l=p.key)},[t,i,d,u,l,k]}class Qt extends we{constructor(e){super(),be(this,e,Jt,Gt,ke,{key:4})}}function nt(o,e,s){const r=o.slice();return r[31]=e[s],r}function at(o){let e,s,r,l=o[6].length+"",t,i,d,u=o[1].words.length+"",k,p;return{c(){e=v("div"),s=te("Showing "),r=v("b"),t=te(l),i=te(" out of "),d=v("b"),k=te(u),p=te(" words"),this.h()},l(m){e=w(m,"DIV",{class:!0});var h=E(e);s=le(h,"Showing "),r=w(h,"B",{});var D=E(r);t=le(D,l),D.forEach(c),i=le(h," out of "),d=w(h,"B",{});var S=E(d);k=le(S,u),S.forEach(c),p=le(h," words"),h.forEach(c),this.h()},h(){a(e,"class","filter-count svelte-r7d7ux")},m(m,h){Y(m,e,h),f(e,s),f(e,r),f(r,t),f(e,i),f(e,d),f(d,k),f(e,p)},p(m,h){h[0]&64&&l!==(l=m[6].length+"")&&ye(t,l),h[0]&2&&u!==(u=m[1].words.length+"")&&ye(k,u)},d(m){m&&c(e)}}}function dt(o){let e;function s(t,i){return t[2]?Zt:Xt}let r=s(o),l=r(o);return{c(){l.c(),e=ve()},l(t){l.l(t),e=ve()},m(t,i){l.m(t,i),Y(t,e,i)},p(t,i){r!==(r=s(t))&&(l.d(1),l=r(t),l&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&c(e)}}}function Xt(o){let e,s;return{c(){e=v("p"),s=te("No words have been added")},l(r){e=w(r,"P",{});var l=E(e);s=le(l,"No words have been added"),l.forEach(c)},m(r,l){Y(r,e,l),f(e,s)},d(r){r&&c(e)}}}function Zt(o){let e,s;return{c(){e=v("p"),s=te("No matching words")},l(r){e=w(r,"P",{});var l=E(e);s=le(l,"No matching words"),l.forEach(c)},m(r,l){Y(r,e,l),f(e,s)},d(r){r&&c(e)}}}function ft(o,e){let s,r,l;return r=new zt({props:{key:e[0],item:e[31],highlight:e[3]}}),r.$on("updateWord",e[23]),r.$on("updateDefinition",e[24]),r.$on("deleteWord",e[25]),r.$on("updateWordTags",e[26]),r.$on("updateFavorite",e[27]),r.$on("refreshWord",e[28]),{key:o,first:null,c(){s=ve(),de(r.$$.fragment),this.h()},l(t){s=ve(),fe(r.$$.fragment,t),this.h()},h(){this.first=s},m(t,i){Y(t,s,i),ue(r,t,i),l=!0},p(t,i){e=t;const d={};i[0]&1&&(d.key=e[0]),i[0]&64&&(d.item=e[31]),i[0]&8&&(d.highlight=e[3]),r.$set(d)},i(t){l||(K(r.$$.fragment,t),l=!0)},o(t){Z(r.$$.fragment,t),l=!1},d(t){t&&c(s),ce(r,t)}}}function ut(o){let e,s,r;function l(i){o[29](i)}let t={};return o[7]!==void 0&&(t.message=o[7]),e=new Ht({props:t}),ht.push(()=>_t(e,"message",l,o[7])),{c(){de(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,d){ue(e,i,d),r=!0},p(i,d){const u={};!s&&d[0]&128&&(s=!0,u.message=i[7],pt(()=>s=!1)),e.$set(u)},i(i){r||(K(e.$$.fragment,i),r=!0)},o(i){Z(e.$$.fragment,i),r=!1},d(i){ce(e,i)}}}function xt(o){let e,s,r,l,t,i,d,u,k,p,m,h,D,S,O,V,R,x,q,T=[],$=new Map,B,Q,X,re,b,M;s=new Qt({props:{key:o[0]}}),s.$on("updateFilter",o[20]),V=new Ut({props:{key:o[0],sort_by:o[1].sort_by,sort_order:o[1].sort_order}}),V.$on("updateSort",o[22]);let W=o[2]!=""&&at(o),A=o[6];const ie=_=>_[31].id;for(let _=0;_<A.length;_+=1){let n=nt(o,A,_),g=ie(n);$.set(g,T[_]=ft(g,n))}let P=null;A.length||(P=dt(o));let L=o[7]&&ut(o);return{c(){e=v("div"),de(s.$$.fragment),r=j(),l=v("div"),t=v("div"),i=v("div"),d=v("input"),u=j(),k=v("div"),p=v("button"),m=j(),h=v("button"),D=j(),S=v("button"),O=j(),de(V.$$.fragment),R=j(),W&&W.c(),x=j(),q=v("ul");for(let _=0;_<T.length;_+=1)T[_].c();P&&P.c(),Q=j(),L&&L.c(),X=ve(),this.h()},l(_){e=w(_,"DIV",{class:!0});var n=E(e);fe(s.$$.fragment,n),r=H(n),l=w(n,"DIV",{class:!0});var g=E(l);t=w(g,"DIV",{class:!0});var I=E(t);i=w(I,"DIV",{class:!0});var C=E(i);d=w(C,"INPUT",{type:!0,class:!0}),u=H(C),k=w(C,"DIV",{class:!0});var F=E(k);p=w(F,"BUTTON",{class:!0,title:!0}),E(p).forEach(c),m=H(F),h=w(F,"BUTTON",{class:!0,title:!0}),E(h).forEach(c),D=H(F),S=w(F,"BUTTON",{class:!0,title:!0}),E(S).forEach(c),F.forEach(c),C.forEach(c),I.forEach(c),O=H(g),fe(V.$$.fragment,g),g.forEach(c),R=H(n),W&&W.l(n),n.forEach(c),x=H(_),q=w(_,"UL",{class:!0});var J=E(q);for(let se=0;se<T.length;se+=1)T[se].l(J);P&&P.l(J),J.forEach(c),Q=H(_),L&&L.l(_),X=ve(),this.h()},h(){a(d,"type","checkbox"),a(d,"class","select-checkbox"),a(p,"class","show-btn svelte-r7d7ux"),a(p,"title","Show selected"),a(h,"class","hide-btn svelte-r7d7ux"),a(h,"title","Hide selected"),a(S,"class","del-btn svelte-r7d7ux"),a(S,"title","Delete selected"),a(k,"class","select-group svelte-r7d7ux"),a(i,"class","select-options"),a(t,"class","show-hide svelte-r7d7ux"),a(l,"class","options-bar svelte-r7d7ux"),a(e,"class","sticky-search-bar list-group-item svelte-r7d7ux"),a(q,"class",B="word-group "+o[5]+" svelte-r7d7ux")},m(_,n){Y(_,e,n),ue(s,e,null),f(e,r),f(e,l),f(l,t),f(t,i),f(i,d),d.checked=o[4],f(i,u),f(i,k),f(k,p),f(k,m),f(k,h),f(k,D),f(k,S),f(l,O),ue(V,l,null),f(e,R),W&&W.m(e,null),Y(_,x,n),Y(_,q,n);for(let g=0;g<T.length;g+=1)T[g].m(q,null);P&&P.m(q,null),Y(_,Q,n),L&&L.m(_,n),Y(_,X,n),re=!0,b||(M=[U(d,"change",o[21]),U(d,"change",o[8]),U(p,"click",o[10]),U(h,"click",o[11]),U(S,"click",o[9])],b=!0)},p(_,n){const g={};n[0]&1&&(g.key=_[0]),s.$set(g),n[0]&16&&(d.checked=_[4]);const I={};n[0]&1&&(I.key=_[0]),n[0]&2&&(I.sort_by=_[1].sort_by),n[0]&2&&(I.sort_order=_[1].sort_order),V.$set(I),_[2]!=""?W?W.p(_,n):(W=at(_),W.c(),W.m(e,null)):W&&(W.d(1),W=null),n[0]&258125&&(A=_[6],Ee(),T=Tt(T,n,ie,1,_,A,$,q,It,ft,null,nt),Te(),!A.length&&P?P.p(_,n):A.length?P&&(P.d(1),P=null):(P=dt(_),P.c(),P.m(q,null))),(!re||n[0]&32&&B!==(B="word-group "+_[5]+" svelte-r7d7ux"))&&a(q,"class",B),_[7]?L?(L.p(_,n),n[0]&128&&K(L,1)):(L=ut(_),L.c(),K(L,1),L.m(X.parentNode,X)):L&&(Ee(),Z(L,1,1,()=>{L=null}),Te())},i(_){if(!re){K(s.$$.fragment,_),K(V.$$.fragment,_);for(let n=0;n<A.length;n+=1)K(T[n]);K(L),re=!0}},o(_){Z(s.$$.fragment,_),Z(V.$$.fragment,_);for(let n=0;n<T.length;n+=1)Z(T[n]);Z(L),re=!1},d(_){_&&c(e),ce(s),ce(V),W&&W.d(),_&&c(x),_&&c(q);for(let n=0;n<T.length;n+=1)T[n].d();P&&P.d(),_&&c(Q),L&&L.d(_),_&&c(X),b=!1,je(M)}}}function We(){return document.querySelectorAll('input[type="checkbox"].select-word'),Me(o=>!0)}function Me(o){const e=document.querySelectorAll('input[type="checkbox"].select-word');if(!e)return 0;let s=0;return e.forEach(r=>{r.checked&&o(r)&&(s+=1)}),s}function el(o,e,s){let r,{key:l="words"}=e,t=St(l);t=Ue(t);let i=!1,d="",u="",k,p,m;m=new URLSearchParams(window.location.search).get("word"),m&&Ze(parseInt(m),l);function h(){let n=We()===0;const g=document.querySelectorAll('input[type="checkbox"].select-word');if(!g)return 0;console.log("selecting with action=%i",n);let I=0;g.forEach(C=>{C.checked=n,I+=1}),I!==0&&s(4,i=n)}async function D(){const n=We();if(n===0||!window.confirm(n===1?"Delete word?":`Delete ${n} words?`))return!1;const g=Me(I=>{var C,F;if(I.dataset.id){const J=Number(I.dataset.id);if(!Number.isNaN(J))if(et(t,J)){const se=I.parentElement;se&&((C=se.parentElement)==null||C.removeChild(se));const pe=document.getElementById(`${l}-hr-${J}`);return pe&&((F=pe.parentElement)==null||F.removeChild(pe)),!0}else console.log(`delete for ${J} failed`)}return!1});return await Dt(),g>0&&(he(t),s(1,t)),!0}function S(){We()===0?k.forEach(n=>{var I;const g=(I=document.getElementById(`${l}-${n.id}`))==null?void 0:I.querySelector("details");g&&(g.open=!0)}):Me(n=>{var I;const g=(I=n.parentElement)==null?void 0:I.querySelector("details");return g?(g.open=!0,!0):!1})}function O(){We()===0?k.forEach(n=>{var I;const g=(I=document.getElementById(`${l}-${n.id}`))==null?void 0:I.querySelector("details");g&&(g.open=!1)}):Me(n=>{var I;const g=(I=n.parentElement)==null?void 0:I.querySelector("details");return g?(g.open=!1,!0):!1})}function V(n){if(console.log(n),n.key!=l||!n.word||!n.word.word)return;let g=n.word.word.trim().toLowerCase(),I=t.words.find(J=>{var se;return((se=J.cache)==null?void 0:se.word)===g}),C=t.words.find(J=>J.id===n.word.id),F=ge(l,n.word.id);C!=null&&I!=null?(console.log(`original: %o
dup: %o`,C,I),console.log("duplicate word"),F&&(console.log("resetting to "+F.title),F.innerHTML=F.title,C.word=F.title)):At(t,n.word.id,n.word.word)?(s(1,t=Ue(t)),F&&(F.title=n.word.word),console.log("updated list: %o",t.words),he(t),s(1,t),Ze(n.word.id,l)):console.log("word update failed: %o",n.word)}function R(n){if(n.key!=l||!n.word.def)return;let g=Le(n.word.def.trim());Nt(t,n.word.id,g)?he(t):console.log("definition update failed")}function x(n){function g(I,C){return I.tags=C.tags,I.cache=xe(I),!0}n.key==l&&(Oe(t,n.word,g),he(t),s(1,t))}function q(n){function g(I,C){return I.favorite=C.favorite,!0}n.key==l&&(Oe(t,n.word,g),he(t),s(1,t))}function T(n){function g(I,C){return I.dict_def=C.dict_def,!0}n.key==l&&Wt.default.lookup(n.word.word).then(I=>{I?n.word.dict_def=I:s(7,p=`'${n.word.word}' has no dictionary definition`)}).finally(()=>{n.word.cache=xe(n.word),Oe(t,n.word,g),he(t),s(1,t)})}function $(n){n.key==l&&(et(t,n.word.id)?(he(t),s(1,t)):console.log("remove word failed"))}function B(n){n.key==l&&(s(1,t.sort_by=n.sort_by,t),s(1,t.sort_order=n.sort_order,t),Ue(t),he(t))}function Q(n){n.key==l&&s(2,d=n.search.toLowerCase())}const X=n=>{Q(n.detail)};function re(){i=this.checked,s(4,i)}const b=n=>B(n.detail),M=n=>V(n.detail),W=n=>R(n.detail),A=n=>$(n.detail),ie=n=>x(n.detail),P=n=>q(n.detail),L=n=>T(n.detail);function _(n){p=n,s(7,p)}return o.$$set=n=>{"key"in n&&s(0,l=n.key)},o.$$.update=()=>{o.$$.dirty[0]&4&&s(3,r=d.split(" ").filter(n=>n.length>0)),o.$$.dirty[0]&4&&s(5,u=d===""?"":"full-defs"),o.$$.dirty[0]&10&&s(6,k=t.words.filter(n=>qt(r,n)))},[l,t,d,r,i,u,k,p,h,D,S,O,V,R,x,q,T,$,B,Q,X,re,b,M,W,A,ie,P,L,_]}class tl extends we{constructor(e){super(),be(this,e,el,xt,ke,{key:0},null,[-1,-1])}}function ll(o){let e,s,r,l,t;return e=new Bt({props:{current:"list"}}),l=new tl({props:{key:"words"}}),{c(){de(e.$$.fragment),s=j(),r=v("div"),de(l.$$.fragment),this.h()},l(i){fe(e.$$.fragment,i),s=H(i),r=w(i,"DIV",{class:!0});var d=E(r);fe(l.$$.fragment,d),d.forEach(c),this.h()},h(){a(r,"class","list-vocab-container")},m(i,d){ue(e,i,d),Y(i,s,d),Y(i,r,d),ue(l,r,null),t=!0},p:_e,i(i){t||(K(e.$$.fragment,i),K(l.$$.fragment,i),t=!0)},o(i){Z(e.$$.fragment,i),Z(l.$$.fragment,i),t=!1},d(i){ce(e,i),i&&c(s),i&&c(r),ce(l)}}}class al extends we{constructor(e){super(),be(this,e,null,ll,ke,{})}}export{al as default};
