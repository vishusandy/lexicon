import{S as ve,i as ge,s as be,k as b,q as le,a as F,l as k,m as E,r as re,h as c,c as U,n as a,K as bt,b as j,G as d,T as Xe,M as V,N as _t,B as ae,P as Me,Q as Ce,U as kt,V as wt,W as Ze,u as He,I as Re,J as ht,w as ue,x as de,y as ce,f as z,g as we,t as Z,d as ye,O as pt,z as _e,o as mt,j as yt,R as Et,L as $e,e as he,X as Tt,Y as At,Z as It,A as Dt}from"../../../chunks/index-71376991.js";import{b as St}from"../../../chunks/paths-b4419565.js";import{S as Se,e as Be,f as Fe,r as Le,l as Nt,b as Ue,s as xe,c as fe,g as Ve,h as Lt,i as Wt,j as Oe,A as Mt,n as et,k as tt}from"../../../chunks/words-56918134.js";import{T as Ht,e as vt,D as qt,a as Pt}from"../../../chunks/DictDef-781ec808.js";function Bt(o){let e,t,r,l,s,i,u,f,v,m,h,g,S,L,H,C,R,q;return{c(){e=b("div"),t=b("form"),r=b("select"),l=b("option"),s=le("Word"),u=b("option"),f=le("Date"),h=F(),g=b("input"),L=F(),H=b("label"),this.h()},l(D){e=k(D,"DIV",{class:!0});var M=E(e);t=k(M,"FORM",{});var O=E(t);r=k(O,"SELECT",{id:!0,title:!0,class:!0});var P=E(r);l=k(P,"OPTION",{});var J=E(l);s=re(J,"Word"),J.forEach(c),u=k(P,"OPTION",{});var X=E(u);f=re(X,"Date"),X.forEach(c),P.forEach(c),h=U(O),g=k(O,"INPUT",{id:!0,type:!0,title:!0,class:!0}),L=U(O),H=k(O,"LABEL",{for:!0,class:!0,title:!0}),E(H).forEach(c),O.forEach(c),M.forEach(c),this.h()},h(){l.__value="word",l.value=l.__value,l.selected=i=o[0]==Se.Word,u.__value="id",u.value=u.__value,u.selected=v=o[0]==Se.Id,a(r,"id",m=o[1]+"-sort-by"),a(r,"title","Sort by"),a(r,"class","svelte-x4vm2d"),o[0]===void 0&&bt(()=>o[7].call(r)),a(g,"id",S=o[1]+"-sort-order"),a(g,"type","checkbox"),a(g,"title",o[3]),a(g,"class","sort-checkbox form-check-input svelte-x4vm2d"),a(H,"for",C=o[1]+"-sort-order"),a(H,"class","sort-checkbox-label form-check-label svelte-x4vm2d"),a(H,"title",o[3]),a(e,"class","sort-container svelte-x4vm2d")},m(D,M){j(D,e,M),d(e,t),d(t,r),d(r,l),d(l,s),d(r,u),d(u,f),Xe(r,o[0]),d(t,h),d(t,g),g.checked=o[2],d(t,L),d(t,H),R||(q=[V(r,"change",o[7]),V(r,"change",o[4]),V(g,"change",o[8]),V(g,"change",o[4]),V(t,"submit",_t(o[6]))],R=!0)},p(D,[M]){M&1&&i!==(i=D[0]==Se.Word)&&(l.selected=i),M&1&&v!==(v=D[0]==Se.Id)&&(u.selected=v),M&2&&m!==(m=D[1]+"-sort-by")&&a(r,"id",m),M&1&&Xe(r,D[0]),M&2&&S!==(S=D[1]+"-sort-order")&&a(g,"id",S),M&8&&a(g,"title",D[3]),M&4&&(g.checked=D[2]),M&2&&C!==(C=D[1]+"-sort-order")&&a(H,"for",C),M&8&&a(H,"title",D[3])},i:ae,o:ae,d(D){D&&c(e),R=!1,Me(q)}}}function Ft(o,e,t){const r=Ce();let{key:l}=e,{sort_by:s}=e,{sort_order:i}=e,u,f=i===Be.Desc;function v(S){r("updateSort",{sort_by:s,sort_order:i,key:l})}function m(S){kt.call(this,o,S)}function h(){s=wt(this),t(0,s)}function g(){f=this.checked,t(2,f)}return o.$$set=S=>{"key"in S&&t(1,l=S.key),"sort_by"in S&&t(0,s=S.sort_by),"sort_order"in S&&t(5,i=S.sort_order)},o.$$.update=()=>{o.$$.dirty&4&&t(5,i=f?Be.Desc:Be.Asc),o.$$.dirty&4&&t(3,u=f?"Descending sort order":"Ascending sort order")},[s,l,f,u,v,i,m,h,g]}class Ut extends ve{constructor(e){super(),ge(this,e,Ft,Bt,be,{key:1,sort_by:0,sort_order:5})}}function Vt(o){let e,t,r,l,s,i,u,f,v,m;return{c(){e=b("button"),t=b("span"),r=le(o[1]),l=F(),s=b("audio"),i=b("a"),u=le("Audio"),this.h()},l(h){e=k(h,"BUTTON",{class:!0});var g=E(e);t=k(g,"SPAN",{class:!0});var S=E(t);r=re(S,o[1]),S.forEach(c),l=U(g),s=k(g,"AUDIO",{src:!0});var L=E(s);i=k(L,"A",{href:!0});var H=E(i);u=re(H,"Audio"),H.forEach(c),L.forEach(c),g.forEach(c),this.h()},h(){a(t,"class","phonetics svelte-1owj048"),a(i,"href",o[0]),Ze(s.src,f=o[0])||a(s,"src",f),a(e,"class","svelte-1owj048")},m(h,g){j(h,e,g),d(e,t),d(t,r),d(e,l),d(e,s),d(s,i),d(i,u),v||(m=V(e,"click",Ot),v=!0)},p(h,[g]){g&2&&He(r,h[1]),g&1&&a(i,"href",h[0]),g&1&&!Ze(s.src,f=h[0])&&a(s,"src",f)},i:ae,o:ae,d(h){h&&c(e),v=!1,m()}}}function Ot(o){var t;const e=(t=o.target)==null?void 0:t.querySelector("audio");e&&e.play()}function Ct(o,e,t){let{src:r}=e,{title:l=""}=e;return o.$$set=s=>{"src"in s&&t(0,r=s.src),"title"in s&&t(1,l=s.title)},[r,l]}class Rt extends ve{constructor(e){super(),ge(this,e,Ct,Vt,be,{src:0,title:1})}}function lt(o,e,t){const r=o.slice();return r[24]=e[t],r}function rt(o){let e,t,r=o[0].dict_def.audio,l=[];for(let i=0;i<r.length;i+=1)l[i]=st(lt(o,r,i));const s=i=>Z(l[i],1,1,()=>{l[i]=null});return{c(){e=b("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var u=E(e);for(let f=0;f<l.length;f+=1)l[f].l(u);u.forEach(c),this.h()},h(){a(e,"class","audio-entries svelte-1ueo1y0")},m(i,u){j(i,e,u);for(let f=0;f<l.length;f+=1)l[f].m(e,null);t=!0},p(i,u){if(u&1){r=i[0].dict_def.audio;let f;for(f=0;f<r.length;f+=1){const v=lt(i,r,f);l[f]?(l[f].p(v,u),z(l[f],1)):(l[f]=st(v),l[f].c(),z(l[f],1),l[f].m(e,null))}for(we(),f=r.length;f<l.length;f+=1)s(f);ye()}},i(i){if(!t){for(let u=0;u<r.length;u+=1)z(l[u]);t=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)Z(l[u]);t=!1},d(i){i&&c(e),Et(l,i)}}}function st(o){let e,t;return e=new Rt({props:{src:o[24].url,title:o[24].phonetics}}),{c(){ue(e.$$.fragment)},l(r){de(e.$$.fragment,r)},m(r,l){ce(e,r,l),t=!0},p(r,l){const s={};l&1&&(s.src=r[24].url),l&1&&(s.title=r[24].phonetics),e.$set(s)},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){Z(e.$$.fragment,r),t=!1},d(r){_e(e,r)}}}function ot(o){let e,t;return e=new qt({props:{dict:o[0].dict_def}}),{c(){ue(e.$$.fragment)},l(r){de(e.$$.fragment,r)},m(r,l){ce(e,r,l),t=!0},p(r,l){const s={};l&1&&(s.dict=r[0].dict_def),e.$set(s)},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){Z(e.$$.fragment,r),t=!1},d(r){_e(e,r)}}}function it(o){let e=o[0].def+"",t;return{c(){t=le(e)},l(r){t=re(r,e)},m(r,l){j(r,t,l)},p(r,l){l&1&&e!==(e=r[0].def+"")&&He(t,e)},d(r){r&&c(t)}}}function jt(o){let e,t,r,l,s,i,u,f,v,m,h,g,S,L,H,C,R,q,D,M,O,P,J=o[0].word+"",X,te,oe,p,B,T,N,_,w,K,n,A,I,Q,x,se,pe,me,ie,qe,Ee,Te,ee,Pe,je,Y=o[0].dict_def&&o[0].dict_def.audio.length>0&&rt(o),G=o[0].dict_def&&ot(o),$=o[0].def&&it(o);function gt(y){o[17](y)}let ze={key:o[1]};return o[0].tags!==void 0&&(ze.tags=o[0].tags),ie=new Ht({props:ze}),Re.push(()=>ht(ie,"tags",gt,o[0].tags)),ie.$on("updateTags",o[6]),{c(){e=b("hr"),r=F(),l=b("li"),s=b("input"),u=F(),f=b("button"),v=b("i"),m=F(),h=b("button"),g=b("i"),S=F(),L=b("input"),C=F(),R=b("label"),D=F(),M=b("details"),O=b("summary"),P=b("dfn"),X=le(J),oe=F(),p=b("div"),B=F(),T=b("div"),Y&&Y.c(),N=F(),G&&G.c(),_=F(),w=b("span"),K=le("Notes:"),n=F(),A=b("div"),$&&$.c(),Q=F(),x=b("div"),se=b("span"),pe=le("Tags:"),me=F(),ue(ie.$$.fragment),this.h()},l(y){e=k(y,"HR",{id:!0,class:!0}),r=U(y),l=k(y,"LI",{id:!0,class:!0});var W=E(l);s=k(W,"INPUT",{class:!0,type:!0,"data-id":!0}),u=U(W),f=k(W,"BUTTON",{class:!0});var ke=E(f);v=k(ke,"I",{class:!0}),E(v).forEach(c),ke.forEach(c),m=U(W),h=k(W,"BUTTON",{class:!0,title:!0});var Ke=E(h);g=k(Ke,"I",{class:!0}),E(g).forEach(c),Ke.forEach(c),S=U(W),L=k(W,"INPUT",{id:!0,title:!0,class:!0,type:!0}),C=U(W),R=k(W,"LABEL",{for:!0,class:!0}),E(R).forEach(c),D=U(W),M=k(W,"DETAILS",{class:!0});var Ae=E(M);O=k(Ae,"SUMMARY",{class:!0});var Ie=E(O);P=k(Ie,"DFN",{id:!0,class:!0,contenteditable:!0});var Ye=E(P);X=re(Ye,J),Ye.forEach(c),oe=U(Ie),p=k(Ie,"DIV",{class:!0}),E(p).forEach(c),Ie.forEach(c),B=U(Ae),T=k(Ae,"DIV",{class:!0});var ne=E(T);Y&&Y.l(ne),N=U(ne),G&&G.l(ne),_=U(ne),w=k(ne,"SPAN",{class:!0});var Ge=E(w);K=re(Ge,"Notes:"),Ge.forEach(c),n=U(ne),A=k(ne,"DIV",{id:!0,class:!0,contenteditable:!0});var Je=E(A);$&&$.l(Je),Je.forEach(c),Q=U(ne),x=k(ne,"DIV",{class:!0});var De=E(x);se=k(De,"SPAN",{class:!0});var Qe=E(se);pe=re(Qe,"Tags:"),Qe.forEach(c),me=U(De),de(ie.$$.fragment,De),De.forEach(c),ne.forEach(c),Ae.forEach(c),W.forEach(c),this.h()},h(){a(e,"id",t=o[1]+"-hr-"+o[0].id),a(e,"class","svelte-1ueo1y0"),a(s,"class","select-word svelte-1ueo1y0"),a(s,"type","checkbox"),a(s,"data-id",i=o[0].id),a(v,"class","fa-solid fa-xmark"),a(f,"class","remove-word-btn svelte-1ueo1y0"),a(g,"class","fa-solid fa-arrows-rotate"),a(h,"class","refresh-btn svelte-1ueo1y0"),a(h,"title","Refresh defintion"),a(L,"id",H=o[1]+"-fav-"+o[0].id),a(L,"title","Favorite"),a(L,"class","fav-checkbox svelte-1ueo1y0"),a(L,"type","checkbox"),a(R,"for",q=o[1]+"-fav-"+o[0].id),a(R,"class","fav-label svelte-1ueo1y0"),a(P,"id",te=o[1]+"-word-"+o[0].id),a(P,"class","word svelte-1ueo1y0"),a(P,"contenteditable","true"),a(p,"class","detail-arrow svelte-1ueo1y0"),a(O,"class","svelte-1ueo1y0"),a(w,"class","def-label svelte-1ueo1y0"),a(A,"id",I=o[1]+"-def-"+o[0].id),a(A,"class","word-definition svelte-1ueo1y0"),a(A,"contenteditable","true"),a(se,"class","tags-label svelte-1ueo1y0"),a(x,"class","tag-list svelte-1ueo1y0"),a(T,"class","detail-content svelte-1ueo1y0"),M.open=Ee=Array.isArray(o[2])&&o[2].length>0,a(M,"class","svelte-1ueo1y0"),a(l,"id",Te=o[1]+"-"+o[0].id),a(l,"class","word-item svelte-1ueo1y0")},m(y,W){j(y,e,W),j(y,r,W),j(y,l,W),d(l,s),d(l,u),d(l,f),d(f,v),d(l,m),d(l,h),d(h,g),d(l,S),d(l,L),L.checked=o[0].favorite,d(l,C),d(l,R),d(l,D),d(l,M),d(M,O),d(O,P),d(P,X),d(O,oe),d(O,p),d(M,B),d(M,T),Y&&Y.m(T,null),d(T,N),G&&G.m(T,null),d(T,_),d(T,w),d(w,K),d(T,n),d(T,A),$&&$.m(A,null),d(T,Q),d(T,x),d(x,se),d(se,pe),d(x,me),ce(ie,x,null),ee=!0,Pe||(je=[V(f,"click",o[12]),V(h,"click",o[10]),V(L,"change",o[13]),V(L,"change",o[7]),V(P,"blur",o[14]),V(P,"keydown",o[11]),V(P,"click",zt),V(A,"keydown",vt),V(A,"blur",o[15]),V(A,"focus",o[16])],Pe=!0)},p(y,[W]){(!ee||W&3&&t!==(t=y[1]+"-hr-"+y[0].id))&&a(e,"id",t),(!ee||W&1&&i!==(i=y[0].id))&&a(s,"data-id",i),(!ee||W&3&&H!==(H=y[1]+"-fav-"+y[0].id))&&a(L,"id",H),W&1&&(L.checked=y[0].favorite),(!ee||W&3&&q!==(q=y[1]+"-fav-"+y[0].id))&&a(R,"for",q),(!ee||W&1)&&J!==(J=y[0].word+"")&&He(X,J),(!ee||W&3&&te!==(te=y[1]+"-word-"+y[0].id))&&a(P,"id",te),y[0].dict_def&&y[0].dict_def.audio.length>0?Y?(Y.p(y,W),W&1&&z(Y,1)):(Y=rt(y),Y.c(),z(Y,1),Y.m(T,N)):Y&&(we(),Z(Y,1,1,()=>{Y=null}),ye()),y[0].dict_def?G?(G.p(y,W),W&1&&z(G,1)):(G=ot(y),G.c(),z(G,1),G.m(T,_)):G&&(we(),Z(G,1,1,()=>{G=null}),ye()),y[0].def?$?$.p(y,W):($=it(y),$.c(),$.m(A,null)):$&&($.d(1),$=null),(!ee||W&3&&I!==(I=y[1]+"-def-"+y[0].id))&&a(A,"id",I);const ke={};W&2&&(ke.key=y[1]),!qe&&W&1&&(qe=!0,ke.tags=y[0].tags,pt(()=>qe=!1)),ie.$set(ke),(!ee||W&4&&Ee!==(Ee=Array.isArray(y[2])&&y[2].length>0))&&(M.open=Ee),(!ee||W&3&&Te!==(Te=y[1]+"-"+y[0].id))&&a(l,"id",Te)},i(y){ee||(z(Y),z(G),z(ie.$$.fragment,y),ee=!0)},o(y){Z(Y),Z(G),Z(ie.$$.fragment,y),ee=!1},d(y){y&&c(e),y&&c(r),y&&c(l),Y&&Y.d(),G&&G.d(),$&&$.d(),_e(ie),Pe=!1,Me(je)}}}const zt=o=>{o.preventDefault()};function Kt(o,e,t){const r=Ce();let{key:l}=e,{item:s}=e,{highlight:i}=e;function u(){return l+"-def-"+s.id}function f(){return document.getElementById(l+"-word-"+s.id)}function v(){return document.getElementById(`${l}-${s.id}`)}function m(){return document.getElementById(u())}mt(()=>{const p=f();p&&L(p)}),yt(()=>{R()});function h(){const p=f();if(p){if(t(0,s.word=p.innerHTML,s),p.innerHTML="",s.word==""){S(s)||t(0,s.word=p.title,s);return}p.title!=s.word&&(L(p),r("updateWord",{word:s,key:l}))}}function g(){var B;t(0,s.def=(B=s.def)==null?void 0:B.replaceAll("<br>",""),s);const p=m();p&&(p.innerHTML=p.innerHTML.replaceAll("<br>","")),r("updateDefinition",{word:s,key:l})}function S(p){return window.confirm("Delete word?")?(r("deleteWord",{word:p,key:l}),!0):!1}function L(p){console.log("updating title to %s",s.word),p.title=s.word}function H(){r("updateWordTags",{word:s,key:l})}function C(){r("updateFavorite",{word:s,key:l})}function R(){if(q(),i.length===0)return;const p=m(),B=v(),T=f();T&&(T.innerHTML=Fe(T.innerHTML,i)),p&&(p.innerHTML=Fe(p.innerHTML,i)),B&&(B.querySelectorAll(".pos, .def, .syn, .ant").forEach(N=>N.innerHTML=Fe(N.innerHTML,i)),B.querySelectorAll(".tag").forEach(N=>{var _;i.some(w=>w=="#"+N.innerHTML.toLocaleLowerCase())&&((_=N.parentElement)==null||_.classList.add("highlight-tag"))}))}function q(){const p=m(),B=v(),T=f();T&&(T.innerHTML=Le(T.innerHTML)),p&&(p.innerHTML=Le(p.innerHTML)),B&&B.querySelectorAll(".pos, .def, .syn, .ant").forEach(N=>N.innerHTML=Le(N.innerHTML))}function D(){var B;const p=(B=v())==null?void 0:B.querySelector("details");p&&(p.open=!0),r("refreshWord",{word:s,key:l})}function M(p){const B=p.target;if(p.code=="Escape"&&B){B.innerHTML=B.title,B.blur();return}vt(p)}const O=()=>S(s);function P(){s.favorite=this.checked,t(0,s)}const J=()=>h(),X=()=>{g(),R()},te=()=>q();function oe(p){o.$$.not_equal(s.tags,p)&&(s.tags=p,t(0,s))}return o.$$set=p=>{"key"in p&&t(1,l=p.key),"item"in p&&t(0,s=p.item),"highlight"in p&&t(2,i=p.highlight)},[s,l,i,h,g,S,H,C,R,q,D,M,O,P,J,X,te,oe]}class Yt extends ve{constructor(e){super(),ge(this,e,Kt,jt,be,{key:1,item:0,highlight:2})}}function nt(o){let e,t,r,l;return{c(){e=b("button"),t=b("i"),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var i=E(e);t=k(i,"I",{class:!0}),E(t).forEach(c),i.forEach(c),this.h()},h(){a(t,"class","fa-solid fa-x"),a(e,"class","reset-btn svelte-8w6wqe")},m(s,i){j(s,e,i),d(e,t),r||(l=V(e,"click",o[3]),r=!0)},p:ae,d(s){s&&c(e),r=!1,l()}}}function Gt(o){let e,t,r,l,s,i,u,f,v,m=o[0]&&nt(o);return{c(){e=b("div"),t=b("form"),r=b("div"),l=b("i"),s=F(),i=b("input"),u=F(),m&&m.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var g=E(e);t=k(g,"FORM",{});var S=E(t);r=k(S,"DIV",{class:!0});var L=E(r);l=k(L,"I",{class:!0}),E(l).forEach(c),L.forEach(c),s=U(S),i=k(S,"INPUT",{placeholder:!0,class:!0}),u=U(S),m&&m.l(S),S.forEach(c),g.forEach(c),this.h()},h(){a(l,"class","fa-solid fa-magnifying-glass"),a(r,"class","search-icon svelte-8w6wqe"),a(i,"placeholder","filter"),a(i,"class","search-input form-control svelte-8w6wqe"),a(e,"class","search-container svelte-8w6wqe")},m(h,g){j(h,e,g),d(e,t),d(t,r),d(r,l),d(t,s),d(t,i),$e(i,o[0]),d(t,u),m&&m.m(t,null),f||(v=[V(i,"input",o[5]),V(i,"input",o[1]),V(i,"keydown",o[2]),V(t,"submit",_t(o[1]))],f=!0)},p(h,[g]){g&1&&i.value!==h[0]&&$e(i,h[0]),h[0]?m?m.p(h,g):(m=nt(h),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i:ae,o:ae,d(h){h&&c(e),m&&m.d(),f=!1,Me(v)}}}function Jt(o,e,t){const r=Ce();let{key:l}=e,s;function i(m){r("updateFilter",{search:s,key:l})}function u(m){Pt(m)&&(t(0,s=""),r("updateFilter",{search:s,key:l}))}function f(m){t(0,s=""),r("updateFilter",{search:s,key:l})}function v(){s=this.value,t(0,s)}return o.$$set=m=>{"key"in m&&t(4,l=m.key)},[s,i,u,f,l,v]}class Qt extends ve{constructor(e){super(),ge(this,e,Jt,Gt,be,{key:4})}}function at(o){let e,t;return{c(){e=b("div"),t=le(o[0]),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=E(e);t=re(l,o[0]),l.forEach(c),this.h()},h(){a(e,"class","alert-box svelte-9zlq1k")},m(r,l){j(r,e,l),d(e,t),o[3](e)},p(r,l){l&1&&He(t,r[0])},d(r){r&&c(e),o[3](null)}}}function Xt(o){let e,t=o[0]&&at(o);return{c(){t&&t.c(),e=he()},l(r){t&&t.l(r),e=he()},m(r,l){t&&t.m(r,l),j(r,e,l)},p(r,[l]){r[0]?t?t.p(r,l):(t=at(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ae,o:ae,d(r){t&&t.d(r),r&&c(e)}}}function Zt(o,e,t){let{message:r}=e,{remove_time:l=4e3}=e,s,i,u;mt(()=>{i=setTimeout(f,l),u=setTimeout(v,l+1500)}),Tt(()=>{i&&clearTimeout(i),u&&clearTimeout(u)});function f(){t(1,s.style.opacity="0",s)}function v(){var h;t(0,r=void 0),(h=s.parentNode)==null||h.removeChild(s)}function m(h){Re[h?"unshift":"push"](()=>{s=h,t(1,s)})}return o.$$set=h=>{"message"in h&&t(0,r=h.message),"remove_time"in h&&t(2,l=h.remove_time)},[r,s,l,m]}class $t extends ve{constructor(e){super(),ge(this,e,Zt,Xt,be,{message:0,remove_time:2})}}function ft(o,e,t){const r=o.slice();return r[31]=e[t],r}function ut(o){let e;function t(s,i){return s[1]?el:xt}let r=t(o),l=r(o);return{c(){l.c(),e=he()},l(s){l.l(s),e=he()},m(s,i){l.m(s,i),j(s,e,i)},p(s,i){r!==(r=t(s))&&(l.d(1),l=r(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){l.d(s),s&&c(e)}}}function xt(o){let e,t;return{c(){e=b("p"),t=le("No words have been added")},l(r){e=k(r,"P",{});var l=E(e);t=re(l,"No words have been added"),l.forEach(c)},m(r,l){j(r,e,l),d(e,t)},d(r){r&&c(e)}}}function el(o){let e,t;return{c(){e=b("p"),t=le("No matching words")},l(r){e=k(r,"P",{});var l=E(e);t=re(l,"No matching words"),l.forEach(c)},m(r,l){j(r,e,l),d(e,t)},d(r){r&&c(e)}}}function dt(o,e){let t,r,l;return r=new Yt({props:{key:e[0],item:e[31],highlight:e[6]}}),r.$on("updateWord",e[23]),r.$on("updateDefinition",e[24]),r.$on("deleteWord",e[25]),r.$on("updateWordTags",e[26]),r.$on("updateFavorite",e[27]),r.$on("refreshWord",e[28]),{key:o,first:null,c(){t=he(),ue(r.$$.fragment),this.h()},l(s){t=he(),de(r.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){j(s,t,i),ce(r,s,i),l=!0},p(s,i){e=s;const u={};i[0]&1&&(u.key=e[0]),i[0]&68&&(u.item=e[31]),i[0]&64&&(u.highlight=e[6]),r.$set(u)},i(s){l||(z(r.$$.fragment,s),l=!0)},o(s){Z(r.$$.fragment,s),l=!1},d(s){s&&c(t),_e(r,s)}}}function ct(o){let e,t,r;function l(i){o[29](i)}let s={};return o[5]!==void 0&&(s.message=o[5]),e=new $t({props:s}),Re.push(()=>ht(e,"message",l,o[5])),{c(){ue(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,u){ce(e,i,u),r=!0},p(i,u){const f={};!t&&u[0]&32&&(t=!0,f.message=i[5],pt(()=>t=!1)),e.$set(f)},i(i){r||(z(e.$$.fragment,i),r=!0)},o(i){Z(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function tl(o){let e,t,r,l,s,i,u,f,v,m,h,g,S,L,H,C,R,q,D=[],M=new Map,O,P,J,X,te,oe;t=new Qt({props:{key:o[0]}}),t.$on("updateFilter",o[19]),C=new Ut({props:{key:o[0],sort_by:o[2].sort_by,sort_order:o[2].sort_order}}),C.$on("updateSort",o[21]);let p=o[2].words.filter(o[22]);const B=_=>_[31].id;for(let _=0;_<p.length;_+=1){let w=ft(o,p,_),K=B(w);M.set(K,D[_]=dt(K,w))}let T=null;p.length||(T=ut(o));let N=o[5]&&ct(o);return{c(){e=b("div"),ue(t.$$.fragment),r=F(),l=b("div"),s=b("div"),i=b("div"),u=b("input"),f=F(),v=b("div"),m=b("button"),h=F(),g=b("button"),S=F(),L=b("button"),H=F(),ue(C.$$.fragment),R=F(),q=b("ul");for(let _=0;_<D.length;_+=1)D[_].c();T&&T.c(),P=F(),N&&N.c(),J=he(),this.h()},l(_){e=k(_,"DIV",{class:!0});var w=E(e);de(t.$$.fragment,w),r=U(w),l=k(w,"DIV",{class:!0});var K=E(l);s=k(K,"DIV",{class:!0});var n=E(s);i=k(n,"DIV",{class:!0});var A=E(i);u=k(A,"INPUT",{type:!0,class:!0}),f=U(A),v=k(A,"DIV",{class:!0});var I=E(v);m=k(I,"BUTTON",{class:!0,title:!0}),E(m).forEach(c),h=U(I),g=k(I,"BUTTON",{class:!0,title:!0}),E(g).forEach(c),S=U(I),L=k(I,"BUTTON",{class:!0,title:!0}),E(L).forEach(c),I.forEach(c),A.forEach(c),n.forEach(c),H=U(K),de(C.$$.fragment,K),K.forEach(c),w.forEach(c),R=U(_),q=k(_,"UL",{class:!0});var Q=E(q);for(let x=0;x<D.length;x+=1)D[x].l(Q);T&&T.l(Q),Q.forEach(c),P=U(_),N&&N.l(_),J=he(),this.h()},h(){a(u,"type","checkbox"),a(u,"class","select-checkbox"),a(m,"class","show-btn svelte-12bp5vi"),a(m,"title","Show selected"),a(g,"class","hide-btn svelte-12bp5vi"),a(g,"title","Hide selected"),a(L,"class","del-btn svelte-12bp5vi"),a(L,"title","Delete selected"),a(v,"class","select-group svelte-12bp5vi"),a(i,"class","select-options"),a(s,"class","show-hide svelte-12bp5vi"),a(l,"class","options-bar svelte-12bp5vi"),a(e,"class","sticky-search-bar list-group-item svelte-12bp5vi"),a(q,"class",O="word-group "+o[4]+" svelte-12bp5vi")},m(_,w){j(_,e,w),ce(t,e,null),d(e,r),d(e,l),d(l,s),d(s,i),d(i,u),u.checked=o[3],d(i,f),d(i,v),d(v,m),d(v,h),d(v,g),d(v,S),d(v,L),d(l,H),ce(C,l,null),j(_,R,w),j(_,q,w);for(let K=0;K<D.length;K+=1)D[K].m(q,null);T&&T.m(q,null),j(_,P,w),N&&N.m(_,w),j(_,J,w),X=!0,te||(oe=[V(u,"change",o[20]),V(u,"change",o[7]),V(m,"click",o[9]),V(g,"click",o[10]),V(L,"click",o[8])],te=!0)},p(_,w){const K={};w[0]&1&&(K.key=_[0]),t.$set(K),w[0]&8&&(u.checked=_[3]);const n={};w[0]&1&&(n.key=_[0]),w[0]&4&&(n.sort_by=_[2].sort_by),w[0]&4&&(n.sort_order=_[2].sort_order),C.$set(n),w[0]&129095&&(p=_[2].words.filter(_[22]),we(),D=At(D,w,B,1,_,p,M,q,It,dt,null,ft),ye(),!p.length&&T?T.p(_,w):p.length?T&&(T.d(1),T=null):(T=ut(_),T.c(),T.m(q,null))),(!X||w[0]&16&&O!==(O="word-group "+_[4]+" svelte-12bp5vi"))&&a(q,"class",O),_[5]?N?(N.p(_,w),w[0]&32&&z(N,1)):(N=ct(_),N.c(),z(N,1),N.m(J.parentNode,J)):N&&(we(),Z(N,1,1,()=>{N=null}),ye())},i(_){if(!X){z(t.$$.fragment,_),z(C.$$.fragment,_);for(let w=0;w<p.length;w+=1)z(D[w]);z(N),X=!0}},o(_){Z(t.$$.fragment,_),Z(C.$$.fragment,_);for(let w=0;w<D.length;w+=1)Z(D[w]);Z(N),X=!1},d(_){_&&c(e),_e(t),_e(C),_&&c(R),_&&c(q);for(let w=0;w<D.length;w+=1)D[w].d();T&&T.d(),_&&c(P),N&&N.d(_),_&&c(J),te=!1,Me(oe)}}}function Ne(){return document.querySelectorAll('input[type="checkbox"].select-word'),We(o=>!0)}function We(o){const e=document.querySelectorAll('input[type="checkbox"].select-word');if(!e)return 0;let t=0;return e.forEach(r=>{r.checked&&o(r)&&(t+=1)}),t}function ll(o,e,t){let r,{key:l="words"}=e,s=Nt(l);s=Ue(s);let i=!1,u="",f="",v,m;m=new URLSearchParams(window.location.search).get("word"),m&&xe(parseInt(m),l);function h(){let n=Ne()===0;const A=document.querySelectorAll('input[type="checkbox"].select-word');if(!A)return 0;console.log("selecting with action=%i",n);let I=0;A.forEach(Q=>{Q.checked=n,I+=1}),I!==0&&t(3,i=n)}async function g(){const n=Ne();if(n===0||!window.confirm(n===1?"Delete word?":`Delete ${n} words?`))return!1;const A=We(I=>{var Q,x;if(I.dataset.id){const se=Number(I.dataset.id);if(!Number.isNaN(se))if(tt(s,se)){const pe=I.parentElement;pe&&((Q=pe.parentElement)==null||Q.removeChild(pe));const me=document.getElementById(`${l}-hr-${se}`);return me&&((x=me.parentElement)==null||x.removeChild(me)),!0}else console.log(`delete for ${se} failed`)}return!1});return await Dt(),A>0&&(fe(s),t(2,s)),!0}function S(){Ne()===0?s.words.filter(n=>Ve(r,n)).forEach(n=>{var I;const A=(I=document.getElementById(`${l}-${n.id}`))==null?void 0:I.querySelector("details");A&&(A.open=!0)}):We(n=>{var I;const A=(I=n.parentElement)==null?void 0:I.querySelector("details");return A?(A.open=!0,!0):!1})}function L(){Ne()===0?s.words.filter(n=>Ve(r,n)).forEach(n=>{var I;const A=(I=document.getElementById(`${l}-${n.id}`))==null?void 0:I.querySelector("details");A&&(A.open=!1)}):We(n=>{var I;const A=(I=n.parentElement)==null?void 0:I.querySelector("details");return A?(A.open=!1,!0):!1})}function H(n){console.log(n),n.key==l&&(n.word&&Lt(s,n.word.id,n.word.word)?(t(2,s=Ue(s)),console.log("updated list: %o",s.words),fe(s),t(2,s),xe(n.word.id,l)):console.log("word update failed: %o",n.word))}function C(n){if(n.key!=l||!n.word.def)return;let A=Le(n.word.def.trim());Wt(s,n.word.id,A)?fe(s):console.log("definition update failed")}function R(n){function A(I,Q){return I.tags=Q.tags,I.cache=et(I),!0}n.key==l&&(Oe(s,n.word,A),fe(s),t(2,s))}function q(n){function A(I,Q){return I.favorite=Q.favorite,!0}n.key==l&&(Oe(s,n.word,A),fe(s),t(2,s))}function D(n){function A(I,Q){return I.dict_def=Q.dict_def,!0}n.key==l&&Mt.default.lookup(n.word.word).then(I=>{I?n.word.dict_def=I:t(5,v=`'${n.word.word}' has no dictionary definition`)}).finally(()=>{n.word.cache=et(n.word),Oe(s,n.word,A),fe(s),t(2,s)})}function M(n){n.key==l&&(tt(s,n.word.id)?(fe(s),t(2,s)):console.log("remove word failed"))}function O(n){n.key==l&&(t(2,s.sort_by=n.sort_by,s),t(2,s.sort_order=n.sort_order,s),Ue(s),fe(s))}function P(n){n.key==l&&t(1,u=n.search.toLocaleLowerCase())}const J=n=>{P(n.detail)};function X(){i=this.checked,t(3,i)}const te=n=>O(n.detail),oe=n=>Ve(r,n),p=n=>H(n.detail),B=n=>C(n.detail),T=n=>M(n.detail),N=n=>R(n.detail),_=n=>q(n.detail),w=n=>D(n.detail);function K(n){v=n,t(5,v)}return o.$$set=n=>{"key"in n&&t(0,l=n.key)},o.$$.update=()=>{o.$$.dirty[0]&2&&t(6,r=u.split(" ").filter(n=>n.length>0)),o.$$.dirty[0]&2&&t(4,f=u===""?"":"full-defs")},[l,u,s,i,f,v,r,h,g,S,L,H,C,R,q,D,M,O,P,J,X,te,oe,p,B,T,N,_,w,K]}class rl extends ve{constructor(e){super(),ge(this,e,ll,tl,be,{key:0},null,[-1,-1])}}function sl(o){let e,t,r,l,s,i,u;return i=new rl({props:{key:"words"}}),{c(){e=b("nav"),t=b("a"),r=le("Add words"),l=F(),s=b("div"),ue(i.$$.fragment),this.h()},l(f){e=k(f,"NAV",{class:!0});var v=E(e);t=k(v,"A",{href:!0});var m=E(t);r=re(m,"Add words"),m.forEach(c),v.forEach(c),l=U(f),s=k(f,"DIV",{class:!0});var h=E(s);de(i.$$.fragment,h),h.forEach(c),this.h()},h(){a(t,"href",St+"/add"),a(e,"class","main"),a(s,"class","list-vocab-container")},m(f,v){j(f,e,v),d(e,t),d(t,r),j(f,l,v),j(f,s,v),ce(i,s,null),u=!0},p:ae,i(f){u||(z(i.$$.fragment,f),u=!0)},o(f){Z(i.$$.fragment,f),u=!1},d(f){f&&c(e),f&&c(l),f&&c(s),_e(i)}}}class fl extends ve{constructor(e){super(),ge(this,e,null,sl,be,{})}}export{fl as default};
