import{S as be,i as we,s as ke,k as b,q as te,l as w,m as y,r as le,h,n as a,K as gt,b as C,G as u,T as Je,M as V,N as ct,B as _e,P as He,R as Oe,U as bt,V as wt,a as F,c as U,W as Qe,u as ye,I as ht,J as _t,w as de,x as fe,y as ue,f as R,g as Ee,t as x,d as Te,O as pt,z as ce,o as kt,j as yt,Q as Et,L as Xe,e as ge,X as Tt,Y as It,A as Dt}from"../../../chunks/index-d8102d1a.js";import{S as We,e as Pe,g as ve,f as Fe,r as Ne,l as St,b as Ue,s as Ze,h as qt,c as he,i as At,j as Wt,k as Ve,A as Lt,n as xe,o as et}from"../../../chunks/words-2bbd4318.js";import{T as Nt,e as mt,D as Mt,a as Ht}from"../../../chunks/DictDef-c9238ab3.js";import{A as jt}from"../../../chunks/Alert-83fe2429.js";import{N as Bt}from"../../../chunks/Nav-11fb0fa3.js";function Pt(r){let e,o,s,l,t,n,f,d,c,_,m,p,D,I,z,O,K;return{c(){e=b("div"),o=b("form"),s=b("div"),l=b("select"),t=b("option"),n=te("Word"),d=b("option"),c=te("Date"),p=b("input"),I=b("label"),this.h()},l(L){e=w(L,"DIV",{class:!0});var q=y(e);o=w(q,"FORM",{});var W=y(o);s=w(W,"DIV",{class:!0});var Y=y(s);l=w(Y,"SELECT",{id:!0,title:!0,class:!0});var j=y(l);t=w(j,"OPTION",{});var X=y(t);n=le(X,"Word"),X.forEach(h),d=w(j,"OPTION",{});var Z=y(d);c=le(Z,"Date"),Z.forEach(h),j.forEach(h),p=w(Y,"INPUT",{id:!0,type:!0,title:!0,class:!0}),I=w(Y,"LABEL",{for:!0,class:!0,title:!0}),y(I).forEach(h),Y.forEach(h),W.forEach(h),q.forEach(h),this.h()},h(){t.__value="word",t.value=t.__value,t.selected=f=r[0]==We.Word,d.__value="id",d.value=d.__value,d.selected=_=r[0]==We.Id,a(l,"id",m=r[1]+"-sort-by"),a(l,"title","Sort by"),a(l,"class","svelte-syq3i8"),r[0]===void 0&&gt(()=>r[7].call(l)),a(p,"id",D=r[1]+"-sort-order"),a(p,"type","checkbox"),a(p,"title",r[3]),a(p,"class","sort-checkbox form-check-input svelte-syq3i8"),a(I,"for",z=r[1]+"-sort-order"),a(I,"class","sort-checkbox-label form-check-label svelte-syq3i8"),a(I,"title",r[3]),a(s,"class","sort-form-options svelte-syq3i8"),a(e,"class","sort-container")},m(L,q){C(L,e,q),u(e,o),u(o,s),u(s,l),u(l,t),u(t,n),u(l,d),u(d,c),Je(l,r[0]),u(s,p),p.checked=r[2],u(s,I),O||(K=[V(l,"change",r[7]),V(l,"change",r[4]),V(p,"change",r[8]),V(p,"change",r[4]),V(o,"submit",ct(r[6]))],O=!0)},p(L,[q]){q&1&&f!==(f=L[0]==We.Word)&&(t.selected=f),q&1&&_!==(_=L[0]==We.Id)&&(d.selected=_),q&2&&m!==(m=L[1]+"-sort-by")&&a(l,"id",m),q&1&&Je(l,L[0]),q&2&&D!==(D=L[1]+"-sort-order")&&a(p,"id",D),q&8&&a(p,"title",L[3]),q&4&&(p.checked=L[2]),q&2&&z!==(z=L[1]+"-sort-order")&&a(I,"for",z),q&8&&a(I,"title",L[3])},i:_e,o:_e,d(L){L&&h(e),O=!1,He(K)}}}function Ft(r,e,o){const s=Oe();let{key:l}=e,{sort_by:t}=e,{sort_order:n}=e,f,d=n===Pe.Desc;function c(D){s("updateSort",{sort_by:t,sort_order:n,key:l})}function _(D){bt.call(this,r,D)}function m(){t=wt(this),o(0,t)}function p(){d=this.checked,o(2,d)}return r.$$set=D=>{"key"in D&&o(1,l=D.key),"sort_by"in D&&o(0,t=D.sort_by),"sort_order"in D&&o(5,n=D.sort_order)},r.$$.update=()=>{r.$$.dirty&4&&o(5,n=d?Pe.Desc:Pe.Asc),r.$$.dirty&4&&o(3,f=d?"Descending sort order":"Ascending sort order")},[t,l,d,f,c,n,_,m,p]}class Ut extends be{constructor(e){super(),we(this,e,Ft,Pt,ke,{key:1,sort_by:0,sort_order:5})}}function Vt(r){let e,o,s,l,t,n,f,d,c,_;return{c(){e=b("button"),o=b("span"),s=te(r[1]),l=F(),t=b("audio"),n=b("a"),f=te("Audio"),this.h()},l(m){e=w(m,"BUTTON",{class:!0});var p=y(e);o=w(p,"SPAN",{class:!0});var D=y(o);s=le(D,r[1]),D.forEach(h),l=U(p),t=w(p,"AUDIO",{src:!0});var I=y(t);n=w(I,"A",{href:!0});var z=y(n);f=le(z,"Audio"),z.forEach(h),I.forEach(h),p.forEach(h),this.h()},h(){a(o,"class","phonetics svelte-1owj048"),a(n,"href",r[0]),Qe(t.src,d=r[0])||a(t,"src",d),a(e,"class","svelte-1owj048")},m(m,p){C(m,e,p),u(e,o),u(o,s),u(e,l),u(e,t),u(t,n),u(n,f),c||(_=V(e,"click",Ot),c=!0)},p(m,[p]){p&2&&ye(s,m[1]),p&1&&a(n,"href",m[0]),p&1&&!Qe(t.src,d=m[0])&&a(t,"src",d)},i:_e,o:_e,d(m){m&&h(e),c=!1,_()}}}function Ot(r){var o;const e=(o=r.target)==null?void 0:o.querySelector("audio");e&&e.play()}function $t(r,e,o){let{src:s}=e,{title:l=""}=e;return r.$$set=t=>{"src"in t&&o(0,s=t.src),"title"in t&&o(1,l=t.title)},[s,l]}class Ct extends be{constructor(e){super(),we(this,e,$t,Vt,ke,{src:0,title:1})}}function tt(r,e,o){const s=r.slice();return s[23]=e[o],s}function lt(r){let e,o,s=r[0].dict_def.audio,l=[];for(let n=0;n<s.length;n+=1)l[n]=rt(tt(r,s,n));const t=n=>x(l[n],1,1,()=>{l[n]=null});return{c(){e=b("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var f=y(e);for(let d=0;d<l.length;d+=1)l[d].l(f);f.forEach(h),this.h()},h(){a(e,"class","audio-entries svelte-1qj4dd1")},m(n,f){C(n,e,f);for(let d=0;d<l.length;d+=1)l[d].m(e,null);o=!0},p(n,f){if(f&1){s=n[0].dict_def.audio;let d;for(d=0;d<s.length;d+=1){const c=tt(n,s,d);l[d]?(l[d].p(c,f),R(l[d],1)):(l[d]=rt(c),l[d].c(),R(l[d],1),l[d].m(e,null))}for(Ee(),d=s.length;d<l.length;d+=1)t(d);Te()}},i(n){if(!o){for(let f=0;f<s.length;f+=1)R(l[f]);o=!0}},o(n){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)x(l[f]);o=!1},d(n){n&&h(e),Et(l,n)}}}function rt(r){let e,o;return e=new Ct({props:{src:r[23].url,title:r[23].phonetics}}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){ue(e,s,l),o=!0},p(s,l){const t={};l&1&&(t.src=s[23].url),l&1&&(t.title=s[23].phonetics),e.$set(t)},i(s){o||(R(e.$$.fragment,s),o=!0)},o(s){x(e.$$.fragment,s),o=!1},d(s){ce(e,s)}}}function st(r){let e,o;return e=new Mt({props:{dict:r[0].dict_def}}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){ue(e,s,l),o=!0},p(s,l){const t={};l&1&&(t.dict=s[0].dict_def),e.$set(t)},i(s){o||(R(e.$$.fragment,s),o=!0)},o(s){x(e.$$.fragment,s),o=!1},d(s){ce(e,s)}}}function ot(r){let e=r[0].def+"",o;return{c(){o=te(e)},l(s){o=le(s,e)},m(s,l){C(s,o,l)},p(s,l){l&1&&e!==(e=s[0].def+"")&&ye(o,e)},d(s){s&&h(o)}}}function Rt(r){let e,o,s,l,t,n,f,d,c,_,m,p,D,I,z,O,K,L,q,W,Y,j,X=r[0].word+"",Z,re,k,H,N,S,ie,B,M,v,i,g,T,$,P,Q,se,pe,ne,je,Ie,De,oe,Be,$e,G=r[0].dict_def&&r[0].dict_def.audio.length>0&&lt(r),J=r[0].dict_def&&st(r),ee=r[0].def&&ot(r);function vt(E){r[17](E)}let Ce={key:r[1]};return r[0].tags!==void 0&&(Ce.tags=r[0].tags),ne=new Nt({props:Ce}),ht.push(()=>_t(ne,"tags",vt,r[0].tags)),ne.$on("updateTags",r[6]),{c(){e=b("hr"),s=F(),l=b("li"),t=b("input"),f=F(),d=b("button"),c=b("i"),_=F(),m=b("button"),p=b("i"),D=F(),I=b("input"),O=F(),K=b("label"),q=F(),W=b("details"),Y=b("summary"),j=b("dfn"),Z=te(X),k=F(),H=b("div"),N=F(),S=b("div"),G&&G.c(),ie=F(),J&&J.c(),B=F(),M=b("span"),v=te("Notes:"),i=F(),g=b("div"),ee&&ee.c(),$=F(),P=b("div"),Q=b("span"),se=te("Tags:"),pe=F(),de(ne.$$.fragment),this.h()},l(E){e=w(E,"HR",{id:!0,class:!0}),s=U(E),l=w(E,"LI",{id:!0,class:!0});var A=y(l);t=w(A,"INPUT",{class:!0,type:!0,"data-id":!0}),f=U(A),d=w(A,"BUTTON",{class:!0});var me=y(d);c=w(me,"I",{class:!0}),y(c).forEach(h),me.forEach(h),_=U(A),m=w(A,"BUTTON",{class:!0,title:!0});var Re=y(m);p=w(Re,"I",{class:!0}),y(p).forEach(h),Re.forEach(h),D=U(A),I=w(A,"INPUT",{id:!0,title:!0,class:!0,type:!0}),O=U(A),K=w(A,"LABEL",{for:!0,class:!0}),y(K).forEach(h),q=U(A),W=w(A,"DETAILS",{class:!0});var Se=y(W);Y=w(Se,"SUMMARY",{class:!0});var qe=y(Y);j=w(qe,"DFN",{id:!0,class:!0,contenteditable:!0});var Ke=y(j);Z=le(Ke,X),Ke.forEach(h),k=U(qe),H=w(qe,"DIV",{class:!0}),y(H).forEach(h),qe.forEach(h),N=U(Se),S=w(Se,"DIV",{class:!0});var ae=y(S);G&&G.l(ae),ie=U(ae),J&&J.l(ae),B=U(ae),M=w(ae,"SPAN",{class:!0});var Ye=y(M);v=le(Ye,"Notes:"),Ye.forEach(h),i=U(ae),g=w(ae,"DIV",{id:!0,class:!0,contenteditable:!0});var ze=y(g);ee&&ee.l(ze),ze.forEach(h),$=U(ae),P=w(ae,"DIV",{class:!0});var Ae=y(P);Q=w(Ae,"SPAN",{class:!0});var Ge=y(Q);se=le(Ge,"Tags:"),Ge.forEach(h),pe=U(Ae),fe(ne.$$.fragment,Ae),Ae.forEach(h),ae.forEach(h),Se.forEach(h),A.forEach(h),this.h()},h(){a(e,"id",o=r[1]+"-hr-"+r[0].id),a(e,"class","svelte-1qj4dd1"),a(t,"class","select-word svelte-1qj4dd1"),a(t,"type","checkbox"),a(t,"data-id",n=r[0].id),a(c,"class","fa-solid fa-xmark"),a(d,"class","remove-word-btn remove-btn svelte-1qj4dd1"),a(p,"class","fa-solid fa-arrows-rotate"),a(m,"class","refresh-btn svelte-1qj4dd1"),a(m,"title","Refresh defintion"),a(I,"id",z=r[1]+"-fav-"+r[0].id),a(I,"title","Favorite"),a(I,"class","fav-checkbox svelte-1qj4dd1"),a(I,"type","checkbox"),a(K,"for",L=r[1]+"-fav-"+r[0].id),a(K,"class","fav-label svelte-1qj4dd1"),a(j,"id",re=r[1]+"-word-"+r[0].id),a(j,"class","word svelte-1qj4dd1"),a(j,"contenteditable","true"),a(H,"class","detail-arrow svelte-1qj4dd1"),a(Y,"class","svelte-1qj4dd1"),a(M,"class","def-label svelte-1qj4dd1"),a(g,"id",T=r[1]+"-def-"+r[0].id),a(g,"class","word-definition svelte-1qj4dd1"),a(g,"contenteditable","true"),a(Q,"class","tags-label svelte-1qj4dd1"),a(P,"class","tag-list svelte-1qj4dd1"),a(S,"class","detail-content svelte-1qj4dd1"),W.open=Ie=Array.isArray(r[2])&&r[2].length>0,a(W,"class","svelte-1qj4dd1"),a(l,"id",De=r[1]+"-"+r[0].id),a(l,"class","word-item svelte-1qj4dd1")},m(E,A){C(E,e,A),C(E,s,A),C(E,l,A),u(l,t),u(l,f),u(l,d),u(d,c),u(l,_),u(l,m),u(m,p),u(l,D),u(l,I),I.checked=r[0].favorite,u(l,O),u(l,K),u(l,q),u(l,W),u(W,Y),u(Y,j),u(j,Z),u(Y,k),u(Y,H),u(W,N),u(W,S),G&&G.m(S,null),u(S,ie),J&&J.m(S,null),u(S,B),u(S,M),u(M,v),u(S,i),u(S,g),ee&&ee.m(g,null),u(S,$),u(S,P),u(P,Q),u(Q,se),u(P,pe),ue(ne,P,null),oe=!0,Be||($e=[V(d,"click",r[12]),V(m,"click",r[10]),V(I,"change",r[13]),V(I,"change",r[7]),V(j,"blur",r[14]),V(j,"keydown",r[11]),V(j,"click",Kt),V(g,"keydown",mt),V(g,"blur",r[15]),V(g,"focus",r[16])],Be=!0)},p(E,[A]){(!oe||A&3&&o!==(o=E[1]+"-hr-"+E[0].id))&&a(e,"id",o),(!oe||A&1&&n!==(n=E[0].id))&&a(t,"data-id",n),(!oe||A&3&&z!==(z=E[1]+"-fav-"+E[0].id))&&a(I,"id",z),A&1&&(I.checked=E[0].favorite),(!oe||A&3&&L!==(L=E[1]+"-fav-"+E[0].id))&&a(K,"for",L),(!oe||A&1)&&X!==(X=E[0].word+"")&&ye(Z,X),(!oe||A&3&&re!==(re=E[1]+"-word-"+E[0].id))&&a(j,"id",re),E[0].dict_def&&E[0].dict_def.audio.length>0?G?(G.p(E,A),A&1&&R(G,1)):(G=lt(E),G.c(),R(G,1),G.m(S,ie)):G&&(Ee(),x(G,1,1,()=>{G=null}),Te()),E[0].dict_def?J?(J.p(E,A),A&1&&R(J,1)):(J=st(E),J.c(),R(J,1),J.m(S,B)):J&&(Ee(),x(J,1,1,()=>{J=null}),Te()),E[0].def?ee?ee.p(E,A):(ee=ot(E),ee.c(),ee.m(g,null)):ee&&(ee.d(1),ee=null),(!oe||A&3&&T!==(T=E[1]+"-def-"+E[0].id))&&a(g,"id",T);const me={};A&2&&(me.key=E[1]),!je&&A&1&&(je=!0,me.tags=E[0].tags,pt(()=>je=!1)),ne.$set(me),(!oe||A&4&&Ie!==(Ie=Array.isArray(E[2])&&E[2].length>0))&&(W.open=Ie),(!oe||A&3&&De!==(De=E[1]+"-"+E[0].id))&&a(l,"id",De)},i(E){oe||(R(G),R(J),R(ne.$$.fragment,E),oe=!0)},o(E){x(G),x(J),x(ne.$$.fragment,E),oe=!1},d(E){E&&h(e),E&&h(s),E&&h(l),G&&G.d(),J&&J.d(),ee&&ee.d(),ce(ne),Be=!1,He($e)}}}const Kt=r=>{r.preventDefault()};function Yt(r,e,o){const s=Oe();let{key:l}=e,{item:t}=e,{highlight:n}=e;function f(){return l+"-def-"+t.id}function d(){return document.getElementById(`${l}-${t.id}`)}function c(){return document.getElementById(f())}kt(()=>{const k=ve(l,t.id);k&&D(k)}),yt(()=>{const k=ve(l,t.id),H=c();k&&(k.innerHTML=t.word),H&&t.def&&(H.innerHTML=t.def),O()});function _(){const k=ve(l,t.id);if(k){if(o(0,t.word=k.innerHTML,t),t.word==""){p(t)||o(0,t.word=k.title,t);return}k.title!=t.word&&s("updateWord",{word:t,key:l})}}function m(){const k=c();k&&o(0,t.def=k.innerHTML.replaceAll("<br>",""),t),s("updateDefinition",{word:t,key:l})}function p(k){return window.confirm("Delete word?")?(s("deleteWord",{word:k,key:l}),!0):!1}function D(k){k.title=t.word}function I(){s("updateWordTags",{word:t,key:l})}function z(){s("updateFavorite",{word:t,key:l})}function O(){if(K(),n.length===0)return;const k=c(),H=d(),N=ve(l,t.id);N&&(N.innerHTML=Fe(t.word,n)),k&&t.def&&(k.innerHTML=Fe(t.def,n)),H&&(H.querySelectorAll(".pos, .def, .syn, .ant").forEach(S=>S.innerHTML=Fe(S.innerHTML,n)),H.querySelectorAll(".tag").forEach(S=>{var ie;n.some(B=>B=="#"+S.innerHTML.toLowerCase())&&((ie=S.parentElement)==null||ie.classList.add("highlight-tag"))}))}function K(){const k=c(),H=d(),N=ve(l,t.id);N&&(N.innerHTML=Ne(N.innerHTML)),k&&(k.innerHTML=Ne(k.innerHTML)),H&&H.querySelectorAll(".pos, .def, .syn, .ant").forEach(S=>S.innerHTML=Ne(S.innerHTML))}function L(){var H;const k=(H=d())==null?void 0:H.querySelector("details");k&&(k.open=!0),s("refreshWord",{word:t,key:l})}function q(k){const H=k.target;if(k.code=="Escape"&&H){H.innerHTML=H.title,H.blur();return}mt(k)}const W=()=>p(t);function Y(){t.favorite=this.checked,o(0,t)}const j=()=>_(),X=()=>{m(),O()},Z=()=>K();function re(k){r.$$.not_equal(t.tags,k)&&(t.tags=k,o(0,t))}return r.$$set=k=>{"key"in k&&o(1,l=k.key),"item"in k&&o(0,t=k.item),"highlight"in k&&o(2,n=k.highlight)},[t,l,n,_,m,p,I,z,O,K,L,q,W,Y,j,X,Z,re]}class zt extends be{constructor(e){super(),we(this,e,Yt,Rt,ke,{key:1,item:0,highlight:2})}}function it(r){let e,o,s,l;return{c(){e=b("button"),o=b("i"),this.h()},l(t){e=w(t,"BUTTON",{class:!0});var n=y(e);o=w(n,"I",{class:!0}),y(o).forEach(h),n.forEach(h),this.h()},h(){a(o,"class","fa-solid fa-x"),a(e,"class","reset-btn svelte-1t7fbni")},m(t,n){C(t,e,n),u(e,o),s||(l=V(e,"click",r[3]),s=!0)},p:_e,d(t){t&&h(e),s=!1,l()}}}function Gt(r){let e,o,s,l,t,n,f,d,c,_=r[0]&&it(r);return{c(){e=b("div"),o=b("form"),s=b("div"),l=b("i"),t=F(),n=b("input"),f=F(),_&&_.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var p=y(e);o=w(p,"FORM",{});var D=y(o);s=w(D,"DIV",{class:!0});var I=y(s);l=w(I,"I",{class:!0}),y(l).forEach(h),I.forEach(h),t=U(D),n=w(D,"INPUT",{placeholder:!0,class:!0}),f=U(D),_&&_.l(D),D.forEach(h),p.forEach(h),this.h()},h(){a(l,"class","fa-solid fa-magnifying-glass"),a(s,"class","search-icon svelte-1t7fbni"),a(n,"placeholder",""),a(n,"class","search-input form-control svelte-1t7fbni"),n.autofocus=!0,a(e,"class","search-container svelte-1t7fbni")},m(m,p){C(m,e,p),u(e,o),u(o,s),u(s,l),u(o,t),u(o,n),Xe(n,r[0]),u(o,f),_&&_.m(o,null),n.focus(),d||(c=[V(n,"input",r[5]),V(n,"input",r[1]),V(n,"keydown",r[2]),V(o,"submit",ct(r[1]))],d=!0)},p(m,[p]){p&1&&n.value!==m[0]&&Xe(n,m[0]),m[0]?_?_.p(m,p):(_=it(m),_.c(),_.m(o,null)):_&&(_.d(1),_=null)},i:_e,o:_e,d(m){m&&h(e),_&&_.d(),d=!1,He(c)}}}function Jt(r,e,o){const s=Oe();let{key:l}=e,t;function n(_){s("updateFilter",{search:t,key:l})}function f(_){Ht(_)&&(o(0,t=""),s("updateFilter",{search:t,key:l}))}function d(_){o(0,t=""),s("updateFilter",{search:t,key:l})}function c(){t=this.value,o(0,t)}return r.$$set=_=>{"key"in _&&o(4,l=_.key)},[t,n,f,d,l,c]}class Qt extends be{constructor(e){super(),we(this,e,Jt,Gt,ke,{key:4})}}function nt(r,e,o){const s=r.slice();return s[31]=e[o],s}function at(r){let e,o,s,l=r[6].length+"",t,n,f,d=r[1].words.length+"",c,_;return{c(){e=b("div"),o=te("Showing "),s=b("b"),t=te(l),n=te(" out of "),f=b("b"),c=te(d),_=te(" words"),this.h()},l(m){e=w(m,"DIV",{class:!0});var p=y(e);o=le(p,"Showing "),s=w(p,"B",{});var D=y(s);t=le(D,l),D.forEach(h),n=le(p," out of "),f=w(p,"B",{});var I=y(f);c=le(I,d),I.forEach(h),_=le(p," words"),p.forEach(h),this.h()},h(){a(e,"class","filter-count svelte-fv0hy7")},m(m,p){C(m,e,p),u(e,o),u(e,s),u(s,t),u(e,n),u(e,f),u(f,c),u(e,_)},p(m,p){p[0]&64&&l!==(l=m[6].length+"")&&ye(t,l),p[0]&2&&d!==(d=m[1].words.length+"")&&ye(c,d)},d(m){m&&h(e)}}}function dt(r){let e;function o(t,n){return t[2]?Zt:Xt}let s=o(r),l=s(r);return{c(){l.c(),e=ge()},l(t){l.l(t),e=ge()},m(t,n){l.m(t,n),C(t,e,n)},p(t,n){s!==(s=o(t))&&(l.d(1),l=s(t),l&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&h(e)}}}function Xt(r){let e,o;return{c(){e=b("p"),o=te("No words have been added")},l(s){e=w(s,"P",{});var l=y(e);o=le(l,"No words have been added"),l.forEach(h)},m(s,l){C(s,e,l),u(e,o)},d(s){s&&h(e)}}}function Zt(r){let e,o;return{c(){e=b("p"),o=te("No matching words")},l(s){e=w(s,"P",{});var l=y(e);o=le(l,"No matching words"),l.forEach(h)},m(s,l){C(s,e,l),u(e,o)},d(s){s&&h(e)}}}function ft(r,e){let o,s,l;return s=new zt({props:{key:e[0],item:e[31],highlight:e[3]}}),s.$on("updateWord",e[23]),s.$on("updateDefinition",e[24]),s.$on("deleteWord",e[25]),s.$on("updateWordTags",e[26]),s.$on("updateFavorite",e[27]),s.$on("refreshWord",e[28]),{key:r,first:null,c(){o=ge(),de(s.$$.fragment),this.h()},l(t){o=ge(),fe(s.$$.fragment,t),this.h()},h(){this.first=o},m(t,n){C(t,o,n),ue(s,t,n),l=!0},p(t,n){e=t;const f={};n[0]&1&&(f.key=e[0]),n[0]&64&&(f.item=e[31]),n[0]&8&&(f.highlight=e[3]),s.$set(f)},i(t){l||(R(s.$$.fragment,t),l=!0)},o(t){x(s.$$.fragment,t),l=!1},d(t){t&&h(o),ce(s,t)}}}function ut(r){let e,o,s;function l(n){r[29](n)}let t={};return r[7]!==void 0&&(t.message=r[7]),e=new jt({props:t}),ht.push(()=>_t(e,"message",l,r[7])),{c(){de(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,f){ue(e,n,f),s=!0},p(n,f){const d={};!o&&f[0]&128&&(o=!0,d.message=n[7],pt(()=>o=!1)),e.$set(d)},i(n){s||(R(e.$$.fragment,n),s=!0)},o(n){x(e.$$.fragment,n),s=!1},d(n){ce(e,n)}}}function xt(r){let e,o,s,l,t,n,f,d,c,_,m,p,D,I,z,O,K,L,q,W=[],Y=new Map,j,X,Z,re,k,H;o=new Qt({props:{key:r[0]}}),o.$on("updateFilter",r[20]),O=new Ut({props:{key:r[0],sort_by:r[1].sort_by,sort_order:r[1].sort_order}}),O.$on("updateSort",r[22]);let N=r[2]!=""&&at(r),S=r[6];const ie=v=>v[31].id;for(let v=0;v<S.length;v+=1){let i=nt(r,S,v),g=ie(i);Y.set(g,W[v]=ft(g,i))}let B=null;S.length||(B=dt(r));let M=r[7]&&ut(r);return{c(){e=b("div"),de(o.$$.fragment),s=F(),l=b("div"),t=b("div"),n=b("div"),f=b("input"),d=F(),c=b("div"),_=b("button"),m=F(),p=b("button"),D=F(),I=b("button"),z=F(),de(O.$$.fragment),K=F(),N&&N.c(),L=F(),q=b("ul");for(let v=0;v<W.length;v+=1)W[v].c();B&&B.c(),X=F(),M&&M.c(),Z=ge(),this.h()},l(v){e=w(v,"DIV",{class:!0});var i=y(e);fe(o.$$.fragment,i),s=U(i),l=w(i,"DIV",{class:!0});var g=y(l);t=w(g,"DIV",{class:!0});var T=y(t);n=w(T,"DIV",{class:!0});var $=y(n);f=w($,"INPUT",{type:!0,class:!0}),d=U($),c=w($,"DIV",{class:!0});var P=y(c);_=w(P,"BUTTON",{class:!0,title:!0}),y(_).forEach(h),m=U(P),p=w(P,"BUTTON",{class:!0,title:!0}),y(p).forEach(h),D=U(P),I=w(P,"BUTTON",{class:!0,title:!0}),y(I).forEach(h),P.forEach(h),$.forEach(h),T.forEach(h),z=U(g),fe(O.$$.fragment,g),g.forEach(h),K=U(i),N&&N.l(i),i.forEach(h),L=U(v),q=w(v,"UL",{class:!0});var Q=y(q);for(let se=0;se<W.length;se+=1)W[se].l(Q);B&&B.l(Q),Q.forEach(h),X=U(v),M&&M.l(v),Z=ge(),this.h()},h(){a(f,"type","checkbox"),a(f,"class","select-checkbox"),a(_,"class","show-btn svelte-fv0hy7"),a(_,"title","Show selected"),a(p,"class","hide-btn svelte-fv0hy7"),a(p,"title","Hide selected"),a(I,"class","del-btn svelte-fv0hy7"),a(I,"title","Delete selected"),a(c,"class","select-group svelte-fv0hy7"),a(n,"class","select-options"),a(t,"class","show-hide svelte-fv0hy7"),a(l,"class","options-bar svelte-fv0hy7"),a(e,"class","sticky-search-bar list-group-item svelte-fv0hy7"),a(q,"class",j="word-group "+r[5]+" svelte-fv0hy7")},m(v,i){C(v,e,i),ue(o,e,null),u(e,s),u(e,l),u(l,t),u(t,n),u(n,f),f.checked=r[4],u(n,d),u(n,c),u(c,_),u(c,m),u(c,p),u(c,D),u(c,I),u(l,z),ue(O,l,null),u(e,K),N&&N.m(e,null),C(v,L,i),C(v,q,i);for(let g=0;g<W.length;g+=1)W[g].m(q,null);B&&B.m(q,null),C(v,X,i),M&&M.m(v,i),C(v,Z,i),re=!0,k||(H=[V(f,"change",r[21]),V(f,"change",r[8]),V(_,"click",r[10]),V(p,"click",r[11]),V(I,"click",r[9])],k=!0)},p(v,i){const g={};i[0]&1&&(g.key=v[0]),o.$set(g),i[0]&16&&(f.checked=v[4]);const T={};i[0]&1&&(T.key=v[0]),i[0]&2&&(T.sort_by=v[1].sort_by),i[0]&2&&(T.sort_order=v[1].sort_order),O.$set(T),v[2]!=""?N?N.p(v,i):(N=at(v),N.c(),N.m(e,null)):N&&(N.d(1),N=null),i[0]&258125&&(S=v[6],Ee(),W=Tt(W,i,ie,1,v,S,Y,q,It,ft,null,nt),Te(),!S.length&&B?B.p(v,i):S.length?B&&(B.d(1),B=null):(B=dt(v),B.c(),B.m(q,null))),(!re||i[0]&32&&j!==(j="word-group "+v[5]+" svelte-fv0hy7"))&&a(q,"class",j),v[7]?M?(M.p(v,i),i[0]&128&&R(M,1)):(M=ut(v),M.c(),R(M,1),M.m(Z.parentNode,Z)):M&&(Ee(),x(M,1,1,()=>{M=null}),Te())},i(v){if(!re){R(o.$$.fragment,v),R(O.$$.fragment,v);for(let i=0;i<S.length;i+=1)R(W[i]);R(M),re=!0}},o(v){x(o.$$.fragment,v),x(O.$$.fragment,v);for(let i=0;i<W.length;i+=1)x(W[i]);x(M),re=!1},d(v){v&&h(e),ce(o),ce(O),N&&N.d(),v&&h(L),v&&h(q);for(let i=0;i<W.length;i+=1)W[i].d();B&&B.d(),v&&h(X),M&&M.d(v),v&&h(Z),k=!1,He(H)}}}function Le(){return document.querySelectorAll('input[type="checkbox"].select-word'),Me(r=>!0)}function Me(r){const e=document.querySelectorAll('input[type="checkbox"].select-word');if(!e)return 0;let o=0;return e.forEach(s=>{s.checked&&r(s)&&(o+=1)}),o}function el(r,e,o){let s,{key:l="words"}=e,t=St(l);t=Ue(t);let n=!1,f="",d="",c,_,m;m=new URLSearchParams(window.location.search).get("word"),m&&Ze(parseInt(m),l);function p(){let i=Le()===0;const g=document.querySelectorAll('input[type="checkbox"].select-word');if(!g)return 0;console.log("selecting with action=%i",i);let T=0;g.forEach($=>{$.checked=i,T+=1}),T!==0&&o(4,n=i)}async function D(){const i=Le();if(i===0||!window.confirm(i===1?"Delete word?":`Delete ${i} words?`))return!1;const g=Me(T=>{var $,P;if(T.dataset.id){const Q=Number(T.dataset.id);if(!Number.isNaN(Q))if(et(t,Q)){const se=T.parentElement;se&&(($=se.parentElement)==null||$.removeChild(se));const pe=document.getElementById(`${l}-hr-${Q}`);return pe&&((P=pe.parentElement)==null||P.removeChild(pe)),!0}else console.log(`delete for ${Q} failed`)}return!1});return await Dt(),g>0&&(he(t),o(1,t)),!0}function I(){Le()===0?c.forEach(i=>{var T;const g=(T=document.getElementById(`${l}-${i.id}`))==null?void 0:T.querySelector("details");g&&(g.open=!0)}):Me(i=>{var T;const g=(T=i.parentElement)==null?void 0:T.querySelector("details");return g?(g.open=!0,!0):!1})}function z(){Le()===0?c.forEach(i=>{var T;const g=(T=document.getElementById(`${l}-${i.id}`))==null?void 0:T.querySelector("details");g&&(g.open=!1)}):Me(i=>{var T;const g=(T=i.parentElement)==null?void 0:T.querySelector("details");return g?(g.open=!1,!0):!1})}function O(i){if(console.log(i),i.key!=l||!i.word||!i.word.word)return;let g=i.word.word.trim().toLowerCase(),T=t.words.find(Q=>{var se;return((se=Q.cache)==null?void 0:se.word)===g}),$=t.words.find(Q=>Q.id===i.word.id),P=ve(l,i.word.id);$!=null&&T!=null?(console.log(`original: %o
dup: %o`,$,T),console.log("duplicate word"),P&&(console.log("resetting to "+P.title),P.innerHTML=P.title,$.word=P.title)):At(t,i.word.id,i.word.word)?(o(1,t=Ue(t)),P&&(P.title=i.word.word),console.log("updated list: %o",t.words),he(t),o(1,t),Ze(i.word.id,l)):console.log("word update failed: %o",i.word)}function K(i){if(i.key!=l||!i.word.def)return;let g=Ne(i.word.def.trim());Wt(t,i.word.id,g)?he(t):console.log("definition update failed")}function L(i){function g(T,$){return T.tags=$.tags,T.cache=xe(T),!0}i.key==l&&(Ve(t,i.word,g),he(t),o(1,t))}function q(i){function g(T,$){return T.favorite=$.favorite,!0}i.key==l&&(Ve(t,i.word,g),he(t),o(1,t))}function W(i){function g(T,$){return T.dict_def=$.dict_def,!0}i.key==l&&Lt.default.lookup(i.word.word).then(T=>{T?i.word.dict_def=T:o(7,_=`'${i.word.word}' has no dictionary definition`)}).finally(()=>{i.word.cache=xe(i.word),Ve(t,i.word,g),he(t),o(1,t)})}function Y(i){i.key==l&&(et(t,i.word.id)?(he(t),o(1,t)):console.log("remove word failed"))}function j(i){i.key==l&&(o(1,t.sort_by=i.sort_by,t),o(1,t.sort_order=i.sort_order,t),Ue(t),he(t))}function X(i){i.key==l&&o(2,f=i.search.toLowerCase())}const Z=i=>{X(i.detail)};function re(){n=this.checked,o(4,n)}const k=i=>j(i.detail),H=i=>O(i.detail),N=i=>K(i.detail),S=i=>Y(i.detail),ie=i=>L(i.detail),B=i=>q(i.detail),M=i=>W(i.detail);function v(i){_=i,o(7,_)}return r.$$set=i=>{"key"in i&&o(0,l=i.key)},r.$$.update=()=>{r.$$.dirty[0]&4&&o(3,s=f.split(" ").filter(i=>i.length>0)),r.$$.dirty[0]&4&&o(5,d=f===""?"":"full-defs"),r.$$.dirty[0]&10&&o(6,c=t.words.filter(i=>qt(s,i)))},[l,t,f,s,n,d,c,_,p,D,I,z,O,K,L,q,W,Y,j,X,Z,re,k,H,N,S,ie,B,M,v]}class tl extends be{constructor(e){super(),we(this,e,el,xt,ke,{key:0},null,[-1,-1])}}function ll(r){let e,o,s,l,t,n,f,d;return e=new Bt({props:{current:"list"}}),f=new tl({props:{key:"words"}}),{c(){de(e.$$.fragment),o=F(),s=b("h1"),l=te("Word List"),t=F(),n=b("div"),de(f.$$.fragment),this.h()},l(c){fe(e.$$.fragment,c),o=U(c),s=w(c,"H1",{});var _=y(s);l=le(_,"Word List"),_.forEach(h),t=U(c),n=w(c,"DIV",{class:!0});var m=y(n);fe(f.$$.fragment,m),m.forEach(h),this.h()},h(){a(n,"class","list-vocab-container")},m(c,_){ue(e,c,_),C(c,o,_),C(c,s,_),u(s,l),C(c,t,_),C(c,n,_),ue(f,n,null),d=!0},p:_e,i(c){d||(R(e.$$.fragment,c),R(f.$$.fragment,c),d=!0)},o(c){x(e.$$.fragment,c),x(f.$$.fragment,c),d=!1},d(c){ce(e,c),c&&h(o),c&&h(s),c&&h(t),c&&h(n),ce(f)}}}class al extends be{constructor(e){super(),we(this,e,null,ll,ke,{})}}export{al as default};
