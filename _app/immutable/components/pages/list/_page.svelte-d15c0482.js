import{S as ke,i as ye,s as Ee,k as w,q as ee,l as b,m as y,r as te,h as _,n as a,Q as It,b as z,G as u,T as ot,M as $,N as bt,B as me,P as Pe,R as Je,U as Dt,V as St,a as U,c as F,W as it,u as qe,J as kt,K as yt,w as de,x as fe,L as He,y as ue,f as O,g as Ie,t as Q,d as De,O as Et,z as ce,j as Nt,o as At,I as Lt,e as be,X as Wt,Y as Bt,A as Mt}from"../../../chunks/index-e56e8534.js";import{S as Ue,g as Ke,a as Vt,h as we,e as Fe,r as Te,l as Ut,c as Xe,s as nt,i as Ft,d as pe,j as $t,k as jt,n as Ye,A as qt,o as at,p as dt}from"../../../chunks/words-9970dd32.js";import{T as Ht,D as Pt,e as Ot,a as zt}from"../../../chunks/DictDef-8ca2a70c.js";import{A as Rt}from"../../../chunks/Alert-392b790a.js";import{N as Ct}from"../../../chunks/Nav-34f01931.js";function Gt(r){let t,o,s,l,e,n,c,d,v,m,k,p,S,I,H,P,K;return{c(){t=w("div"),o=w("form"),s=w("div"),l=w("select"),e=w("option"),n=ee("Word"),d=w("option"),v=ee("Date"),p=w("input"),I=w("label"),this.h()},l(M){t=b(M,"DIV",{class:!0});var V=y(t);o=b(V,"FORM",{});var q=y(o);s=b(q,"DIV",{class:!0});var B=y(s);l=b(B,"SELECT",{id:!0,title:!0,class:!0});var N=y(l);e=b(N,"OPTION",{});var Y=y(e);n=te(Y,"Word"),Y.forEach(_),d=b(N,"OPTION",{});var Z=y(d);v=te(Z,"Date"),Z.forEach(_),N.forEach(_),p=b(B,"INPUT",{id:!0,type:!0,title:!0,class:!0}),I=b(B,"LABEL",{for:!0,class:!0,title:!0}),y(I).forEach(_),B.forEach(_),q.forEach(_),V.forEach(_),this.h()},h(){e.__value="word",e.value=e.__value,e.selected=c=r[0]==Ue.Word,d.__value="id",d.value=d.__value,d.selected=m=r[0]==Ue.Id,a(l,"id",k=r[1]+"-sort-by"),a(l,"title","Sort by"),a(l,"class","svelte-8gvc2m"),r[0]===void 0&&It(()=>r[7].call(l)),a(p,"id",S=r[1]+"-sort-order"),a(p,"type","checkbox"),a(p,"title",r[3]),a(p,"class","sort-checkbox form-check-input svelte-8gvc2m"),a(I,"for",H=r[1]+"-sort-order"),a(I,"class","sort-checkbox-label form-check-label svelte-8gvc2m"),a(I,"title",r[3]),a(s,"class","sort-form-options svelte-8gvc2m"),a(t,"class","sort-container")},m(M,V){z(M,t,V),u(t,o),u(o,s),u(s,l),u(l,e),u(e,n),u(l,d),u(d,v),ot(l,r[0]),u(s,p),p.checked=r[2],u(s,I),P||(K=[$(l,"change",r[7]),$(l,"change",r[4]),$(p,"change",r[8]),$(p,"change",r[4]),$(o,"submit",bt(r[6]))],P=!0)},p(M,[V]){V&1&&c!==(c=M[0]==Ue.Word)&&(e.selected=c),V&1&&m!==(m=M[0]==Ue.Id)&&(d.selected=m),V&2&&k!==(k=M[1]+"-sort-by")&&a(l,"id",k),V&1&&ot(l,M[0]),V&2&&S!==(S=M[1]+"-sort-order")&&a(p,"id",S),V&8&&a(p,"title",M[3]),V&4&&(p.checked=M[2]),V&2&&H!==(H=M[1]+"-sort-order")&&a(I,"for",H),V&8&&a(I,"title",M[3])},i:me,o:me,d(M){M&&_(t),P=!1,Pe(K)}}}function Kt(r,t,o){const s=Je();let{key:l}=t,{sort_by:e}=t,{sort_order:n}=t,c,d=n===Ke.Desc;function v(S){s("updateSort",{sort_by:e,sort_order:n,key:l})}function m(S){Dt.call(this,r,S)}function k(){e=St(this),o(0,e)}function p(){d=this.checked,o(2,d)}return r.$$set=S=>{"key"in S&&o(1,l=S.key),"sort_by"in S&&o(0,e=S.sort_by),"sort_order"in S&&o(5,n=S.sort_order)},r.$$.update=()=>{r.$$.dirty&4&&o(5,n=d?Ke.Desc:Ke.Asc),r.$$.dirty&4&&o(3,c=d?"Descending sort order":"Ascending sort order")},[e,l,d,c,v,n,m,k,p]}class Xt extends ke{constructor(t){super(),ye(this,t,Kt,Gt,Ee,{key:1,sort_by:0,sort_order:5})}}function Yt(r){let t,o,s,l,e,n,c,d,v,m;return{c(){t=w("button"),o=w("span"),s=ee(r[1]),l=U(),e=w("audio"),n=w("a"),c=ee("Audio"),this.h()},l(k){t=b(k,"BUTTON",{class:!0});var p=y(t);o=b(p,"SPAN",{class:!0});var S=y(o);s=te(S,r[1]),S.forEach(_),l=F(p),e=b(p,"AUDIO",{src:!0});var I=y(e);n=b(I,"A",{href:!0});var H=y(n);c=te(H,"Audio"),H.forEach(_),I.forEach(_),p.forEach(_),this.h()},h(){a(o,"class","phonetics svelte-1owj048"),a(n,"href",r[0]),it(e.src,d=r[0])||a(e,"src",d),a(t,"class","svelte-1owj048")},m(k,p){z(k,t,p),u(t,o),u(o,s),u(t,l),u(t,e),u(e,n),u(n,c),v||(m=$(t,"click",Jt),v=!0)},p(k,[p]){p&2&&qe(s,k[1]),p&1&&a(n,"href",k[0]),p&1&&!it(e.src,d=k[0])&&a(e,"src",d)},i:me,o:me,d(k){k&&_(t),v=!1,m()}}}function Jt(r){var o;const t=(o=r.target)==null?void 0:o.querySelector("audio");t&&t.play()}function Qt(r,t,o){let{src:s}=t,{title:l=""}=t;return r.$$set=e=>{"src"in e&&o(0,s=e.src),"title"in e&&o(1,l=e.title)},[s,l]}class Zt extends ke{constructor(t){super(),ye(this,t,Qt,Yt,Ee,{src:0,title:1})}}function ft(r,t,o){const s=r.slice();return s[28]=t[o],s}function ut(r){let t,o,s=r[0].dict_def.audio,l=[];for(let n=0;n<s.length;n+=1)l[n]=ct(ft(r,s,n));const e=n=>Q(l[n],1,1,()=>{l[n]=null});return{c(){t=w("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=b(n,"DIV",{class:!0});var c=y(t);for(let d=0;d<l.length;d+=1)l[d].l(c);c.forEach(_),this.h()},h(){a(t,"class","audio-entries svelte-d611ru")},m(n,c){z(n,t,c);for(let d=0;d<l.length;d+=1)l[d].m(t,null);o=!0},p(n,c){if(c&1){s=n[0].dict_def.audio;let d;for(d=0;d<s.length;d+=1){const v=ft(n,s,d);l[d]?(l[d].p(v,c),O(l[d],1)):(l[d]=ct(v),l[d].c(),O(l[d],1),l[d].m(t,null))}for(Ie(),d=s.length;d<l.length;d+=1)e(d);De()}},i(n){if(!o){for(let c=0;c<s.length;c+=1)O(l[c]);o=!0}},o(n){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)Q(l[c]);o=!1},d(n){n&&_(t),Lt(l,n)}}}function ct(r){let t,o;return t=new Zt({props:{src:r[28].url,title:r[28].phonetics}}),{c(){de(t.$$.fragment)},l(s){fe(t.$$.fragment,s)},m(s,l){ue(t,s,l),o=!0},p(s,l){const e={};l&1&&(e.src=s[28].url),l&1&&(e.title=s[28].phonetics),t.$set(e)},i(s){o||(O(t.$$.fragment,s),o=!0)},o(s){Q(t.$$.fragment,s),o=!1},d(s){ce(t,s)}}}function ht(r){let t,o;return t=new Pt({props:{dict:r[3],search:r[2]}}),{c(){de(t.$$.fragment)},l(s){fe(t.$$.fragment,s)},m(s,l){ue(t,s,l),o=!0},p(s,l){const e={};l&8&&(e.dict=s[3]),l&4&&(e.search=s[2]),t.$set(e)},i(s){o||(O(t.$$.fragment,s),o=!0)},o(s){Q(t.$$.fragment,s),o=!1},d(s){ce(t,s)}}}function xt(r){let t,o,s,l,e,n,c,d,v,m,k,p,S,I,H,P,K,M,V,q,B,N,Y=r[0].word+"",Z,oe,le,x,ie,R,j,g,D,T,i,f,h,A,W,J,X,ne,re,Se,Oe,he,ve,ze,Re,ae,Ce,Ne,Ae,se,Ge,Qe,C=r[0].dict_def&&r[0].dict_def.audio.length>0&&ut(r),G=r[3]&&ht(r);function Tt(E){r[17](E)}let Ze={key:r[1]};return r[0].tags!==void 0&&(Ze.tags=r[0].tags),ae=new Ht({props:Ze}),kt.push(()=>yt(ae,"tags",Tt,r[0].tags)),ae.$on("updateTags",r[6]),{c(){t=w("hr"),s=U(),l=w("li"),e=w("input"),c=U(),d=w("button"),v=w("i"),m=U(),k=w("button"),p=w("i"),S=U(),I=w("input"),P=U(),K=w("label"),V=U(),q=w("details"),B=w("summary"),N=w("dfn"),Z=ee(Y),le=U(),x=w("div"),ie=U(),R=w("div"),C&&C.c(),j=U(),G&&G.c(),g=U(),D=w("div"),T=w("div"),i=w("button"),f=w("i"),A=U(),W=w("div"),J=w("legend"),X=ee("Notes"),ne=U(),re=w("textarea"),Oe=U(),he=w("div"),ve=w("div"),ze=ee("Tags"),Re=U(),de(ae.$$.fragment),this.h()},l(E){t=b(E,"HR",{id:!0,class:!0}),s=F(E),l=b(E,"LI",{id:!0,class:!0});var L=y(l);e=b(L,"INPUT",{class:!0,type:!0,"data-id":!0}),c=F(L),d=b(L,"BUTTON",{class:!0});var ge=y(d);v=b(ge,"I",{class:!0}),y(v).forEach(_),ge.forEach(_),m=F(L),k=b(L,"BUTTON",{class:!0,title:!0});var xe=y(k);p=b(xe,"I",{class:!0}),y(p).forEach(_),xe.forEach(_),S=F(L),I=b(L,"INPUT",{id:!0,title:!0,class:!0,type:!0}),P=F(L),K=b(L,"LABEL",{for:!0,class:!0}),y(K).forEach(_),V=F(L),q=b(L,"DETAILS",{class:!0});var Le=y(q);B=b(Le,"SUMMARY",{class:!0});var We=y(B);N=b(We,"DFN",{id:!0,class:!0,contenteditable:!0});var et=y(N);Z=te(et,Y),et.forEach(_),le=F(We),x=b(We,"DIV",{class:!0}),y(x).forEach(_),We.forEach(_),ie=F(Le),R=b(Le,"DIV",{class:!0});var _e=y(R);C&&C.l(_e),j=F(_e),G&&G.l(_e),g=F(_e),D=b(_e,"DIV",{class:!0});var Be=y(D);T=b(Be,"DIV",{id:!0,class:!0});var tt=y(T);i=b(tt,"BUTTON",{title:!0,class:!0});var lt=y(i);f=b(lt,"I",{class:!0}),y(f).forEach(_),lt.forEach(_),tt.forEach(_),A=F(Be),W=b(Be,"DIV",{id:!0,class:!0});var Me=y(W);J=b(Me,"LEGEND",{class:!0});var rt=y(J);X=te(rt,"Notes"),rt.forEach(_),ne=F(Me),re=b(Me,"TEXTAREA",{class:!0}),y(re).forEach(_),Me.forEach(_),Be.forEach(_),Oe=F(_e),he=b(_e,"DIV",{class:!0});var Ve=y(he);ve=b(Ve,"DIV",{class:!0});var st=y(ve);ze=te(st,"Tags"),st.forEach(_),Re=F(Ve),fe(ae.$$.fragment,Ve),Ve.forEach(_),_e.forEach(_),Le.forEach(_),L.forEach(_),this.h()},h(){a(t,"id",o=r[1]+"-hr-"+r[0].id),a(t,"class","svelte-d611ru"),a(e,"class","select-word svelte-d611ru"),a(e,"type","checkbox"),a(e,"data-id",n=r[0].id),a(v,"class","fa-solid fa-xmark"),a(d,"class","remove-word-btn remove-btn svelte-d611ru"),a(p,"class","fa-solid fa-arrows-rotate"),a(k,"class","refresh-btn svelte-d611ru"),a(k,"title","Refresh defintion"),a(I,"id",H=r[1]+"-fav-"+r[0].id),a(I,"title","Favorite"),a(I,"class","fav-checkbox svelte-d611ru"),a(I,"type","checkbox"),a(K,"for",M=r[1]+"-fav-"+r[0].id),a(K,"class","fav-label svelte-d611ru"),a(N,"id",oe=r[1]+"-word-"+r[0].id),a(N,"class","word svelte-d611ru"),a(N,"contenteditable","true"),a(x,"class","detail-arrow svelte-d611ru"),a(B,"class","svelte-d611ru"),a(f,"class","fa-solid fa-circle-plus"),a(i,"title","Add Note"),a(i,"class","svelte-d611ru"),a(T,"id",h="note-empty-"+r[1]+"-"+r[0].id),a(T,"class","note-empty hidden svelte-d611ru"),a(J,"class","svelte-d611ru"),a(re,"class","note-text form-control svelte-d611ru"),a(W,"id",Se="note-shown-"+r[1]+"-"+r[0].id),a(W,"class","note-shown hidden svelte-d611ru"),a(D,"class","note-container svelte-d611ru"),a(ve,"class","tags-label svelte-d611ru"),a(he,"class","tag-list svelte-d611ru"),a(R,"class","detail-content svelte-d611ru"),q.open=Ne=Array.isArray(r[2])&&r[2].length>0,a(q,"class","svelte-d611ru"),a(l,"id",Ae=r[1]+"-"+r[0].id),a(l,"class","word-item svelte-d611ru")},m(E,L){z(E,t,L),z(E,s,L),z(E,l,L),u(l,e),u(l,c),u(l,d),u(d,v),u(l,m),u(l,k),u(k,p),u(l,S),u(l,I),I.checked=r[0].favorite,u(l,P),u(l,K),u(l,V),u(l,q),u(q,B),u(B,N),u(N,Z),u(B,le),u(B,x),u(q,ie),u(q,R),C&&C.m(R,null),u(R,j),G&&G.m(R,null),u(R,g),u(R,D),u(D,T),u(T,i),u(i,f),u(D,A),u(D,W),u(W,J),u(J,X),u(W,ne),u(W,re),He(re,r[0].def),u(R,Oe),u(R,he),u(he,ve),u(ve,ze),u(he,Re),ue(ae,he,null),se=!0,Ge||(Qe=[$(d,"click",r[12]),$(k,"click",r[8]),$(I,"change",r[13]),$(I,"change",r[7]),$(N,"blur",r[14]),$(N,"keydown",r[9]),$(N,"click",el),$(i,"click",r[15]),$(re,"input",r[16]),$(re,"input",Vt),$(re,"blur",r[10])],Ge=!0)},p(E,[L]){(!se||L&3&&o!==(o=E[1]+"-hr-"+E[0].id))&&a(t,"id",o),(!se||L&1&&n!==(n=E[0].id))&&a(e,"data-id",n),(!se||L&3&&H!==(H=E[1]+"-fav-"+E[0].id))&&a(I,"id",H),L&1&&(I.checked=E[0].favorite),(!se||L&3&&M!==(M=E[1]+"-fav-"+E[0].id))&&a(K,"for",M),(!se||L&1)&&Y!==(Y=E[0].word+"")&&qe(Z,Y),(!se||L&3&&oe!==(oe=E[1]+"-word-"+E[0].id))&&a(N,"id",oe),E[0].dict_def&&E[0].dict_def.audio.length>0?C?(C.p(E,L),L&1&&O(C,1)):(C=ut(E),C.c(),O(C,1),C.m(R,j)):C&&(Ie(),Q(C,1,1,()=>{C=null}),De()),E[3]?G?(G.p(E,L),L&8&&O(G,1)):(G=ht(E),G.c(),O(G,1),G.m(R,g)):G&&(Ie(),Q(G,1,1,()=>{G=null}),De()),(!se||L&3&&h!==(h="note-empty-"+E[1]+"-"+E[0].id))&&a(T,"id",h),L&1&&He(re,E[0].def),(!se||L&3&&Se!==(Se="note-shown-"+E[1]+"-"+E[0].id))&&a(W,"id",Se);const ge={};L&2&&(ge.key=E[1]),!Ce&&L&1&&(Ce=!0,ge.tags=E[0].tags,Et(()=>Ce=!1)),ae.$set(ge),(!se||L&4&&Ne!==(Ne=Array.isArray(E[2])&&E[2].length>0))&&(q.open=Ne),(!se||L&3&&Ae!==(Ae=E[1]+"-"+E[0].id))&&a(l,"id",Ae)},i(E){se||(O(C),O(G),O(ae.$$.fragment,E),se=!0)},o(E){Q(C),Q(G),Q(ae.$$.fragment,E),se=!1},d(E){E&&_(t),E&&_(s),E&&_(l),C&&C.d(),G&&G.d(),ce(ae),Ge=!1,Pe(Qe)}}}const el=r=>{r.preventDefault()};function tl(r,t,o){const s=Je();let{key:l}=t,{item:e}=t,{highlight:n}=t,c=e.dict_def;Nt(()=>{const g=we(l,e.id),D=S();g&&(g.innerHTML=e.word),D&&e.def&&(D.innerHTML=e.def),d()});function d(){if(v(),n.length===0)return;const g=p(),D=we(l,e.id);D&&(D.innerHTML=Fe(e.word,n)),g&&(g.querySelectorAll(".pos, .def, .syn, .ant").forEach(T=>T.innerHTML=Fe(T.innerHTML,n)),g.querySelectorAll(".tag").forEach(T=>{var i;n.some(f=>f=="#"+T.innerHTML.toLowerCase())&&((i=T.parentElement)==null||i.classList.add("highlight-tag"))}))}function v(){const g=p(),D=we(l,e.id);D&&(D.innerHTML=Te(D.innerHTML)),g&&(g.querySelectorAll(".pos, .def, .syn, .ant").forEach(T=>T.innerHTML=Te(T.innerHTML)),g.querySelectorAll(".tag").forEach(T=>{var i;(i=T.parentElement)==null||i.classList.remove("highlight-tag")}))}function m(g,D){if(!D)return;let T={...D};for(let i of T.parts)i.definition=Fe(Te(i.definition),g),i.part=Fe(Te(i.part),g);return T}function k(){return l+"-def-"+e.id}function p(){return document.getElementById(`${l}-${e.id}`)}function S(){return document.getElementById(k())}At(()=>{N();const g=we(l,e.id);g&&P(g)});function I(){const g=we(l,e.id);if(g){if(o(0,e.word=g.innerHTML,e),e.word==""){H(e)||o(0,e.word=g.title,e);return}g.title!=e.word&&s("updateWord",{word:e,key:l})}}function H(g){return window.confirm("Delete word?")?(s("deleteWord",{word:g,key:l}),!0):!1}function P(g){g.title=e.word}function K(){s("updateWordTags",{word:e,key:l})}function M(){s("updateFavorite",{word:e,key:l})}function V(){var D;const g=(D=p())==null?void 0:D.querySelector("details");g&&(g.open=!0),s("refreshWord",{word:e,key:l})}function q(g){const D=g.target;if(g.code=="Escape"&&D){D.innerHTML=D.title,D.blur();return}Ot(g)}function B(){e.def===""&&o(0,e.def=void 0,e),N(),s("updateDefinition",{word:e,key:l})}function N(){e.def!==void 0&&e.def!==""?Y(!1):Z()}function Y(g){const D=document.getElementById(`note-empty-${l}-${e.id}`),T=document.getElementById(`note-shown-${l}-${e.id}`);if(D?D.classList.add("hidden"):console.log(`could not find: note-empty-${l}-${e.id}`),T&&(T.classList.remove("hidden"),g)){const i=T.querySelector("textarea");i&&i.focus()}}function Z(){const g=document.getElementById(`note-empty-${l}-${e.id}`),D=document.getElementById(`note-shown-${l}-${e.id}`);g&&g.classList.remove("hidden"),D&&D.classList.add("hidden")}const oe=()=>H(e);function le(){e.favorite=this.checked,o(0,e)}const x=()=>I(),ie=()=>Y(!0);function R(){e.def=this.value,o(0,e)}function j(g){r.$$.not_equal(e.tags,g)&&(e.tags=g,o(0,e))}return r.$$set=g=>{"key"in g&&o(1,l=g.key),"item"in g&&o(0,e=g.item),"highlight"in g&&o(2,n=g.highlight)},r.$$.update=()=>{r.$$.dirty&5&&o(3,c=m(n,e.dict_def))},[e,l,n,c,I,H,K,M,V,q,B,Y,oe,le,x,ie,R,j]}class ll extends ke{constructor(t){super(),ye(this,t,tl,xt,Ee,{key:1,item:0,highlight:2})}}function _t(r){let t,o,s,l;return{c(){t=w("button"),o=w("i"),this.h()},l(e){t=b(e,"BUTTON",{class:!0});var n=y(t);o=b(n,"I",{class:!0}),y(o).forEach(_),n.forEach(_),this.h()},h(){a(o,"class","fa-solid fa-x"),a(t,"class","reset-btn svelte-12xrue")},m(e,n){z(e,t,n),u(t,o),s||(l=$(t,"click",r[3]),s=!0)},p:me,d(e){e&&_(t),s=!1,l()}}}function rl(r){let t,o,s,l,e,n,c,d,v,m=r[0]&&_t(r);return{c(){t=w("div"),o=w("form"),s=w("div"),l=w("i"),e=U(),n=w("input"),c=U(),m&&m.c(),this.h()},l(k){t=b(k,"DIV",{class:!0});var p=y(t);o=b(p,"FORM",{});var S=y(o);s=b(S,"DIV",{class:!0});var I=y(s);l=b(I,"I",{class:!0}),y(l).forEach(_),I.forEach(_),e=F(S),n=b(S,"INPUT",{placeholder:!0,class:!0,type:!0}),c=F(S),m&&m.l(S),S.forEach(_),p.forEach(_),this.h()},h(){a(l,"class","fa-solid fa-magnifying-glass"),a(s,"class","search-icon svelte-12xrue"),a(n,"placeholder",""),a(n,"class","search-input form-control svelte-12xrue"),a(n,"type","text"),a(t,"class","search-container svelte-12xrue")},m(k,p){z(k,t,p),u(t,o),u(o,s),u(s,l),u(o,e),u(o,n),He(n,r[0]),u(o,c),m&&m.m(o,null),d||(v=[$(n,"input",r[5]),$(n,"input",r[1]),$(n,"keydown",r[2]),$(o,"submit",bt(r[1]))],d=!0)},p(k,[p]){p&1&&n.value!==k[0]&&He(n,k[0]),k[0]?m?m.p(k,p):(m=_t(k),m.c(),m.m(o,null)):m&&(m.d(1),m=null)},i:me,o:me,d(k){k&&_(t),m&&m.d(),d=!1,Pe(v)}}}function sl(r,t,o){const s=Je();let{key:l}=t,e;function n(m){s("updateFilter",{search:e,key:l})}function c(m){zt(m)&&(o(0,e=""),s("updateFilter",{search:e,key:l}))}function d(m){o(0,e=""),s("updateFilter",{search:e,key:l})}function v(){e=this.value,o(0,e)}return r.$$set=m=>{"key"in m&&o(4,l=m.key)},[e,n,c,d,l,v]}class ol extends ke{constructor(t){super(),ye(this,t,sl,rl,Ee,{key:4})}}function pt(r,t,o){const s=r.slice();return s[31]=t[o],s}function mt(r){let t,o,s,l=r[6].length+"",e,n,c,d=r[1].words.length+"",v,m;return{c(){t=w("div"),o=ee("Showing "),s=w("b"),e=ee(l),n=ee(" out of "),c=w("b"),v=ee(d),m=ee(" words"),this.h()},l(k){t=b(k,"DIV",{class:!0});var p=y(t);o=te(p,"Showing "),s=b(p,"B",{});var S=y(s);e=te(S,l),S.forEach(_),n=te(p," out of "),c=b(p,"B",{});var I=y(c);v=te(I,d),I.forEach(_),m=te(p," words"),p.forEach(_),this.h()},h(){a(t,"class","filter-count svelte-1xj2szh")},m(k,p){z(k,t,p),u(t,o),u(t,s),u(s,e),u(t,n),u(t,c),u(c,v),u(t,m)},p(k,p){p[0]&64&&l!==(l=k[6].length+"")&&qe(e,l),p[0]&2&&d!==(d=k[1].words.length+"")&&qe(v,d)},d(k){k&&_(t)}}}function vt(r){let t;function o(e,n){return e[2]?nl:il}let s=o(r),l=s(r);return{c(){l.c(),t=be()},l(e){l.l(e),t=be()},m(e,n){l.m(e,n),z(e,t,n)},p(e,n){s!==(s=o(e))&&(l.d(1),l=s(e),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&_(t)}}}function il(r){let t,o;return{c(){t=w("p"),o=ee("No words have been added")},l(s){t=b(s,"P",{});var l=y(t);o=te(l,"No words have been added"),l.forEach(_)},m(s,l){z(s,t,l),u(t,o)},d(s){s&&_(t)}}}function nl(r){let t,o;return{c(){t=w("p"),o=ee("No matching words")},l(s){t=b(s,"P",{});var l=y(t);o=te(l,"No matching words"),l.forEach(_)},m(s,l){z(s,t,l),u(t,o)},d(s){s&&_(t)}}}function gt(r,t){let o,s,l;return s=new ll({props:{key:t[0],item:t[31],highlight:t[3]}}),s.$on("updateWord",t[23]),s.$on("updateDefinition",t[24]),s.$on("deleteWord",t[25]),s.$on("updateWordTags",t[26]),s.$on("updateFavorite",t[27]),s.$on("refreshWord",t[28]),{key:r,first:null,c(){o=be(),de(s.$$.fragment),this.h()},l(e){o=be(),fe(s.$$.fragment,e),this.h()},h(){this.first=o},m(e,n){z(e,o,n),ue(s,e,n),l=!0},p(e,n){t=e;const c={};n[0]&1&&(c.key=t[0]),n[0]&64&&(c.item=t[31]),n[0]&8&&(c.highlight=t[3]),s.$set(c)},i(e){l||(O(s.$$.fragment,e),l=!0)},o(e){Q(s.$$.fragment,e),l=!1},d(e){e&&_(o),ce(s,e)}}}function wt(r){let t,o,s;function l(n){r[29](n)}let e={};return r[7]!==void 0&&(e.message=r[7]),t=new Rt({props:e}),kt.push(()=>yt(t,"message",l,r[7])),{c(){de(t.$$.fragment)},l(n){fe(t.$$.fragment,n)},m(n,c){ue(t,n,c),s=!0},p(n,c){const d={};!o&&c[0]&128&&(o=!0,d.message=n[7],Et(()=>o=!1)),t.$set(d)},i(n){s||(O(t.$$.fragment,n),s=!0)},o(n){Q(t.$$.fragment,n),s=!1},d(n){ce(t,n)}}}function al(r){let t,o,s,l,e,n,c,d,v,m,k,p,S,I,H,P,K,M,V,q,B,N=[],Y=new Map,Z,oe,le,x,ie,R;s=new ol({props:{key:r[0]}}),s.$on("updateFilter",r[20]),P=new Xt({props:{key:r[0],sort_by:r[1].sort_by,sort_order:r[1].sort_order}}),P.$on("updateSort",r[22]);let j=r[2]!=""&&mt(r),g=r[6];const D=f=>f[31].id;for(let f=0;f<g.length;f+=1){let h=pt(r,g,f),A=D(h);Y.set(A,N[f]=gt(A,h))}let T=null;g.length||(T=vt(r));let i=r[7]&&wt(r);return{c(){t=w("div"),o=w("div"),de(s.$$.fragment),l=U(),e=w("div"),n=w("div"),c=w("div"),d=w("input"),v=U(),m=w("button"),k=U(),p=w("button"),S=U(),I=w("button"),H=U(),de(P.$$.fragment),K=U(),j&&j.c(),M=U(),V=w("div"),q=U(),B=w("ul");for(let f=0;f<N.length;f+=1)N[f].c();T&&T.c(),oe=U(),i&&i.c(),le=be(),this.h()},l(f){t=b(f,"DIV",{class:!0});var h=y(t);o=b(h,"DIV",{class:!0});var A=y(o);fe(s.$$.fragment,A),l=F(A),e=b(A,"DIV",{class:!0});var W=y(e);n=b(W,"DIV",{class:!0});var J=y(n);c=b(J,"DIV",{class:!0});var X=y(c);d=b(X,"INPUT",{type:!0,class:!0}),v=F(X),m=b(X,"BUTTON",{class:!0,title:!0}),y(m).forEach(_),k=F(X),p=b(X,"BUTTON",{class:!0,title:!0}),y(p).forEach(_),S=F(X),I=b(X,"BUTTON",{class:!0,title:!0}),y(I).forEach(_),X.forEach(_),J.forEach(_),H=F(W),fe(P.$$.fragment,W),W.forEach(_),K=F(A),j&&j.l(A),A.forEach(_),M=F(h),V=b(h,"DIV",{class:!0}),y(V).forEach(_),h.forEach(_),q=F(f),B=b(f,"UL",{class:!0});var ne=y(B);for(let re=0;re<N.length;re+=1)N[re].l(ne);T&&T.l(ne),ne.forEach(_),oe=F(f),i&&i.l(f),le=be(),this.h()},h(){a(d,"type","checkbox"),a(d,"class","select-checkbox svelte-1xj2szh"),a(m,"class","show-btn svelte-1xj2szh"),a(m,"title","Show selected"),a(p,"class","hide-btn svelte-1xj2szh"),a(p,"title","Hide selected"),a(I,"class","del-btn svelte-1xj2szh"),a(I,"title","Delete selected"),a(c,"class","select-options svelte-1xj2szh"),a(n,"class","show-hide svelte-1xj2szh"),a(e,"class","options-bar svelte-1xj2szh"),a(o,"class","sticky-container svelte-1xj2szh"),a(V,"class","sticky-fade svelte-1xj2szh"),a(t,"class","sticky-search-bar list-group-item svelte-1xj2szh"),a(B,"class",Z="word-group "+r[5]+" svelte-1xj2szh")},m(f,h){z(f,t,h),u(t,o),ue(s,o,null),u(o,l),u(o,e),u(e,n),u(n,c),u(c,d),d.checked=r[4],u(c,v),u(c,m),u(c,k),u(c,p),u(c,S),u(c,I),u(e,H),ue(P,e,null),u(o,K),j&&j.m(o,null),u(t,M),u(t,V),z(f,q,h),z(f,B,h);for(let A=0;A<N.length;A+=1)N[A].m(B,null);T&&T.m(B,null),z(f,oe,h),i&&i.m(f,h),z(f,le,h),x=!0,ie||(R=[$(d,"change",r[21]),$(d,"change",r[8]),$(m,"click",r[10]),$(p,"click",r[11]),$(I,"click",r[9])],ie=!0)},p(f,h){const A={};h[0]&1&&(A.key=f[0]),s.$set(A),h[0]&16&&(d.checked=f[4]);const W={};h[0]&1&&(W.key=f[0]),h[0]&2&&(W.sort_by=f[1].sort_by),h[0]&2&&(W.sort_order=f[1].sort_order),P.$set(W),f[2]!=""?j?j.p(f,h):(j=mt(f),j.c(),j.m(o,null)):j&&(j.d(1),j=null),h[0]&258125&&(g=f[6],Ie(),N=Wt(N,h,D,1,f,g,Y,B,Bt,gt,null,pt),De(),!g.length&&T?T.p(f,h):g.length?T&&(T.d(1),T=null):(T=vt(f),T.c(),T.m(B,null))),(!x||h[0]&32&&Z!==(Z="word-group "+f[5]+" svelte-1xj2szh"))&&a(B,"class",Z),f[7]?i?(i.p(f,h),h[0]&128&&O(i,1)):(i=wt(f),i.c(),O(i,1),i.m(le.parentNode,le)):i&&(Ie(),Q(i,1,1,()=>{i=null}),De())},i(f){if(!x){O(s.$$.fragment,f),O(P.$$.fragment,f);for(let h=0;h<g.length;h+=1)O(N[h]);O(i),x=!0}},o(f){Q(s.$$.fragment,f),Q(P.$$.fragment,f);for(let h=0;h<N.length;h+=1)Q(N[h]);Q(i),x=!1},d(f){f&&_(t),ce(s),ce(P),j&&j.d(),f&&_(q),f&&_(B);for(let h=0;h<N.length;h+=1)N[h].d();T&&T.d(),f&&_(oe),i&&i.d(f),f&&_(le),ie=!1,Pe(R)}}}function $e(){return document.querySelectorAll('input[type="checkbox"].select-word'),je(r=>!0)}function je(r){const t=document.querySelectorAll('input[type="checkbox"].select-word');if(!t)return 0;let o=0;return t.forEach(s=>{s.checked&&r(s)&&(o+=1)}),o}function dl(r,t,o){let s,{key:l="words"}=t,e=Ut(l);e=Xe(e);let n=!1,c="",d="",v,m,k;k=new URLSearchParams(window.location.search).get("word"),k&&nt(parseInt(k),l);function p(){let i=$e()===0;const f=document.querySelectorAll('input[type="checkbox"].select-word');if(!f)return 0;console.log("selecting with action=%i",i);let h=0;f.forEach(A=>{A.checked=i,h+=1}),h!==0&&o(4,n=i)}async function S(){const i=$e();if(i===0||!window.confirm(i===1?"Delete word?":`Delete ${i} words?`))return!1;const f=je(h=>{var A,W;if(h.dataset.id){const J=Number(h.dataset.id);if(!Number.isNaN(J))if(dt(e,J)){const X=h.parentElement;X&&((A=X.parentElement)==null||A.removeChild(X));const ne=document.getElementById(`${l}-hr-${J}`);return ne&&((W=ne.parentElement)==null||W.removeChild(ne)),!0}else console.log(`delete for ${J} failed`)}return!1});return await Mt(),f>0&&(pe(e),o(1,e)),!0}function I(){$e()===0?v.forEach(i=>{var h;const f=(h=document.getElementById(`${l}-${i.id}`))==null?void 0:h.querySelector("details");f&&(f.open=!0)}):je(i=>{var h;const f=(h=i.parentElement)==null?void 0:h.querySelector("details");return f?(f.open=!0,!0):!1})}function H(){$e()===0?v.forEach(i=>{var h;const f=(h=document.getElementById(`${l}-${i.id}`))==null?void 0:h.querySelector("details");f&&(f.open=!1)}):je(i=>{var h;const f=(h=i.parentElement)==null?void 0:h.querySelector("details");return f?(f.open=!1,!0):!1})}function P(i){if(console.log(i),i.key!=l||!i.word||!i.word.word)return;let f=i.word.word.trim().toLowerCase(),h=e.words.find(J=>{var X;return((X=J.cache)==null?void 0:X.word)===f}),A=e.words.find(J=>J.id===i.word.id),W=we(l,i.word.id);A!=null&&h!=null?(console.log(`original: %o
dup: %o`,A,h),console.log("duplicate word"),W&&(console.log("resetting to "+W.title),W.innerHTML=W.title,A.word=W.title)):$t(e,i.word.id,i.word.word)?(o(1,e=Xe(e)),W&&(W.title=i.word.word),console.log("updated list: %o",e.words),pe(e),o(1,e),nt(i.word.id,l)):console.log("word update failed: %o",i.word)}function K(i){if(i.key!=l||!i.word.def)return;let f=Te(i.word.def.trim());jt(e,i.word.id,f)?pe(e):console.log("definition update failed")}function M(i){function f(h,A){return h.tags=[...new Set(A.tags)],h.cache=at(h),!0}i.key==l&&(Ye(e,i.word,f),pe(e),o(1,e))}function V(i){function f(h,A){return h.favorite=A.favorite,!0}i.key==l&&(Ye(e,i.word,f),pe(e),o(1,e))}function q(i){function f(h,A){return h.dict_def=A.dict_def,!0}i.key==l&&qt.default.lookup(i.word.word).then(h=>{h?i.word.dict_def=h:o(7,m=`'${i.word.word}' has no dictionary definition`)}).finally(()=>{i.word.cache=at(i.word),Ye(e,i.word,f),pe(e),o(1,e)})}function B(i){i.key==l&&(dt(e,i.word.id)?(pe(e),o(1,e)):console.log("remove word failed"))}function N(i){i.key==l&&(o(1,e.sort_by=i.sort_by,e),o(1,e.sort_order=i.sort_order,e),Xe(e),pe(e))}function Y(i){i.key==l&&o(2,c=i.search.toLowerCase())}const Z=i=>{Y(i.detail)};function oe(){n=this.checked,o(4,n)}const le=i=>N(i.detail),x=i=>P(i.detail),ie=i=>K(i.detail),R=i=>B(i.detail),j=i=>M(i.detail),g=i=>V(i.detail),D=i=>q(i.detail);function T(i){m=i,o(7,m)}return r.$$set=i=>{"key"in i&&o(0,l=i.key)},r.$$.update=()=>{r.$$.dirty[0]&4&&o(3,s=c.split(" ").filter(i=>i.length>0)),r.$$.dirty[0]&4&&o(5,d=c===""?"":"full-defs"),r.$$.dirty[0]&10&&o(6,v=e.words.filter(i=>Ft(s,i)))},[l,e,c,s,n,d,v,m,p,S,I,H,P,K,M,V,q,B,N,Y,Z,oe,le,x,ie,R,j,g,D,T]}class fl extends ke{constructor(t){super(),ye(this,t,dl,al,Ee,{key:0},null,[-1,-1])}}function ul(r){let t,o,s,l,e,n,c,d;return t=new Ct({props:{current:"list"}}),c=new fl({props:{key:"words"}}),{c(){de(t.$$.fragment),o=U(),s=w("h1"),l=ee("Word List"),e=U(),n=w("div"),de(c.$$.fragment),this.h()},l(v){fe(t.$$.fragment,v),o=F(v),s=b(v,"H1",{});var m=y(s);l=te(m,"Word List"),m.forEach(_),e=F(v),n=b(v,"DIV",{class:!0});var k=y(n);fe(c.$$.fragment,k),k.forEach(_),this.h()},h(){a(n,"class","list-vocab-container")},m(v,m){ue(t,v,m),z(v,o,m),z(v,s,m),u(s,l),z(v,e,m),z(v,n,m),ue(c,n,null),d=!0},p:me,i(v){d||(O(t.$$.fragment,v),O(c.$$.fragment,v),d=!0)},o(v){Q(t.$$.fragment,v),Q(c.$$.fragment,v),d=!1},d(v){ce(t,v),v&&_(o),v&&_(s),v&&_(e),v&&_(n),ce(c)}}}class vl extends ke{constructor(t){super(),ye(this,t,null,ul,Ee,{})}}export{vl as default};
