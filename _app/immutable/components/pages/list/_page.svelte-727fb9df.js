import{S as we,i as be,s as ke,k as b,q as ee,l as k,m as y,r as te,h as c,n as a,K as gt,b as O,G as u,T as Je,M as U,N as ct,B as _e,P as He,R as $e,U as wt,V as bt,a as F,c as P,W as Qe,u as Te,I as ht,J as _t,w as fe,x as de,y as ue,f as C,g as De,t as Z,d as Ie,O as pt,z as ce,o as kt,Q as yt,L as Xe,e as ge,X as Et,Y as Tt,A as Dt}from"../../../chunks/index-d8102d1a.js";import{S as Me,e as Ue,g as Ee,f as ye,r as me,l as It,b as Ve,s as Ze,h as St,c as he,i as Wt,j as At,k as Oe,A as Nt,n as xe,o as et}from"../../../chunks/words-2bbd4318.js";import{T as Lt,e as vt,D as Mt,a as qt}from"../../../chunks/DictDef-74b4507d.js";import{A as Bt}from"../../../chunks/Alert-83fe2429.js";import{N as Ht}from"../../../chunks/Nav-11fb0fa3.js";function Ft(r){let e,o,s,l,t,i,d,f,h,_,m,p,S,T,j,$,z;return{c(){e=b("div"),o=b("form"),s=b("div"),l=b("select"),t=b("option"),i=ee("Word"),f=b("option"),h=ee("Date"),p=b("input"),T=b("label"),this.h()},l(q){e=k(q,"DIV",{class:!0});var A=y(e);o=k(A,"FORM",{});var L=y(o);s=k(L,"DIV",{class:!0});var R=y(s);l=k(R,"SELECT",{id:!0,title:!0,class:!0});var B=y(l);t=k(B,"OPTION",{});var Q=y(t);i=te(Q,"Word"),Q.forEach(c),f=k(B,"OPTION",{});var X=y(f);h=te(X,"Date"),X.forEach(c),B.forEach(c),p=k(R,"INPUT",{id:!0,type:!0,title:!0,class:!0}),T=k(R,"LABEL",{for:!0,class:!0,title:!0}),y(T).forEach(c),R.forEach(c),L.forEach(c),A.forEach(c),this.h()},h(){t.__value="word",t.value=t.__value,t.selected=d=r[0]==Me.Word,f.__value="id",f.value=f.__value,f.selected=_=r[0]==Me.Id,a(l,"id",m=r[1]+"-sort-by"),a(l,"title","Sort by"),a(l,"class","svelte-1aqkt13"),r[0]===void 0&&gt(()=>r[7].call(l)),a(p,"id",S=r[1]+"-sort-order"),a(p,"type","checkbox"),a(p,"title",r[3]),a(p,"class","sort-checkbox form-check-input svelte-1aqkt13"),a(T,"for",j=r[1]+"-sort-order"),a(T,"class","sort-checkbox-label form-check-label svelte-1aqkt13"),a(T,"title",r[3]),a(s,"class","sort-form-options svelte-1aqkt13"),a(e,"class","sort-container")},m(q,A){O(q,e,A),u(e,o),u(o,s),u(s,l),u(l,t),u(t,i),u(l,f),u(f,h),Je(l,r[0]),u(s,p),p.checked=r[2],u(s,T),$||(z=[U(l,"change",r[7]),U(l,"change",r[4]),U(p,"change",r[8]),U(p,"change",r[4]),U(o,"submit",ct(r[6]))],$=!0)},p(q,[A]){A&1&&d!==(d=q[0]==Me.Word)&&(t.selected=d),A&1&&_!==(_=q[0]==Me.Id)&&(f.selected=_),A&2&&m!==(m=q[1]+"-sort-by")&&a(l,"id",m),A&1&&Je(l,q[0]),A&2&&S!==(S=q[1]+"-sort-order")&&a(p,"id",S),A&8&&a(p,"title",q[3]),A&4&&(p.checked=q[2]),A&2&&j!==(j=q[1]+"-sort-order")&&a(T,"for",j),A&8&&a(T,"title",q[3])},i:_e,o:_e,d(q){q&&c(e),$=!1,He(z)}}}function Pt(r,e,o){const s=$e();let{key:l}=e,{sort_by:t}=e,{sort_order:i}=e,d,f=i===Ue.Desc;function h(S){s("updateSort",{sort_by:t,sort_order:i,key:l})}function _(S){wt.call(this,r,S)}function m(){t=bt(this),o(0,t)}function p(){f=this.checked,o(2,f)}return r.$$set=S=>{"key"in S&&o(1,l=S.key),"sort_by"in S&&o(0,t=S.sort_by),"sort_order"in S&&o(5,i=S.sort_order)},r.$$.update=()=>{r.$$.dirty&4&&o(5,i=f?Ue.Desc:Ue.Asc),r.$$.dirty&4&&o(3,d=f?"Descending sort order":"Ascending sort order")},[t,l,f,d,h,i,_,m,p]}class Ut extends we{constructor(e){super(),be(this,e,Pt,Ft,ke,{key:1,sort_by:0,sort_order:5})}}function Vt(r){let e,o,s,l,t,i,d,f,h,_;return{c(){e=b("button"),o=b("span"),s=ee(r[1]),l=F(),t=b("audio"),i=b("a"),d=ee("Audio"),this.h()},l(m){e=k(m,"BUTTON",{class:!0});var p=y(e);o=k(p,"SPAN",{class:!0});var S=y(o);s=te(S,r[1]),S.forEach(c),l=P(p),t=k(p,"AUDIO",{src:!0});var T=y(t);i=k(T,"A",{href:!0});var j=y(i);d=te(j,"Audio"),j.forEach(c),T.forEach(c),p.forEach(c),this.h()},h(){a(o,"class","phonetics svelte-1owj048"),a(i,"href",r[0]),Qe(t.src,f=r[0])||a(t,"src",f),a(e,"class","svelte-1owj048")},m(m,p){O(m,e,p),u(e,o),u(o,s),u(e,l),u(e,t),u(t,i),u(i,d),h||(_=U(e,"click",Ot),h=!0)},p(m,[p]){p&2&&Te(s,m[1]),p&1&&a(i,"href",m[0]),p&1&&!Qe(t.src,f=m[0])&&a(t,"src",f)},i:_e,o:_e,d(m){m&&c(e),h=!1,_()}}}function Ot(r){var o;const e=(o=r.target)==null?void 0:o.querySelector("audio");e&&e.play()}function $t(r,e,o){let{src:s}=e,{title:l=""}=e;return r.$$set=t=>{"src"in t&&o(0,s=t.src),"title"in t&&o(1,l=t.title)},[s,l]}class Ct extends we{constructor(e){super(),be(this,e,$t,Vt,ke,{src:0,title:1})}}function tt(r,e,o){const s=r.slice();return s[25]=e[o],s}function lt(r){let e,o,s=r[0].dict_def.audio,l=[];for(let i=0;i<s.length;i+=1)l[i]=rt(tt(r,s,i));const t=i=>Z(l[i],1,1,()=>{l[i]=null});return{c(){e=b("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var d=y(e);for(let f=0;f<l.length;f+=1)l[f].l(d);d.forEach(c),this.h()},h(){a(e,"class","audio-entries svelte-o7ev8w")},m(i,d){O(i,e,d);for(let f=0;f<l.length;f+=1)l[f].m(e,null);o=!0},p(i,d){if(d&1){s=i[0].dict_def.audio;let f;for(f=0;f<s.length;f+=1){const h=tt(i,s,f);l[f]?(l[f].p(h,d),C(l[f],1)):(l[f]=rt(h),l[f].c(),C(l[f],1),l[f].m(e,null))}for(De(),f=s.length;f<l.length;f+=1)t(f);Ie()}},i(i){if(!o){for(let d=0;d<s.length;d+=1)C(l[d]);o=!0}},o(i){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)Z(l[d]);o=!1},d(i){i&&c(e),yt(l,i)}}}function rt(r){let e,o;return e=new Ct({props:{src:r[25].url,title:r[25].phonetics}}),{c(){fe(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,l){ue(e,s,l),o=!0},p(s,l){const t={};l&1&&(t.src=s[25].url),l&1&&(t.title=s[25].phonetics),e.$set(t)},i(s){o||(C(e.$$.fragment,s),o=!0)},o(s){Z(e.$$.fragment,s),o=!1},d(s){ce(e,s)}}}function st(r){let e,o;return e=new Mt({props:{dict:r[3]}}),{c(){fe(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,l){ue(e,s,l),o=!0},p(s,l){const t={};l&8&&(t.dict=s[3]),e.$set(t)},i(s){o||(C(e.$$.fragment,s),o=!0)},o(s){Z(e.$$.fragment,s),o=!1},d(s){ce(e,s)}}}function ot(r){let e=r[0].def+"",o;return{c(){o=ee(e)},l(s){o=te(s,e)},m(s,l){O(s,o,l)},p(s,l){l&1&&e!==(e=s[0].def+"")&&Te(o,e)},d(s){s&&c(o)}}}function Rt(r){let e,o,s,l,t,i,d,f,h,_,m,p,S,T,j,$,z,q,A,L,R,B,Q=r[0].word+"",X,le,ie,oe,v,D,G,W,M,g,n,w,I,V,H,J,re,pe,ne,Fe,Se,We,se,Pe,Ce,K=r[0].dict_def&&r[0].dict_def.audio.length>0&&lt(r),Y=r[3]&&st(r),x=r[0].def&&ot(r);function mt(E){r[18](E)}let Re={key:r[1]};return r[0].tags!==void 0&&(Re.tags=r[0].tags),ne=new Lt({props:Re}),ht.push(()=>_t(ne,"tags",mt,r[0].tags)),ne.$on("updateTags",r[7]),{c(){e=b("hr"),s=F(),l=b("li"),t=b("input"),d=F(),f=b("button"),h=b("i"),_=F(),m=b("button"),p=b("i"),S=F(),T=b("input"),$=F(),z=b("label"),A=F(),L=b("details"),R=b("summary"),B=b("dfn"),X=ee(Q),ie=F(),oe=b("div"),v=F(),D=b("div"),K&&K.c(),G=F(),Y&&Y.c(),W=F(),M=b("span"),g=ee("Notes:"),n=F(),w=b("div"),x&&x.c(),V=F(),H=b("div"),J=b("div"),re=ee("Tags"),pe=F(),fe(ne.$$.fragment),this.h()},l(E){e=k(E,"HR",{id:!0,class:!0}),s=P(E),l=k(E,"LI",{id:!0,class:!0});var N=y(l);t=k(N,"INPUT",{class:!0,type:!0,"data-id":!0}),d=P(N),f=k(N,"BUTTON",{class:!0});var ve=y(f);h=k(ve,"I",{class:!0}),y(h).forEach(c),ve.forEach(c),_=P(N),m=k(N,"BUTTON",{class:!0,title:!0});var je=y(m);p=k(je,"I",{class:!0}),y(p).forEach(c),je.forEach(c),S=P(N),T=k(N,"INPUT",{id:!0,title:!0,class:!0,type:!0}),$=P(N),z=k(N,"LABEL",{for:!0,class:!0}),y(z).forEach(c),A=P(N),L=k(N,"DETAILS",{class:!0});var Ae=y(L);R=k(Ae,"SUMMARY",{class:!0});var Ne=y(R);B=k(Ne,"DFN",{id:!0,class:!0,contenteditable:!0});var Ke=y(B);X=te(Ke,Q),Ke.forEach(c),ie=P(Ne),oe=k(Ne,"DIV",{class:!0}),y(oe).forEach(c),Ne.forEach(c),v=P(Ae),D=k(Ae,"DIV",{class:!0});var ae=y(D);K&&K.l(ae),G=P(ae),Y&&Y.l(ae),W=P(ae),M=k(ae,"SPAN",{class:!0});var Ye=y(M);g=te(Ye,"Notes:"),Ye.forEach(c),n=P(ae),w=k(ae,"DIV",{id:!0,class:!0,contenteditable:!0});var ze=y(w);x&&x.l(ze),ze.forEach(c),V=P(ae),H=k(ae,"DIV",{class:!0});var Le=y(H);J=k(Le,"DIV",{class:!0});var Ge=y(J);re=te(Ge,"Tags"),Ge.forEach(c),pe=P(Le),de(ne.$$.fragment,Le),Le.forEach(c),ae.forEach(c),Ae.forEach(c),N.forEach(c),this.h()},h(){a(e,"id",o=r[1]+"-hr-"+r[0].id),a(e,"class","svelte-o7ev8w"),a(t,"class","select-word svelte-o7ev8w"),a(t,"type","checkbox"),a(t,"data-id",i=r[0].id),a(h,"class","fa-solid fa-xmark"),a(f,"class","remove-word-btn remove-btn svelte-o7ev8w"),a(p,"class","fa-solid fa-arrows-rotate"),a(m,"class","refresh-btn svelte-o7ev8w"),a(m,"title","Refresh defintion"),a(T,"id",j=r[1]+"-fav-"+r[0].id),a(T,"title","Favorite"),a(T,"class","fav-checkbox svelte-o7ev8w"),a(T,"type","checkbox"),a(z,"for",q=r[1]+"-fav-"+r[0].id),a(z,"class","fav-label svelte-o7ev8w"),a(B,"id",le=r[1]+"-word-"+r[0].id),a(B,"class","word svelte-o7ev8w"),a(B,"contenteditable","true"),a(oe,"class","detail-arrow svelte-o7ev8w"),a(R,"class","svelte-o7ev8w"),a(M,"class","def-label svelte-o7ev8w"),a(w,"id",I=r[1]+"-def-"+r[0].id),a(w,"class","word-definition svelte-o7ev8w"),a(w,"contenteditable","true"),a(J,"class","tags-label svelte-o7ev8w"),a(H,"class","tag-list svelte-o7ev8w"),a(D,"class","detail-content svelte-o7ev8w"),L.open=Se=Array.isArray(r[2])&&r[2].length>0,a(L,"class","svelte-o7ev8w"),a(l,"id",We=r[1]+"-"+r[0].id),a(l,"class","word-item svelte-o7ev8w")},m(E,N){O(E,e,N),O(E,s,N),O(E,l,N),u(l,t),u(l,d),u(l,f),u(f,h),u(l,_),u(l,m),u(m,p),u(l,S),u(l,T),T.checked=r[0].favorite,u(l,$),u(l,z),u(l,A),u(l,L),u(L,R),u(R,B),u(B,X),u(R,ie),u(R,oe),u(L,v),u(L,D),K&&K.m(D,null),u(D,G),Y&&Y.m(D,null),u(D,W),u(D,M),u(M,g),u(D,n),u(D,w),x&&x.m(w,null),u(D,V),u(D,H),u(H,J),u(J,re),u(H,pe),ue(ne,H,null),se=!0,Pe||(Ce=[U(f,"click",r[13]),U(m,"click",r[11]),U(T,"change",r[14]),U(T,"change",r[8]),U(B,"blur",r[15]),U(B,"keydown",r[12]),U(B,"click",jt),U(w,"keydown",vt),U(w,"blur",r[16]),U(w,"focus",r[17])],Pe=!0)},p(E,[N]){(!se||N&3&&o!==(o=E[1]+"-hr-"+E[0].id))&&a(e,"id",o),(!se||N&1&&i!==(i=E[0].id))&&a(t,"data-id",i),(!se||N&3&&j!==(j=E[1]+"-fav-"+E[0].id))&&a(T,"id",j),N&1&&(T.checked=E[0].favorite),(!se||N&3&&q!==(q=E[1]+"-fav-"+E[0].id))&&a(z,"for",q),(!se||N&1)&&Q!==(Q=E[0].word+"")&&Te(X,Q),(!se||N&3&&le!==(le=E[1]+"-word-"+E[0].id))&&a(B,"id",le),E[0].dict_def&&E[0].dict_def.audio.length>0?K?(K.p(E,N),N&1&&C(K,1)):(K=lt(E),K.c(),C(K,1),K.m(D,G)):K&&(De(),Z(K,1,1,()=>{K=null}),Ie()),E[3]?Y?(Y.p(E,N),N&8&&C(Y,1)):(Y=st(E),Y.c(),C(Y,1),Y.m(D,W)):Y&&(De(),Z(Y,1,1,()=>{Y=null}),Ie()),E[0].def?x?x.p(E,N):(x=ot(E),x.c(),x.m(w,null)):x&&(x.d(1),x=null),(!se||N&3&&I!==(I=E[1]+"-def-"+E[0].id))&&a(w,"id",I);const ve={};N&2&&(ve.key=E[1]),!Fe&&N&1&&(Fe=!0,ve.tags=E[0].tags,pt(()=>Fe=!1)),ne.$set(ve),(!se||N&4&&Se!==(Se=Array.isArray(E[2])&&E[2].length>0))&&(L.open=Se),(!se||N&3&&We!==(We=E[1]+"-"+E[0].id))&&a(l,"id",We)},i(E){se||(C(K),C(Y),C(ne.$$.fragment,E),se=!0)},o(E){Z(K),Z(Y),Z(ne.$$.fragment,E),se=!1},d(E){E&&c(e),E&&c(s),E&&c(l),K&&K.d(),Y&&Y.d(),x&&x.d(),ce(ne),Pe=!1,He(Ce)}}}const jt=r=>{r.preventDefault()};function Kt(r,e,o){const s=$e();let{key:l}=e,{item:t}=e,{highlight:i}=e,d=t.dict_def;function f(v,D){if(!D)return;let G={...D};for(let W of G.parts)W.definition=ye(me(W.definition),v),W.part=ye(me(W.part),v);return G}function h(){return l+"-def-"+t.id}function _(){return document.getElementById(`${l}-${t.id}`)}function m(){return document.getElementById(h())}kt(()=>{const v=Ee(l,t.id);v&&j(v)});function p(){const v=Ee(l,t.id);if(v){if(o(0,t.word=v.innerHTML,t),t.word==""){T(t)||o(0,t.word=v.title,t);return}v.title!=t.word&&s("updateWord",{word:t,key:l})}}function S(){const v=m();v&&o(0,t.def=v.innerHTML.replaceAll("<br>",""),t),s("updateDefinition",{word:t,key:l})}function T(v){return window.confirm("Delete word?")?(s("deleteWord",{word:v,key:l}),!0):!1}function j(v){v.title=t.word}function $(){s("updateWordTags",{word:t,key:l})}function z(){s("updateFavorite",{word:t,key:l})}function q(){if(A(),i.length===0)return;const v=m(),D=_(),G=Ee(l,t.id);G&&(G.innerHTML=ye(t.word,i)),v&&t.def&&(v.innerHTML=ye(t.def,i)),D&&(D.querySelectorAll(".pos, .def, .syn, .ant").forEach(W=>W.innerHTML=ye(W.innerHTML,i)),D.querySelectorAll(".tag").forEach(W=>{var M;i.some(g=>g=="#"+W.innerHTML.toLowerCase())&&((M=W.parentElement)==null||M.classList.add("highlight-tag"))}))}function A(){const v=m(),D=_(),G=Ee(l,t.id);G&&(G.innerHTML=me(G.innerHTML)),v&&(v.innerHTML=me(v.innerHTML)),D&&D.querySelectorAll(".pos, .def, .syn, .ant").forEach(W=>W.innerHTML=me(W.innerHTML))}function L(){var D;const v=(D=_())==null?void 0:D.querySelector("details");v&&(v.open=!0),s("refreshWord",{word:t,key:l})}function R(v){const D=v.target;if(v.code=="Escape"&&D){D.innerHTML=D.title,D.blur();return}vt(v)}const B=()=>T(t);function Q(){t.favorite=this.checked,o(0,t)}const X=()=>p(),le=()=>{S(),q()},ie=()=>A();function oe(v){r.$$.not_equal(t.tags,v)&&(t.tags=v,o(0,t))}return r.$$set=v=>{"key"in v&&o(1,l=v.key),"item"in v&&o(0,t=v.item),"highlight"in v&&o(2,i=v.highlight)},r.$$.update=()=>{r.$$.dirty&5&&o(3,d=f(i,t.dict_def))},[t,l,i,d,p,S,T,$,z,q,A,L,R,B,Q,X,le,ie,oe]}class Yt extends we{constructor(e){super(),be(this,e,Kt,Rt,ke,{key:1,item:0,highlight:2})}}function it(r){let e,o,s,l;return{c(){e=b("button"),o=b("i"),this.h()},l(t){e=k(t,"BUTTON",{class:!0});var i=y(e);o=k(i,"I",{class:!0}),y(o).forEach(c),i.forEach(c),this.h()},h(){a(o,"class","fa-solid fa-x"),a(e,"class","reset-btn svelte-1l8wrey")},m(t,i){O(t,e,i),u(e,o),s||(l=U(e,"click",r[3]),s=!0)},p:_e,d(t){t&&c(e),s=!1,l()}}}function zt(r){let e,o,s,l,t,i,d,f,h,_=r[0]&&it(r);return{c(){e=b("div"),o=b("form"),s=b("div"),l=b("i"),t=F(),i=b("input"),d=F(),_&&_.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var p=y(e);o=k(p,"FORM",{});var S=y(o);s=k(S,"DIV",{class:!0});var T=y(s);l=k(T,"I",{class:!0}),y(l).forEach(c),T.forEach(c),t=P(S),i=k(S,"INPUT",{placeholder:!0,class:!0,type:!0}),d=P(S),_&&_.l(S),S.forEach(c),p.forEach(c),this.h()},h(){a(l,"class","fa-solid fa-magnifying-glass"),a(s,"class","search-icon svelte-1l8wrey"),a(i,"placeholder",""),a(i,"class","search-input form-control svelte-1l8wrey"),a(i,"type","text"),i.autofocus=!0,a(e,"class","search-container svelte-1l8wrey")},m(m,p){O(m,e,p),u(e,o),u(o,s),u(s,l),u(o,t),u(o,i),Xe(i,r[0]),u(o,d),_&&_.m(o,null),i.focus(),f||(h=[U(i,"input",r[5]),U(i,"input",r[1]),U(i,"keydown",r[2]),U(o,"submit",ct(r[1]))],f=!0)},p(m,[p]){p&1&&i.value!==m[0]&&Xe(i,m[0]),m[0]?_?_.p(m,p):(_=it(m),_.c(),_.m(o,null)):_&&(_.d(1),_=null)},i:_e,o:_e,d(m){m&&c(e),_&&_.d(),f=!1,He(h)}}}function Gt(r,e,o){const s=$e();let{key:l}=e,t;function i(_){s("updateFilter",{search:t,key:l})}function d(_){qt(_)&&(o(0,t=""),s("updateFilter",{search:t,key:l}))}function f(_){o(0,t=""),s("updateFilter",{search:t,key:l})}function h(){t=this.value,o(0,t)}return r.$$set=_=>{"key"in _&&o(4,l=_.key)},[t,i,d,f,l,h]}class Jt extends we{constructor(e){super(),be(this,e,Gt,zt,ke,{key:4})}}function nt(r,e,o){const s=r.slice();return s[31]=e[o],s}function at(r){let e,o,s,l=r[6].length+"",t,i,d,f=r[1].words.length+"",h,_;return{c(){e=b("div"),o=ee("Showing "),s=b("b"),t=ee(l),i=ee(" out of "),d=b("b"),h=ee(f),_=ee(" words"),this.h()},l(m){e=k(m,"DIV",{class:!0});var p=y(e);o=te(p,"Showing "),s=k(p,"B",{});var S=y(s);t=te(S,l),S.forEach(c),i=te(p," out of "),d=k(p,"B",{});var T=y(d);h=te(T,f),T.forEach(c),_=te(p," words"),p.forEach(c),this.h()},h(){a(e,"class","filter-count svelte-fv0hy7")},m(m,p){O(m,e,p),u(e,o),u(e,s),u(s,t),u(e,i),u(e,d),u(d,h),u(e,_)},p(m,p){p[0]&64&&l!==(l=m[6].length+"")&&Te(t,l),p[0]&2&&f!==(f=m[1].words.length+"")&&Te(h,f)},d(m){m&&c(e)}}}function ft(r){let e;function o(t,i){return t[2]?Xt:Qt}let s=o(r),l=s(r);return{c(){l.c(),e=ge()},l(t){l.l(t),e=ge()},m(t,i){l.m(t,i),O(t,e,i)},p(t,i){s!==(s=o(t))&&(l.d(1),l=s(t),l&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&c(e)}}}function Qt(r){let e,o;return{c(){e=b("p"),o=ee("No words have been added")},l(s){e=k(s,"P",{});var l=y(e);o=te(l,"No words have been added"),l.forEach(c)},m(s,l){O(s,e,l),u(e,o)},d(s){s&&c(e)}}}function Xt(r){let e,o;return{c(){e=b("p"),o=ee("No matching words")},l(s){e=k(s,"P",{});var l=y(e);o=te(l,"No matching words"),l.forEach(c)},m(s,l){O(s,e,l),u(e,o)},d(s){s&&c(e)}}}function dt(r,e){let o,s,l;return s=new Yt({props:{key:e[0],item:e[31],highlight:e[3]}}),s.$on("updateWord",e[23]),s.$on("updateDefinition",e[24]),s.$on("deleteWord",e[25]),s.$on("updateWordTags",e[26]),s.$on("updateFavorite",e[27]),s.$on("refreshWord",e[28]),{key:r,first:null,c(){o=ge(),fe(s.$$.fragment),this.h()},l(t){o=ge(),de(s.$$.fragment,t),this.h()},h(){this.first=o},m(t,i){O(t,o,i),ue(s,t,i),l=!0},p(t,i){e=t;const d={};i[0]&1&&(d.key=e[0]),i[0]&64&&(d.item=e[31]),i[0]&8&&(d.highlight=e[3]),s.$set(d)},i(t){l||(C(s.$$.fragment,t),l=!0)},o(t){Z(s.$$.fragment,t),l=!1},d(t){t&&c(o),ce(s,t)}}}function ut(r){let e,o,s;function l(i){r[29](i)}let t={};return r[7]!==void 0&&(t.message=r[7]),e=new Bt({props:t}),ht.push(()=>_t(e,"message",l,r[7])),{c(){fe(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,d){ue(e,i,d),s=!0},p(i,d){const f={};!o&&d[0]&128&&(o=!0,f.message=i[7],pt(()=>o=!1)),e.$set(f)},i(i){s||(C(e.$$.fragment,i),s=!0)},o(i){Z(e.$$.fragment,i),s=!1},d(i){ce(e,i)}}}function Zt(r){let e,o,s,l,t,i,d,f,h,_,m,p,S,T,j,$,z,q,A,L=[],R=new Map,B,Q,X,le,ie,oe;o=new Jt({props:{key:r[0]}}),o.$on("updateFilter",r[20]),$=new Ut({props:{key:r[0],sort_by:r[1].sort_by,sort_order:r[1].sort_order}}),$.$on("updateSort",r[22]);let v=r[2]!=""&&at(r),D=r[6];const G=g=>g[31].id;for(let g=0;g<D.length;g+=1){let n=nt(r,D,g),w=G(n);R.set(w,L[g]=dt(w,n))}let W=null;D.length||(W=ft(r));let M=r[7]&&ut(r);return{c(){e=b("div"),fe(o.$$.fragment),s=F(),l=b("div"),t=b("div"),i=b("div"),d=b("input"),f=F(),h=b("div"),_=b("button"),m=F(),p=b("button"),S=F(),T=b("button"),j=F(),fe($.$$.fragment),z=F(),v&&v.c(),q=F(),A=b("ul");for(let g=0;g<L.length;g+=1)L[g].c();W&&W.c(),Q=F(),M&&M.c(),X=ge(),this.h()},l(g){e=k(g,"DIV",{class:!0});var n=y(e);de(o.$$.fragment,n),s=P(n),l=k(n,"DIV",{class:!0});var w=y(l);t=k(w,"DIV",{class:!0});var I=y(t);i=k(I,"DIV",{class:!0});var V=y(i);d=k(V,"INPUT",{type:!0,class:!0}),f=P(V),h=k(V,"DIV",{class:!0});var H=y(h);_=k(H,"BUTTON",{class:!0,title:!0}),y(_).forEach(c),m=P(H),p=k(H,"BUTTON",{class:!0,title:!0}),y(p).forEach(c),S=P(H),T=k(H,"BUTTON",{class:!0,title:!0}),y(T).forEach(c),H.forEach(c),V.forEach(c),I.forEach(c),j=P(w),de($.$$.fragment,w),w.forEach(c),z=P(n),v&&v.l(n),n.forEach(c),q=P(g),A=k(g,"UL",{class:!0});var J=y(A);for(let re=0;re<L.length;re+=1)L[re].l(J);W&&W.l(J),J.forEach(c),Q=P(g),M&&M.l(g),X=ge(),this.h()},h(){a(d,"type","checkbox"),a(d,"class","select-checkbox"),a(_,"class","show-btn svelte-fv0hy7"),a(_,"title","Show selected"),a(p,"class","hide-btn svelte-fv0hy7"),a(p,"title","Hide selected"),a(T,"class","del-btn svelte-fv0hy7"),a(T,"title","Delete selected"),a(h,"class","select-group svelte-fv0hy7"),a(i,"class","select-options"),a(t,"class","show-hide svelte-fv0hy7"),a(l,"class","options-bar svelte-fv0hy7"),a(e,"class","sticky-search-bar list-group-item svelte-fv0hy7"),a(A,"class",B="word-group "+r[5]+" svelte-fv0hy7")},m(g,n){O(g,e,n),ue(o,e,null),u(e,s),u(e,l),u(l,t),u(t,i),u(i,d),d.checked=r[4],u(i,f),u(i,h),u(h,_),u(h,m),u(h,p),u(h,S),u(h,T),u(l,j),ue($,l,null),u(e,z),v&&v.m(e,null),O(g,q,n),O(g,A,n);for(let w=0;w<L.length;w+=1)L[w].m(A,null);W&&W.m(A,null),O(g,Q,n),M&&M.m(g,n),O(g,X,n),le=!0,ie||(oe=[U(d,"change",r[21]),U(d,"change",r[8]),U(_,"click",r[10]),U(p,"click",r[11]),U(T,"click",r[9])],ie=!0)},p(g,n){const w={};n[0]&1&&(w.key=g[0]),o.$set(w),n[0]&16&&(d.checked=g[4]);const I={};n[0]&1&&(I.key=g[0]),n[0]&2&&(I.sort_by=g[1].sort_by),n[0]&2&&(I.sort_order=g[1].sort_order),$.$set(I),g[2]!=""?v?v.p(g,n):(v=at(g),v.c(),v.m(e,null)):v&&(v.d(1),v=null),n[0]&258125&&(D=g[6],De(),L=Et(L,n,G,1,g,D,R,A,Tt,dt,null,nt),Ie(),!D.length&&W?W.p(g,n):D.length?W&&(W.d(1),W=null):(W=ft(g),W.c(),W.m(A,null))),(!le||n[0]&32&&B!==(B="word-group "+g[5]+" svelte-fv0hy7"))&&a(A,"class",B),g[7]?M?(M.p(g,n),n[0]&128&&C(M,1)):(M=ut(g),M.c(),C(M,1),M.m(X.parentNode,X)):M&&(De(),Z(M,1,1,()=>{M=null}),Ie())},i(g){if(!le){C(o.$$.fragment,g),C($.$$.fragment,g);for(let n=0;n<D.length;n+=1)C(L[n]);C(M),le=!0}},o(g){Z(o.$$.fragment,g),Z($.$$.fragment,g);for(let n=0;n<L.length;n+=1)Z(L[n]);Z(M),le=!1},d(g){g&&c(e),ce(o),ce($),v&&v.d(),g&&c(q),g&&c(A);for(let n=0;n<L.length;n+=1)L[n].d();W&&W.d(),g&&c(Q),M&&M.d(g),g&&c(X),ie=!1,He(oe)}}}function qe(){return document.querySelectorAll('input[type="checkbox"].select-word'),Be(r=>!0)}function Be(r){const e=document.querySelectorAll('input[type="checkbox"].select-word');if(!e)return 0;let o=0;return e.forEach(s=>{s.checked&&r(s)&&(o+=1)}),o}function xt(r,e,o){let s,{key:l="words"}=e,t=It(l);t=Ve(t);let i=!1,d="",f="",h,_,m;m=new URLSearchParams(window.location.search).get("word"),m&&Ze(parseInt(m),l);function p(){let n=qe()===0;const w=document.querySelectorAll('input[type="checkbox"].select-word');if(!w)return 0;console.log("selecting with action=%i",n);let I=0;w.forEach(V=>{V.checked=n,I+=1}),I!==0&&o(4,i=n)}async function S(){const n=qe();if(n===0||!window.confirm(n===1?"Delete word?":`Delete ${n} words?`))return!1;const w=Be(I=>{var V,H;if(I.dataset.id){const J=Number(I.dataset.id);if(!Number.isNaN(J))if(et(t,J)){const re=I.parentElement;re&&((V=re.parentElement)==null||V.removeChild(re));const pe=document.getElementById(`${l}-hr-${J}`);return pe&&((H=pe.parentElement)==null||H.removeChild(pe)),!0}else console.log(`delete for ${J} failed`)}return!1});return await Dt(),w>0&&(he(t),o(1,t)),!0}function T(){qe()===0?h.forEach(n=>{var I;const w=(I=document.getElementById(`${l}-${n.id}`))==null?void 0:I.querySelector("details");w&&(w.open=!0)}):Be(n=>{var I;const w=(I=n.parentElement)==null?void 0:I.querySelector("details");return w?(w.open=!0,!0):!1})}function j(){qe()===0?h.forEach(n=>{var I;const w=(I=document.getElementById(`${l}-${n.id}`))==null?void 0:I.querySelector("details");w&&(w.open=!1)}):Be(n=>{var I;const w=(I=n.parentElement)==null?void 0:I.querySelector("details");return w?(w.open=!1,!0):!1})}function $(n){if(console.log(n),n.key!=l||!n.word||!n.word.word)return;let w=n.word.word.trim().toLowerCase(),I=t.words.find(J=>{var re;return((re=J.cache)==null?void 0:re.word)===w}),V=t.words.find(J=>J.id===n.word.id),H=Ee(l,n.word.id);V!=null&&I!=null?(console.log(`original: %o
dup: %o`,V,I),console.log("duplicate word"),H&&(console.log("resetting to "+H.title),H.innerHTML=H.title,V.word=H.title)):Wt(t,n.word.id,n.word.word)?(o(1,t=Ve(t)),H&&(H.title=n.word.word),console.log("updated list: %o",t.words),he(t),o(1,t),Ze(n.word.id,l)):console.log("word update failed: %o",n.word)}function z(n){if(n.key!=l||!n.word.def)return;let w=me(n.word.def.trim());At(t,n.word.id,w)?he(t):console.log("definition update failed")}function q(n){function w(I,V){return I.tags=V.tags,I.cache=xe(I),!0}n.key==l&&(Oe(t,n.word,w),he(t),o(1,t))}function A(n){function w(I,V){return I.favorite=V.favorite,!0}n.key==l&&(Oe(t,n.word,w),he(t),o(1,t))}function L(n){function w(I,V){return I.dict_def=V.dict_def,!0}n.key==l&&Nt.default.lookup(n.word.word).then(I=>{I?n.word.dict_def=I:o(7,_=`'${n.word.word}' has no dictionary definition`)}).finally(()=>{n.word.cache=xe(n.word),Oe(t,n.word,w),he(t),o(1,t)})}function R(n){n.key==l&&(et(t,n.word.id)?(he(t),o(1,t)):console.log("remove word failed"))}function B(n){n.key==l&&(o(1,t.sort_by=n.sort_by,t),o(1,t.sort_order=n.sort_order,t),Ve(t),he(t))}function Q(n){n.key==l&&o(2,d=n.search.toLowerCase())}const X=n=>{Q(n.detail)};function le(){i=this.checked,o(4,i)}const ie=n=>B(n.detail),oe=n=>$(n.detail),v=n=>z(n.detail),D=n=>R(n.detail),G=n=>q(n.detail),W=n=>A(n.detail),M=n=>L(n.detail);function g(n){_=n,o(7,_)}return r.$$set=n=>{"key"in n&&o(0,l=n.key)},r.$$.update=()=>{r.$$.dirty[0]&4&&o(3,s=d.split(" ").filter(n=>n.length>0)),r.$$.dirty[0]&4&&o(5,f=d===""?"":"full-defs"),r.$$.dirty[0]&10&&o(6,h=t.words.filter(n=>St(s,n)))},[l,t,d,s,i,f,h,_,p,S,T,j,$,z,q,A,L,R,B,Q,X,le,ie,oe,v,D,G,W,M,g]}class el extends we{constructor(e){super(),be(this,e,xt,Zt,ke,{key:0},null,[-1,-1])}}function tl(r){let e,o,s,l,t,i,d,f;return e=new Ht({props:{current:"list"}}),d=new el({props:{key:"words"}}),{c(){fe(e.$$.fragment),o=F(),s=b("h1"),l=ee("Word List"),t=F(),i=b("div"),fe(d.$$.fragment),this.h()},l(h){de(e.$$.fragment,h),o=P(h),s=k(h,"H1",{});var _=y(s);l=te(_,"Word List"),_.forEach(c),t=P(h),i=k(h,"DIV",{class:!0});var m=y(i);de(d.$$.fragment,m),m.forEach(c),this.h()},h(){a(i,"class","list-vocab-container")},m(h,_){ue(e,h,_),O(h,o,_),O(h,s,_),u(s,l),O(h,t,_),O(h,i,_),ue(d,i,null),f=!0},p:_e,i(h){f||(C(e.$$.fragment,h),C(d.$$.fragment,h),f=!0)},o(h){Z(e.$$.fragment,h),Z(d.$$.fragment,h),f=!1},d(h){ce(e,h),h&&c(o),h&&c(s),h&&c(t),h&&c(i),ce(d)}}}class nl extends we{constructor(e){super(),be(this,e,null,tl,ke,{})}}export{nl as default};
