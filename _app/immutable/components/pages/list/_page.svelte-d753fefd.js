import{S as be,i as ke,s as we,k as g,q as ee,a as B,l as b,m as E,r as te,h as _,c as F,n as f,K as bt,b as O,G as c,T as Xe,M as U,N as _t,B as ue,P as He,Q as je,U as kt,V as wt,W as Ze,u as qe,I as ze,J as ht,w as _e,x as he,y as me,f as R,g as Ee,t as Q,d as Te,O as mt,z as pe,o as pt,j as yt,R as Et,L as $e,e as ve,X as Tt,Y as At,Z as Dt,A as It}from"../../../chunks/index-71376991.js";import{b as St}from"../../../chunks/paths-b4419565.js";import{S as Ne,e as Be,f as Fe,r as We,l as Nt,b as Ue,s as xe,c as ce,g as Ve,h as Lt,i as Wt,j as Oe,A as Mt,n as et,k as tt}from"../../../chunks/words-56918134.js";import{T as Ht,e as vt,D as qt,a as Pt}from"../../../chunks/DictDef-781ec808.js";function Bt(o){let e,t,r,l,s,i,u,a,v,m,h,k,T,L,q,C,j,G;return{c(){e=g("div"),t=g("form"),r=g("select"),l=g("option"),s=ee("Word"),u=g("option"),a=ee("Date"),h=B(),k=g("input"),L=B(),q=g("label"),this.h()},l(I){e=b(I,"DIV",{class:!0});var D=E(e);t=b(D,"FORM",{});var N=E(t);r=b(N,"SELECT",{id:!0,title:!0,class:!0});var A=E(r);l=b(A,"OPTION",{});var x=E(l);s=te(x,"Word"),x.forEach(_),u=b(A,"OPTION",{});var X=E(u);a=te(X,"Date"),X.forEach(_),A.forEach(_),h=F(N),k=b(N,"INPUT",{id:!0,type:!0,title:!0,class:!0}),L=F(N),q=b(N,"LABEL",{for:!0,class:!0,title:!0}),E(q).forEach(_),N.forEach(_),D.forEach(_),this.h()},h(){l.__value="word",l.value=l.__value,l.selected=i=o[0]==Ne.Word,u.__value="id",u.value=u.__value,u.selected=v=o[0]==Ne.Id,f(r,"id",m=o[1]+"-sort-by"),f(r,"title","Sort by"),f(r,"class","svelte-x4vm2d"),o[0]===void 0&&bt(()=>o[7].call(r)),f(k,"id",T=o[1]+"-sort-order"),f(k,"type","checkbox"),f(k,"title",o[3]),f(k,"class","sort-checkbox form-check-input svelte-x4vm2d"),f(q,"for",C=o[1]+"-sort-order"),f(q,"class","sort-checkbox-label form-check-label svelte-x4vm2d"),f(q,"title",o[3]),f(e,"class","sort-container svelte-x4vm2d")},m(I,D){O(I,e,D),c(e,t),c(t,r),c(r,l),c(l,s),c(r,u),c(u,a),Xe(r,o[0]),c(t,h),c(t,k),k.checked=o[2],c(t,L),c(t,q),j||(G=[U(r,"change",o[7]),U(r,"change",o[4]),U(k,"change",o[8]),U(k,"change",o[4]),U(t,"submit",_t(o[6]))],j=!0)},p(I,[D]){D&1&&i!==(i=I[0]==Ne.Word)&&(l.selected=i),D&1&&v!==(v=I[0]==Ne.Id)&&(u.selected=v),D&2&&m!==(m=I[1]+"-sort-by")&&f(r,"id",m),D&1&&Xe(r,I[0]),D&2&&T!==(T=I[1]+"-sort-order")&&f(k,"id",T),D&8&&f(k,"title",I[3]),D&4&&(k.checked=I[2]),D&2&&C!==(C=I[1]+"-sort-order")&&f(q,"for",C),D&8&&f(q,"title",I[3])},i:ue,o:ue,d(I){I&&_(e),j=!1,He(G)}}}function Ft(o,e,t){const r=je();let{key:l}=e,{sort_by:s}=e,{sort_order:i}=e,u,a=i===Be.Desc;function v(T){r("updateSort",{sort_by:s,sort_order:i,key:l})}function m(T){kt.call(this,o,T)}function h(){s=wt(this),t(0,s)}function k(){a=this.checked,t(2,a)}return o.$$set=T=>{"key"in T&&t(1,l=T.key),"sort_by"in T&&t(0,s=T.sort_by),"sort_order"in T&&t(5,i=T.sort_order)},o.$$.update=()=>{o.$$.dirty&4&&t(5,i=a?Be.Desc:Be.Asc),o.$$.dirty&4&&t(3,u=a?"Descending sort order":"Ascending sort order")},[s,l,a,u,v,i,m,h,k]}class Ut extends be{constructor(e){super(),ke(this,e,Ft,Bt,we,{key:1,sort_by:0,sort_order:5})}}function Vt(o){let e,t,r,l,s,i,u,a,v,m;return{c(){e=g("button"),t=g("span"),r=ee(o[1]),l=B(),s=g("audio"),i=g("a"),u=ee("Audio"),this.h()},l(h){e=b(h,"BUTTON",{class:!0});var k=E(e);t=b(k,"SPAN",{class:!0});var T=E(t);r=te(T,o[1]),T.forEach(_),l=F(k),s=b(k,"AUDIO",{src:!0});var L=E(s);i=b(L,"A",{href:!0});var q=E(i);u=te(q,"Audio"),q.forEach(_),L.forEach(_),k.forEach(_),this.h()},h(){f(t,"class","phonetics svelte-1owj048"),f(i,"href",o[0]),Ze(s.src,a=o[0])||f(s,"src",a),f(e,"class","svelte-1owj048")},m(h,k){O(h,e,k),c(e,t),c(t,r),c(e,l),c(e,s),c(s,i),c(i,u),v||(m=U(e,"click",Ot),v=!0)},p(h,[k]){k&2&&qe(r,h[1]),k&1&&f(i,"href",h[0]),k&1&&!Ze(s.src,a=h[0])&&f(s,"src",a)},i:ue,o:ue,d(h){h&&_(e),v=!1,m()}}}function Ot(o){var t;const e=(t=o.target)==null?void 0:t.querySelector("audio");e&&e.play()}function jt(o,e,t){let{src:r}=e,{title:l=""}=e;return o.$$set=s=>{"src"in s&&t(0,r=s.src),"title"in s&&t(1,l=s.title)},[r,l]}class zt extends be{constructor(e){super(),ke(this,e,jt,Vt,we,{src:0,title:1})}}function lt(o,e,t){const r=o.slice();return r[24]=e[t],r}function rt(o){let e,t,r=o[0].dict_def.audio,l=[];for(let i=0;i<r.length;i+=1)l[i]=st(lt(o,r,i));const s=i=>Q(l[i],1,1,()=>{l[i]=null});return{c(){e=g("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=b(i,"DIV",{class:!0});var u=E(e);for(let a=0;a<l.length;a+=1)l[a].l(u);u.forEach(_),this.h()},h(){f(e,"class","audio-entries svelte-1ueo1y0")},m(i,u){O(i,e,u);for(let a=0;a<l.length;a+=1)l[a].m(e,null);t=!0},p(i,u){if(u&1){r=i[0].dict_def.audio;let a;for(a=0;a<r.length;a+=1){const v=lt(i,r,a);l[a]?(l[a].p(v,u),R(l[a],1)):(l[a]=st(v),l[a].c(),R(l[a],1),l[a].m(e,null))}for(Ee(),a=r.length;a<l.length;a+=1)s(a);Te()}},i(i){if(!t){for(let u=0;u<r.length;u+=1)R(l[u]);t=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)Q(l[u]);t=!1},d(i){i&&_(e),Et(l,i)}}}function st(o){let e,t;return e=new zt({props:{src:o[24].url,title:o[24].phonetics}}),{c(){_e(e.$$.fragment)},l(r){he(e.$$.fragment,r)},m(r,l){me(e,r,l),t=!0},p(r,l){const s={};l&1&&(s.src=r[24].url),l&1&&(s.title=r[24].phonetics),e.$set(s)},i(r){t||(R(e.$$.fragment,r),t=!0)},o(r){Q(e.$$.fragment,r),t=!1},d(r){pe(e,r)}}}function ot(o){let e,t;return e=new qt({props:{dict:o[0].dict_def}}),{c(){_e(e.$$.fragment)},l(r){he(e.$$.fragment,r)},m(r,l){me(e,r,l),t=!0},p(r,l){const s={};l&1&&(s.dict=r[0].dict_def),e.$set(s)},i(r){t||(R(e.$$.fragment,r),t=!0)},o(r){Q(e.$$.fragment,r),t=!1},d(r){pe(e,r)}}}function nt(o){let e=o[0].def+"",t;return{c(){t=ee(e)},l(r){t=te(r,e)},m(r,l){O(r,t,l)},p(r,l){l&1&&e!==(e=r[0].def+"")&&qe(t,e)},d(r){r&&_(t)}}}function Ct(o){let e,t,r,l,s,i,u,a,v,m,h,k,T,L,q,C,j,G,I,D,N,A,x=o[0].word+"",X,re,le,p,H,W,V,ne,M,P,n,d,w,z,Z,J,ie,ae,se,ge,de,Ae,oe,Pe,Ce,K=o[0].dict_def&&o[0].dict_def.audio.length>0&&rt(o),Y=o[0].dict_def&&ot(o),$=o[0].def&&nt(o);function gt(y){o[17](y)}let Re={key:o[1]};return o[0].tags!==void 0&&(Re.tags=o[0].tags),se=new Ht({props:Re}),ze.push(()=>ht(se,"tags",gt,o[0].tags)),se.$on("updateTags",o[6]),{c(){e=g("hr"),r=B(),l=g("li"),s=g("input"),u=B(),a=g("button"),v=g("i"),m=B(),h=g("button"),k=g("i"),T=B(),L=g("input"),C=B(),j=g("label"),I=B(),D=g("details"),N=g("summary"),A=g("dfn"),X=ee(x),le=B(),p=g("div"),H=B(),W=g("div"),K&&K.c(),V=B(),Y&&Y.c(),ne=B(),M=g("span"),P=ee("Notes:"),n=B(),d=g("div"),$&&$.c(),z=B(),Z=g("div"),J=g("span"),ie=ee("Tags:"),ae=B(),_e(se.$$.fragment),this.h()},l(y){e=b(y,"HR",{id:!0,class:!0}),r=F(y),l=b(y,"LI",{id:!0,class:!0});var S=E(l);s=b(S,"INPUT",{class:!0,type:!0,"data-id":!0}),u=F(S),a=b(S,"BUTTON",{class:!0});var ye=E(a);v=b(ye,"I",{class:!0}),E(v).forEach(_),ye.forEach(_),m=F(S),h=b(S,"BUTTON",{class:!0,title:!0});var Ke=E(h);k=b(Ke,"I",{class:!0}),E(k).forEach(_),Ke.forEach(_),T=F(S),L=b(S,"INPUT",{id:!0,title:!0,class:!0,type:!0}),C=F(S),j=b(S,"LABEL",{for:!0,class:!0}),E(j).forEach(_),I=F(S),D=b(S,"DETAILS",{class:!0});var De=E(D);N=b(De,"SUMMARY",{class:!0});var Ie=E(N);A=b(Ie,"DFN",{id:!0,class:!0,contenteditable:!0});var Ye=E(A);X=te(Ye,x),Ye.forEach(_),le=F(Ie),p=b(Ie,"DIV",{class:!0}),E(p).forEach(_),Ie.forEach(_),H=F(De),W=b(De,"DIV",{class:!0});var fe=E(W);K&&K.l(fe),V=F(fe),Y&&Y.l(fe),ne=F(fe),M=b(fe,"SPAN",{class:!0});var Ge=E(M);P=te(Ge,"Notes:"),Ge.forEach(_),n=F(fe),d=b(fe,"DIV",{id:!0,class:!0,contenteditable:!0});var Je=E(d);$&&$.l(Je),Je.forEach(_),z=F(fe),Z=b(fe,"DIV",{class:!0});var Se=E(Z);J=b(Se,"SPAN",{class:!0});var Qe=E(J);ie=te(Qe,"Tags:"),Qe.forEach(_),ae=F(Se),he(se.$$.fragment,Se),Se.forEach(_),fe.forEach(_),De.forEach(_),S.forEach(_),this.h()},h(){f(e,"id",t=o[1]+"-hr-"+o[0].id),f(e,"class","svelte-1ueo1y0"),f(s,"class","select-word svelte-1ueo1y0"),f(s,"type","checkbox"),f(s,"data-id",i=o[0].id),f(v,"class","fa-solid fa-xmark"),f(a,"class","remove-word-btn svelte-1ueo1y0"),f(k,"class","fa-solid fa-arrows-rotate"),f(h,"class","refresh-btn svelte-1ueo1y0"),f(h,"title","Refresh defintion"),f(L,"id",q=o[1]+"-fav-"+o[0].id),f(L,"title","Favorite"),f(L,"class","fav-checkbox svelte-1ueo1y0"),f(L,"type","checkbox"),f(j,"for",G=o[1]+"-fav-"+o[0].id),f(j,"class","fav-label svelte-1ueo1y0"),f(A,"id",re=o[1]+"-word-"+o[0].id),f(A,"class","word svelte-1ueo1y0"),f(A,"contenteditable","true"),f(p,"class","detail-arrow svelte-1ueo1y0"),f(N,"class","svelte-1ueo1y0"),f(M,"class","def-label svelte-1ueo1y0"),f(d,"id",w=o[1]+"-def-"+o[0].id),f(d,"class","word-definition svelte-1ueo1y0"),f(d,"contenteditable","true"),f(J,"class","tags-label svelte-1ueo1y0"),f(Z,"class","tag-list svelte-1ueo1y0"),f(W,"class","detail-content svelte-1ueo1y0"),D.open=de=Array.isArray(o[2])&&o[2].length>0,f(D,"class","svelte-1ueo1y0"),f(l,"id",Ae=o[1]+"-"+o[0].id),f(l,"class","word-item svelte-1ueo1y0")},m(y,S){O(y,e,S),O(y,r,S),O(y,l,S),c(l,s),c(l,u),c(l,a),c(a,v),c(l,m),c(l,h),c(h,k),c(l,T),c(l,L),L.checked=o[0].favorite,c(l,C),c(l,j),c(l,I),c(l,D),c(D,N),c(N,A),c(A,X),c(N,le),c(N,p),c(D,H),c(D,W),K&&K.m(W,null),c(W,V),Y&&Y.m(W,null),c(W,ne),c(W,M),c(M,P),c(W,n),c(W,d),$&&$.m(d,null),c(W,z),c(W,Z),c(Z,J),c(J,ie),c(Z,ae),me(se,Z,null),oe=!0,Pe||(Ce=[U(a,"click",o[12]),U(h,"click",o[10]),U(L,"change",o[13]),U(L,"change",o[7]),U(A,"blur",o[14]),U(A,"keydown",o[11]),U(A,"click",Rt),U(d,"keydown",vt),U(d,"blur",o[15]),U(d,"focus",o[16])],Pe=!0)},p(y,[S]){(!oe||S&3&&t!==(t=y[1]+"-hr-"+y[0].id))&&f(e,"id",t),(!oe||S&1&&i!==(i=y[0].id))&&f(s,"data-id",i),(!oe||S&3&&q!==(q=y[1]+"-fav-"+y[0].id))&&f(L,"id",q),S&1&&(L.checked=y[0].favorite),(!oe||S&3&&G!==(G=y[1]+"-fav-"+y[0].id))&&f(j,"for",G),(!oe||S&1)&&x!==(x=y[0].word+"")&&qe(X,x),(!oe||S&3&&re!==(re=y[1]+"-word-"+y[0].id))&&f(A,"id",re),y[0].dict_def&&y[0].dict_def.audio.length>0?K?(K.p(y,S),S&1&&R(K,1)):(K=rt(y),K.c(),R(K,1),K.m(W,V)):K&&(Ee(),Q(K,1,1,()=>{K=null}),Te()),y[0].dict_def?Y?(Y.p(y,S),S&1&&R(Y,1)):(Y=ot(y),Y.c(),R(Y,1),Y.m(W,ne)):Y&&(Ee(),Q(Y,1,1,()=>{Y=null}),Te()),y[0].def?$?$.p(y,S):($=nt(y),$.c(),$.m(d,null)):$&&($.d(1),$=null),(!oe||S&3&&w!==(w=y[1]+"-def-"+y[0].id))&&f(d,"id",w);const ye={};S&2&&(ye.key=y[1]),!ge&&S&1&&(ge=!0,ye.tags=y[0].tags,mt(()=>ge=!1)),se.$set(ye),(!oe||S&4&&de!==(de=Array.isArray(y[2])&&y[2].length>0))&&(D.open=de),(!oe||S&3&&Ae!==(Ae=y[1]+"-"+y[0].id))&&f(l,"id",Ae)},i(y){oe||(R(K),R(Y),R(se.$$.fragment,y),oe=!0)},o(y){Q(K),Q(Y),Q(se.$$.fragment,y),oe=!1},d(y){y&&_(e),y&&_(r),y&&_(l),K&&K.d(),Y&&Y.d(),$&&$.d(),pe(se),Pe=!1,He(Ce)}}}const Rt=o=>{o.preventDefault()};function Kt(o,e,t){const r=je();let{key:l}=e,{item:s}=e,{highlight:i}=e;function u(){return l+"-def-"+s.id}function a(){return document.getElementById(l+"-word-"+s.id)}function v(){return document.getElementById(`${l}-${s.id}`)}function m(){return document.getElementById(u())}pt(()=>{const p=a();p&&L(p)}),yt(()=>{j()});function h(){const p=a();if(p){if(t(0,s.word=p.innerHTML,s),p.innerHTML="",s.word==""){T(s)||t(0,s.word=p.title,s);return}p.title!=s.word&&(L(p),r("updateWord",{word:s,key:l}))}}function k(){var H;t(0,s.def=(H=s.def)==null?void 0:H.replaceAll("<br>",""),s);const p=m();p&&(p.innerHTML=p.innerHTML.replaceAll("<br>","")),r("updateDefinition",{word:s,key:l})}function T(p){return window.confirm("Delete word?")?(r("deleteWord",{word:p,key:l}),!0):!1}function L(p){console.log("updating title to %s",s.word),p.title=s.word}function q(){r("updateWordTags",{word:s,key:l})}function C(){r("updateFavorite",{word:s,key:l})}function j(){if(G(),i.length===0)return;const p=m(),H=v(),W=a();W&&(W.innerHTML=Fe(W.innerHTML,i)),p&&(p.innerHTML=Fe(p.innerHTML,i)),H&&(H.querySelectorAll(".pos, .def, .syn, .ant").forEach(V=>V.innerHTML=Fe(V.innerHTML,i)),H.querySelectorAll(".tag").forEach(V=>{var ne;i.some(M=>M=="#"+V.innerHTML.toLocaleLowerCase())&&((ne=V.parentElement)==null||ne.classList.add("highlight-tag"))}))}function G(){const p=m(),H=v(),W=a();W&&(W.innerHTML=We(W.innerHTML)),p&&(p.innerHTML=We(p.innerHTML)),H&&H.querySelectorAll(".pos, .def, .syn, .ant").forEach(V=>V.innerHTML=We(V.innerHTML))}function I(){var H;const p=(H=v())==null?void 0:H.querySelector("details");p&&(p.open=!0),r("refreshWord",{word:s,key:l})}function D(p){const H=p.target;if(p.code=="Escape"&&H){H.innerHTML=H.title,H.blur();return}vt(p)}const N=()=>T(s);function A(){s.favorite=this.checked,t(0,s)}const x=()=>h(),X=()=>{k(),j()},re=()=>G();function le(p){o.$$.not_equal(s.tags,p)&&(s.tags=p,t(0,s))}return o.$$set=p=>{"key"in p&&t(1,l=p.key),"item"in p&&t(0,s=p.item),"highlight"in p&&t(2,i=p.highlight)},[s,l,i,h,k,T,q,C,j,G,I,D,N,A,x,X,re,le]}class Yt extends be{constructor(e){super(),ke(this,e,Kt,Ct,we,{key:1,item:0,highlight:2})}}function it(o){let e,t,r,l;return{c(){e=g("button"),t=g("i"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var i=E(e);t=b(i,"I",{class:!0}),E(t).forEach(_),i.forEach(_),this.h()},h(){f(t,"class","fa-solid fa-x"),f(e,"class","reset-btn svelte-8w6wqe")},m(s,i){O(s,e,i),c(e,t),r||(l=U(e,"click",o[3]),r=!0)},p:ue,d(s){s&&_(e),r=!1,l()}}}function Gt(o){let e,t,r,l,s,i,u,a,v,m=o[0]&&it(o);return{c(){e=g("div"),t=g("form"),r=g("div"),l=g("i"),s=B(),i=g("input"),u=B(),m&&m.c(),this.h()},l(h){e=b(h,"DIV",{class:!0});var k=E(e);t=b(k,"FORM",{});var T=E(t);r=b(T,"DIV",{class:!0});var L=E(r);l=b(L,"I",{class:!0}),E(l).forEach(_),L.forEach(_),s=F(T),i=b(T,"INPUT",{placeholder:!0,class:!0}),u=F(T),m&&m.l(T),T.forEach(_),k.forEach(_),this.h()},h(){f(l,"class","fa-solid fa-magnifying-glass"),f(r,"class","search-icon svelte-8w6wqe"),f(i,"placeholder","filter"),f(i,"class","search-input form-control svelte-8w6wqe"),f(e,"class","search-container svelte-8w6wqe")},m(h,k){O(h,e,k),c(e,t),c(t,r),c(r,l),c(t,s),c(t,i),$e(i,o[0]),c(t,u),m&&m.m(t,null),a||(v=[U(i,"input",o[5]),U(i,"input",o[1]),U(i,"keydown",o[2]),U(t,"submit",_t(o[1]))],a=!0)},p(h,[k]){k&1&&i.value!==h[0]&&$e(i,h[0]),h[0]?m?m.p(h,k):(m=it(h),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i:ue,o:ue,d(h){h&&_(e),m&&m.d(),a=!1,He(v)}}}function Jt(o,e,t){const r=je();let{key:l}=e,s;function i(m){r("updateFilter",{search:s,key:l})}function u(m){Pt(m)&&(t(0,s=""),r("updateFilter",{search:s,key:l}))}function a(m){t(0,s=""),r("updateFilter",{search:s,key:l})}function v(){s=this.value,t(0,s)}return o.$$set=m=>{"key"in m&&t(4,l=m.key)},[s,i,u,a,l,v]}class Qt extends be{constructor(e){super(),ke(this,e,Jt,Gt,we,{key:4})}}function at(o){let e,t;return{c(){e=g("div"),t=ee(o[0]),this.h()},l(r){e=b(r,"DIV",{class:!0});var l=E(e);t=te(l,o[0]),l.forEach(_),this.h()},h(){f(e,"class","alert-box svelte-9zlq1k")},m(r,l){O(r,e,l),c(e,t),o[3](e)},p(r,l){l&1&&qe(t,r[0])},d(r){r&&_(e),o[3](null)}}}function Xt(o){let e,t=o[0]&&at(o);return{c(){t&&t.c(),e=ve()},l(r){t&&t.l(r),e=ve()},m(r,l){t&&t.m(r,l),O(r,e,l)},p(r,[l]){r[0]?t?t.p(r,l):(t=at(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ue,o:ue,d(r){t&&t.d(r),r&&_(e)}}}function Zt(o,e,t){let{message:r}=e,{remove_time:l=4e3}=e,s,i,u;pt(()=>{i=setTimeout(a,l),u=setTimeout(v,l+1500)}),Tt(()=>{i&&clearTimeout(i),u&&clearTimeout(u)});function a(){t(1,s.style.opacity="0",s)}function v(){var h;t(0,r=void 0),(h=s.parentNode)==null||h.removeChild(s)}function m(h){ze[h?"unshift":"push"](()=>{s=h,t(1,s)})}return o.$$set=h=>{"message"in h&&t(0,r=h.message),"remove_time"in h&&t(2,l=h.remove_time)},[r,s,l,m]}class $t extends be{constructor(e){super(),ke(this,e,Zt,Xt,we,{message:0,remove_time:2})}}function ft(o,e,t){const r=o.slice();return r[31]=e[t],r}function ut(o){let e;function t(s,i){return s[1]?el:xt}let r=t(o),l=r(o);return{c(){l.c(),e=ve()},l(s){l.l(s),e=ve()},m(s,i){l.m(s,i),O(s,e,i)},p(s,i){r!==(r=t(s))&&(l.d(1),l=r(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){l.d(s),s&&_(e)}}}function xt(o){let e,t;return{c(){e=g("p"),t=ee("No words have been added")},l(r){e=b(r,"P",{});var l=E(e);t=te(l,"No words have been added"),l.forEach(_)},m(r,l){O(r,e,l),c(e,t)},d(r){r&&_(e)}}}function el(o){let e,t;return{c(){e=g("p"),t=ee("No matching words")},l(r){e=b(r,"P",{});var l=E(e);t=te(l,"No matching words"),l.forEach(_)},m(r,l){O(r,e,l),c(e,t)},d(r){r&&_(e)}}}function dt(o,e){let t,r,l;return r=new Yt({props:{key:e[0],item:e[31],highlight:e[6]}}),r.$on("updateWord",e[23]),r.$on("updateDefinition",e[24]),r.$on("deleteWord",e[25]),r.$on("updateWordTags",e[26]),r.$on("updateFavorite",e[27]),r.$on("refreshWord",e[28]),{key:o,first:null,c(){t=ve(),_e(r.$$.fragment),this.h()},l(s){t=ve(),he(r.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){O(s,t,i),me(r,s,i),l=!0},p(s,i){e=s;const u={};i[0]&1&&(u.key=e[0]),i[0]&68&&(u.item=e[31]),i[0]&64&&(u.highlight=e[6]),r.$set(u)},i(s){l||(R(r.$$.fragment,s),l=!0)},o(s){Q(r.$$.fragment,s),l=!1},d(s){s&&_(t),pe(r,s)}}}function ct(o){let e,t,r;function l(i){o[29](i)}let s={};return o[5]!==void 0&&(s.message=o[5]),e=new $t({props:s}),ze.push(()=>ht(e,"message",l,o[5])),{c(){_e(e.$$.fragment)},l(i){he(e.$$.fragment,i)},m(i,u){me(e,i,u),r=!0},p(i,u){const a={};!t&&u[0]&32&&(t=!0,a.message=i[5],mt(()=>t=!1)),e.$set(a)},i(i){r||(R(e.$$.fragment,i),r=!0)},o(i){Q(e.$$.fragment,i),r=!1},d(i){pe(e,i)}}}function tl(o){let e,t,r,l,s,i,u,a,v,m,h,k,T,L,q,C,j,G,I,D,N,A=[],x=new Map,X,re,le,p,H,W;t=new Qt({props:{key:o[0]}}),t.$on("updateFilter",o[19]),I=new Ut({props:{key:o[0],sort_by:o[2].sort_by,sort_order:o[2].sort_order}}),I.$on("updateSort",o[21]);let V=o[2].words.filter(o[22]);const ne=n=>n[31].id;for(let n=0;n<V.length;n+=1){let d=ft(o,V,n),w=ne(d);x.set(w,A[n]=dt(w,d))}let M=null;V.length||(M=ut(o));let P=o[5]&&ct(o);return{c(){e=g("div"),_e(t.$$.fragment),r=B(),l=g("div"),s=g("div"),i=g("div"),u=g("input"),a=B(),v=g("div"),m=g("button"),h=ee("Delete"),k=B(),T=g("button"),L=ee("Show"),q=B(),C=g("button"),j=ee("Hide"),G=B(),_e(I.$$.fragment),D=B(),N=g("ul");for(let n=0;n<A.length;n+=1)A[n].c();M&&M.c(),re=B(),P&&P.c(),le=ve(),this.h()},l(n){e=b(n,"DIV",{class:!0});var d=E(e);he(t.$$.fragment,d),r=F(d),l=b(d,"DIV",{class:!0});var w=E(l);s=b(w,"DIV",{class:!0});var z=E(s);i=b(z,"DIV",{class:!0});var Z=E(i);u=b(Z,"INPUT",{type:!0,class:!0}),a=F(Z),v=b(Z,"DIV",{class:!0});var J=E(v);m=b(J,"BUTTON",{class:!0});var ie=E(m);h=te(ie,"Delete"),ie.forEach(_),k=F(J),T=b(J,"BUTTON",{class:!0});var ae=E(T);L=te(ae,"Show"),ae.forEach(_),q=F(J),C=b(J,"BUTTON",{class:!0});var se=E(C);j=te(se,"Hide"),se.forEach(_),J.forEach(_),Z.forEach(_),z.forEach(_),G=F(w),he(I.$$.fragment,w),w.forEach(_),d.forEach(_),D=F(n),N=b(n,"UL",{class:!0});var ge=E(N);for(let de=0;de<A.length;de+=1)A[de].l(ge);M&&M.l(ge),ge.forEach(_),re=F(n),P&&P.l(n),le=ve(),this.h()},h(){f(u,"type","checkbox"),f(u,"class","select-checkbox"),f(m,"class","svelte-jczohe"),f(T,"class","svelte-jczohe"),f(C,"class","svelte-jczohe"),f(v,"class","select-group svelte-jczohe"),f(i,"class","select-options"),f(s,"class","show-hide svelte-jczohe"),f(l,"class","options-bar svelte-jczohe"),f(e,"class","sticky-search-bar list-group-item svelte-jczohe"),f(N,"class",X="word-group "+o[4]+" svelte-jczohe")},m(n,d){O(n,e,d),me(t,e,null),c(e,r),c(e,l),c(l,s),c(s,i),c(i,u),u.checked=o[3],c(i,a),c(i,v),c(v,m),c(m,h),c(v,k),c(v,T),c(T,L),c(v,q),c(v,C),c(C,j),c(l,G),me(I,l,null),O(n,D,d),O(n,N,d);for(let w=0;w<A.length;w+=1)A[w].m(N,null);M&&M.m(N,null),O(n,re,d),P&&P.m(n,d),O(n,le,d),p=!0,H||(W=[U(u,"change",o[20]),U(u,"change",o[7]),U(m,"click",o[8]),U(T,"click",o[9]),U(C,"click",o[10])],H=!0)},p(n,d){const w={};d[0]&1&&(w.key=n[0]),t.$set(w),d[0]&8&&(u.checked=n[3]);const z={};d[0]&1&&(z.key=n[0]),d[0]&4&&(z.sort_by=n[2].sort_by),d[0]&4&&(z.sort_order=n[2].sort_order),I.$set(z),d[0]&129095&&(V=n[2].words.filter(n[22]),Ee(),A=At(A,d,ne,1,n,V,x,N,Dt,dt,null,ft),Te(),!V.length&&M?M.p(n,d):V.length?M&&(M.d(1),M=null):(M=ut(n),M.c(),M.m(N,null))),(!p||d[0]&16&&X!==(X="word-group "+n[4]+" svelte-jczohe"))&&f(N,"class",X),n[5]?P?(P.p(n,d),d[0]&32&&R(P,1)):(P=ct(n),P.c(),R(P,1),P.m(le.parentNode,le)):P&&(Ee(),Q(P,1,1,()=>{P=null}),Te())},i(n){if(!p){R(t.$$.fragment,n),R(I.$$.fragment,n);for(let d=0;d<V.length;d+=1)R(A[d]);R(P),p=!0}},o(n){Q(t.$$.fragment,n),Q(I.$$.fragment,n);for(let d=0;d<A.length;d+=1)Q(A[d]);Q(P),p=!1},d(n){n&&_(e),pe(t),pe(I),n&&_(D),n&&_(N);for(let d=0;d<A.length;d+=1)A[d].d();M&&M.d(),n&&_(re),P&&P.d(n),n&&_(le),H=!1,He(W)}}}function Le(){return document.querySelectorAll('input[type="checkbox"].select-word'),Me(o=>!0)}function Me(o){const e=document.querySelectorAll('input[type="checkbox"].select-word');if(!e)return 0;let t=0;return e.forEach(r=>{r.checked&&o(r)&&(t+=1)}),t}function ll(o,e,t){let r,{key:l="words"}=e,s=Nt(l);s=Ue(s);let i=!1,u="",a="",v,m;m=new URLSearchParams(window.location.search).get("word"),m&&xe(parseInt(m),l);function h(){let n=Le()===0;const d=document.querySelectorAll('input[type="checkbox"].select-word');if(!d)return 0;console.log("selecting with action=%i",n);let w=0;d.forEach(z=>{z.checked=n,w+=1}),w!==0&&t(3,i=n)}async function k(){const n=Le();if(n===0||!window.confirm(n===1?"Delete word?":`Delete ${n} words?`))return!1;const d=Me(w=>{var z,Z;if(w.dataset.id){const J=Number(w.dataset.id);if(!Number.isNaN(J))if(tt(s,J)){const ie=w.parentElement;ie&&((z=ie.parentElement)==null||z.removeChild(ie));const ae=document.getElementById(`${l}-hr-${J}`);return ae&&((Z=ae.parentElement)==null||Z.removeChild(ae)),!0}else console.log(`delete for ${J} failed`)}return!1});return await It(),d>0&&(ce(s),t(2,s)),!0}function T(){Le()===0?s.words.filter(n=>Ve(r,n)).forEach(n=>{var w;const d=(w=document.getElementById(`${l}-${n.id}`))==null?void 0:w.querySelector("details");d&&(d.open=!0)}):Me(n=>{var w;const d=(w=n.parentElement)==null?void 0:w.querySelector("details");return d?(d.open=!0,!0):!1})}function L(){Le()===0?s.words.filter(n=>Ve(r,n)).forEach(n=>{var w;const d=(w=document.getElementById(`${l}-${n.id}`))==null?void 0:w.querySelector("details");d&&(d.open=!1)}):Me(n=>{var w;const d=(w=n.parentElement)==null?void 0:w.querySelector("details");return d?(d.open=!1,!0):!1})}function q(n){console.log(n),n.key==l&&(n.word&&Lt(s,n.word.id,n.word.word)?(t(2,s=Ue(s)),console.log("updated list: %o",s.words),ce(s),t(2,s),xe(n.word.id,l)):console.log("word update failed: %o",n.word))}function C(n){if(n.key!=l||!n.word.def)return;let d=We(n.word.def.trim());Wt(s,n.word.id,d)?ce(s):console.log("definition update failed")}function j(n){function d(w,z){return w.tags=z.tags,w.cache=et(w),!0}n.key==l&&(Oe(s,n.word,d),ce(s),t(2,s))}function G(n){function d(w,z){return w.favorite=z.favorite,!0}n.key==l&&(Oe(s,n.word,d),ce(s),t(2,s))}function I(n){function d(w,z){return w.dict_def=z.dict_def,!0}n.key==l&&Mt.default.lookup(n.word.word).then(w=>{w?n.word.dict_def=w:t(5,v=`'${n.word.word}' has no dictionary definition`)}).finally(()=>{n.word.cache=et(n.word),Oe(s,n.word,d),ce(s),t(2,s)})}function D(n){n.key==l&&(tt(s,n.word.id)?(ce(s),t(2,s)):console.log("remove word failed"))}function N(n){n.key==l&&(t(2,s.sort_by=n.sort_by,s),t(2,s.sort_order=n.sort_order,s),Ue(s),ce(s))}function A(n){n.key==l&&t(1,u=n.search.toLocaleLowerCase())}const x=n=>{A(n.detail)};function X(){i=this.checked,t(3,i)}const re=n=>N(n.detail),le=n=>Ve(r,n),p=n=>q(n.detail),H=n=>C(n.detail),W=n=>D(n.detail),V=n=>j(n.detail),ne=n=>G(n.detail),M=n=>I(n.detail);function P(n){v=n,t(5,v)}return o.$$set=n=>{"key"in n&&t(0,l=n.key)},o.$$.update=()=>{o.$$.dirty[0]&2&&t(6,r=u.split(" ").filter(n=>n.length>0)),o.$$.dirty[0]&2&&t(4,a=u===""?"":"full-defs")},[l,u,s,i,a,v,r,h,k,T,L,q,C,j,G,I,D,N,A,x,X,re,le,p,H,W,V,ne,M,P]}class rl extends be{constructor(e){super(),ke(this,e,ll,tl,we,{key:0},null,[-1,-1])}}function sl(o){let e,t,r,l,s,i,u;return i=new rl({props:{key:"words"}}),{c(){e=g("nav"),t=g("a"),r=ee("Add words"),l=B(),s=g("div"),_e(i.$$.fragment),this.h()},l(a){e=b(a,"NAV",{class:!0});var v=E(e);t=b(v,"A",{href:!0});var m=E(t);r=te(m,"Add words"),m.forEach(_),v.forEach(_),l=F(a),s=b(a,"DIV",{class:!0});var h=E(s);he(i.$$.fragment,h),h.forEach(_),this.h()},h(){f(t,"href",St+"/add"),f(e,"class","main"),f(s,"class","list-vocab-container")},m(a,v){O(a,e,v),c(e,t),c(t,r),O(a,l,v),O(a,s,v),me(i,s,null),u=!0},p:ue,i(a){u||(R(i.$$.fragment,a),u=!0)},o(a){Q(i.$$.fragment,a),u=!1},d(a){a&&_(e),a&&_(l),a&&_(s),pe(i)}}}class fl extends be{constructor(e){super(),ke(this,e,null,sl,we,{})}}export{fl as default};
