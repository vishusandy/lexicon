import{S as fe,i as de,s as ue,k as g,q as X,a as R,l as b,m as E,r as Y,h as _,c as C,n as d,K as _t,b as j,G as c,T as je,M as V,N as it,B as le,P as Te,Q as Be,U as ht,V as mt,W as Ke,u as Ae,I as Pe,J as nt,w as se,x as oe,y as ie,f as z,g as me,t as J,d as pe,O as at,z as ne,o as ft,j as pt,R as dt,L as Ge,e as he,X as vt}from"../../../chunks/index-fd4b9835.js";import{b as gt}from"../../../chunks/paths-b4419565.js";import{S as ye,e as Se,f as Ne,r as Ee,l as bt,b as Me,s as Je,g as He,h as wt,c as ae,i as kt,j as Fe,A as yt,n as Qe,k as Et}from"../../../chunks/words-8e08438b.js";import{T as Tt,e as ut,D as At,a as It}from"../../../chunks/DictDef-ef8c2003.js";function Dt(o){let e,l,t,r,s,i,u,a,w,h,p,v,k,L,F,U,B,N;return{c(){e=g("div"),l=g("form"),t=g("select"),r=g("option"),s=X("Word"),u=g("option"),a=X("Date"),p=R(),v=g("input"),L=R(),F=g("label"),this.h()},l(W){e=b(W,"DIV",{class:!0});var P=E(e);l=b(P,"FORM",{});var q=E(l);t=b(q,"SELECT",{id:!0,title:!0,class:!0});var D=E(t);r=b(D,"OPTION",{});var Z=E(r);s=Y(Z,"Word"),Z.forEach(_),u=b(D,"OPTION",{});var M=E(u);a=Y(M,"Date"),M.forEach(_),D.forEach(_),p=C(q),v=b(q,"INPUT",{id:!0,type:!0,title:!0,class:!0}),L=C(q),F=b(q,"LABEL",{for:!0,class:!0,title:!0}),E(F).forEach(_),q.forEach(_),P.forEach(_),this.h()},h(){r.__value="word",r.value=r.__value,r.selected=i=o[0]==ye.Word,u.__value="id",u.value=u.__value,u.selected=w=o[0]==ye.Id,d(t,"id",h=o[1]+"-sort-by"),d(t,"title","Sort by"),d(t,"class","svelte-x4vm2d"),o[0]===void 0&&_t(()=>o[7].call(t)),d(v,"id",k=o[1]+"-sort-order"),d(v,"type","checkbox"),d(v,"title",o[3]),d(v,"class","sort-checkbox form-check-input svelte-x4vm2d"),d(F,"for",U=o[1]+"-sort-order"),d(F,"class","sort-checkbox-label form-check-label svelte-x4vm2d"),d(F,"title",o[3]),d(e,"class","sort-container svelte-x4vm2d")},m(W,P){j(W,e,P),c(e,l),c(l,t),c(t,r),c(r,s),c(t,u),c(u,a),je(t,o[0]),c(l,p),c(l,v),v.checked=o[2],c(l,L),c(l,F),B||(N=[V(t,"change",o[7]),V(t,"change",o[4]),V(v,"change",o[8]),V(v,"change",o[4]),V(l,"submit",it(o[6]))],B=!0)},p(W,[P]){P&1&&i!==(i=W[0]==ye.Word)&&(r.selected=i),P&1&&w!==(w=W[0]==ye.Id)&&(u.selected=w),P&2&&h!==(h=W[1]+"-sort-by")&&d(t,"id",h),P&1&&je(t,W[0]),P&2&&k!==(k=W[1]+"-sort-order")&&d(v,"id",k),P&8&&d(v,"title",W[3]),P&4&&(v.checked=W[2]),P&2&&U!==(U=W[1]+"-sort-order")&&d(F,"for",U),P&8&&d(F,"title",W[3])},i:le,o:le,d(W){W&&_(e),B=!1,Te(N)}}}function Lt(o,e,l){const t=Be();let{key:r}=e,{sort_by:s}=e,{sort_order:i}=e,u,a=i===Se.Desc;function w(k){t("updateSort",{sort_by:s,sort_order:i,key:r})}function h(k){ht.call(this,o,k)}function p(){s=mt(this),l(0,s)}function v(){a=this.checked,l(2,a)}return o.$$set=k=>{"key"in k&&l(1,r=k.key),"sort_by"in k&&l(0,s=k.sort_by),"sort_order"in k&&l(5,i=k.sort_order)},o.$$.update=()=>{o.$$.dirty&4&&l(5,i=a?Se.Desc:Se.Asc),o.$$.dirty&4&&l(3,u=a?"Descending sort order":"Ascending sort order")},[s,r,a,u,w,i,h,p,v]}class Wt extends fe{constructor(e){super(),de(this,e,Lt,Dt,ue,{key:1,sort_by:0,sort_order:5})}}function St(o){let e,l,t,r,s,i,u,a,w,h;return{c(){e=g("button"),l=g("span"),t=X(o[1]),r=R(),s=g("audio"),i=g("a"),u=X("Audio"),this.h()},l(p){e=b(p,"BUTTON",{class:!0});var v=E(e);l=b(v,"SPAN",{class:!0});var k=E(l);t=Y(k,o[1]),k.forEach(_),r=C(v),s=b(v,"AUDIO",{src:!0});var L=E(s);i=b(L,"A",{href:!0});var F=E(i);u=Y(F,"Audio"),F.forEach(_),L.forEach(_),v.forEach(_),this.h()},h(){d(l,"class","phonetics svelte-1owj048"),d(i,"href",o[0]),Ke(s.src,a=o[0])||d(s,"src",a),d(e,"class","svelte-1owj048")},m(p,v){j(p,e,v),c(e,l),c(l,t),c(e,r),c(e,s),c(s,i),c(i,u),w||(h=V(e,"click",Nt),w=!0)},p(p,[v]){v&2&&Ae(t,p[1]),v&1&&d(i,"href",p[0]),v&1&&!Ke(s.src,a=p[0])&&d(s,"src",a)},i:le,o:le,d(p){p&&_(e),w=!1,h()}}}function Nt(o){var l;const e=(l=o.target)==null?void 0:l.querySelector("audio");e&&e.play()}function Mt(o,e,l){let{src:t}=e,{title:r=""}=e;return o.$$set=s=>{"src"in s&&l(0,t=s.src),"title"in s&&l(1,r=s.title)},[t,r]}class Ht extends fe{constructor(e){super(),de(this,e,Mt,St,ue,{src:0,title:1})}}function Xe(o,e,l){const t=o.slice();return t[24]=e[l],t}function Ye(o){let e,l,t=o[0].dict_def.audio,r=[];for(let i=0;i<t.length;i+=1)r[i]=Ze(Xe(o,t,i));const s=i=>J(r[i],1,1,()=>{r[i]=null});return{c(){e=g("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=b(i,"DIV",{class:!0});var u=E(e);for(let a=0;a<r.length;a+=1)r[a].l(u);u.forEach(_),this.h()},h(){d(e,"class","audio-entries svelte-i6a978")},m(i,u){j(i,e,u);for(let a=0;a<r.length;a+=1)r[a].m(e,null);l=!0},p(i,u){if(u&1){t=i[0].dict_def.audio;let a;for(a=0;a<t.length;a+=1){const w=Xe(i,t,a);r[a]?(r[a].p(w,u),z(r[a],1)):(r[a]=Ze(w),r[a].c(),z(r[a],1),r[a].m(e,null))}for(me(),a=t.length;a<r.length;a+=1)s(a);pe()}},i(i){if(!l){for(let u=0;u<t.length;u+=1)z(r[u]);l=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)J(r[u]);l=!1},d(i){i&&_(e),dt(r,i)}}}function Ze(o){let e,l;return e=new Ht({props:{src:o[24].url,title:o[24].phonetics}}),{c(){se(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},p(t,r){const s={};r&1&&(s.src=t[24].url),r&1&&(s.title=t[24].phonetics),e.$set(s)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function $e(o){let e,l;return e=new At({props:{dict:o[0].dict_def}}),{c(){se(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},p(t,r){const s={};r&1&&(s.dict=t[0].dict_def),e.$set(s)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function xe(o){let e=o[0].def+"",l;return{c(){l=X(e)},l(t){l=Y(t,e)},m(t,r){j(t,l,r)},p(t,r){r&1&&e!==(e=t[0].def+"")&&Ae(l,e)},d(t){t&&_(l)}}}function Ft(o){let e,l,t,r,s,i,u,a,w,h,p,v,k,L,F,U,B,N,W=o[0].word+"",P,q,D,Z,M,T,m,f,A,O,n,I,H,$,re,ce,Ie,De,ee,Le,ve,ge,x,We,qe,K=o[0].dict_def&&o[0].dict_def.audio.length>0&&Ye(o),G=o[0].dict_def&&$e(o),Q=o[0].def&&xe(o);function ct(y){o[17](y)}let Ue={key:o[1]};return o[0].tags!==void 0&&(Ue.tags=o[0].tags),ee=new Tt({props:Ue}),Pe.push(()=>nt(ee,"tags",ct,o[0].tags)),ee.$on("updateTags",o[6]),{c(){e=g("hr"),l=R(),t=g("li"),r=g("button"),s=g("i"),i=R(),u=g("button"),a=g("i"),w=R(),h=g("input"),v=R(),k=g("label"),F=R(),U=g("details"),B=g("summary"),N=g("dfn"),P=X(W),D=R(),Z=g("div"),M=R(),T=g("div"),K&&K.c(),m=R(),G&&G.c(),f=R(),A=g("span"),O=X("Notes:"),n=R(),I=g("div"),Q&&Q.c(),$=R(),re=g("div"),ce=g("span"),Ie=X("Tags:"),De=R(),se(ee.$$.fragment),this.h()},l(y){e=b(y,"HR",{class:!0}),l=C(y),t=b(y,"LI",{id:!0,class:!0});var S=E(t);r=b(S,"BUTTON",{class:!0});var _e=E(r);s=b(_e,"I",{class:!0}),E(s).forEach(_),_e.forEach(_),i=C(S),u=b(S,"BUTTON",{class:!0,title:!0});var Oe=E(u);a=b(Oe,"I",{class:!0}),E(a).forEach(_),Oe.forEach(_),w=C(S),h=b(S,"INPUT",{id:!0,title:!0,class:!0,type:!0}),v=C(S),k=b(S,"LABEL",{for:!0,class:!0}),E(k).forEach(_),F=C(S),U=b(S,"DETAILS",{class:!0});var be=E(U);B=b(be,"SUMMARY",{class:!0});var we=E(B);N=b(we,"DFN",{id:!0,class:!0,contenteditable:!0});var Ve=E(N);P=Y(Ve,W),Ve.forEach(_),D=C(we),Z=b(we,"DIV",{class:!0}),E(Z).forEach(_),we.forEach(_),M=C(be),T=b(be,"DIV",{class:!0});var te=E(T);K&&K.l(te),m=C(te),G&&G.l(te),f=C(te),A=b(te,"SPAN",{class:!0});var ze=E(A);O=Y(ze,"Notes:"),ze.forEach(_),n=C(te),I=b(te,"DIV",{id:!0,class:!0,contenteditable:!0});var Re=E(I);Q&&Q.l(Re),Re.forEach(_),$=C(te),re=b(te,"DIV",{class:!0});var ke=E(re);ce=b(ke,"SPAN",{class:!0});var Ce=E(ce);Ie=Y(Ce,"Tags:"),Ce.forEach(_),De=C(ke),oe(ee.$$.fragment,ke),ke.forEach(_),te.forEach(_),be.forEach(_),S.forEach(_),this.h()},h(){d(e,"class","svelte-i6a978"),d(s,"class","fa-solid fa-xmark"),d(r,"class","remove-word-btn svelte-i6a978"),d(a,"class","fa-solid fa-arrows-rotate"),d(u,"class","refresh-btn svelte-i6a978"),d(u,"title","Refresh defintion"),d(h,"id",p=o[1]+"-fav-"+o[0].id),d(h,"title","Favorite"),d(h,"class","fav-checkbox svelte-i6a978"),d(h,"type","checkbox"),d(k,"for",L=o[1]+"-fav-"+o[0].id),d(k,"class","fav-label svelte-i6a978"),d(N,"id",q=o[1]+"-word-"+o[0].id),d(N,"class","word svelte-i6a978"),d(N,"contenteditable","true"),d(Z,"class","detail-arrow svelte-i6a978"),d(B,"class","svelte-i6a978"),d(A,"class","def-label svelte-i6a978"),d(I,"id",H=o[1]+"-def-"+o[0].id),d(I,"class","word-definition svelte-i6a978"),d(I,"contenteditable","true"),d(ce,"class","tags-label svelte-i6a978"),d(re,"class","tag-list svelte-i6a978"),d(T,"class","detail-content svelte-i6a978"),U.open=ve=Array.isArray(o[2])&&o[2].length>0,d(U,"class","svelte-i6a978"),d(t,"id",ge=o[1]+"-"+o[0].id),d(t,"class","word-item svelte-i6a978")},m(y,S){j(y,e,S),j(y,l,S),j(y,t,S),c(t,r),c(r,s),c(t,i),c(t,u),c(u,a),c(t,w),c(t,h),h.checked=o[0].favorite,c(t,v),c(t,k),c(t,F),c(t,U),c(U,B),c(B,N),c(N,P),c(B,D),c(B,Z),c(U,M),c(U,T),K&&K.m(T,null),c(T,m),G&&G.m(T,null),c(T,f),c(T,A),c(A,O),c(T,n),c(T,I),Q&&Q.m(I,null),c(T,$),c(T,re),c(re,ce),c(ce,Ie),c(re,De),ie(ee,re,null),x=!0,We||(qe=[V(r,"click",o[12]),V(u,"click",o[10]),V(h,"change",o[13]),V(h,"change",o[7]),V(N,"blur",o[14]),V(N,"keydown",o[11]),V(N,"click",Bt),V(I,"keydown",ut),V(I,"blur",o[15]),V(I,"focus",o[16])],We=!0)},p(y,[S]){(!x||S&3&&p!==(p=y[1]+"-fav-"+y[0].id))&&d(h,"id",p),S&1&&(h.checked=y[0].favorite),(!x||S&3&&L!==(L=y[1]+"-fav-"+y[0].id))&&d(k,"for",L),(!x||S&1)&&W!==(W=y[0].word+"")&&Ae(P,W),(!x||S&3&&q!==(q=y[1]+"-word-"+y[0].id))&&d(N,"id",q),y[0].dict_def&&y[0].dict_def.audio.length>0?K?(K.p(y,S),S&1&&z(K,1)):(K=Ye(y),K.c(),z(K,1),K.m(T,m)):K&&(me(),J(K,1,1,()=>{K=null}),pe()),y[0].dict_def?G?(G.p(y,S),S&1&&z(G,1)):(G=$e(y),G.c(),z(G,1),G.m(T,f)):G&&(me(),J(G,1,1,()=>{G=null}),pe()),y[0].def?Q?Q.p(y,S):(Q=xe(y),Q.c(),Q.m(I,null)):Q&&(Q.d(1),Q=null),(!x||S&3&&H!==(H=y[1]+"-def-"+y[0].id))&&d(I,"id",H);const _e={};S&2&&(_e.key=y[1]),!Le&&S&1&&(Le=!0,_e.tags=y[0].tags,at(()=>Le=!1)),ee.$set(_e),(!x||S&4&&ve!==(ve=Array.isArray(y[2])&&y[2].length>0))&&(U.open=ve),(!x||S&3&&ge!==(ge=y[1]+"-"+y[0].id))&&d(t,"id",ge)},i(y){x||(z(K),z(G),z(ee.$$.fragment,y),x=!0)},o(y){J(K),J(G),J(ee.$$.fragment,y),x=!1},d(y){y&&_(e),y&&_(l),y&&_(t),K&&K.d(),G&&G.d(),Q&&Q.d(),ne(ee),We=!1,Te(qe)}}}const Bt=o=>{o.preventDefault()};function Pt(o,e,l){const t=Be();let{key:r}=e,{item:s}=e,{highlight:i}=e;function u(){return r+"-def-"+s.id}function a(){return document.getElementById(r+"-word-"+s.id)}function w(){return document.getElementById(`${r}-${s.id}`)}function h(){return document.getElementById(u())}ft(()=>{const f=a();f&&L(f)}),pt(()=>{B()});function p(){const f=a();if(f){if(l(0,s.word=f.innerHTML,s),s.word==""){k(s)||l(0,s.word=f.title,s);return}f.title!=s.word&&(L(f),t("updateWord",{word:s,key:r}))}}function v(){var A;l(0,s.def=(A=s.def)==null?void 0:A.replaceAll("<br>",""),s);const f=h();f&&(f.innerHTML=f.innerHTML.replaceAll("<br>","")),t("updateDefinition",{word:s,key:r})}function k(f){return window.confirm("Delete word?")?(t("deleteWord",{word:f,key:r}),!0):!1}function L(f){f.title=s.word}function F(){t("updateWordTags",{word:s,key:r})}function U(){t("updateFavorite",{word:s,key:r})}function B(){if(N(),i.length===0)return;const f=h(),A=w(),O=a();O&&(O.innerHTML=Ne(O.innerHTML,i)),f&&(f.innerHTML=Ne(f.innerHTML,i)),A&&(A.querySelectorAll(".pos, .def, .syn, .ant").forEach(n=>n.innerHTML=Ne(n.innerHTML,i)),A.querySelectorAll(".tag").forEach(n=>{var I;i.some(H=>H=="#"+n.innerHTML.toLocaleLowerCase())&&((I=n.parentElement)==null||I.classList.add("highlight-tag"))}))}function N(){const f=h(),A=w(),O=a();O&&(O.innerHTML=Ee(O.innerHTML)),f&&(f.innerHTML=Ee(f.innerHTML)),A&&A.querySelectorAll(".pos, .def, .syn, .ant").forEach(n=>n.innerHTML=Ee(n.innerHTML))}function W(){var A;const f=(A=w())==null?void 0:A.querySelector("details");f&&(f.open=!0),t("refreshWord",{word:s,key:r})}function P(f){const A=f.target;if(f.code=="Escape"&&A){A.innerHTML=A.title,A.blur();return}ut(f)}const q=()=>k(s);function D(){s.favorite=this.checked,l(0,s)}const Z=()=>p(),M=()=>{v(),B()},T=()=>N();function m(f){o.$$.not_equal(s.tags,f)&&(s.tags=f,l(0,s))}return o.$$set=f=>{"key"in f&&l(1,r=f.key),"item"in f&&l(0,s=f.item),"highlight"in f&&l(2,i=f.highlight)},[s,r,i,p,v,k,F,U,B,N,W,P,q,D,Z,M,T,m]}class qt extends fe{constructor(e){super(),de(this,e,Pt,Ft,ue,{key:1,item:0,highlight:2})}}function et(o){let e,l,t,r;return{c(){e=g("button"),l=g("i"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var i=E(e);l=b(i,"I",{class:!0}),E(l).forEach(_),i.forEach(_),this.h()},h(){d(l,"class","fa-solid fa-x"),d(e,"class","reset-btn svelte-8w6wqe")},m(s,i){j(s,e,i),c(e,l),t||(r=V(e,"click",o[3]),t=!0)},p:le,d(s){s&&_(e),t=!1,r()}}}function Ut(o){let e,l,t,r,s,i,u,a,w,h=o[0]&&et(o);return{c(){e=g("div"),l=g("form"),t=g("div"),r=g("i"),s=R(),i=g("input"),u=R(),h&&h.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var v=E(e);l=b(v,"FORM",{});var k=E(l);t=b(k,"DIV",{class:!0});var L=E(t);r=b(L,"I",{class:!0}),E(r).forEach(_),L.forEach(_),s=C(k),i=b(k,"INPUT",{placeholder:!0,class:!0}),u=C(k),h&&h.l(k),k.forEach(_),v.forEach(_),this.h()},h(){d(r,"class","fa-solid fa-magnifying-glass"),d(t,"class","search-icon svelte-8w6wqe"),d(i,"placeholder","filter"),d(i,"class","search-input form-control svelte-8w6wqe"),d(e,"class","search-container svelte-8w6wqe")},m(p,v){j(p,e,v),c(e,l),c(l,t),c(t,r),c(l,s),c(l,i),Ge(i,o[0]),c(l,u),h&&h.m(l,null),a||(w=[V(i,"input",o[5]),V(i,"input",o[1]),V(i,"keydown",o[2]),V(l,"submit",it(o[1]))],a=!0)},p(p,[v]){v&1&&i.value!==p[0]&&Ge(i,p[0]),p[0]?h?h.p(p,v):(h=et(p),h.c(),h.m(l,null)):h&&(h.d(1),h=null)},i:le,o:le,d(p){p&&_(e),h&&h.d(),a=!1,Te(w)}}}function Ot(o,e,l){const t=Be();let{key:r}=e,s;function i(h){t("updateFilter",{search:s,key:r})}function u(h){It(h)&&(l(0,s=""),t("updateFilter",{search:s,key:r}))}function a(h){l(0,s=""),t("updateFilter",{search:s,key:r})}function w(){s=this.value,l(0,s)}return o.$$set=h=>{"key"in h&&l(4,r=h.key)},[s,i,u,a,r,w]}class Vt extends fe{constructor(e){super(),de(this,e,Ot,Ut,ue,{key:4})}}function tt(o){let e,l;return{c(){e=g("div"),l=X(o[0]),this.h()},l(t){e=b(t,"DIV",{class:!0});var r=E(e);l=Y(r,o[0]),r.forEach(_),this.h()},h(){d(e,"class","alert-box svelte-9zlq1k")},m(t,r){j(t,e,r),c(e,l),o[3](e)},p(t,r){r&1&&Ae(l,t[0])},d(t){t&&_(e),o[3](null)}}}function zt(o){let e,l=o[0]&&tt(o);return{c(){l&&l.c(),e=he()},l(t){l&&l.l(t),e=he()},m(t,r){l&&l.m(t,r),j(t,e,r)},p(t,[r]){t[0]?l?l.p(t,r):(l=tt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:le,o:le,d(t){l&&l.d(t),t&&_(e)}}}function Rt(o,e,l){let{message:t}=e,{remove_time:r=4e3}=e,s,i,u;ft(()=>{i=setTimeout(a,r),u=setTimeout(w,r+1500)}),vt(()=>{i&&clearTimeout(i),u&&clearTimeout(u)});function a(){l(1,s.style.opacity="0",s)}function w(){var p;l(0,t=void 0),(p=s.parentNode)==null||p.removeChild(s)}function h(p){Pe[p?"unshift":"push"](()=>{s=p,l(1,s)})}return o.$$set=p=>{"message"in p&&l(0,t=p.message),"remove_time"in p&&l(2,r=p.remove_time)},[t,s,r,h]}class Ct extends fe{constructor(e){super(),de(this,e,Rt,zt,ue,{message:0,remove_time:2})}}function lt(o,e,l){const t=o.slice();return t[27]=e[l],t}function rt(o){let e;function l(s,i){return s[1]?Kt:jt}let t=l(o),r=t(o);return{c(){r.c(),e=he()},l(s){r.l(s),e=he()},m(s,i){r.m(s,i),j(s,e,i)},p(s,i){t!==(t=l(s))&&(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&_(e)}}}function jt(o){let e,l;return{c(){e=g("p"),l=X("No words have been added")},l(t){e=b(t,"P",{});var r=E(e);l=Y(r,"No words have been added"),r.forEach(_)},m(t,r){j(t,e,r),c(e,l)},d(t){t&&_(e)}}}function Kt(o){let e,l;return{c(){e=g("p"),l=X("No matching words")},l(t){e=b(t,"P",{});var r=E(e);l=Y(r,"No matching words"),r.forEach(_)},m(t,r){j(t,e,r),c(e,l)},d(t){t&&_(e)}}}function st(o){let e,l;return e=new qt({props:{key:o[0],item:o[27],highlight:o[5]}}),e.$on("updateWord",o[19]),e.$on("updateDefinition",o[20]),e.$on("deleteWord",o[21]),e.$on("updateWordTags",o[22]),e.$on("updateFavorite",o[23]),e.$on("refreshWord",o[24]),{c(){se(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},p(t,r){const s={};r&1&&(s.key=t[0]),r&36&&(s.item=t[27]),r&32&&(s.highlight=t[5]),e.$set(s)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function ot(o){let e,l,t;function r(i){o[25](i)}let s={};return o[4]!==void 0&&(s.message=o[4]),e=new Ct({props:s}),Pe.push(()=>nt(e,"message",r,o[4])),{c(){se(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,u){ie(e,i,u),t=!0},p(i,u){const a={};!l&&u&16&&(l=!0,a.message=i[4],at(()=>l=!1)),e.$set(a)},i(i){t||(z(e.$$.fragment,i),t=!0)},o(i){J(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function Gt(o){let e,l,t,r,s,i,u,a,w,h,p,v,k,L,F,U,B,N,W,P;l=new Vt({props:{key:o[0]}}),l.$on("updateFilter",o[16]),v=new Wt({props:{key:o[0],sort_by:o[2].sort_by,sort_order:o[2].sort_order}}),v.$on("updateSort",o[17]);let q=o[2].words.filter(o[18]),D=[];for(let m=0;m<q.length;m+=1)D[m]=st(lt(o,q,m));const Z=m=>J(D[m],1,1,()=>{D[m]=null});let M=null;q.length||(M=rt(o));let T=o[4]&&ot(o);return{c(){e=g("div"),se(l.$$.fragment),t=R(),r=g("div"),s=g("div"),i=g("button"),u=X("Show"),a=X("/"),w=g("button"),h=X("Hide"),p=R(),se(v.$$.fragment),k=R(),L=g("ul");for(let m=0;m<D.length;m+=1)D[m].c();M&&M.c(),U=R(),T&&T.c(),B=he(),this.h()},l(m){e=b(m,"DIV",{class:!0});var f=E(e);oe(l.$$.fragment,f),t=C(f),r=b(f,"DIV",{class:!0});var A=E(r);s=b(A,"DIV",{class:!0});var O=E(s);i=b(O,"BUTTON",{class:!0});var n=E(i);u=Y(n,"Show"),n.forEach(_),a=Y(O,"/"),w=b(O,"BUTTON",{class:!0});var I=E(w);h=Y(I,"Hide"),I.forEach(_),O.forEach(_),p=C(A),oe(v.$$.fragment,A),A.forEach(_),f.forEach(_),k=C(m),L=b(m,"UL",{class:!0});var H=E(L);for(let $=0;$<D.length;$+=1)D[$].l(H);M&&M.l(H),H.forEach(_),U=C(m),T&&T.l(m),B=he(),this.h()},h(){d(i,"class","svelte-1o6x0zo"),d(w,"class","svelte-1o6x0zo"),d(s,"class","show-hide svelte-1o6x0zo"),d(r,"class","options-bar svelte-1o6x0zo"),d(e,"class","sticky-search-bar list-group-item svelte-1o6x0zo"),d(L,"class",F="word-group "+o[3]+" svelte-1o6x0zo")},m(m,f){j(m,e,f),ie(l,e,null),c(e,t),c(e,r),c(r,s),c(s,i),c(i,u),c(s,a),c(s,w),c(w,h),c(r,p),ie(v,r,null),j(m,k,f),j(m,L,f);for(let A=0;A<D.length;A+=1)D[A].m(L,null);M&&M.m(L,null),j(m,U,f),T&&T.m(m,f),j(m,B,f),N=!0,W||(P=[V(i,"click",o[6]),V(w,"click",o[7])],W=!0)},p(m,[f]){const A={};f&1&&(A.key=m[0]),l.$set(A);const O={};if(f&1&&(O.key=m[0]),f&4&&(O.sort_by=m[2].sort_by),f&4&&(O.sort_order=m[2].sort_order),v.$set(O),f&16167){q=m[2].words.filter(m[18]);let n;for(n=0;n<q.length;n+=1){const I=lt(m,q,n);D[n]?(D[n].p(I,f),z(D[n],1)):(D[n]=st(I),D[n].c(),z(D[n],1),D[n].m(L,null))}for(me(),n=q.length;n<D.length;n+=1)Z(n);pe(),!q.length&&M?M.p(m,f):q.length?M&&(M.d(1),M=null):(M=rt(m),M.c(),M.m(L,null))}(!N||f&8&&F!==(F="word-group "+m[3]+" svelte-1o6x0zo"))&&d(L,"class",F),m[4]?T?(T.p(m,f),f&16&&z(T,1)):(T=ot(m),T.c(),z(T,1),T.m(B.parentNode,B)):T&&(me(),J(T,1,1,()=>{T=null}),pe())},i(m){if(!N){z(l.$$.fragment,m),z(v.$$.fragment,m);for(let f=0;f<q.length;f+=1)z(D[f]);z(T),N=!0}},o(m){J(l.$$.fragment,m),J(v.$$.fragment,m),D=D.filter(Boolean);for(let f=0;f<D.length;f+=1)J(D[f]);J(T),N=!1},d(m){m&&_(e),ne(l),ne(v),m&&_(k),m&&_(L),dt(D,m),M&&M.d(),m&&_(U),T&&T.d(m),m&&_(B),W=!1,Te(P)}}}function Jt(o,e,l){let t,{key:r="words"}=e,s=bt(r);Me(s),s=s,console.log("word list: %o",s);let i="",u="",a,w;w=new URLSearchParams(window.location.search).get("word"),w&&Je(parseInt(w),r);function h(){s.words.filter(n=>He(t,n)).forEach(n=>{var H;const I=(H=document.getElementById(`${r}-${n.id}`))==null?void 0:H.querySelector("details");I&&(I.open=!0)})}function p(){s.words.filter(n=>He(t,n)).forEach(n=>{var H;const I=(H=document.getElementById(`${r}-${n.id}`))==null?void 0:H.querySelector("details");I&&(I.open=!1)})}function v(n){console.log(n),n.key==r&&(n.word&&wt(s,n.word.id,n.word.word)?(Me(s),ae(s),l(2,s),Je(n.word.id,r)):console.log("word update failed: %o",n.word))}function k(n){if(n.key!=r||!n.word.def)return;let I=Ee(n.word.def.trim());kt(s,n.word.id,I)?ae(s):console.log("definition update failed")}function L(n){function I(H,$){return H.tags=$.tags,H.cache=Qe(H),!0}n.key==r&&(Fe(s,n.word,I),ae(s),l(2,s))}function F(n){function I(H,$){return H.favorite=$.favorite,!0}n.key==r&&(Fe(s,n.word,I),ae(s),l(2,s))}function U(n){function I(H,$){return H.dict_def=$.dict_def,!0}n.key==r&&yt.default.lookup(n.word.word).then(H=>{H?n.word.dict_def=H:l(4,a=`'${n.word.word}' has no dictionary definition`)}).finally(()=>{n.word.cache=Qe(n.word),Fe(s,n.word,I),ae(s),l(2,s)})}function B(n){n.key==r&&(Et(s,n.word.id)?(ae(s),l(2,s)):console.log("remove word failed"))}function N(n){n.key==r&&(l(2,s.sort_by=n.sort_by,s),l(2,s.sort_order=n.sort_order,s),Me(s),ae(s))}function W(n){n.key==r&&l(1,i=n.search.toLocaleLowerCase())}const P=n=>{W(n.detail)},q=n=>N(n.detail),D=n=>He(t,n),Z=n=>v(n.detail),M=n=>k(n.detail),T=n=>B(n.detail),m=n=>L(n.detail),f=n=>F(n.detail),A=n=>U(n.detail);function O(n){a=n,l(4,a)}return o.$$set=n=>{"key"in n&&l(0,r=n.key)},o.$$.update=()=>{o.$$.dirty&2&&l(5,t=i.split(" ").filter(n=>n.length>0)),o.$$.dirty&2&&l(3,u=i===""?"":"full-defs")},[r,i,s,u,a,t,h,p,v,k,L,F,U,B,N,W,P,q,D,Z,M,T,m,f,A,O]}class Qt extends fe{constructor(e){super(),de(this,e,Jt,Gt,ue,{key:0})}}function Xt(o){let e,l,t,r,s,i,u;return i=new Qt({props:{key:"words"}}),{c(){e=g("nav"),l=g("a"),t=X("Add words"),r=R(),s=g("div"),se(i.$$.fragment),this.h()},l(a){e=b(a,"NAV",{class:!0});var w=E(e);l=b(w,"A",{href:!0});var h=E(l);t=Y(h,"Add words"),h.forEach(_),w.forEach(_),r=C(a),s=b(a,"DIV",{class:!0});var p=E(s);oe(i.$$.fragment,p),p.forEach(_),this.h()},h(){d(l,"href",gt+"/add"),d(e,"class","main"),d(s,"class","list-vocab-container")},m(a,w){j(a,e,w),c(e,l),c(l,t),j(a,r,w),j(a,s,w),ie(i,s,null),u=!0},p:le,i(a){u||(z(i.$$.fragment,a),u=!0)},o(a){J(i.$$.fragment,a),u=!1},d(a){a&&_(e),a&&_(r),a&&_(s),ne(i)}}}class el extends fe{constructor(e){super(),de(this,e,null,Xt,ue,{})}}export{el as default};
