import{S as ge,i as ve,s as we,k as v,q as te,a as j,l as w,m as y,r as le,h as c,c as H,n as d,K as bt,b as z,G as f,T as Xe,M as U,N as ht,B as de,P as je,R as Oe,U as kt,V as yt,W as Ze,u as ye,I as Ce,J as mt,w as fe,x as ue,y as ce,f as Y,g as Ee,t as $,d as Te,O as pt,z as _e,o as gt,j as Et,Q as Tt,L as $e,e as me,X as Dt,Y as It,Z as St,A as qt}from"../../../chunks/index-cee4d27d.js";import{S as Ne,e as Pe,g as ke,f as Fe,r as Le,l as At,b as Ue,s as xe,h as Nt,c as he,i as Wt,j as Lt,k as Ve,A as Mt,n as et,o as tt}from"../../../chunks/words-8389f65f.js";import{T as jt,e as vt,D as Ht,a as Bt}from"../../../chunks/DictDef-73c222fe.js";import{N as Pt}from"../../../chunks/Nav-f862eb66.js";function Ft(o){let e,s,r,t,l,i,a,u,b,m,_,h,I,S,V,O,K,x;return{c(){e=v("div"),s=v("form"),r=v("select"),t=v("option"),l=te("Word"),a=v("option"),u=te("Date"),_=j(),h=v("input"),S=j(),V=v("label"),this.h()},l(q){e=w(q,"DIV",{class:!0});var T=y(e);s=w(T,"FORM",{});var C=y(s);r=w(C,"SELECT",{id:!0,title:!0,class:!0});var B=y(r);t=w(B,"OPTION",{});var X=y(t);l=le(X,"Word"),X.forEach(c),a=w(B,"OPTION",{});var Z=y(a);u=le(Z,"Date"),Z.forEach(c),B.forEach(c),_=H(C),h=w(C,"INPUT",{id:!0,type:!0,title:!0,class:!0}),S=H(C),V=w(C,"LABEL",{for:!0,class:!0,title:!0}),y(V).forEach(c),C.forEach(c),T.forEach(c),this.h()},h(){t.__value="word",t.value=t.__value,t.selected=i=o[0]==Ne.Word,a.__value="id",a.value=a.__value,a.selected=b=o[0]==Ne.Id,d(r,"id",m=o[1]+"-sort-by"),d(r,"title","Sort by"),d(r,"class","svelte-x4vm2d"),o[0]===void 0&&bt(()=>o[7].call(r)),d(h,"id",I=o[1]+"-sort-order"),d(h,"type","checkbox"),d(h,"title",o[3]),d(h,"class","sort-checkbox form-check-input svelte-x4vm2d"),d(V,"for",O=o[1]+"-sort-order"),d(V,"class","sort-checkbox-label form-check-label svelte-x4vm2d"),d(V,"title",o[3]),d(e,"class","sort-container svelte-x4vm2d")},m(q,T){z(q,e,T),f(e,s),f(s,r),f(r,t),f(t,l),f(r,a),f(a,u),Xe(r,o[0]),f(s,_),f(s,h),h.checked=o[2],f(s,S),f(s,V),K||(x=[U(r,"change",o[7]),U(r,"change",o[4]),U(h,"change",o[8]),U(h,"change",o[4]),U(s,"submit",ht(o[6]))],K=!0)},p(q,[T]){T&1&&i!==(i=q[0]==Ne.Word)&&(t.selected=i),T&1&&b!==(b=q[0]==Ne.Id)&&(a.selected=b),T&2&&m!==(m=q[1]+"-sort-by")&&d(r,"id",m),T&1&&Xe(r,q[0]),T&2&&I!==(I=q[1]+"-sort-order")&&d(h,"id",I),T&8&&d(h,"title",q[3]),T&4&&(h.checked=q[2]),T&2&&O!==(O=q[1]+"-sort-order")&&d(V,"for",O),T&8&&d(V,"title",q[3])},i:de,o:de,d(q){q&&c(e),K=!1,je(x)}}}function Ut(o,e,s){const r=Oe();let{key:t}=e,{sort_by:l}=e,{sort_order:i}=e,a,u=i===Pe.Desc;function b(I){r("updateSort",{sort_by:l,sort_order:i,key:t})}function m(I){kt.call(this,o,I)}function _(){l=yt(this),s(0,l)}function h(){u=this.checked,s(2,u)}return o.$$set=I=>{"key"in I&&s(1,t=I.key),"sort_by"in I&&s(0,l=I.sort_by),"sort_order"in I&&s(5,i=I.sort_order)},o.$$.update=()=>{o.$$.dirty&4&&s(5,i=u?Pe.Desc:Pe.Asc),o.$$.dirty&4&&s(3,a=u?"Descending sort order":"Ascending sort order")},[l,t,u,a,b,i,m,_,h]}class Vt extends ge{constructor(e){super(),ve(this,e,Ut,Ft,we,{key:1,sort_by:0,sort_order:5})}}function Ot(o){let e,s,r,t,l,i,a,u,b,m;return{c(){e=v("button"),s=v("span"),r=te(o[1]),t=j(),l=v("audio"),i=v("a"),a=te("Audio"),this.h()},l(_){e=w(_,"BUTTON",{class:!0});var h=y(e);s=w(h,"SPAN",{class:!0});var I=y(s);r=le(I,o[1]),I.forEach(c),t=H(h),l=w(h,"AUDIO",{src:!0});var S=y(l);i=w(S,"A",{href:!0});var V=y(i);a=le(V,"Audio"),V.forEach(c),S.forEach(c),h.forEach(c),this.h()},h(){d(s,"class","phonetics svelte-1owj048"),d(i,"href",o[0]),Ze(l.src,u=o[0])||d(l,"src",u),d(e,"class","svelte-1owj048")},m(_,h){z(_,e,h),f(e,s),f(s,r),f(e,t),f(e,l),f(l,i),f(i,a),b||(m=U(e,"click",Ct),b=!0)},p(_,[h]){h&2&&ye(r,_[1]),h&1&&d(i,"href",_[0]),h&1&&!Ze(l.src,u=_[0])&&d(l,"src",u)},i:de,o:de,d(_){_&&c(e),b=!1,m()}}}function Ct(o){var s;const e=(s=o.target)==null?void 0:s.querySelector("audio");e&&e.play()}function Rt(o,e,s){let{src:r}=e,{title:t=""}=e;return o.$$set=l=>{"src"in l&&s(0,r=l.src),"title"in l&&s(1,t=l.title)},[r,t]}class zt extends ge{constructor(e){super(),ve(this,e,Rt,Ot,we,{src:0,title:1})}}function lt(o,e,s){const r=o.slice();return r[23]=e[s],r}function rt(o){let e,s,r=o[0].dict_def.audio,t=[];for(let i=0;i<r.length;i+=1)t[i]=st(lt(o,r,i));const l=i=>$(t[i],1,1,()=>{t[i]=null});return{c(){e=v("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=w(i,"DIV",{class:!0});var a=y(e);for(let u=0;u<t.length;u+=1)t[u].l(a);a.forEach(c),this.h()},h(){d(e,"class","audio-entries svelte-1qj4dd1")},m(i,a){z(i,e,a);for(let u=0;u<t.length;u+=1)t[u].m(e,null);s=!0},p(i,a){if(a&1){r=i[0].dict_def.audio;let u;for(u=0;u<r.length;u+=1){const b=lt(i,r,u);t[u]?(t[u].p(b,a),Y(t[u],1)):(t[u]=st(b),t[u].c(),Y(t[u],1),t[u].m(e,null))}for(Ee(),u=r.length;u<t.length;u+=1)l(u);Te()}},i(i){if(!s){for(let a=0;a<r.length;a+=1)Y(t[a]);s=!0}},o(i){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)$(t[a]);s=!1},d(i){i&&c(e),Tt(t,i)}}}function st(o){let e,s;return e=new zt({props:{src:o[23].url,title:o[23].phonetics}}),{c(){fe(e.$$.fragment)},l(r){ue(e.$$.fragment,r)},m(r,t){ce(e,r,t),s=!0},p(r,t){const l={};t&1&&(l.src=r[23].url),t&1&&(l.title=r[23].phonetics),e.$set(l)},i(r){s||(Y(e.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),s=!1},d(r){_e(e,r)}}}function ot(o){let e,s;return e=new Ht({props:{dict:o[0].dict_def}}),{c(){fe(e.$$.fragment)},l(r){ue(e.$$.fragment,r)},m(r,t){ce(e,r,t),s=!0},p(r,t){const l={};t&1&&(l.dict=r[0].dict_def),e.$set(l)},i(r){s||(Y(e.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),s=!1},d(r){_e(e,r)}}}function it(o){let e=o[0].def+"",s;return{c(){s=te(e)},l(r){s=le(r,e)},m(r,t){z(r,s,t)},p(r,t){t&1&&e!==(e=r[0].def+"")&&ye(s,e)},d(r){r&&c(s)}}}function Kt(o){let e,s,r,t,l,i,a,u,b,m,_,h,I,S,V,O,K,x,q,T,C,B,X=o[0].word+"",Z,re,k,M,W,A,ie,P,L,p,n,g,D,R,F,Q,se,pe,ne,He,De,Ie,oe,Be,Re,G=o[0].dict_def&&o[0].dict_def.audio.length>0&&rt(o),J=o[0].dict_def&&ot(o),ee=o[0].def&&it(o);function wt(E){o[17](E)}let ze={key:o[1]};return o[0].tags!==void 0&&(ze.tags=o[0].tags),ne=new jt({props:ze}),Ce.push(()=>mt(ne,"tags",wt,o[0].tags)),ne.$on("updateTags",o[6]),{c(){e=v("hr"),r=j(),t=v("li"),l=v("input"),a=j(),u=v("button"),b=v("i"),m=j(),_=v("button"),h=v("i"),I=j(),S=v("input"),O=j(),K=v("label"),q=j(),T=v("details"),C=v("summary"),B=v("dfn"),Z=te(X),k=j(),M=v("div"),W=j(),A=v("div"),G&&G.c(),ie=j(),J&&J.c(),P=j(),L=v("span"),p=te("Notes:"),n=j(),g=v("div"),ee&&ee.c(),R=j(),F=v("div"),Q=v("span"),se=te("Tags:"),pe=j(),fe(ne.$$.fragment),this.h()},l(E){e=w(E,"HR",{id:!0,class:!0}),r=H(E),t=w(E,"LI",{id:!0,class:!0});var N=y(t);l=w(N,"INPUT",{class:!0,type:!0,"data-id":!0}),a=H(N),u=w(N,"BUTTON",{class:!0});var be=y(u);b=w(be,"I",{class:!0}),y(b).forEach(c),be.forEach(c),m=H(N),_=w(N,"BUTTON",{class:!0,title:!0});var Ke=y(_);h=w(Ke,"I",{class:!0}),y(h).forEach(c),Ke.forEach(c),I=H(N),S=w(N,"INPUT",{id:!0,title:!0,class:!0,type:!0}),O=H(N),K=w(N,"LABEL",{for:!0,class:!0}),y(K).forEach(c),q=H(N),T=w(N,"DETAILS",{class:!0});var Se=y(T);C=w(Se,"SUMMARY",{class:!0});var qe=y(C);B=w(qe,"DFN",{id:!0,class:!0,contenteditable:!0});var Ye=y(B);Z=le(Ye,X),Ye.forEach(c),k=H(qe),M=w(qe,"DIV",{class:!0}),y(M).forEach(c),qe.forEach(c),W=H(Se),A=w(Se,"DIV",{class:!0});var ae=y(A);G&&G.l(ae),ie=H(ae),J&&J.l(ae),P=H(ae),L=w(ae,"SPAN",{class:!0});var Ge=y(L);p=le(Ge,"Notes:"),Ge.forEach(c),n=H(ae),g=w(ae,"DIV",{id:!0,class:!0,contenteditable:!0});var Je=y(g);ee&&ee.l(Je),Je.forEach(c),R=H(ae),F=w(ae,"DIV",{class:!0});var Ae=y(F);Q=w(Ae,"SPAN",{class:!0});var Qe=y(Q);se=le(Qe,"Tags:"),Qe.forEach(c),pe=H(Ae),ue(ne.$$.fragment,Ae),Ae.forEach(c),ae.forEach(c),Se.forEach(c),N.forEach(c),this.h()},h(){d(e,"id",s=o[1]+"-hr-"+o[0].id),d(e,"class","svelte-1qj4dd1"),d(l,"class","select-word svelte-1qj4dd1"),d(l,"type","checkbox"),d(l,"data-id",i=o[0].id),d(b,"class","fa-solid fa-xmark"),d(u,"class","remove-word-btn remove-btn svelte-1qj4dd1"),d(h,"class","fa-solid fa-arrows-rotate"),d(_,"class","refresh-btn svelte-1qj4dd1"),d(_,"title","Refresh defintion"),d(S,"id",V=o[1]+"-fav-"+o[0].id),d(S,"title","Favorite"),d(S,"class","fav-checkbox svelte-1qj4dd1"),d(S,"type","checkbox"),d(K,"for",x=o[1]+"-fav-"+o[0].id),d(K,"class","fav-label svelte-1qj4dd1"),d(B,"id",re=o[1]+"-word-"+o[0].id),d(B,"class","word svelte-1qj4dd1"),d(B,"contenteditable","true"),d(M,"class","detail-arrow svelte-1qj4dd1"),d(C,"class","svelte-1qj4dd1"),d(L,"class","def-label svelte-1qj4dd1"),d(g,"id",D=o[1]+"-def-"+o[0].id),d(g,"class","word-definition svelte-1qj4dd1"),d(g,"contenteditable","true"),d(Q,"class","tags-label svelte-1qj4dd1"),d(F,"class","tag-list svelte-1qj4dd1"),d(A,"class","detail-content svelte-1qj4dd1"),T.open=De=Array.isArray(o[2])&&o[2].length>0,d(T,"class","svelte-1qj4dd1"),d(t,"id",Ie=o[1]+"-"+o[0].id),d(t,"class","word-item svelte-1qj4dd1")},m(E,N){z(E,e,N),z(E,r,N),z(E,t,N),f(t,l),f(t,a),f(t,u),f(u,b),f(t,m),f(t,_),f(_,h),f(t,I),f(t,S),S.checked=o[0].favorite,f(t,O),f(t,K),f(t,q),f(t,T),f(T,C),f(C,B),f(B,Z),f(C,k),f(C,M),f(T,W),f(T,A),G&&G.m(A,null),f(A,ie),J&&J.m(A,null),f(A,P),f(A,L),f(L,p),f(A,n),f(A,g),ee&&ee.m(g,null),f(A,R),f(A,F),f(F,Q),f(Q,se),f(F,pe),ce(ne,F,null),oe=!0,Be||(Re=[U(u,"click",o[12]),U(_,"click",o[10]),U(S,"change",o[13]),U(S,"change",o[7]),U(B,"blur",o[14]),U(B,"keydown",o[11]),U(B,"click",Yt),U(g,"keydown",vt),U(g,"blur",o[15]),U(g,"focus",o[16])],Be=!0)},p(E,[N]){(!oe||N&3&&s!==(s=E[1]+"-hr-"+E[0].id))&&d(e,"id",s),(!oe||N&1&&i!==(i=E[0].id))&&d(l,"data-id",i),(!oe||N&3&&V!==(V=E[1]+"-fav-"+E[0].id))&&d(S,"id",V),N&1&&(S.checked=E[0].favorite),(!oe||N&3&&x!==(x=E[1]+"-fav-"+E[0].id))&&d(K,"for",x),(!oe||N&1)&&X!==(X=E[0].word+"")&&ye(Z,X),(!oe||N&3&&re!==(re=E[1]+"-word-"+E[0].id))&&d(B,"id",re),E[0].dict_def&&E[0].dict_def.audio.length>0?G?(G.p(E,N),N&1&&Y(G,1)):(G=rt(E),G.c(),Y(G,1),G.m(A,ie)):G&&(Ee(),$(G,1,1,()=>{G=null}),Te()),E[0].dict_def?J?(J.p(E,N),N&1&&Y(J,1)):(J=ot(E),J.c(),Y(J,1),J.m(A,P)):J&&(Ee(),$(J,1,1,()=>{J=null}),Te()),E[0].def?ee?ee.p(E,N):(ee=it(E),ee.c(),ee.m(g,null)):ee&&(ee.d(1),ee=null),(!oe||N&3&&D!==(D=E[1]+"-def-"+E[0].id))&&d(g,"id",D);const be={};N&2&&(be.key=E[1]),!He&&N&1&&(He=!0,be.tags=E[0].tags,pt(()=>He=!1)),ne.$set(be),(!oe||N&4&&De!==(De=Array.isArray(E[2])&&E[2].length>0))&&(T.open=De),(!oe||N&3&&Ie!==(Ie=E[1]+"-"+E[0].id))&&d(t,"id",Ie)},i(E){oe||(Y(G),Y(J),Y(ne.$$.fragment,E),oe=!0)},o(E){$(G),$(J),$(ne.$$.fragment,E),oe=!1},d(E){E&&c(e),E&&c(r),E&&c(t),G&&G.d(),J&&J.d(),ee&&ee.d(),_e(ne),Be=!1,je(Re)}}}const Yt=o=>{o.preventDefault()};function Gt(o,e,s){const r=Oe();let{key:t}=e,{item:l}=e,{highlight:i}=e;function a(){return t+"-def-"+l.id}function u(){return document.getElementById(`${t}-${l.id}`)}function b(){return document.getElementById(a())}gt(()=>{const k=ke(t,l.id);k&&I(k)}),Et(()=>{const k=ke(t,l.id),M=b();k&&(k.innerHTML=l.word),M&&l.def&&(M.innerHTML=l.def),O()});function m(){const k=ke(t,l.id);if(k){if(s(0,l.word=k.innerHTML,l),l.word==""){h(l)||s(0,l.word=k.title,l);return}k.title!=l.word&&r("updateWord",{word:l,key:t})}}function _(){const k=b();k&&s(0,l.def=k.innerHTML.replaceAll("<br>",""),l),r("updateDefinition",{word:l,key:t})}function h(k){return window.confirm("Delete word?")?(r("deleteWord",{word:k,key:t}),!0):!1}function I(k){console.log("updating title to %s",l.word),k.title=l.word}function S(){r("updateWordTags",{word:l,key:t})}function V(){r("updateFavorite",{word:l,key:t})}function O(){if(K(),i.length===0)return;const k=b(),M=u(),W=ke(t,l.id);W&&(W.innerHTML=Fe(l.word,i)),k&&l.def&&(k.innerHTML=Fe(l.def,i)),M&&(M.querySelectorAll(".pos, .def, .syn, .ant").forEach(A=>A.innerHTML=Fe(A.innerHTML,i)),M.querySelectorAll(".tag").forEach(A=>{var ie;i.some(P=>P=="#"+A.innerHTML.toLowerCase())&&((ie=A.parentElement)==null||ie.classList.add("highlight-tag"))}))}function K(){const k=b(),M=u(),W=ke(t,l.id);W&&(W.innerHTML=Le(W.innerHTML)),k&&(k.innerHTML=Le(k.innerHTML)),M&&M.querySelectorAll(".pos, .def, .syn, .ant").forEach(A=>A.innerHTML=Le(A.innerHTML))}function x(){var M;const k=(M=u())==null?void 0:M.querySelector("details");k&&(k.open=!0),r("refreshWord",{word:l,key:t})}function q(k){const M=k.target;if(k.code=="Escape"&&M){M.innerHTML=M.title,M.blur();return}vt(k)}const T=()=>h(l);function C(){l.favorite=this.checked,s(0,l)}const B=()=>m(),X=()=>{_(),O()},Z=()=>K();function re(k){o.$$.not_equal(l.tags,k)&&(l.tags=k,s(0,l))}return o.$$set=k=>{"key"in k&&s(1,t=k.key),"item"in k&&s(0,l=k.item),"highlight"in k&&s(2,i=k.highlight)},[l,t,i,m,_,h,S,V,O,K,x,q,T,C,B,X,Z,re]}class Jt extends ge{constructor(e){super(),ve(this,e,Gt,Kt,we,{key:1,item:0,highlight:2})}}function nt(o){let e,s,r,t;return{c(){e=v("button"),s=v("i"),this.h()},l(l){e=w(l,"BUTTON",{class:!0});var i=y(e);s=w(i,"I",{class:!0}),y(s).forEach(c),i.forEach(c),this.h()},h(){d(s,"class","fa-solid fa-x"),d(e,"class","reset-btn svelte-8w6wqe")},m(l,i){z(l,e,i),f(e,s),r||(t=U(e,"click",o[3]),r=!0)},p:de,d(l){l&&c(e),r=!1,t()}}}function Qt(o){let e,s,r,t,l,i,a,u,b,m=o[0]&&nt(o);return{c(){e=v("div"),s=v("form"),r=v("div"),t=v("i"),l=j(),i=v("input"),a=j(),m&&m.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var h=y(e);s=w(h,"FORM",{});var I=y(s);r=w(I,"DIV",{class:!0});var S=y(r);t=w(S,"I",{class:!0}),y(t).forEach(c),S.forEach(c),l=H(I),i=w(I,"INPUT",{placeholder:!0,class:!0}),a=H(I),m&&m.l(I),I.forEach(c),h.forEach(c),this.h()},h(){d(t,"class","fa-solid fa-magnifying-glass"),d(r,"class","search-icon svelte-8w6wqe"),d(i,"placeholder","filter"),d(i,"class","search-input form-control svelte-8w6wqe"),d(e,"class","search-container svelte-8w6wqe")},m(_,h){z(_,e,h),f(e,s),f(s,r),f(r,t),f(s,l),f(s,i),$e(i,o[0]),f(s,a),m&&m.m(s,null),u||(b=[U(i,"input",o[5]),U(i,"input",o[1]),U(i,"keydown",o[2]),U(s,"submit",ht(o[1]))],u=!0)},p(_,[h]){h&1&&i.value!==_[0]&&$e(i,_[0]),_[0]?m?m.p(_,h):(m=nt(_),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i:de,o:de,d(_){_&&c(e),m&&m.d(),u=!1,je(b)}}}function Xt(o,e,s){const r=Oe();let{key:t}=e,l;function i(m){r("updateFilter",{search:l,key:t})}function a(m){Bt(m)&&(s(0,l=""),r("updateFilter",{search:l,key:t}))}function u(m){s(0,l=""),r("updateFilter",{search:l,key:t})}function b(){l=this.value,s(0,l)}return o.$$set=m=>{"key"in m&&s(4,t=m.key)},[l,i,a,u,t,b]}class Zt extends ge{constructor(e){super(),ve(this,e,Xt,Qt,we,{key:4})}}function at(o){let e,s;return{c(){e=v("div"),s=te(o[0]),this.h()},l(r){e=w(r,"DIV",{class:!0});var t=y(e);s=le(t,o[0]),t.forEach(c),this.h()},h(){d(e,"class","alert-box svelte-9zlq1k")},m(r,t){z(r,e,t),f(e,s),o[3](e)},p(r,t){t&1&&ye(s,r[0])},d(r){r&&c(e),o[3](null)}}}function $t(o){let e,s=o[0]&&at(o);return{c(){s&&s.c(),e=me()},l(r){s&&s.l(r),e=me()},m(r,t){s&&s.m(r,t),z(r,e,t)},p(r,[t]){r[0]?s?s.p(r,t):(s=at(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:de,o:de,d(r){s&&s.d(r),r&&c(e)}}}function xt(o,e,s){let{message:r}=e,{remove_time:t=4e3}=e,l,i,a;gt(()=>{i=setTimeout(u,t),a=setTimeout(b,t+1500)}),Dt(()=>{i&&clearTimeout(i),a&&clearTimeout(a)});function u(){s(1,l.style.opacity="0",l)}function b(){var _;s(0,r=void 0),(_=l.parentNode)==null||_.removeChild(l)}function m(_){Ce[_?"unshift":"push"](()=>{l=_,s(1,l)})}return o.$$set=_=>{"message"in _&&s(0,r=_.message),"remove_time"in _&&s(2,t=_.remove_time)},[r,l,t,m]}class el extends ge{constructor(e){super(),ve(this,e,xt,$t,we,{message:0,remove_time:2})}}function dt(o,e,s){const r=o.slice();return r[31]=e[s],r}function ft(o){let e,s,r,t=o[6].length+"",l,i,a,u=o[1].words.length+"",b,m;return{c(){e=v("div"),s=te("Showing "),r=v("b"),l=te(t),i=te(" out of "),a=v("b"),b=te(u),m=te(" words"),this.h()},l(_){e=w(_,"DIV",{class:!0});var h=y(e);s=le(h,"Showing "),r=w(h,"B",{});var I=y(r);l=le(I,t),I.forEach(c),i=le(h," out of "),a=w(h,"B",{});var S=y(a);b=le(S,u),S.forEach(c),m=le(h," words"),h.forEach(c),this.h()},h(){d(e,"class","filter-count svelte-r7d7ux")},m(_,h){z(_,e,h),f(e,s),f(e,r),f(r,l),f(e,i),f(e,a),f(a,b),f(e,m)},p(_,h){h[0]&64&&t!==(t=_[6].length+"")&&ye(l,t),h[0]&2&&u!==(u=_[1].words.length+"")&&ye(b,u)},d(_){_&&c(e)}}}function ut(o){let e;function s(l,i){return l[2]?ll:tl}let r=s(o),t=r(o);return{c(){t.c(),e=me()},l(l){t.l(l),e=me()},m(l,i){t.m(l,i),z(l,e,i)},p(l,i){r!==(r=s(l))&&(t.d(1),t=r(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){t.d(l),l&&c(e)}}}function tl(o){let e,s;return{c(){e=v("p"),s=te("No words have been added")},l(r){e=w(r,"P",{});var t=y(e);s=le(t,"No words have been added"),t.forEach(c)},m(r,t){z(r,e,t),f(e,s)},d(r){r&&c(e)}}}function ll(o){let e,s;return{c(){e=v("p"),s=te("No matching words")},l(r){e=w(r,"P",{});var t=y(e);s=le(t,"No matching words"),t.forEach(c)},m(r,t){z(r,e,t),f(e,s)},d(r){r&&c(e)}}}function ct(o,e){let s,r,t;return r=new Jt({props:{key:e[0],item:e[31],highlight:e[3]}}),r.$on("updateWord",e[23]),r.$on("updateDefinition",e[24]),r.$on("deleteWord",e[25]),r.$on("updateWordTags",e[26]),r.$on("updateFavorite",e[27]),r.$on("refreshWord",e[28]),{key:o,first:null,c(){s=me(),fe(r.$$.fragment),this.h()},l(l){s=me(),ue(r.$$.fragment,l),this.h()},h(){this.first=s},m(l,i){z(l,s,i),ce(r,l,i),t=!0},p(l,i){e=l;const a={};i[0]&1&&(a.key=e[0]),i[0]&64&&(a.item=e[31]),i[0]&8&&(a.highlight=e[3]),r.$set(a)},i(l){t||(Y(r.$$.fragment,l),t=!0)},o(l){$(r.$$.fragment,l),t=!1},d(l){l&&c(s),_e(r,l)}}}function _t(o){let e,s,r;function t(i){o[29](i)}let l={};return o[7]!==void 0&&(l.message=o[7]),e=new el({props:l}),Ce.push(()=>mt(e,"message",t,o[7])),{c(){fe(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,a){ce(e,i,a),r=!0},p(i,a){const u={};!s&&a[0]&128&&(s=!0,u.message=i[7],pt(()=>s=!1)),e.$set(u)},i(i){r||(Y(e.$$.fragment,i),r=!0)},o(i){$(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function rl(o){let e,s,r,t,l,i,a,u,b,m,_,h,I,S,V,O,K,x,q,T=[],C=new Map,B,X,Z,re,k,M;s=new Zt({props:{key:o[0]}}),s.$on("updateFilter",o[20]),O=new Vt({props:{key:o[0],sort_by:o[1].sort_by,sort_order:o[1].sort_order}}),O.$on("updateSort",o[22]);let W=o[2]!=""&&ft(o),A=o[6];const ie=p=>p[31].id;for(let p=0;p<A.length;p+=1){let n=dt(o,A,p),g=ie(n);C.set(g,T[p]=ct(g,n))}let P=null;A.length||(P=ut(o));let L=o[7]&&_t(o);return{c(){e=v("div"),fe(s.$$.fragment),r=j(),t=v("div"),l=v("div"),i=v("div"),a=v("input"),u=j(),b=v("div"),m=v("button"),_=j(),h=v("button"),I=j(),S=v("button"),V=j(),fe(O.$$.fragment),K=j(),W&&W.c(),x=j(),q=v("ul");for(let p=0;p<T.length;p+=1)T[p].c();P&&P.c(),X=j(),L&&L.c(),Z=me(),this.h()},l(p){e=w(p,"DIV",{class:!0});var n=y(e);ue(s.$$.fragment,n),r=H(n),t=w(n,"DIV",{class:!0});var g=y(t);l=w(g,"DIV",{class:!0});var D=y(l);i=w(D,"DIV",{class:!0});var R=y(i);a=w(R,"INPUT",{type:!0,class:!0}),u=H(R),b=w(R,"DIV",{class:!0});var F=y(b);m=w(F,"BUTTON",{class:!0,title:!0}),y(m).forEach(c),_=H(F),h=w(F,"BUTTON",{class:!0,title:!0}),y(h).forEach(c),I=H(F),S=w(F,"BUTTON",{class:!0,title:!0}),y(S).forEach(c),F.forEach(c),R.forEach(c),D.forEach(c),V=H(g),ue(O.$$.fragment,g),g.forEach(c),K=H(n),W&&W.l(n),n.forEach(c),x=H(p),q=w(p,"UL",{class:!0});var Q=y(q);for(let se=0;se<T.length;se+=1)T[se].l(Q);P&&P.l(Q),Q.forEach(c),X=H(p),L&&L.l(p),Z=me(),this.h()},h(){d(a,"type","checkbox"),d(a,"class","select-checkbox"),d(m,"class","show-btn svelte-r7d7ux"),d(m,"title","Show selected"),d(h,"class","hide-btn svelte-r7d7ux"),d(h,"title","Hide selected"),d(S,"class","del-btn svelte-r7d7ux"),d(S,"title","Delete selected"),d(b,"class","select-group svelte-r7d7ux"),d(i,"class","select-options"),d(l,"class","show-hide svelte-r7d7ux"),d(t,"class","options-bar svelte-r7d7ux"),d(e,"class","sticky-search-bar list-group-item svelte-r7d7ux"),d(q,"class",B="word-group "+o[5]+" svelte-r7d7ux")},m(p,n){z(p,e,n),ce(s,e,null),f(e,r),f(e,t),f(t,l),f(l,i),f(i,a),a.checked=o[4],f(i,u),f(i,b),f(b,m),f(b,_),f(b,h),f(b,I),f(b,S),f(t,V),ce(O,t,null),f(e,K),W&&W.m(e,null),z(p,x,n),z(p,q,n);for(let g=0;g<T.length;g+=1)T[g].m(q,null);P&&P.m(q,null),z(p,X,n),L&&L.m(p,n),z(p,Z,n),re=!0,k||(M=[U(a,"change",o[21]),U(a,"change",o[8]),U(m,"click",o[10]),U(h,"click",o[11]),U(S,"click",o[9])],k=!0)},p(p,n){const g={};n[0]&1&&(g.key=p[0]),s.$set(g),n[0]&16&&(a.checked=p[4]);const D={};n[0]&1&&(D.key=p[0]),n[0]&2&&(D.sort_by=p[1].sort_by),n[0]&2&&(D.sort_order=p[1].sort_order),O.$set(D),p[2]!=""?W?W.p(p,n):(W=ft(p),W.c(),W.m(e,null)):W&&(W.d(1),W=null),n[0]&258125&&(A=p[6],Ee(),T=It(T,n,ie,1,p,A,C,q,St,ct,null,dt),Te(),!A.length&&P?P.p(p,n):A.length?P&&(P.d(1),P=null):(P=ut(p),P.c(),P.m(q,null))),(!re||n[0]&32&&B!==(B="word-group "+p[5]+" svelte-r7d7ux"))&&d(q,"class",B),p[7]?L?(L.p(p,n),n[0]&128&&Y(L,1)):(L=_t(p),L.c(),Y(L,1),L.m(Z.parentNode,Z)):L&&(Ee(),$(L,1,1,()=>{L=null}),Te())},i(p){if(!re){Y(s.$$.fragment,p),Y(O.$$.fragment,p);for(let n=0;n<A.length;n+=1)Y(T[n]);Y(L),re=!0}},o(p){$(s.$$.fragment,p),$(O.$$.fragment,p);for(let n=0;n<T.length;n+=1)$(T[n]);$(L),re=!1},d(p){p&&c(e),_e(s),_e(O),W&&W.d(),p&&c(x),p&&c(q);for(let n=0;n<T.length;n+=1)T[n].d();P&&P.d(),p&&c(X),L&&L.d(p),p&&c(Z),k=!1,je(M)}}}function We(){return document.querySelectorAll('input[type="checkbox"].select-word'),Me(o=>!0)}function Me(o){const e=document.querySelectorAll('input[type="checkbox"].select-word');if(!e)return 0;let s=0;return e.forEach(r=>{r.checked&&o(r)&&(s+=1)}),s}function sl(o,e,s){let r,{key:t="words"}=e,l=At(t);l=Ue(l);let i=!1,a="",u="",b,m,_;_=new URLSearchParams(window.location.search).get("word"),_&&xe(parseInt(_),t);function h(){let n=We()===0;const g=document.querySelectorAll('input[type="checkbox"].select-word');if(!g)return 0;console.log("selecting with action=%i",n);let D=0;g.forEach(R=>{R.checked=n,D+=1}),D!==0&&s(4,i=n)}async function I(){const n=We();if(n===0||!window.confirm(n===1?"Delete word?":`Delete ${n} words?`))return!1;const g=Me(D=>{var R,F;if(D.dataset.id){const Q=Number(D.dataset.id);if(!Number.isNaN(Q))if(tt(l,Q)){const se=D.parentElement;se&&((R=se.parentElement)==null||R.removeChild(se));const pe=document.getElementById(`${t}-hr-${Q}`);return pe&&((F=pe.parentElement)==null||F.removeChild(pe)),!0}else console.log(`delete for ${Q} failed`)}return!1});return await qt(),g>0&&(he(l),s(1,l)),!0}function S(){We()===0?b.forEach(n=>{var D;const g=(D=document.getElementById(`${t}-${n.id}`))==null?void 0:D.querySelector("details");g&&(g.open=!0)}):Me(n=>{var D;const g=(D=n.parentElement)==null?void 0:D.querySelector("details");return g?(g.open=!0,!0):!1})}function V(){We()===0?b.forEach(n=>{var D;const g=(D=document.getElementById(`${t}-${n.id}`))==null?void 0:D.querySelector("details");g&&(g.open=!1)}):Me(n=>{var D;const g=(D=n.parentElement)==null?void 0:D.querySelector("details");return g?(g.open=!1,!0):!1})}function O(n){if(console.log(n),n.key!=t||!n.word||!n.word.word)return;let g=n.word.word.trim().toLowerCase(),D=l.words.find(Q=>{var se;return((se=Q.cache)==null?void 0:se.word)===g}),R=l.words.find(Q=>Q.id===n.word.id),F=ke(t,n.word.id);R!=null&&D!=null?(console.log(`original: %o
dup: %o`,R,D),console.log("duplicate word"),F&&(console.log("resetting to "+F.title),F.innerHTML=F.title,R.word=F.title)):Wt(l,n.word.id,n.word.word)?(s(1,l=Ue(l)),F&&(console.log("updating title"),F.title=n.word.word),console.log("updated list: %o",l.words),he(l),s(1,l),xe(n.word.id,t)):console.log("word update failed: %o",n.word)}function K(n){if(n.key!=t||!n.word.def)return;let g=Le(n.word.def.trim());Lt(l,n.word.id,g)?he(l):console.log("definition update failed")}function x(n){function g(D,R){return D.tags=R.tags,D.cache=et(D),!0}n.key==t&&(Ve(l,n.word,g),he(l),s(1,l))}function q(n){function g(D,R){return D.favorite=R.favorite,!0}n.key==t&&(Ve(l,n.word,g),he(l),s(1,l))}function T(n){function g(D,R){return D.dict_def=R.dict_def,!0}n.key==t&&Mt.default.lookup(n.word.word).then(D=>{D?n.word.dict_def=D:s(7,m=`'${n.word.word}' has no dictionary definition`)}).finally(()=>{n.word.cache=et(n.word),Ve(l,n.word,g),he(l),s(1,l)})}function C(n){n.key==t&&(tt(l,n.word.id)?(he(l),s(1,l)):console.log("remove word failed"))}function B(n){n.key==t&&(s(1,l.sort_by=n.sort_by,l),s(1,l.sort_order=n.sort_order,l),Ue(l),he(l))}function X(n){n.key==t&&s(2,a=n.search.toLowerCase())}const Z=n=>{X(n.detail)};function re(){i=this.checked,s(4,i)}const k=n=>B(n.detail),M=n=>O(n.detail),W=n=>K(n.detail),A=n=>C(n.detail),ie=n=>x(n.detail),P=n=>q(n.detail),L=n=>T(n.detail);function p(n){m=n,s(7,m)}return o.$$set=n=>{"key"in n&&s(0,t=n.key)},o.$$.update=()=>{o.$$.dirty[0]&4&&s(3,r=a.split(" ").filter(n=>n.length>0)),o.$$.dirty[0]&4&&s(5,u=a===""?"":"full-defs"),o.$$.dirty[0]&10&&s(6,b=l.words.filter(n=>Nt(r,n)))},[t,l,a,r,i,u,b,m,h,I,S,V,O,K,x,q,T,C,B,X,Z,re,k,M,W,A,ie,P,L,p]}class ol extends ge{constructor(e){super(),ve(this,e,sl,rl,we,{key:0},null,[-1,-1])}}function il(o){let e,s,r,t,l;return e=new Pt({props:{current:"list"}}),t=new ol({props:{key:"words"}}),{c(){fe(e.$$.fragment),s=j(),r=v("div"),fe(t.$$.fragment),this.h()},l(i){ue(e.$$.fragment,i),s=H(i),r=w(i,"DIV",{class:!0});var a=y(r);ue(t.$$.fragment,a),a.forEach(c),this.h()},h(){d(r,"class","list-vocab-container")},m(i,a){ce(e,i,a),z(i,s,a),z(i,r,a),ce(t,r,null),l=!0},p:de,i(i){l||(Y(e.$$.fragment,i),Y(t.$$.fragment,i),l=!0)},o(i){$(e.$$.fragment,i),$(t.$$.fragment,i),l=!1},d(i){_e(e,i),i&&c(s),i&&c(r),_e(t)}}}class ul extends ge{constructor(e){super(),ve(this,e,null,il,we,{})}}export{ul as default};
