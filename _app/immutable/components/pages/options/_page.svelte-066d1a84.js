import{S as Ve,i as Re,s as Le,C as ot,k as m,a as L,q,l as b,m as h,c as P,r as H,h as u,n as o,b as w,G as _,M as Q,_ as it,D as ut,E as at,F as ft,u as Oe,f as Z,t as le,P as Ue,w as _e,e as ke,x as pe,y as me,X as ct,g as Pe,d as $e,z as be,R as nt,L as je,$ as dt,J as Ae,K as Me,O as Fe,B as Ce}from"../../../chunks/index-e56e8534.js";import{q as Ke,f as _t,u as pt,d as we,v as mt,l as ve,x as bt,A as Xe,o as Qe,n as Ye}from"../../../chunks/words-6d2fe7f5.js";import{A as ze}from"../../../chunks/Alert-392b790a.js";import{N as vt}from"../../../chunks/Nav-34f01931.js";function kt(n){let e,l,s,r,i,t,f,a,p,k,v,g,c;const T=n[9].default,N=ot(T,n,n[8],null);return{c(){e=m("dialog"),l=m("div"),s=m("form"),N&&N.c(),r=L(),i=m("div"),t=m("button"),f=q(n[0]),a=L(),p=m("button"),k=q(n[1]),this.h()},l(E){e=b(E,"DIALOG",{class:!0,id:!0});var S=h(e);l=b(S,"DIV",{class:!0});var $=h(l);s=b($,"FORM",{method:!0});var U=h(s);N&&N.l(U),r=P(U),i=b(U,"DIV",{class:!0});var A=h(i);t=b(A,"BUTTON",{type:!0,class:!0});var M=h(t);f=H(M,n[0]),M.forEach(u),a=P(A),p=b(A,"BUTTON",{type:!0,class:!0});var j=h(p);k=H(j,n[1]),j.forEach(u),A.forEach(u),U.forEach(u),$.forEach(u),S.forEach(u),this.h()},h(){o(t,"type","submit"),o(t,"class","btn btn-primary"),o(p,"type","button"),o(p,"class","btn btn-secondary"),o(i,"class","dialog-controls svelte-1d7zp56"),o(s,"method","dialog"),o(l,"class","modal-wrapper svelte-1d7zp56"),o(e,"class","modal svelte-1d7zp56"),o(e,"id",n[2])},m(E,S){w(E,e,S),_(e,l),_(l,s),N&&N.m(s,null),_(s,r),_(s,i),_(i,t),_(t,f),_(i,a),_(i,p),_(p,k),v=!0,g||(c=[Q(p,"click",n[3]),Q(s,"submit",n[5]),Q(e,"click",it(n[3])),Q(e,"close",n[4])],g=!0)},p(E,[S]){N&&N.p&&(!v||S&256)&&ut(N,T,E,E[8],v?ft(T,E[8],S,null):at(E[8]),null),(!v||S&1)&&Oe(f,E[0]),(!v||S&2)&&Oe(k,E[1]),(!v||S&4)&&o(e,"id",E[2])},i(E){v||(Z(N,E),v=!0)},o(E){le(N,E),v=!1},d(E){E&&u(e),N&&N.d(E),g=!1,Ue(c)}}}function Ze(n){n.querySelectorAll("form").forEach(e=>{e.reset()})}function ht(n,e,l){let{$$slots:s={},$$scope:r}=e,{onClose:i=()=>{}}=e,{onSubmit:t}=e,{submit_text:f="Submit"}=e,{cancel_text:a="Cancel"}=e,{id:p}=e;function k(c){const T=document.getElementById(p);T&&(i(T,c),Ze(T),T.close())}function v(c){const T=document.getElementById(p);T&&(i(T,c),Ze(T))}function g(c){const T=document.getElementById(p);if(!T){c.preventDefault();return}t(T,c)?T.close():c.preventDefault()}return n.$$set=c=>{"onClose"in c&&l(6,i=c.onClose),"onSubmit"in c&&l(7,t=c.onSubmit),"submit_text"in c&&l(0,f=c.submit_text),"cancel_text"in c&&l(1,a=c.cancel_text),"id"in c&&l(2,p=c.id),"$$scope"in c&&l(8,r=c.$$scope)},[f,a,p,k,v,g,i,t,r,s]}class xe extends Ve{constructor(e){super(),Re(this,e,ht,kt,Le,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function et(n,e,l){const s=n.slice();return s[30]=e[l],s}function gt(n){let e,l;return{c(){e=m("button"),l=m("i"),this.h()},l(s){e=b(s,"BUTTON",{type:!0,class:!0});var r=h(e);l=b(r,"I",{class:!0}),h(l).forEach(u),r.forEach(u),this.h()},h(){o(l,"class","fa-solid fa-xmark"),o(e,"type","button"),o(e,"class","remove-btn svelte-ij8xur"),e.disabled=!0},m(s,r){w(s,e,r),_(e,l)},p:Ce,d(s){s&&u(e)}}}function yt(n){let e,l,s,r;function i(...t){return n[17](n[30],...t)}return{c(){e=m("button"),l=m("i"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,class:!0,title:!0});var f=h(e);l=b(f,"I",{class:!0}),h(l).forEach(u),f.forEach(u),this.h()},h(){o(l,"class","fa-solid fa-xmark"),o(e,"type","button"),o(e,"class","remove-btn svelte-ij8xur"),o(e,"title","Delete backup")},m(t,f){w(t,e,f),_(e,l),s||(r=Q(e,"click",i),s=!0)},p(t,f){n=t},d(t){t&&u(e),s=!1,r()}}}function wt(n){let e,l,s,r;return{c(){e=m("button"),l=m("i"),s=L(),r=m("input"),this.h()},l(i){e=b(i,"BUTTON",{type:!0,class:!0});var t=h(e);l=b(t,"I",{class:!0}),h(l).forEach(u),t.forEach(u),s=P(i),r=b(i,"INPUT",{type:!0,class:!0}),this.h()},h(){o(l,"class","fa-solid fa-pen"),o(e,"type","button"),e.disabled=!0,o(e,"class","btn rename-btn svelte-ij8xur"),o(r,"type","radio"),o(r,"class","btn-edit-current svelte-ij8xur"),r.disabled=!0},m(i,t){w(i,e,t),_(e,l),w(i,s,t),w(i,r,t)},p:Ce,d(i){i&&u(e),i&&u(s),i&&u(r)}}}function Et(n){let e,l,s,r,i,t,f,a,p,k;function v(...g){return n[19](n[30],...g)}return{c(){e=m("button"),l=m("i"),i=L(),t=m("input"),this.h()},l(g){e=b(g,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var c=h(e);l=b(c,"I",{class:!0}),h(l).forEach(u),c.forEach(u),i=P(g),t=b(g,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){o(l,"class","fa-solid fa-pen"),o(e,"type","submit"),o(e,"id",s=n[0]+"-backup-rename-"+n[30].name),o(e,"title","Rename"),e.value=r=n[30].name,o(e,"class","btn rename-btn svelte-ij8xur"),o(t,"type","radio"),o(t,"name","btn-edit"),o(t,"class","btn-edit svelte-ij8xur"),o(t,"title","Select this backup for restore"),o(t,"id",f=n[0]+"-restore-"+n[30].key),t.required=!0,t.value=a=n[30].name},m(g,c){w(g,e,c),_(e,l),w(g,i,c),w(g,t,c),p||(k=Q(e,"click",v),p=!0)},p(g,c){n=g,c[0]&3&&s!==(s=n[0]+"-backup-rename-"+n[30].name)&&o(e,"id",s),c[0]&2&&r!==(r=n[30].name)&&(e.value=r),c[0]&3&&f!==(f=n[0]+"-restore-"+n[30].key)&&o(t,"id",f),c[0]&2&&a!==(a=n[30].name)&&(t.value=a)},d(g){g&&u(e),g&&u(i),g&&u(t),p=!1,k()}}}function It(n){let e=n[30].name+"",l;return{c(){l=q(e)},l(s){l=H(s,e)},m(s,r){w(s,l,r)},p(s,r){r[0]&2&&e!==(e=s[30].name+"")&&Oe(l,e)},d(s){s&&u(l)}}}function Bt(n){let e,l;return{c(){e=m("div"),l=q("Current"),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=h(e);l=H(r,"Current"),r.forEach(u),this.h()},h(){o(e,"class","backup-current svelte-ij8xur")},m(s,r){w(s,e,r),_(e,l)},p:Ce,d(s){s&&u(e)}}}function tt(n,e){let l,s,r,i,t,f,a,p,k,v,g,c,T,N=e[30].size+"",E,S,$,U;function A(R,F){return R[30].name!=R[0]?yt:gt}let M=A(e),j=M(e);function J(...R){return e[18](e[30],...R)}function se(R,F){return R[30].name!=R[0]?Et:wt}let V=se(e),O=V(e);function ne(R,F){return R[30].name==R[0]?Bt:It}let x=ne(e),K=x(e);return{key:n,first:null,c(){l=m("div"),s=m("div"),j.c(),r=L(),i=m("button"),t=m("i"),f=L(),O.c(),a=L(),p=m("div"),k=m("label"),K.c(),g=L(),c=m("div"),T=q("("),E=q(N),S=q(" words)"),this.h()},l(R){l=b(R,"DIV",{class:!0});var F=h(l);s=b(F,"DIV",{class:!0});var X=h(s);j.l(X),r=P(X),i=b(X,"BUTTON",{type:!0,class:!0,title:!0});var y=h(i);t=b(y,"I",{class:!0}),h(t).forEach(u),y.forEach(u),f=P(X),O.l(X),a=P(X),p=b(X,"DIV",{class:!0});var B=h(p);k=b(B,"LABEL",{class:!0,for:!0,title:!0});var C=h(k);K.l(C),C.forEach(u),g=P(B),c=b(B,"DIV",{class:!0});var W=h(c);T=H(W,"("),E=H(W,N),S=H(W," words)"),W.forEach(u),B.forEach(u),X.forEach(u),F.forEach(u),this.h()},h(){o(t,"class","fa-solid fa-download"),o(i,"type","button"),o(i,"class","btn download-btn svelte-ij8xur"),o(i,"title","Download backup"),o(k,"class","backup-name-label svelte-ij8xur"),o(k,"for",v=e[0]+"-restore-"+e[30].key),o(k,"title","Select backup for restore"),o(c,"class","backup-length svelte-ij8xur"),o(p,"class","backup-name svelte-ij8xur"),o(s,"class","backup-content svelte-ij8xur"),o(l,"class","backup-entry svelte-ij8xur"),this.first=l},m(R,F){w(R,l,F),_(l,s),j.m(s,null),_(s,r),_(s,i),_(i,t),_(s,f),O.m(s,null),_(s,a),_(s,p),_(p,k),K.m(k,null),_(p,g),_(p,c),_(c,T),_(c,E),_(c,S),$||(U=Q(i,"click",J),$=!0)},p(R,F){e=R,M===(M=A(e))&&j?j.p(e,F):(j.d(1),j=M(e),j&&(j.c(),j.m(s,r))),V===(V=se(e))&&O?O.p(e,F):(O.d(1),O=V(e),O&&(O.c(),O.m(s,a))),x===(x=ne(e))&&K?K.p(e,F):(K.d(1),K=x(e),K&&(K.c(),K.m(k,null))),F[0]&3&&v!==(v=e[0]+"-restore-"+e[30].key)&&o(k,"for",v),F[0]&2&&N!==(N=e[30].size+"")&&Oe(E,N)},d(R){R&&u(l),j.d(),O.d(),K.d(),$=!1,U()}}}function lt(n){let e,l,s,r,i;return{c(){e=q(`Backup as:
                `),l=m("input"),this.h()},l(t){e=H(t,`Backup as:
                `),l=b(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){o(l,"id",s=n[0]+"-original-name"),o(l,"name","save-as"),o(l,"type","text"),o(l,"class","original form-control svelte-ij8xur"),o(l,"placeholder","new name"),l.required=!0},m(t,f){w(t,e,f),w(t,l,f),je(l,n[4]),r||(i=[Q(l,"input",n[22]),Q(l,"blur",n[23])],r=!0)},p(t,f){f[0]&1&&s!==(s=t[0]+"-original-name")&&o(l,"id",s),f[0]&16&&l.value!==t[4]&&je(l,t[4])},d(t){t&&u(e),t&&u(l),r=!1,Ue(i)}}}function Tt(n){let e,l,s,r,i,t,f,a,p,k,v,g,c=n[5]&&lt(n);return{c(){e=m("div"),l=m("div"),s=m("input"),i=L(),t=m("label"),f=q("Backup current list"),p=L(),k=m("div"),c&&c.c(),this.h()},l(T){e=b(T,"DIV",{class:!0});var N=h(e);l=b(N,"DIV",{class:!0});var E=h(l);s=b(E,"INPUT",{type:!0,id:!0}),i=P(E),t=b(E,"LABEL",{for:!0});var S=h(t);f=H(S,"Backup current list"),S.forEach(u),E.forEach(u),p=P(N),k=b(N,"DIV",{});var $=h(k);c&&c.l($),$.forEach(u),N.forEach(u),this.h()},h(){o(s,"type","checkbox"),o(s,"id",r=n[0]+"-rename-current"),o(t,"for",a=n[0]+"-rename-current"),o(l,"class","dialog-title svelte-ij8xur"),o(e,"class","original-name svelte-ij8xur")},m(T,N){w(T,e,N),_(e,l),_(l,s),s.checked=n[5],_(l,i),_(l,t),_(t,f),_(e,p),_(e,k),c&&c.m(k,null),v||(g=Q(s,"change",n[21]),v=!0)},p(T,N){N[0]&1&&r!==(r=T[0]+"-rename-current")&&o(s,"id",r),N[0]&32&&(s.checked=T[5]),N[0]&1&&a!==(a=T[0]+"-rename-current")&&o(t,"for",a),T[5]?c?c.p(T,N):(c=lt(T),c.c(),c.m(k,null)):c&&(c.d(1),c=null)},d(T){T&&u(e),c&&c.d(),v=!1,g()}}}function Dt(n){let e,l,s,r,i,t,f;return{c(){e=m("input"),s=L(),r=m("input"),this.h()},l(a){e=b(a,"INPUT",{type:!0,id:!0,class:!0}),s=P(a),r=b(a,"INPUT",{type:!0,id:!0}),this.h()},h(){o(e,"type","text"),o(e,"id",l=n[0]+"-rename-backup"),o(e,"class","form-control"),o(r,"type","hidden"),o(r,"id",i=n[0]+"-rename-hidden")},m(a,p){w(a,e,p),je(e,n[6]),w(a,s,p),w(a,r,p),t||(f=[Q(e,"blur",n[24]),Q(e,"input",n[25])],t=!0)},p(a,p){p[0]&1&&l!==(l=a[0]+"-rename-backup")&&o(e,"id",l),p[0]&64&&e.value!==a[6]&&je(e,a[6]),p[0]&1&&i!==(i=a[0]+"-rename-hidden")&&o(r,"id",i)},d(a){a&&u(e),a&&u(s),a&&u(r),t=!1,Ue(f)}}}function st(n){let e,l,s,r;const i=[Ut,Nt],t=[];function f(a,p){return a[3]!=null?0:1}return e=f(n),l=t[e]=i[e](n),{c(){l.c(),s=ke()},l(a){l.l(a),s=ke()},m(a,p){t[e].m(a,p),w(a,s,p),r=!0},p(a,p){let k=e;e=f(a),e===k?t[e].p(a,p):(Pe(),le(t[k],1,1,()=>{t[k]=null}),$e(),l=t[e],l?l.p(a,p):(l=t[e]=i[e](a),l.c()),Z(l,1),l.m(s.parentNode,s))},i(a){r||(Z(l),r=!0)},o(a){le(l),r=!1},d(a){t[e].d(a),a&&u(s)}}}function Nt(n){let e,l,s;function r(t){n[27](t)}let i={};return n[2]!==void 0&&(i.message=n[2]),e=new ze({props:i}),Ae.push(()=>Me(e,"message",r,n[2])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,f){me(e,t,f),s=!0},p(t,f){const a={};!l&&f[0]&4&&(l=!0,a.message=t[2],Fe(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){le(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Ut(n){let e,l,s;function r(t){n[26](t)}let i={alert_style:n[3]};return n[2]!==void 0&&(i.message=n[2]),e=new ze({props:i}),Ae.push(()=>Me(e,"message",r,n[2])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,f){me(e,t,f),s=!0},p(t,f){const a={};f[0]&8&&(a.alert_style=t[3]),!l&&f[0]&4&&(l=!0,a.message=t[2],Fe(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){le(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Ct(n){let e,l,s,r,i,t,f,a,p,k,v,g,c,T,N,E,S,$=[],U=new Map,A,M,j,J,se,V,O,ne,x,K,R,F,X,y,B,C,W,re,oe,ee,ue,ae,ce,te,z,I,Y,he=n[1];const ge=d=>d[30].key;for(let d=0;d<he.length;d+=1){let D=et(n,he,d),ie=ge(D);U.set(ie,$[d]=tt(ie,D))}ee=new xe({props:{id:"backup-modal",onSubmit:n[9],submit_text:"Restore",$$slots:{default:[Tt]},$$scope:{ctx:n}}}),ae=new xe({props:{id:"rename-modal",onSubmit:n[8],onClose:n[14],submit_text:"Rename",$$slots:{default:[Dt]},$$scope:{ctx:n}}});let G=n[2]&&st(n);return{c(){e=m("h2"),l=q("Create Backup"),s=L(),r=m("div"),i=m("form"),t=m("div"),f=m("input"),p=L(),k=m("button"),v=q("Create Backup"),g=L(),c=m("h2"),T=q("Backups"),N=L(),E=m("div"),S=m("form");for(let d=0;d<$.length;d+=1)$[d].c();A=L(),M=m("div"),j=m("button"),J=q("Restore"),V=L(),O=m("h2"),ne=q("Upload Backup"),x=L(),K=m("div"),R=m("form"),F=m("div"),X=m("div"),y=m("input"),C=L(),W=m("button"),re=q("Restore Backup"),oe=L(),_e(ee.$$.fragment),ue=L(),_e(ae.$$.fragment),ce=L(),G&&G.c(),te=ke(),this.h()},l(d){e=b(d,"H2",{class:!0,id:!0});var D=h(e);l=H(D,"Create Backup"),D.forEach(u),s=P(d),r=b(d,"DIV",{class:!0});var ie=h(r);i=b(ie,"FORM",{});var fe=h(i);t=b(fe,"DIV",{class:!0});var ye=h(t);f=b(ye,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),p=P(ye),k=b(ye,"BUTTON",{class:!0});var Ie=h(k);v=H(Ie,"Create Backup"),Ie.forEach(u),ye.forEach(u),fe.forEach(u),ie.forEach(u),g=P(d),c=b(d,"H2",{class:!0,id:!0});var Be=h(c);T=H(Be,"Backups"),Be.forEach(u),N=P(d),E=b(d,"DIV",{class:!0});var Te=h(E);S=b(Te,"FORM",{id:!0});var de=h(S);for(let qe=0;qe<$.length;qe+=1)$[qe].l(de);A=P(de),M=b(de,"DIV",{class:!0});var Ee=h(M);j=b(Ee,"BUTTON",{type:!0,class:!0,name:!0});var De=h(j);J=H(De,"Restore"),De.forEach(u),Ee.forEach(u),de.forEach(u),Te.forEach(u),V=P(d),O=b(d,"H2",{class:!0,id:!0});var Ne=h(O);ne=H(Ne,"Upload Backup"),Ne.forEach(u),x=P(d),K=b(d,"DIV",{class:!0});var He=h(K);R=b(He,"FORM",{});var We=h(R);F=b(We,"DIV",{class:!0});var Se=h(F);X=b(Se,"DIV",{class:!0});var Ge=h(X);y=b(Ge,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),Ge.forEach(u),C=P(Se),W=b(Se,"BUTTON",{class:!0});var Je=h(W);re=H(Je,"Restore Backup"),Je.forEach(u),Se.forEach(u),We.forEach(u),He.forEach(u),oe=P(d),pe(ee.$$.fragment,d),ue=P(d),pe(ae.$$.fragment,d),ce=P(d),G&&G.l(d),te=ke(),this.h()},h(){o(e,"class","options-group-title"),o(e,"id","create-backup"),o(f,"id",a=n[0]+"-new-backup-name"),o(f,"type","text"),o(f,"class","new-backup-name form-control svelte-ij8xur"),o(f,"placeholder","new name"),o(k,"class","create-backup btn btn-primary svelte-ij8xur"),o(t,"class","new-backup svelte-ij8xur"),o(r,"class","options-group"),o(c,"class","options-group-title"),o(c,"id","backups"),o(j,"type","button"),o(j,"class","btn btn-danger"),o(j,"name","backups_action"),j.value="restore",o(M,"class","backup-submit svelte-ij8xur"),o(S,"id",se=n[0]+"-backup-list-form"),o(E,"class","options-group"),o(O,"class","options-group-title"),o(O,"id","upload-backup"),o(y,"id",B=n[0]+"-upload-backup"),o(y,"class","upload-backup form-control svelte-ij8xur"),o(y,"type","file"),o(y,"accept",".json,application/json"),o(X,"class","upload-backup-container svelte-ij8xur"),o(W,"class","btn btn-danger upload-backup-btn svelte-ij8xur"),o(F,"class","new-backup svelte-ij8xur"),o(K,"class","options-group")},m(d,D){w(d,e,D),_(e,l),w(d,s,D),w(d,r,D),_(r,i),_(i,t),_(t,f),_(t,p),_(t,k),_(k,v),w(d,g,D),w(d,c,D),_(c,T),w(d,N,D),w(d,E,D),_(E,S);for(let ie=0;ie<$.length;ie+=1)$[ie].m(S,null);_(S,A),_(S,M),_(M,j),_(j,J),w(d,V,D),w(d,O,D),_(O,ne),w(d,x,D),w(d,K,D),_(K,R),_(R,F),_(F,X),_(X,y),_(F,C),_(F,W),_(W,re),w(d,oe,D),me(ee,d,D),w(d,ue,D),me(ae,d,D),w(d,ce,D),G&&G.m(d,D),w(d,te,D),z=!0,I||(Y=[Q(f,"blur",n[16]),Q(i,"submit",n[10]),Q(j,"click",n[12]),Q(R,"submit",n[20])],I=!0)},p(d,D){(!z||D[0]&1&&a!==(a=d[0]+"-new-backup-name"))&&o(f,"id",a),D[0]&40963&&(he=d[1],$=ct($,D,ge,1,d,he,U,S,dt,tt,A,et)),(!z||D[0]&1&&se!==(se=d[0]+"-backup-list-form"))&&o(S,"id",se),(!z||D[0]&1&&B!==(B=d[0]+"-upload-backup"))&&o(y,"id",B);const ie={};D[0]&49|D[1]&4&&(ie.$$scope={dirty:D,ctx:d}),ee.$set(ie);const fe={};D[0]&65|D[1]&4&&(fe.$$scope={dirty:D,ctx:d}),ae.$set(fe),d[2]?G?(G.p(d,D),D[0]&4&&Z(G,1)):(G=st(d),G.c(),Z(G,1),G.m(te.parentNode,te)):G&&(Pe(),le(G,1,1,()=>{G=null}),$e())},i(d){z||(Z(ee.$$.fragment,d),Z(ae.$$.fragment,d),Z(G),z=!0)},o(d){le(ee.$$.fragment,d),le(ae.$$.fragment,d),le(G),z=!1},d(d){d&&u(e),d&&u(s),d&&u(r),d&&u(g),d&&u(c),d&&u(N),d&&u(E);for(let D=0;D<$.length;D+=1)$[D].d();d&&u(V),d&&u(O),d&&u(x),d&&u(K),d&&u(oe),be(ee,d),d&&u(ue),be(ae,d),d&&u(ce),G&&G.d(d),d&&u(te),I=!1,Ue(Y)}}}function St(n,e,l){const s=nt();let{key:r}=e,{backups:i}=e,t,f,a="",p=!0,k="";function v(){s("refreshlist",!0)}function g(y,B){const C=document.getElementById(B);if(!C)return!1;if(C.value!=""){C.setCustomValidity("");{const W=localStorage.getItem(C.value.toLowerCase());if(C.value.toLowerCase()==r.toLowerCase())C.setCustomValidity(`'${r}' is a reserved name`);else if(W!=null)C.setCustomValidity("Backup exists");else return!0}}return!1}function c(y,B){if(!g(B,r+"-rename-backup"))return console.log("invalid name:"+k),B.preventDefault(),!1;const C=document.getElementById(r+"-rename-hidden"),W=k.toLowerCase(),re=localStorage.getItem(W);if(!C||!C.value||!k||re!=null)return!1;const oe=C.value.toLowerCase(),ee=localStorage.getItem(oe);return ee?(localStorage.setItem(W,ee),localStorage.removeItem(oe),v(),!0):!1}function T(y,B){if(!p&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),B.preventDefault(),!1;if(p&&!g(B,r+"-original-name"))return B.preventDefault(),!1;const C=document.getElementById(r+"-backup-list-form");if(C){const W=C.elements.namedItem("btn-edit"),re=localStorage.getItem(r.toLowerCase());if(!W||!re)return!1;const oe=localStorage.getItem(W.value);if(!oe)return!1;p&&localStorage.setItem(a,re),localStorage.setItem(r,oe),l(2,t="Backup restored"),l(3,f="info"),v()}return!0}function N(y){const B=document.getElementById(r+"-new-backup-name");if(!B||!g(y,r+"-new-backup-name")){y.preventDefault();return}const C=localStorage.getItem(r.toLowerCase());C&&(localStorage.setItem(B.value.toLowerCase(),C),l(2,t="Backup created"),l(3,f="info"),v(),B.value="")}function E(y){y.preventDefault();let B=document.getElementById(`${r}-upload-backup`);if(!B||!B.files||!B.files[0]){l(2,t="Please select a file"),l(3,f="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const C=new FileReader;C.onload=W=>{if(!C.result){l(2,t="Upload failed"),l(3,f="error");return}let re=C.result,oe=JSON.parse(re);if(console.log(Ke(oe)),!Ke(oe)){l(2,t="Invalid backup file."),l(3,f="error");return}localStorage.setItem(r,re),l(2,t="Backup restored"),l(3,f="info");let ee=document.getElementById(`${r}-upload-backup`);ee&&(ee.value=""),v()},C.readAsText(B.files[0])}function S(y){const B=document.getElementById("backup-modal");if(!B)return;const C=document.getElementById(`${r}-backup-list-form`);C&&C.querySelectorAll('input[name="btn-edit"]:checked').length===0||(B.showModal(),y.preventDefault())}function $(y,B){const C=document.getElementById("rename-modal");if(!C)return;const W=document.getElementById(r+"-rename-backup");W&&(W.placeholder=B);const re=document.getElementById(r+"-rename-hidden");re&&(re.value=B,C.showModal(),y.preventDefault())}function U(y,B){const C=document.getElementById(r+"-rename-backup");C&&(C.placeholder="")}function A(y,B){return y.preventDefault(),window.confirm("Delete backup '"+B+"'?")?(l(2,t="Backup deleted"),l(3,f="error"),localStorage.removeItem(B),v(),!0):!1}const M=y=>g(y,r+"-new-backup-name"),j=(y,B)=>A(B,y.name),J=(y,B)=>_t(y.name),se=(y,B)=>$(B,y.name),V=y=>E(y);function O(){p=this.checked,l(5,p)}function ne(){a=this.value,l(4,a)}const x=y=>g(y,r+"-original-name"),K=y=>g(y,r+"-rename-backup");function R(){k=this.value,l(6,k)}function F(y){t=y,l(2,t)}function X(y){t=y,l(2,t)}return n.$$set=y=>{"key"in y&&l(0,r=y.key),"backups"in y&&l(1,i=y.backups)},[r,i,t,f,a,p,k,g,c,T,N,E,S,$,U,A,M,j,J,se,V,O,ne,x,K,R,F,X]}class Ot extends Ve{constructor(e){super(),Re(this,e,St,Ct,Le,{key:0,backups:1},null,[-1,-1])}}function jt(n){let e;return{c(){e=q("off")},l(l){e=H(l,"off")},m(l,s){w(l,e,s)},d(l){l&&u(e)}}}function Vt(n){let e;return{c(){e=q("on")},l(l){e=H(l,"on")},m(l,s){w(l,e,s)},d(l){l&&u(e)}}}function Rt(n){let e,l,s,r;return{c(){e=m("button"),l=q("Turn on"),this.h()},l(i){e=b(i,"BUTTON",{class:!0});var t=h(e);l=H(t,"Turn on"),t.forEach(u),this.h()},h(){o(e,"class","btn btn-primary svelte-vgvckc")},m(i,t){w(i,e,t),_(e,l),s||(r=Q(e,"click",n[9]),s=!0)},p:Ce,d(i){i&&u(e),s=!1,r()}}}function Lt(n){let e,l,s,r;return{c(){e=m("button"),l=q("Turn off"),this.h()},l(i){e=b(i,"BUTTON",{class:!0});var t=h(e);l=H(t,"Turn off"),t.forEach(u),this.h()},h(){o(e,"class","btn btn-primary svelte-vgvckc")},m(i,t){w(i,e,t),_(e,l),s||(r=Q(e,"click",n[10]),s=!0)},p:Ce,d(i){i&&u(e),s=!1,r()}}}function rt(n){let e,l,s,r;const i=[$t,Pt],t=[];function f(a,p){return a[3]!=null?0:1}return e=f(n),l=t[e]=i[e](n),{c(){l.c(),s=ke()},l(a){l.l(a),s=ke()},m(a,p){t[e].m(a,p),w(a,s,p),r=!0},p(a,p){let k=e;e=f(a),e===k?t[e].p(a,p):(Pe(),le(t[k],1,1,()=>{t[k]=null}),$e(),l=t[e],l?l.p(a,p):(l=t[e]=i[e](a),l.c()),Z(l,1),l.m(s.parentNode,s))},i(a){r||(Z(l),r=!0)},o(a){le(l),r=!1},d(a){t[e].d(a),a&&u(s)}}}function Pt(n){let e,l,s;function r(t){n[14](t)}let i={};return n[2]!==void 0&&(i.message=n[2]),e=new ze({props:i}),Ae.push(()=>Me(e,"message",r,n[2])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,f){me(e,t,f),s=!0},p(t,f){const a={};!l&&f&4&&(l=!0,a.message=t[2],Fe(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){le(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function $t(n){let e,l,s;function r(t){n[13](t)}let i={alert_style:n[3]};return n[2]!==void 0&&(i.message=n[2]),e=new ze({props:i}),Ae.push(()=>Me(e,"message",r,n[2])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,f){me(e,t,f),s=!0},p(t,f){const a={};f&8&&(a.alert_style=t[3]),!l&&f&4&&(l=!0,a.message=t[2],Fe(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){le(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function At(n){let e,l,s,r,i,t,f,a,p,k,v,g,c,T,N,E,S,$,U,A,M,j,J,se,V,O,ne,x,K,R,F,X,y,B,C,W,re;function oe(I,Y){return I[1]===!0?Vt:jt}let ee=oe(n),ue=ee(n);function ae(I,Y){return I[1]?Lt:Rt}let ce=ae(n),te=ce(n),z=n[2]&&rt(n);return{c(){e=m("h2"),l=q("Options"),s=L(),r=m("div"),i=m("div"),t=m("div"),f=m("button"),a=q("Find new definitions"),p=L(),k=m("button"),v=q("Refresh all defintions"),g=L(),c=m("button"),T=q("Clear definitions"),N=L(),E=m("div"),S=m("button"),$=q("Restore defaults"),U=L(),A=m("button"),M=q("Clear words"),j=L(),J=m("h2"),se=q("Dictionary Lookup"),V=L(),O=m("div"),ne=m("div"),x=m("p"),K=q("Automatic dictionary lookup is: "),R=m("b"),ue.c(),F=L(),X=m("div"),te.c(),y=L(),z&&z.c(),B=ke(),this.h()},l(I){e=b(I,"H2",{class:!0,id:!0});var Y=h(e);l=H(Y,"Options"),Y.forEach(u),s=P(I),r=b(I,"DIV",{class:!0});var he=h(r);i=b(he,"DIV",{class:!0});var ge=h(i);t=b(ge,"DIV",{class:!0});var G=h(t);f=b(G,"BUTTON",{type:!0,class:!0});var d=h(f);a=H(d,"Find new definitions"),d.forEach(u),p=P(G),k=b(G,"BUTTON",{type:!0,class:!0});var D=h(k);v=H(D,"Refresh all defintions"),D.forEach(u),g=P(G),c=b(G,"BUTTON",{type:!0,class:!0});var ie=h(c);T=H(ie,"Clear definitions"),ie.forEach(u),G.forEach(u),N=P(ge),E=b(ge,"DIV",{class:!0});var fe=h(E);S=b(fe,"BUTTON",{type:!0,class:!0});var ye=h(S);$=H(ye,"Restore defaults"),ye.forEach(u),U=P(fe),A=b(fe,"BUTTON",{type:!0,class:!0});var Ie=h(A);M=H(Ie,"Clear words"),Ie.forEach(u),fe.forEach(u),ge.forEach(u),he.forEach(u),j=P(I),J=b(I,"H2",{class:!0,id:!0});var Be=h(J);se=H(Be,"Dictionary Lookup"),Be.forEach(u),V=P(I),O=b(I,"DIV",{class:!0});var Te=h(O);ne=b(Te,"DIV",{});var de=h(ne);x=b(de,"P",{class:!0});var Ee=h(x);K=H(Ee,"Automatic dictionary lookup is: "),R=b(Ee,"B",{});var De=h(R);ue.l(De),De.forEach(u),Ee.forEach(u),F=P(de),X=b(de,"DIV",{class:!0});var Ne=h(X);te.l(Ne),Ne.forEach(u),de.forEach(u),Te.forEach(u),y=P(I),z&&z.l(I),B=ke(),this.h()},h(){o(e,"class","options-group-title"),o(e,"id","options"),o(f,"type","button"),o(f,"class","btn btn-primary svelte-vgvckc"),o(k,"type","button"),o(k,"class","btn btn-primary svelte-vgvckc"),o(c,"type","button"),o(c,"class","btn btn-primary svelte-vgvckc"),o(t,"class","options-subgroup svelte-vgvckc"),o(S,"type","button"),o(S,"class","btn btn-danger svelte-vgvckc"),o(A,"type","button"),o(A,"class","btn btn-danger svelte-vgvckc"),o(E,"class","option-section options-subgroup svelte-vgvckc"),o(i,"class","option-section options-group-cols svelte-vgvckc"),o(r,"class","options-group"),o(J,"class","options-group-title"),o(J,"id","dictionary-lookup"),o(x,"class","svelte-vgvckc"),o(X,"class","toggle-autodefs svelte-vgvckc"),o(O,"class","options-group svelte-vgvckc")},m(I,Y){w(I,e,Y),_(e,l),w(I,s,Y),w(I,r,Y),_(r,i),_(i,t),_(t,f),_(f,a),_(t,p),_(t,k),_(k,v),_(t,g),_(t,c),_(c,T),_(i,N),_(i,E),_(E,S),_(S,$),_(E,U),_(E,A),_(A,M),w(I,j,Y),w(I,J,Y),_(J,se),w(I,V,Y),w(I,O,Y),_(O,ne),_(ne,x),_(x,K),_(x,R),ue.m(R,null),_(ne,F),_(ne,X),te.m(X,null),w(I,y,Y),z&&z.m(I,Y),w(I,B,Y),C=!0,W||(re=[Q(f,"click",n[11]),Q(k,"click",n[12]),Q(c,"click",n[6]),Q(S,"click",n[4]),Q(A,"click",n[5])],W=!0)},p(I,[Y]){ee!==(ee=oe(I))&&(ue.d(1),ue=ee(I),ue&&(ue.c(),ue.m(R,null))),ce===(ce=ae(I))&&te?te.p(I,Y):(te.d(1),te=ce(I),te&&(te.c(),te.m(X,null))),I[2]?z?(z.p(I,Y),Y&4&&Z(z,1)):(z=rt(I),z.c(),Z(z,1),z.m(B.parentNode,B)):z&&(Pe(),le(z,1,1,()=>{z=null}),$e())},i(I){C||(Z(z),C=!0)},o(I){le(z),C=!1},d(I){I&&u(e),I&&u(s),I&&u(r),I&&u(j),I&&u(J),I&&u(V),I&&u(O),ue.d(),te.d(),I&&u(y),z&&z.d(I),I&&u(B),W=!1,Ue(re)}}}function Mt(n,e,l){const s=nt();let{key:r}=e,{autodefs:i}=e,t,f;function a(){if(!window.confirm("This will replace the current word list with the defaults.  Continue?"))return;const U=pt(r);we(U)}function p(){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const U=mt(r);we(U)}function k(){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;let U=ve(r);const A=bt(U);console.log(`removed ${A} definitions`),we(U)}function v(U){function A(V,O){return V.dict_def=O.dict_def,!0}if(!U)return;let M=ve(U);if(!window.confirm(`Refresh all ${M.words.length} words?

This will overwrite existing definitions.`))return;let j=0,J=[],se=M.words.map(async V=>{try{const O=await Xe.default.lookup(V.word);O?(V.dict_def=O,j+=1):J.push(V.word)}finally{V.cache=Qe(V),Ye(M,V,A)}});Promise.allSettled(se).then(()=>{J.length==0?(l(2,t=`Updated ${j} words`),l(3,f="info")):(l(3,f="error"),l(2,t=`Failed to update ${J.length} words.  ${J}`)),we(M)})}function g(U){function A(V,O){return V.dict_def=O.dict_def,!0}if(!U||!window.confirm("Lookup definitions for words without definitions?"))return;let M=ve(U),j=0,J=[],se=M.words.filter(V=>V.dict_def===void 0).map(async V=>{try{const O=await Xe.default.lookup(V.word);O?(V.dict_def=O,j+=1):J.push(V.word)}finally{V.cache=Qe(V),Ye(M,V,A)}});Promise.allSettled(se).then(()=>{J.length==0?(l(2,t=`Updated ${j} words`),l(3,f="info")):(l(3,f="error"),l(2,t=`Failed to update ${J.length} words.<br>${J}`)),we(M)})}function c(){let U=ve(r);U.auto_defs=!0,we(U),s("refreshlist",!0)}function T(){let U=ve(r);U.auto_defs=!1,we(U),s("refreshlist",!0)}const N=()=>g(r),E=()=>v(r);function S(U){t=U,l(2,t)}function $(U){t=U,l(2,t)}return n.$$set=U=>{"key"in U&&l(0,r=U.key),"autodefs"in U&&l(1,i=U.autodefs)},[r,i,t,f,a,p,k,v,g,c,T,N,E,S,$]}class Ft extends Ve{constructor(e){super(),Re(this,e,Mt,At,Le,{key:0,autodefs:1})}}function zt(n){let e,l,s,r,i,t,f,a,p,k;return e=new vt({props:{current:"options"}}),f=new Ot({props:{backups:n[1],key:"words"}}),f.$on("refreshlist",n[2]),p=new Ft({props:{key:"words",autodefs:n[0].auto_defs}}),p.$on("refreshlist",n[2]),{c(){_e(e.$$.fragment),l=L(),s=m("h1"),r=q("Options"),i=L(),t=m("div"),_e(f.$$.fragment),a=L(),_e(p.$$.fragment),this.h()},l(v){pe(e.$$.fragment,v),l=P(v),s=b(v,"H1",{});var g=h(s);r=H(g,"Options"),g.forEach(u),i=P(v),t=b(v,"DIV",{class:!0});var c=h(t);pe(f.$$.fragment,c),a=P(c),pe(p.$$.fragment,c),c.forEach(u),this.h()},h(){o(t,"class","options-page")},m(v,g){me(e,v,g),w(v,l,g),w(v,s,g),_(s,r),w(v,i,g),w(v,t,g),me(f,t,null),_(t,a),me(p,t,null),k=!0},p(v,[g]){const c={};g&2&&(c.backups=v[1]),f.$set(c);const T={};g&1&&(T.autodefs=v[0].auto_defs),p.$set(T)},i(v){k||(Z(e.$$.fragment,v),Z(f.$$.fragment,v),Z(p.$$.fragment,v),k=!0)},o(v){le(e.$$.fragment,v),le(f.$$.fragment,v),le(p.$$.fragment,v),k=!1},d(v){be(e,v),v&&u(l),v&&u(s),v&&u(i),v&&u(t),be(f),be(p)}}}function qt(n,e,l){let s=ve("words"),r=[];function i(){l(1,r=[]);for(let f=0;f<localStorage.length;f++){const a=localStorage.key(f);if(a)if(a!=="words"){let p=ve(a);r.push({name:a,key:f,size:p.words.length})}else r.unshift({name:a,key:f,size:s.words.length})}}i();function t(f){l(0,s=ve("words")),i()}return[s,r,t]}class Kt extends Ve{constructor(e){super(),Re(this,e,qt,zt,Le,{})}}export{Kt as default};
