import{S as Ee,i as Ie,s as Be,C as it,k as b,a as V,q as W,l as v,m as E,c as L,r as j,h as u,n as i,b as N,G as p,M as K,_ as ut,D as ft,E as ct,F as dt,u as ye,f as X,t as Q,P as _e,w as se,e as ue,x as ne,y as re,X as _t,g as De,d as Te,z as oe,L as we,$ as pt,I as Ne,J as Se,O as Ue,B as qe}from"../../../chunks/index-d8102d1a.js";import{l as $e,p as Ye,d as mt,q as bt,c as Pe,A as Ze,n as xe,k as et}from"../../../chunks/words-2bbd4318.js";import{A as Ce}from"../../../chunks/Alert-83fe2429.js";import{N as vt}from"../../../chunks/Nav-11fb0fa3.js";function kt(n){let e,l,s,r,o,t,d,a,c,k,m,h,f;const w=n[9].default,g=it(w,n,n[8],null);return{c(){e=b("dialog"),l=b("div"),s=b("form"),g&&g.c(),r=V(),o=b("div"),t=b("button"),d=W(n[0]),a=V(),c=b("button"),k=W(n[1]),this.h()},l(B){e=v(B,"DIALOG",{class:!0,id:!0});var S=E(e);l=v(S,"DIV",{class:!0});var R=E(l);s=v(R,"FORM",{method:!0});var D=E(s);g&&g.l(D),r=L(D),o=v(D,"DIV",{class:!0});var C=E(o);t=v(C,"BUTTON",{type:!0,class:!0});var O=E(t);d=j(O,n[0]),O.forEach(u),a=L(C),c=v(C,"BUTTON",{type:!0,class:!0});var I=E(c);k=j(I,n[1]),I.forEach(u),C.forEach(u),D.forEach(u),R.forEach(u),S.forEach(u),this.h()},h(){i(t,"type","submit"),i(t,"class","btn btn-primary"),i(c,"type","button"),i(c,"class","btn btn-secondary"),i(o,"class","dialog-controls svelte-153o6vl"),i(s,"method","dialog"),i(l,"class","modal-wrapper svelte-153o6vl"),i(e,"class","modal svelte-153o6vl"),i(e,"id",n[2])},m(B,S){N(B,e,S),p(e,l),p(l,s),g&&g.m(s,null),p(s,r),p(s,o),p(o,t),p(t,d),p(o,a),p(o,c),p(c,k),m=!0,h||(f=[K(c,"click",n[3]),K(s,"submit",n[5]),K(e,"click",ut(n[3])),K(e,"close",n[4])],h=!0)},p(B,[S]){g&&g.p&&(!m||S&256)&&ft(g,w,B,B[8],m?dt(w,B[8],S,null):ct(B[8]),null),(!m||S&1)&&ye(d,B[0]),(!m||S&2)&&ye(k,B[1]),(!m||S&4)&&i(e,"id",B[2])},i(B){m||(X(g,B),m=!0)},o(B){Q(g,B),m=!1},d(B){B&&u(e),g&&g.d(B),h=!1,_e(f)}}}function tt(n){n.querySelectorAll("form").forEach(e=>{e.reset()})}function ht(n,e,l){let{$$slots:s={},$$scope:r}=e,{onClose:o=()=>{}}=e,{onSubmit:t}=e,{submit_text:d="Submit"}=e,{cancel_text:a="Cancel"}=e,{id:c}=e;function k(f){const w=document.getElementById(c);w&&(o(w,f),tt(w),w.close())}function m(f){const w=document.getElementById(c);w&&(o(w,f),tt(w))}function h(f){const w=document.getElementById(c);if(!w){f.preventDefault();return}t(w,f)?w.close():f.preventDefault()}return n.$$set=f=>{"onClose"in f&&l(6,o=f.onClose),"onSubmit"in f&&l(7,t=f.onSubmit),"submit_text"in f&&l(0,d=f.submit_text),"cancel_text"in f&&l(1,a=f.cancel_text),"id"in f&&l(2,c=f.id),"$$scope"in f&&l(8,r=f.$$scope)},[d,a,c,k,m,h,o,t,r,s]}class lt extends Ee{constructor(e){super(),Ie(this,e,ht,kt,Be,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function st(n,e,l){const s=n.slice();return s[29]=e[l],s}function gt(n){let e,l;return{c(){e=b("button"),l=b("i"),this.h()},l(s){e=v(s,"BUTTON",{type:!0,class:!0});var r=E(e);l=v(r,"I",{class:!0}),E(l).forEach(u),r.forEach(u),this.h()},h(){i(l,"class","fa-solid fa-xmark"),i(e,"type","button"),i(e,"class","remove-btn svelte-yqp617"),e.disabled=!0},m(s,r){N(s,e,r),p(e,l)},p:qe,d(s){s&&u(e)}}}function yt(n){let e,l,s,r;function o(...t){return n[16](n[29],...t)}return{c(){e=b("button"),l=b("i"),this.h()},l(t){e=v(t,"BUTTON",{type:!0,class:!0,title:!0});var d=E(e);l=v(d,"I",{class:!0}),E(l).forEach(u),d.forEach(u),this.h()},h(){i(l,"class","fa-solid fa-xmark"),i(e,"type","button"),i(e,"class","remove-btn svelte-yqp617"),i(e,"title","Delete backup")},m(t,d){N(t,e,d),p(e,l),s||(r=K(e,"click",o),s=!0)},p(t,d){n=t},d(t){t&&u(e),s=!1,r()}}}function wt(n){let e,l,s,r;return{c(){e=b("button"),l=b("i"),s=V(),r=b("input"),this.h()},l(o){e=v(o,"BUTTON",{type:!0,class:!0});var t=E(e);l=v(t,"I",{class:!0}),E(l).forEach(u),t.forEach(u),s=L(o),r=v(o,"INPUT",{type:!0,class:!0}),this.h()},h(){i(l,"class","fa-solid fa-pen"),i(e,"type","button"),e.disabled=!0,i(e,"class","btn rename-btn svelte-yqp617"),i(r,"type","radio"),i(r,"class","btn-edit-current svelte-yqp617"),r.disabled=!0},m(o,t){N(o,e,t),p(e,l),N(o,s,t),N(o,r,t)},p:qe,d(o){o&&u(e),o&&u(s),o&&u(r)}}}function Et(n){let e,l,s,r,o,t,d,a,c,k;function m(...h){return n[18](n[29],...h)}return{c(){e=b("button"),l=b("i"),o=V(),t=b("input"),this.h()},l(h){e=v(h,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var f=E(e);l=v(f,"I",{class:!0}),E(l).forEach(u),f.forEach(u),o=L(h),t=v(h,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){i(l,"class","fa-solid fa-pen"),i(e,"type","submit"),i(e,"id",s=n[0]+"-backup-rename-"+n[29].name),i(e,"title","Rename"),e.value=r=n[29].name,i(e,"class","btn rename-btn svelte-yqp617"),i(t,"type","radio"),i(t,"name","btn-edit"),i(t,"class","btn-edit svelte-yqp617"),i(t,"title","Select this backup for restore"),i(t,"id",d=n[0]+"-restore-"+n[29].key),t.required=!0,t.value=a=n[29].name},m(h,f){N(h,e,f),p(e,l),N(h,o,f),N(h,t,f),c||(k=K(e,"click",m),c=!0)},p(h,f){n=h,f[0]&3&&s!==(s=n[0]+"-backup-rename-"+n[29].name)&&i(e,"id",s),f[0]&2&&r!==(r=n[29].name)&&(e.value=r),f[0]&3&&d!==(d=n[0]+"-restore-"+n[29].key)&&i(t,"id",d),f[0]&2&&a!==(a=n[29].name)&&(t.value=a)},d(h){h&&u(e),h&&u(o),h&&u(t),c=!1,k()}}}function It(n){let e=n[29].name+"",l;return{c(){l=W(e)},l(s){l=j(s,e)},m(s,r){N(s,l,r)},p(s,r){r[0]&2&&e!==(e=s[29].name+"")&&ye(l,e)},d(s){s&&u(l)}}}function Bt(n){let e,l;return{c(){e=b("div"),l=W("Current"),this.h()},l(s){e=v(s,"DIV",{class:!0});var r=E(e);l=j(r,"Current"),r.forEach(u),this.h()},h(){i(e,"class","backup-current svelte-yqp617")},m(s,r){N(s,e,r),p(e,l)},p:qe,d(s){s&&u(e)}}}function nt(n,e){let l,s,r,o,t,d,a,c,k,m,h,f,w,g=e[29].size+"",B,S,R,D;function C(P,M){return P[29].name!=P[0]?yt:gt}let O=C(e),I=O(e);function $(...P){return e[17](e[29],...P)}function F(P,M){return P[29].name!=P[0]?Et:wt}let Z=F(e),G=Z(e);function x(P,M){return P[29].name==P[0]?Bt:It}let Y=x(e),z=Y(e);return{key:n,first:null,c(){l=b("div"),s=b("div"),I.c(),r=V(),o=b("button"),t=b("i"),d=V(),G.c(),a=V(),c=b("div"),k=b("label"),z.c(),h=V(),f=b("div"),w=W("("),B=W(g),S=W(" words)"),this.h()},l(P){l=v(P,"DIV",{class:!0});var M=E(l);s=v(M,"DIV",{class:!0});var y=E(s);I.l(y),r=L(y),o=v(y,"BUTTON",{type:!0,class:!0,title:!0});var T=E(o);t=v(T,"I",{class:!0}),E(t).forEach(u),T.forEach(u),d=L(y),G.l(y),a=L(y),c=v(y,"DIV",{class:!0});var U=E(c);k=v(U,"LABEL",{class:!0,for:!0,title:!0});var A=E(k);z.l(A),A.forEach(u),h=L(U),f=v(U,"DIV",{class:!0});var J=E(f);w=j(J,"("),B=j(J,g),S=j(J," words)"),J.forEach(u),U.forEach(u),y.forEach(u),M.forEach(u),this.h()},h(){i(t,"class","fa-solid fa-download"),i(o,"type","button"),i(o,"class","btn download-btn svelte-yqp617"),i(o,"title","Download backup"),i(k,"class","backup-name-label svelte-yqp617"),i(k,"for",m=e[0]+"-restore-"+e[29].key),i(k,"title","Select backup for restore"),i(f,"class","backup-length svelte-yqp617"),i(c,"class","backup-name svelte-yqp617"),i(s,"class","backup-content svelte-yqp617"),i(l,"class","backup-entry svelte-yqp617"),this.first=l},m(P,M){N(P,l,M),p(l,s),I.m(s,null),p(s,r),p(s,o),p(o,t),p(s,d),G.m(s,null),p(s,a),p(s,c),p(c,k),z.m(k,null),p(c,h),p(c,f),p(f,w),p(f,B),p(f,S),R||(D=K(o,"click",$),R=!0)},p(P,M){e=P,O===(O=C(e))&&I?I.p(e,M):(I.d(1),I=O(e),I&&(I.c(),I.m(s,r))),Z===(Z=F(e))&&G?G.p(e,M):(G.d(1),G=Z(e),G&&(G.c(),G.m(s,a))),Y===(Y=x(e))&&z?z.p(e,M):(z.d(1),z=Y(e),z&&(z.c(),z.m(k,null))),M[0]&3&&m!==(m=e[0]+"-restore-"+e[29].key)&&i(k,"for",m),M[0]&2&&g!==(g=e[29].size+"")&&ye(B,g)},d(P){P&&u(l),I.d(),G.d(),z.d(),R=!1,D()}}}function rt(n){let e,l,s,r,o;return{c(){e=W(`Backup as:
                `),l=b("input"),this.h()},l(t){e=j(t,`Backup as:
                `),l=v(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){i(l,"id",s=n[0]+"-original-name"),i(l,"name","save-as"),i(l,"type","text"),i(l,"class","original form-control svelte-yqp617"),i(l,"placeholder","new name"),l.required=!0},m(t,d){N(t,e,d),N(t,l,d),we(l,n[4]),r||(o=[K(l,"input",n[21]),K(l,"blur",n[22])],r=!0)},p(t,d){d[0]&1&&s!==(s=t[0]+"-original-name")&&i(l,"id",s),d[0]&16&&l.value!==t[4]&&we(l,t[4])},d(t){t&&u(e),t&&u(l),r=!1,_e(o)}}}function Dt(n){let e,l,s,r,o,t,d,a,c,k,m,h,f=n[5]&&rt(n);return{c(){e=b("div"),l=b("div"),s=b("input"),o=V(),t=b("label"),d=W("Backup current list"),c=V(),k=b("div"),f&&f.c(),this.h()},l(w){e=v(w,"DIV",{class:!0});var g=E(e);l=v(g,"DIV",{class:!0});var B=E(l);s=v(B,"INPUT",{type:!0,id:!0}),o=L(B),t=v(B,"LABEL",{for:!0});var S=E(t);d=j(S,"Backup current list"),S.forEach(u),B.forEach(u),c=L(g),k=v(g,"DIV",{});var R=E(k);f&&f.l(R),R.forEach(u),g.forEach(u),this.h()},h(){i(s,"type","checkbox"),i(s,"id",r=n[0]+"-rename-current"),i(t,"for",a=n[0]+"-rename-current"),i(l,"class","dialog-title svelte-yqp617"),i(e,"class","original-name svelte-yqp617")},m(w,g){N(w,e,g),p(e,l),p(l,s),s.checked=n[5],p(l,o),p(l,t),p(t,d),p(e,c),p(e,k),f&&f.m(k,null),m||(h=K(s,"change",n[20]),m=!0)},p(w,g){g[0]&1&&r!==(r=w[0]+"-rename-current")&&i(s,"id",r),g[0]&32&&(s.checked=w[5]),g[0]&1&&a!==(a=w[0]+"-rename-current")&&i(t,"for",a),w[5]?f?f.p(w,g):(f=rt(w),f.c(),f.m(k,null)):f&&(f.d(1),f=null)},d(w){w&&u(e),f&&f.d(),m=!1,h()}}}function Tt(n){let e,l,s,r,o,t,d;return{c(){e=b("input"),s=V(),r=b("input"),this.h()},l(a){e=v(a,"INPUT",{type:!0,id:!0,class:!0}),s=L(a),r=v(a,"INPUT",{type:!0,id:!0}),this.h()},h(){i(e,"type","text"),i(e,"id",l=n[0]+"-rename-backup"),i(e,"class","form-control"),i(r,"type","hidden"),i(r,"id",o=n[0]+"-rename-hidden")},m(a,c){N(a,e,c),we(e,n[6]),N(a,s,c),N(a,r,c),t||(d=[K(e,"blur",n[23]),K(e,"input",n[24])],t=!0)},p(a,c){c[0]&1&&l!==(l=a[0]+"-rename-backup")&&i(e,"id",l),c[0]&64&&e.value!==a[6]&&we(e,a[6]),c[0]&1&&o!==(o=a[0]+"-rename-hidden")&&i(r,"id",o)},d(a){a&&u(e),a&&u(s),a&&u(r),t=!1,_e(d)}}}function ot(n){let e,l,s,r;const o=[St,Nt],t=[];function d(a,c){return a[3]!=null?0:1}return e=d(n),l=t[e]=o[e](n),{c(){l.c(),s=ue()},l(a){l.l(a),s=ue()},m(a,c){t[e].m(a,c),N(a,s,c),r=!0},p(a,c){let k=e;e=d(a),e===k?t[e].p(a,c):(De(),Q(t[k],1,1,()=>{t[k]=null}),Te(),l=t[e],l?l.p(a,c):(l=t[e]=o[e](a),l.c()),X(l,1),l.m(s.parentNode,s))},i(a){r||(X(l),r=!0)},o(a){Q(l),r=!1},d(a){t[e].d(a),a&&u(s)}}}function Nt(n){let e,l,s;function r(t){n[26](t)}let o={};return n[2]!==void 0&&(o.message=n[2]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[2])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};!l&&d[0]&4&&(l=!0,a.message=t[2],Ue(()=>l=!1)),e.$set(a)},i(t){s||(X(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function St(n){let e,l,s;function r(t){n[25](t)}let o={alert_style:n[3]};return n[2]!==void 0&&(o.message=n[2]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[2])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};d[0]&8&&(a.alert_style=t[3]),!l&&d[0]&4&&(l=!0,a.message=t[2],Ue(()=>l=!1)),e.$set(a)},i(t){s||(X(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function Ut(n){let e,l,s,r,o,t,d,a,c,k,m,h,f,w,g,B,S,R,D,C=[],O=new Map,I,$,F,Z,G,x,Y,z,P,M,y,T,U,A,J,ee,te,Oe,pe,ae,me,ie,be,ce,fe,Ve,Me,ve=n[1];const Ae=_=>_[29].key;for(let _=0;_<ve.length;_+=1){let q=st(n,ve,_),le=Ae(q);O.set(le,C[_]=nt(le,q))}ae=new lt({props:{id:"backup-modal",onSubmit:n[9],submit_text:"Restore",$$slots:{default:[Dt]},$$scope:{ctx:n}}}),ie=new lt({props:{id:"rename-modal",onSubmit:n[8],onClose:n[13],submit_text:"Rename",$$slots:{default:[Tt]},$$scope:{ctx:n}}});let H=n[2]&&ot(n);return{c(){e=b("legend"),l=W("Save Backup"),s=V(),r=b("div"),o=b("form"),t=b("div"),d=b("div"),a=W(`Backup name:
                `),c=b("input"),m=V(),h=b("button"),f=W("Create Backup"),w=V(),g=b("legend"),B=W("Saved Backups"),S=V(),R=b("div"),D=b("form");for(let _=0;_<C.length;_+=1)C[_].c();I=V(),$=b("div"),F=b("button"),Z=W("Restore"),x=V(),Y=b("legend"),z=W("Upload Backup"),P=V(),M=b("div"),y=b("form"),T=b("div"),U=b("div"),A=b("input"),ee=V(),te=b("button"),Oe=W("Restore Backup"),pe=V(),se(ae.$$.fragment),me=V(),se(ie.$$.fragment),be=V(),H&&H.c(),ce=ue(),this.h()},l(_){e=v(_,"LEGEND",{class:!0});var q=E(e);l=j(q,"Save Backup"),q.forEach(u),s=L(_),r=v(_,"DIV",{class:!0});var le=E(r);o=v(le,"FORM",{});var de=E(o);t=v(de,"DIV",{class:!0});var ke=E(t);d=v(ke,"DIV",{});var Le=E(d);a=j(Le,`Backup name:
                `),c=v(Le,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),Le.forEach(u),m=L(ke),h=v(ke,"BUTTON",{class:!0});var Fe=E(h);f=j(Fe,"Create Backup"),Fe.forEach(u),ke.forEach(u),de.forEach(u),le.forEach(u),w=L(_),g=v(_,"LEGEND",{class:!0});var Ge=E(g);B=j(Ge,"Saved Backups"),Ge.forEach(u),S=L(_),R=v(_,"DIV",{class:!0});var We=E(R);D=v(We,"FORM",{id:!0});var he=E(D);for(let Re=0;Re<C.length;Re+=1)C[Re].l(he);I=L(he),$=v(he,"DIV",{class:!0});var je=E($);F=v(je,"BUTTON",{type:!0,class:!0,name:!0});var ze=E(F);Z=j(ze,"Restore"),ze.forEach(u),je.forEach(u),he.forEach(u),We.forEach(u),x=L(_),Y=v(_,"LEGEND",{class:!0});var Je=E(Y);z=j(Je,"Upload Backup"),Je.forEach(u),P=L(_),M=v(_,"DIV",{class:!0});var He=E(M);y=v(He,"FORM",{});var Xe=E(y);T=v(Xe,"DIV",{class:!0});var ge=E(T);U=v(ge,"DIV",{class:!0});var Ke=E(U);A=v(Ke,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),Ke.forEach(u),ee=L(ge),te=v(ge,"BUTTON",{class:!0});var Qe=E(te);Oe=j(Qe,"Restore Backup"),Qe.forEach(u),ge.forEach(u),Xe.forEach(u),He.forEach(u),pe=L(_),ne(ae.$$.fragment,_),me=L(_),ne(ie.$$.fragment,_),be=L(_),H&&H.l(_),ce=ue(),this.h()},h(){i(e,"class","options-group-title"),i(c,"id",k=n[0]+"-new-backup-name"),i(c,"type","text"),i(c,"class","new-backup-name form-control svelte-yqp617"),i(c,"placeholder","new name"),i(h,"class","btn btn-primary"),i(t,"class","new-backup svelte-yqp617"),i(r,"class","options-group"),i(g,"class","options-group-title"),i(F,"type","button"),i(F,"class","btn btn btn-danger"),i(F,"name","backups_action"),F.value="restore",i($,"class","backup-submit svelte-yqp617"),i(D,"id",G=n[0]+"-backup-list-form"),i(R,"class","options-group"),i(Y,"class","options-group-title"),i(A,"id",J=n[0]+"-upload-backup"),i(A,"class","upload-backup form-control svelte-yqp617"),i(A,"type","file"),i(A,"accept",".json,application/json"),i(U,"class","upload-backup-container"),i(te,"class","btn btn-danger upload-backup-btn svelte-yqp617"),i(T,"class","new-backup svelte-yqp617"),i(M,"class","options-group")},m(_,q){N(_,e,q),p(e,l),N(_,s,q),N(_,r,q),p(r,o),p(o,t),p(t,d),p(d,a),p(d,c),p(t,m),p(t,h),p(h,f),N(_,w,q),N(_,g,q),p(g,B),N(_,S,q),N(_,R,q),p(R,D);for(let le=0;le<C.length;le+=1)C[le].m(D,null);p(D,I),p(D,$),p($,F),p(F,Z),N(_,x,q),N(_,Y,q),p(Y,z),N(_,P,q),N(_,M,q),p(M,y),p(y,T),p(T,U),p(U,A),p(T,ee),p(T,te),p(te,Oe),N(_,pe,q),re(ae,_,q),N(_,me,q),re(ie,_,q),N(_,be,q),H&&H.m(_,q),N(_,ce,q),fe=!0,Ve||(Me=[K(c,"blur",n[15]),K(o,"submit",n[10]),K(F,"click",qt),K(y,"submit",n[19])],Ve=!0)},p(_,q){(!fe||q[0]&1&&k!==(k=_[0]+"-new-backup-name"))&&i(c,"id",k),q[0]&20483&&(ve=_[1],C=_t(C,q,Ae,1,_,ve,O,D,pt,nt,I,st)),(!fe||q[0]&1&&G!==(G=_[0]+"-backup-list-form"))&&i(D,"id",G),(!fe||q[0]&1&&J!==(J=_[0]+"-upload-backup"))&&i(A,"id",J);const le={};q[0]&49|q[1]&2&&(le.$$scope={dirty:q,ctx:_}),ae.$set(le);const de={};q[0]&65|q[1]&2&&(de.$$scope={dirty:q,ctx:_}),ie.$set(de),_[2]?H?(H.p(_,q),q[0]&4&&X(H,1)):(H=ot(_),H.c(),X(H,1),H.m(ce.parentNode,ce)):H&&(De(),Q(H,1,1,()=>{H=null}),Te())},i(_){fe||(X(ae.$$.fragment,_),X(ie.$$.fragment,_),X(H),fe=!0)},o(_){Q(ae.$$.fragment,_),Q(ie.$$.fragment,_),Q(H),fe=!1},d(_){_&&u(e),_&&u(s),_&&u(r),_&&u(w),_&&u(g),_&&u(S),_&&u(R);for(let q=0;q<C.length;q+=1)C[q].d();_&&u(x),_&&u(Y),_&&u(P),_&&u(M),_&&u(pe),oe(ae,_),_&&u(me),oe(ie,_),_&&u(be),H&&H.d(_),_&&u(ce),Ve=!1,_e(Me)}}}function qt(n){const e=document.getElementById("backup-modal");e&&(e.showModal(),n.preventDefault())}function Ct(n,e,l){let{key:s}=e,r=[],o,t,d="",a=!0,c="";function k(){for(let y=0;y<localStorage.length;y++){const T=localStorage.key(y);if(T){let U=$e(T);r.push({name:T,key:y,size:U.words.length})}}}k();function m(){l(1,r=[]),k(),l(1,r)}function h(y,T){const U=document.getElementById(T);if(!U)return!1;if(U.value!=""){U.setCustomValidity("");{const A=localStorage.getItem(U.value.toLowerCase());if(U.value.toLowerCase()==s.toLowerCase())U.setCustomValidity(`'${s}' is a reserved name`);else if(A!=null)U.setCustomValidity("Backup exists");else return!0}}return!1}function f(y,T){if(!h(T,s+"-rename-backup"))return console.log("invalid name:"+c),T.preventDefault(),!1;const U=document.getElementById(s+"-rename-hidden"),A=c.toLowerCase(),J=localStorage.getItem(A);if(!U||!U.value||!c||J!=null)return!1;const ee=U.value.toLowerCase(),te=localStorage.getItem(ee);return te?(localStorage.setItem(A,te),localStorage.removeItem(ee),m(),!0):!1}function w(y,T){if(!a&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),T.preventDefault(),!1;if(a&&!h(T,s+"-original-name"))return T.preventDefault(),!1;const U=document.getElementById(s+"-backup-list-form");if(U){const A=U.elements.namedItem("btn-edit"),J=localStorage.getItem(s.toLowerCase());if(!A||!J)return!1;const ee=localStorage.getItem(A.value);if(!ee)return!1;a&&localStorage.setItem(d,J),localStorage.setItem(s,ee),l(2,o="Backup restored"),l(3,t="info"),m()}return!0}function g(y){const T=document.getElementById(s+"-new-backup-name");if(!T||!h(y,s+"-new-backup-name")){y.preventDefault();return}const U=localStorage.getItem(s.toLowerCase());U&&(localStorage.setItem(T.value.toLowerCase(),U),l(2,o="Backup created"),l(3,t="info"),m(),T.value="")}function B(y){y.preventDefault();let T=document.getElementById(`${s}-upload-backup`);if(!T||!T.files||!T.files[0]){l(2,o="Please select a file"),l(3,t="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const U=new FileReader;U.onload=A=>{if(!U.result){l(2,o="Upload failed"),l(3,t="error");return}let J=U.result,ee=JSON.parse(J);if(console.log(Ye(ee)),!Ye(ee)){l(2,o="Invalid backup file."),l(3,t="error");return}localStorage.setItem(s,J),l(2,o="Backup restored"),l(3,t="info");let te=document.getElementById(`${s}-upload-backup`);te&&(te.value=""),m()},U.readAsText(T.files[0])}function S(y,T){const U=document.getElementById("rename-modal");if(!U)return;const A=document.getElementById(s+"-rename-backup");A&&(A.placeholder=T);const J=document.getElementById(s+"-rename-hidden");J&&(J.value=T,U.showModal(),y.preventDefault())}function R(y,T){const U=document.getElementById(s+"-rename-backup");U&&(U.placeholder="")}function D(y,T){return y.preventDefault(),window.confirm("Delete backup '"+T+"'?")?(l(2,o="Backup deleted"),l(3,t="error"),localStorage.removeItem(T),m(),!0):!1}const C=y=>h(y,s+"-new-backup-name"),O=(y,T)=>D(T,y.name),I=(y,T)=>mt(y.name),$=(y,T)=>S(T,y.name),F=y=>B(y);function Z(){a=this.checked,l(5,a)}function G(){d=this.value,l(4,d)}const x=y=>h(y,s+"-original-name"),Y=y=>h(y,s+"-rename-backup");function z(){c=this.value,l(6,c)}function P(y){o=y,l(2,o)}function M(y){o=y,l(2,o)}return n.$$set=y=>{"key"in y&&l(0,s=y.key)},[s,r,o,t,d,a,c,h,f,w,g,B,S,R,D,C,O,I,$,F,Z,G,x,Y,z,P,M]}class Ot extends Ee{constructor(e){super(),Ie(this,e,Ct,Ut,Be,{key:0},null,[-1,-1])}}function at(n){let e,l,s,r;const o=[Lt,Vt],t=[];function d(a,c){return a[2]!=null?0:1}return e=d(n),l=t[e]=o[e](n),{c(){l.c(),s=ue()},l(a){l.l(a),s=ue()},m(a,c){t[e].m(a,c),N(a,s,c),r=!0},p(a,c){let k=e;e=d(a),e===k?t[e].p(a,c):(De(),Q(t[k],1,1,()=>{t[k]=null}),Te(),l=t[e],l?l.p(a,c):(l=t[e]=o[e](a),l.c()),X(l,1),l.m(s.parentNode,s))},i(a){r||(X(l),r=!0)},o(a){Q(l),r=!1},d(a){t[e].d(a),a&&u(s)}}}function Vt(n){let e,l,s;function r(t){n[9](t)}let o={};return n[1]!==void 0&&(o.message=n[1]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[1])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};!l&&d&2&&(l=!0,a.message=t[1],Ue(()=>l=!1)),e.$set(a)},i(t){s||(X(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function Lt(n){let e,l,s;function r(t){n[8](t)}let o={alert_style:n[2]};return n[1]!==void 0&&(o.message=n[1]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[1])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};d&4&&(a.alert_style=t[2]),!l&&d&2&&(l=!0,a.message=t[1],Ue(()=>l=!1)),e.$set(a)},i(t){s||(X(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function Rt(n){let e,l,s,r,o,t,d,a,c,k,m,h,f,w,g,B,S,R,D,C,O=n[1]&&at(n);return{c(){e=b("legend"),l=W("Options"),s=V(),r=b("div"),o=b("div"),t=b("button"),d=W("Find new definitions"),a=V(),c=b("div"),k=b("button"),m=W("Refresh all defintions"),h=V(),f=b("div"),w=b("button"),g=W("Clear words"),B=V(),O&&O.c(),S=ue(),this.h()},l(I){e=v(I,"LEGEND",{class:!0});var $=E(e);l=j($,"Options"),$.forEach(u),s=L(I),r=v(I,"DIV",{class:!0});var F=E(r);o=v(F,"DIV",{class:!0});var Z=E(o);t=v(Z,"BUTTON",{type:!0,class:!0});var G=E(t);d=j(G,"Find new definitions"),G.forEach(u),Z.forEach(u),a=L(F),c=v(F,"DIV",{class:!0});var x=E(c);k=v(x,"BUTTON",{type:!0,class:!0});var Y=E(k);m=j(Y,"Refresh all defintions"),Y.forEach(u),x.forEach(u),h=L(F),f=v(F,"DIV",{class:!0});var z=E(f);w=v(z,"BUTTON",{type:!0,class:!0});var P=E(w);g=j(P,"Clear words"),P.forEach(u),z.forEach(u),F.forEach(u),B=L(I),O&&O.l(I),S=ue(),this.h()},h(){i(e,"class","options-group-title"),i(t,"type","button"),i(t,"class","btn btn-primary"),i(o,"class","option-item svelte-vbnsn7"),i(k,"type","button"),i(k,"class","btn btn-primary"),i(c,"class","option-item svelte-vbnsn7"),i(w,"type","button"),i(w,"class","btn btn-danger"),i(f,"class","option-item svelte-vbnsn7"),i(r,"class","options-group")},m(I,$){N(I,e,$),p(e,l),N(I,s,$),N(I,r,$),p(r,o),p(o,t),p(t,d),p(r,a),p(r,c),p(c,k),p(k,m),p(r,h),p(r,f),p(f,w),p(w,g),N(I,B,$),O&&O.m(I,$),N(I,S,$),R=!0,D||(C=[K(t,"click",n[6]),K(k,"click",n[7]),K(w,"click",n[3])],D=!0)},p(I,[$]){I[1]?O?(O.p(I,$),$&2&&X(O,1)):(O=at(I),O.c(),X(O,1),O.m(S.parentNode,S)):O&&(De(),Q(O,1,1,()=>{O=null}),Te())},i(I){R||(X(O),R=!0)},o(I){Q(O),R=!1},d(I){I&&u(e),I&&u(s),I&&u(r),I&&u(B),O&&O.d(I),I&&u(S),D=!1,_e(C)}}}function Pt(n,e,l){let{key:s}=e,r,o;function t(){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const f=bt(s);Pe(f)}function d(f){function w(D,C){return D.dict_def=C.dict_def,!0}if(!f)return;let g=$e(f);if(!window.confirm(`Refresh all ${g.words.length} words?

This will overwrite existing definitions.`))return;let B=0,S=[],R=g.words.map(async D=>{try{const C=await Ze.default.lookup(D.word);C?(D.dict_def=C,B+=1):S.push(D.word)}finally{D.cache=xe(D),et(g,D,w)}});Promise.allSettled(R).then(()=>{S.length==0?(l(1,r=`Updated ${B} words`),l(2,o="info")):(l(2,o="error"),l(1,r=`Failed to update ${S.length} words.  ${S}`)),Pe(g)})}function a(f){function w(D,C){return D.dict_def=C.dict_def,!0}if(!f||!window.confirm("Lookup definitions for words without definitions?"))return;let g=$e(f),B=0,S=[],R=g.words.filter(D=>D.dict_def===void 0).map(async D=>{try{const C=await Ze.default.lookup(D.word);C?(D.dict_def=C,B+=1):S.push(D.word)}finally{D.cache=xe(D),et(g,D,w)}});Promise.allSettled(R).then(()=>{S.length==0?(l(1,r=`Updated ${B} words`),l(2,o="info")):(l(2,o="error"),l(1,r=`Failed to update ${S.length} words.<br>${S}`)),Pe(g)})}const c=()=>a(s),k=()=>d(s);function m(f){r=f,l(1,r)}function h(f){r=f,l(1,r)}return n.$$set=f=>{"key"in f&&l(0,s=f.key)},[s,r,o,t,d,a,c,k,m,h]}class $t extends Ee{constructor(e){super(),Ie(this,e,Pt,Rt,Be,{key:0})}}function Mt(n){let e,l,s,r,o,t,d,a,c,k;return e=new vt({props:{current:"options"}}),d=new Ot({props:{key:"words"}}),c=new $t({props:{key:"words"}}),{c(){se(e.$$.fragment),l=V(),s=b("h1"),r=W("Options"),o=V(),t=b("div"),se(d.$$.fragment),a=V(),se(c.$$.fragment),this.h()},l(m){ne(e.$$.fragment,m),l=L(m),s=v(m,"H1",{});var h=E(s);r=j(h,"Options"),h.forEach(u),o=L(m),t=v(m,"DIV",{class:!0});var f=E(t);ne(d.$$.fragment,f),a=L(f),ne(c.$$.fragment,f),f.forEach(u),this.h()},h(){i(t,"class","options-page")},m(m,h){re(e,m,h),N(m,l,h),N(m,s,h),p(s,r),N(m,o,h),N(m,t,h),re(d,t,null),p(t,a),re(c,t,null),k=!0},p:qe,i(m){k||(X(e.$$.fragment,m),X(d.$$.fragment,m),X(c.$$.fragment,m),k=!0)},o(m){Q(e.$$.fragment,m),Q(d.$$.fragment,m),Q(c.$$.fragment,m),k=!1},d(m){oe(e,m),m&&u(l),m&&u(s),m&&u(o),m&&u(t),oe(d),oe(c)}}}class jt extends Ee{constructor(e){super(),Ie(this,e,null,Mt,Be,{})}}export{jt as default};
