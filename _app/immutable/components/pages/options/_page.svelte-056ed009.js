import{S as $e,i as Ae,s as Me,C as ct,k as m,a as P,q as W,l as b,m as k,c as $,r as q,h as i,n as o,b as N,G as f,M as X,_ as ft,D as dt,E as _t,F as pt,u as Le,f as Z,t as se,P as Ce,w as _e,e as ye,x as pe,y as me,X as mt,g as Fe,d as ze,z as be,R as it,L as Pe,$ as bt,J as We,K as qe,O as He,B as Se}from"../../../chunks/index-e56e8534.js";import{q as vt,f as ht,u as kt,d as Be,v as Ue,x as yt,l as ke,y as gt,A as xe,o as et,n as tt}from"../../../chunks/words-9970dd32.js";import{A as je}from"../../../chunks/Alert-392b790a.js";import{N as wt}from"../../../chunks/Nav-34f01931.js";function Et(n){let e,l,s,r,a,t,c,u,d,v,p,g,_;const E=n[9].default,U=ct(E,n,n[8],null);return{c(){e=m("dialog"),l=m("div"),s=m("form"),U&&U.c(),r=P(),a=m("div"),t=m("button"),c=W(n[0]),u=P(),d=m("button"),v=W(n[1]),this.h()},l(D){e=b(D,"DIALOG",{class:!0,id:!0});var y=k(e);l=b(y,"DIV",{class:!0});var V=k(l);s=b(V,"FORM",{method:!0});var j=k(s);U&&U.l(j),r=$(j),a=b(j,"DIV",{class:!0});var M=k(a);t=b(M,"BUTTON",{type:!0,class:!0});var R=k(t);c=q(R,n[0]),R.forEach(i),u=$(M),d=b(M,"BUTTON",{type:!0,class:!0});var C=k(d);v=q(C,n[1]),C.forEach(i),M.forEach(i),j.forEach(i),V.forEach(i),y.forEach(i),this.h()},h(){o(t,"type","submit"),o(t,"class","btn btn-primary"),o(d,"type","button"),o(d,"class","btn btn-secondary"),o(a,"class","dialog-controls svelte-1d7zp56"),o(s,"method","dialog"),o(l,"class","modal-wrapper svelte-1d7zp56"),o(e,"class","modal svelte-1d7zp56"),o(e,"id",n[2])},m(D,y){N(D,e,y),f(e,l),f(l,s),U&&U.m(s,null),f(s,r),f(s,a),f(a,t),f(t,c),f(a,u),f(a,d),f(d,v),p=!0,g||(_=[X(d,"click",n[3]),X(s,"submit",n[5]),X(e,"click",ft(n[3])),X(e,"close",n[4])],g=!0)},p(D,[y]){U&&U.p&&(!p||y&256)&&dt(U,E,D,D[8],p?pt(E,D[8],y,null):_t(D[8]),null),(!p||y&1)&&Le(c,D[0]),(!p||y&2)&&Le(v,D[1]),(!p||y&4)&&o(e,"id",D[2])},i(D){p||(Z(U,D),p=!0)},o(D){se(U,D),p=!1},d(D){D&&i(e),U&&U.d(D),g=!1,Ce(_)}}}function lt(n){n.querySelectorAll("form").forEach(e=>{e.reset()})}function It(n,e,l){let{$$slots:s={},$$scope:r}=e,{onClose:a=()=>{}}=e,{onSubmit:t}=e,{submit_text:c="Submit"}=e,{cancel_text:u="Cancel"}=e,{id:d}=e;function v(_){const E=document.getElementById(d);E&&(a(E,_),lt(E),E.close())}function p(_){const E=document.getElementById(d);E&&(a(E,_),lt(E))}function g(_){const E=document.getElementById(d);if(!E){_.preventDefault();return}t(E,_)?E.close():_.preventDefault()}return n.$$set=_=>{"onClose"in _&&l(6,a=_.onClose),"onSubmit"in _&&l(7,t=_.onSubmit),"submit_text"in _&&l(0,c=_.submit_text),"cancel_text"in _&&l(1,u=_.cancel_text),"id"in _&&l(2,d=_.id),"$$scope"in _&&l(8,r=_.$$scope)},[c,u,d,v,p,g,a,t,r,s]}class st extends $e{constructor(e){super(),Ae(this,e,It,Et,Me,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function rt(n,e,l){const s=n.slice();return s[30]=e[l],s}function Bt(n){let e,l;return{c(){e=m("button"),l=m("i"),this.h()},l(s){e=b(s,"BUTTON",{type:!0,class:!0});var r=k(e);l=b(r,"I",{class:!0}),k(l).forEach(i),r.forEach(i),this.h()},h(){o(l,"class","fa-solid fa-xmark"),o(e,"type","button"),o(e,"class","remove-btn svelte-7yw5c2"),e.disabled=!0},m(s,r){N(s,e,r),f(e,l)},p:Se,d(s){s&&i(e)}}}function Tt(n){let e,l,s,r;function a(...t){return n[17](n[30],...t)}return{c(){e=m("button"),l=m("i"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,class:!0,title:!0});var c=k(e);l=b(c,"I",{class:!0}),k(l).forEach(i),c.forEach(i),this.h()},h(){o(l,"class","fa-solid fa-xmark"),o(e,"type","button"),o(e,"class","remove-btn svelte-7yw5c2"),o(e,"title","Delete backup")},m(t,c){N(t,e,c),f(e,l),s||(r=X(e,"click",a),s=!0)},p(t,c){n=t},d(t){t&&i(e),s=!1,r()}}}function Dt(n){let e,l,s,r;return{c(){e=m("button"),l=m("i"),s=P(),r=m("input"),this.h()},l(a){e=b(a,"BUTTON",{type:!0,class:!0});var t=k(e);l=b(t,"I",{class:!0}),k(l).forEach(i),t.forEach(i),s=$(a),r=b(a,"INPUT",{type:!0,class:!0}),this.h()},h(){o(l,"class","fa-solid fa-pen"),o(e,"type","button"),e.disabled=!0,o(e,"class","btn rename-btn svelte-7yw5c2"),o(r,"type","radio"),o(r,"class","btn-edit-current svelte-7yw5c2"),r.disabled=!0},m(a,t){N(a,e,t),f(e,l),N(a,s,t),N(a,r,t)},p:Se,d(a){a&&i(e),a&&i(s),a&&i(r)}}}function Nt(n){let e,l,s,r,a,t,c,u,d,v;function p(...g){return n[19](n[30],...g)}return{c(){e=m("button"),l=m("i"),a=P(),t=m("input"),this.h()},l(g){e=b(g,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var _=k(e);l=b(_,"I",{class:!0}),k(l).forEach(i),_.forEach(i),a=$(g),t=b(g,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){o(l,"class","fa-solid fa-pen"),o(e,"type","submit"),o(e,"id",s=n[0]+"-backup-rename-"+n[30].name),o(e,"title","Rename"),e.value=r=n[30].name,o(e,"class","btn rename-btn svelte-7yw5c2"),o(t,"type","radio"),o(t,"name","btn-edit"),o(t,"class","btn-edit svelte-7yw5c2"),o(t,"title","Select this backup for restore"),o(t,"id",c=n[0]+"-restore-"+n[30].key),t.required=!0,t.value=u=n[30].name},m(g,_){N(g,e,_),f(e,l),N(g,a,_),N(g,t,_),d||(v=X(e,"click",p),d=!0)},p(g,_){n=g,_[0]&3&&s!==(s=n[0]+"-backup-rename-"+n[30].name)&&o(e,"id",s),_[0]&2&&r!==(r=n[30].name)&&(e.value=r),_[0]&3&&c!==(c=n[0]+"-restore-"+n[30].key)&&o(t,"id",c),_[0]&2&&u!==(u=n[30].name)&&(t.value=u)},d(g){g&&i(e),g&&i(a),g&&i(t),d=!1,v()}}}function Ut(n){let e=n[30].name+"",l;return{c(){l=W(e)},l(s){l=q(s,e)},m(s,r){N(s,l,r)},p(s,r){r[0]&2&&e!==(e=s[30].name+"")&&Le(l,e)},d(s){s&&i(l)}}}function Ct(n){let e,l;return{c(){e=m("div"),l=W("Current"),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=k(e);l=q(r,"Current"),r.forEach(i),this.h()},h(){o(e,"class","backup-current svelte-7yw5c2")},m(s,r){N(s,e,r),f(e,l)},p:Se,d(s){s&&i(e)}}}function nt(n,e){let l,s,r,a,t,c,u,d,v,p,g,_,E,U=e[30].size+"",D,y,V,j;function M(O,H){return O[30].name!=O[0]?Tt:Bt}let R=M(e),C=R(e);function L(...O){return e[18](e[30],...O)}function J(O,H){return O[30].name!=O[0]?Nt:Dt}let te=J(e),A=te(e);function ne(O,H){return O[30].name==O[0]?Ct:Ut}let x=ne(e),Y=x(e);return{key:n,first:null,c(){l=m("div"),s=m("div"),C.c(),r=P(),a=m("button"),t=m("i"),c=P(),A.c(),u=P(),d=m("div"),v=m("label"),Y.c(),g=P(),_=m("div"),E=W("("),D=W(U),y=W(" words)"),this.h()},l(O){l=b(O,"DIV",{class:!0});var H=k(l);s=b(H,"DIV",{class:!0});var Q=k(s);C.l(Q),r=$(Q),a=b(Q,"BUTTON",{type:!0,class:!0,title:!0});var B=k(a);t=b(B,"I",{class:!0}),k(t).forEach(i),B.forEach(i),c=$(Q),A.l(Q),u=$(Q),d=b(Q,"DIV",{class:!0});var w=k(d);v=b(w,"LABEL",{class:!0,for:!0,title:!0});var T=k(v);Y.l(T),T.forEach(i),g=$(w),_=b(w,"DIV",{class:!0});var F=k(_);E=q(F,"("),D=q(F,U),y=q(F," words)"),F.forEach(i),w.forEach(i),Q.forEach(i),H.forEach(i),this.h()},h(){o(t,"class","fa-solid fa-download"),o(a,"type","button"),o(a,"class","btn download-btn svelte-7yw5c2"),o(a,"title","Download backup"),o(v,"class","backup-name-label svelte-7yw5c2"),o(v,"for",p=e[0]+"-restore-"+e[30].key),o(v,"title","Select backup for restore"),o(_,"class","backup-length svelte-7yw5c2"),o(d,"class","backup-name svelte-7yw5c2"),o(s,"class","backup-content svelte-7yw5c2"),o(l,"class","backup-entry svelte-7yw5c2"),this.first=l},m(O,H){N(O,l,H),f(l,s),C.m(s,null),f(s,r),f(s,a),f(a,t),f(s,c),A.m(s,null),f(s,u),f(s,d),f(d,v),Y.m(v,null),f(d,g),f(d,_),f(_,E),f(_,D),f(_,y),V||(j=X(a,"click",L),V=!0)},p(O,H){e=O,R===(R=M(e))&&C?C.p(e,H):(C.d(1),C=R(e),C&&(C.c(),C.m(s,r))),te===(te=J(e))&&A?A.p(e,H):(A.d(1),A=te(e),A&&(A.c(),A.m(s,u))),x===(x=ne(e))&&Y?Y.p(e,H):(Y.d(1),Y=x(e),Y&&(Y.c(),Y.m(v,null))),H[0]&3&&p!==(p=e[0]+"-restore-"+e[30].key)&&o(v,"for",p),H[0]&2&&U!==(U=e[30].size+"")&&Le(D,U)},d(O){O&&i(l),C.d(),A.d(),Y.d(),V=!1,j()}}}function ot(n){let e,l,s,r,a;return{c(){e=W(`Backup as:
                `),l=m("input"),this.h()},l(t){e=q(t,`Backup as:
                `),l=b(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){o(l,"id",s=n[0]+"-original-name"),o(l,"name","save-as"),o(l,"type","text"),o(l,"class","original form-control svelte-7yw5c2"),o(l,"placeholder","new name"),l.required=!0},m(t,c){N(t,e,c),N(t,l,c),Pe(l,n[4]),r||(a=[X(l,"input",n[22]),X(l,"blur",n[23])],r=!0)},p(t,c){c[0]&1&&s!==(s=t[0]+"-original-name")&&o(l,"id",s),c[0]&16&&l.value!==t[4]&&Pe(l,t[4])},d(t){t&&i(e),t&&i(l),r=!1,Ce(a)}}}function St(n){let e,l,s,r,a,t,c,u,d,v,p,g,_=n[5]&&ot(n);return{c(){e=m("div"),l=m("div"),s=m("input"),a=P(),t=m("label"),c=W("Backup current list"),d=P(),v=m("div"),_&&_.c(),this.h()},l(E){e=b(E,"DIV",{class:!0});var U=k(e);l=b(U,"DIV",{class:!0});var D=k(l);s=b(D,"INPUT",{type:!0,id:!0}),a=$(D),t=b(D,"LABEL",{for:!0});var y=k(t);c=q(y,"Backup current list"),y.forEach(i),D.forEach(i),d=$(U),v=b(U,"DIV",{});var V=k(v);_&&_.l(V),V.forEach(i),U.forEach(i),this.h()},h(){o(s,"type","checkbox"),o(s,"id",r=n[0]+"-rename-current"),o(t,"for",u=n[0]+"-rename-current"),o(l,"class","dialog-title svelte-7yw5c2"),o(e,"class","original-name svelte-7yw5c2")},m(E,U){N(E,e,U),f(e,l),f(l,s),s.checked=n[5],f(l,a),f(l,t),f(t,c),f(e,d),f(e,v),_&&_.m(v,null),p||(g=X(s,"change",n[21]),p=!0)},p(E,U){U[0]&1&&r!==(r=E[0]+"-rename-current")&&o(s,"id",r),U[0]&32&&(s.checked=E[5]),U[0]&1&&u!==(u=E[0]+"-rename-current")&&o(t,"for",u),E[5]?_?_.p(E,U):(_=ot(E),_.c(),_.m(v,null)):_&&(_.d(1),_=null)},d(E){E&&i(e),_&&_.d(),p=!1,g()}}}function Ot(n){let e,l,s,r,a,t,c;return{c(){e=m("input"),s=P(),r=m("input"),this.h()},l(u){e=b(u,"INPUT",{type:!0,id:!0,class:!0}),s=$(u),r=b(u,"INPUT",{type:!0,id:!0}),this.h()},h(){o(e,"type","text"),o(e,"id",l=n[0]+"-rename-backup"),o(e,"class","form-control"),o(r,"type","hidden"),o(r,"id",a=n[0]+"-rename-hidden")},m(u,d){N(u,e,d),Pe(e,n[6]),N(u,s,d),N(u,r,d),t||(c=[X(e,"blur",n[24]),X(e,"input",n[25])],t=!0)},p(u,d){d[0]&1&&l!==(l=u[0]+"-rename-backup")&&o(e,"id",l),d[0]&64&&e.value!==u[6]&&Pe(e,u[6]),d[0]&1&&a!==(a=u[0]+"-rename-hidden")&&o(r,"id",a)},d(u){u&&i(e),u&&i(s),u&&i(r),t=!1,Ce(c)}}}function at(n){let e,l,s,r;const a=[Rt,Vt],t=[];function c(u,d){return u[3]!=null?0:1}return e=c(n),l=t[e]=a[e](n),{c(){l.c(),s=ye()},l(u){l.l(u),s=ye()},m(u,d){t[e].m(u,d),N(u,s,d),r=!0},p(u,d){let v=e;e=c(u),e===v?t[e].p(u,d):(Fe(),se(t[v],1,1,()=>{t[v]=null}),ze(),l=t[e],l?l.p(u,d):(l=t[e]=a[e](u),l.c()),Z(l,1),l.m(s.parentNode,s))},i(u){r||(Z(l),r=!0)},o(u){se(l),r=!1},d(u){t[e].d(u),u&&i(s)}}}function Vt(n){let e,l,s;function r(t){n[27](t)}let a={};return n[2]!==void 0&&(a.message=n[2]),e=new je({props:a}),We.push(()=>qe(e,"message",r,n[2])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};!l&&c[0]&4&&(l=!0,u.message=t[2],He(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Rt(n){let e,l,s;function r(t){n[26](t)}let a={alert_style:n[3]};return n[2]!==void 0&&(a.message=n[2]),e=new je({props:a}),We.push(()=>qe(e,"message",r,n[2])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};c[0]&8&&(u.alert_style=t[3]),!l&&c[0]&4&&(l=!0,u.message=t[2],He(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Lt(n){let e,l,s,r,a,t,c,u,d,v,p,g,_,E,U,D,y,V,j,M,R,C=[],L=new Map,J,te,A,ne,x,Y,O,H,Q,B,w,T,F,le,ae,re,ue,ge,ie,oe,z,I,G,ce,ve,de,we=n[1];const Te=h=>h[30].key;for(let h=0;h<we.length;h+=1){let S=rt(n,we,h),ee=Te(S);L.set(ee,C[h]=nt(ee,S))}ie=new st({props:{id:"backup-modal",onSubmit:n[9],submit_text:"Restore",$$slots:{default:[St]},$$scope:{ctx:n}}}),z=new st({props:{id:"rename-modal",onSubmit:n[8],onClose:n[14],submit_text:"Rename",$$slots:{default:[Ot]},$$scope:{ctx:n}}});let K=n[2]&&at(n);return{c(){e=m("h2"),l=W("Backups"),s=P(),r=m("div"),a=m("div"),t=m("h3"),c=W("Create Backup"),u=P(),d=m("form"),v=m("div"),p=m("input"),_=P(),E=m("button"),U=W("Create Backup"),D=P(),y=m("div"),V=m("h3"),j=W("Restore Backup"),M=P(),R=m("form");for(let h=0;h<C.length;h+=1)C[h].c();J=P(),te=m("div"),A=m("button"),ne=W("Restore"),Y=P(),O=m("div"),H=m("h3"),Q=W("Upload Backup"),B=P(),w=m("form"),T=m("div"),F=m("input"),ae=P(),re=m("button"),ue=W("Restore Backup"),ge=P(),_e(ie.$$.fragment),oe=P(),_e(z.$$.fragment),I=P(),K&&K.c(),G=ye(),this.h()},l(h){e=b(h,"H2",{class:!0,id:!0});var S=k(e);l=q(S,"Backups"),S.forEach(i),s=$(h),r=b(h,"DIV",{class:!0});var ee=k(r);a=b(ee,"DIV",{class:!0});var fe=k(a);t=b(fe,"H3",{class:!0,id:!0});var De=k(t);c=q(De,"Create Backup"),De.forEach(i),u=$(fe),d=b(fe,"FORM",{class:!0});var Ee=k(d);v=b(Ee,"DIV",{class:!0});var he=k(v);p=b(he,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),_=$(he),E=b(he,"BUTTON",{class:!0});var Ne=k(E);U=q(Ne,"Create Backup"),Ne.forEach(i),he.forEach(i),Ee.forEach(i),fe.forEach(i),D=$(ee),y=b(ee,"DIV",{class:!0});var Ie=k(y);V=b(Ie,"H3",{class:!0,id:!0});var Je=k(V);j=q(Je,"Restore Backup"),Je.forEach(i),M=$(Ie),R=b(Ie,"FORM",{id:!0,class:!0});var Oe=k(R);for(let Ge=0;Ge<C.length;Ge+=1)C[Ge].l(Oe);J=$(Oe),te=b(Oe,"DIV",{class:!0});var Ke=k(te);A=b(Ke,"BUTTON",{type:!0,class:!0,name:!0});var Xe=k(A);ne=q(Xe,"Restore"),Xe.forEach(i),Ke.forEach(i),Oe.forEach(i),Ie.forEach(i),Y=$(ee),O=b(ee,"DIV",{class:!0});var Ve=k(O);H=b(Ve,"H3",{class:!0,id:!0});var Qe=k(H);Q=q(Qe,"Upload Backup"),Qe.forEach(i),B=$(Ve),w=b(Ve,"FORM",{class:!0});var Ye=k(w);T=b(Ye,"DIV",{class:!0});var Re=k(T);F=b(Re,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),ae=$(Re),re=b(Re,"BUTTON",{class:!0});var Ze=k(re);ue=q(Ze,"Restore Backup"),Ze.forEach(i),Re.forEach(i),Ye.forEach(i),Ve.forEach(i),ee.forEach(i),ge=$(h),pe(ie.$$.fragment,h),oe=$(h),pe(z.$$.fragment,h),I=$(h),K&&K.l(h),G=ye(),this.h()},h(){o(e,"class","options-group-title"),o(e,"id","create-backup"),o(t,"class","options-group-title svelte-7yw5c2"),o(t,"id","create-backup"),o(p,"id",g=n[0]+"-new-backup-name"),o(p,"type","text"),o(p,"class","new-backup-name form-control svelte-7yw5c2"),o(p,"placeholder","new name"),o(E,"class","create-backup btn btn-primary svelte-7yw5c2"),o(v,"class","new-backup svelte-7yw5c2"),o(d,"class","svelte-7yw5c2"),o(a,"class","backup-group svelte-7yw5c2"),o(V,"class","options-group-title svelte-7yw5c2"),o(V,"id","backups"),o(A,"type","button"),o(A,"class","btn btn-danger"),o(A,"name","backups_action"),A.value="restore",o(te,"class","backup-submit svelte-7yw5c2"),o(R,"id",x=n[0]+"-backup-list-form"),o(R,"class","svelte-7yw5c2"),o(y,"class","backup-group svelte-7yw5c2"),o(H,"class","options-group-title svelte-7yw5c2"),o(H,"id","upload-backup"),o(F,"id",le=n[0]+"-upload-backup"),o(F,"class","upload-backup form-control svelte-7yw5c2"),o(F,"type","file"),o(F,"accept",".json,application/json"),o(re,"class","btn btn-danger upload-backup-btn svelte-7yw5c2"),o(T,"class","new-backup svelte-7yw5c2"),o(w,"class","svelte-7yw5c2"),o(O,"class","backup-group svelte-7yw5c2"),o(r,"class","options-group")},m(h,S){N(h,e,S),f(e,l),N(h,s,S),N(h,r,S),f(r,a),f(a,t),f(t,c),f(a,u),f(a,d),f(d,v),f(v,p),f(v,_),f(v,E),f(E,U),f(r,D),f(r,y),f(y,V),f(V,j),f(y,M),f(y,R);for(let ee=0;ee<C.length;ee+=1)C[ee].m(R,null);f(R,J),f(R,te),f(te,A),f(A,ne),f(r,Y),f(r,O),f(O,H),f(H,Q),f(O,B),f(O,w),f(w,T),f(T,F),f(T,ae),f(T,re),f(re,ue),N(h,ge,S),me(ie,h,S),N(h,oe,S),me(z,h,S),N(h,I,S),K&&K.m(h,S),N(h,G,S),ce=!0,ve||(de=[X(p,"blur",n[16]),X(d,"submit",n[10]),X(A,"click",n[12]),X(w,"submit",n[20])],ve=!0)},p(h,S){(!ce||S[0]&1&&g!==(g=h[0]+"-new-backup-name"))&&o(p,"id",g),S[0]&40963&&(we=h[1],C=mt(C,S,Te,1,h,we,L,R,bt,nt,J,rt)),(!ce||S[0]&1&&x!==(x=h[0]+"-backup-list-form"))&&o(R,"id",x),(!ce||S[0]&1&&le!==(le=h[0]+"-upload-backup"))&&o(F,"id",le);const ee={};S[0]&49|S[1]&4&&(ee.$$scope={dirty:S,ctx:h}),ie.$set(ee);const fe={};S[0]&65|S[1]&4&&(fe.$$scope={dirty:S,ctx:h}),z.$set(fe),h[2]?K?(K.p(h,S),S[0]&4&&Z(K,1)):(K=at(h),K.c(),Z(K,1),K.m(G.parentNode,G)):K&&(Fe(),se(K,1,1,()=>{K=null}),ze())},i(h){ce||(Z(ie.$$.fragment,h),Z(z.$$.fragment,h),Z(K),ce=!0)},o(h){se(ie.$$.fragment,h),se(z.$$.fragment,h),se(K),ce=!1},d(h){h&&i(e),h&&i(s),h&&i(r);for(let S=0;S<C.length;S+=1)C[S].d();h&&i(ge),be(ie,h),h&&i(oe),be(z,h),h&&i(I),K&&K.d(h),h&&i(G),ve=!1,Ce(de)}}}function Pt(n,e,l){const s=it();let{key:r}=e,{backups:a}=e,t,c,u="",d=!0,v="";function p(){s("refreshlist",!0)}function g(B,w){const T=document.getElementById(w);if(!T)return!1;if(T.value!=""){T.setCustomValidity("");{const F=localStorage.getItem(T.value.toLowerCase());if(T.value.toLowerCase()==r.toLowerCase())T.setCustomValidity(`'${r}' is a reserved name`);else if(F!=null)T.setCustomValidity("Backup exists");else return!0}}return!1}function _(B,w){if(!g(w,r+"-rename-backup"))return console.log("invalid name:"+v),w.preventDefault(),!1;const T=document.getElementById(r+"-rename-hidden"),F=v.toLowerCase(),le=localStorage.getItem(F);if(!T||!T.value||!v||le!=null)return!1;const ae=T.value.toLowerCase(),re=localStorage.getItem(ae);return re?(localStorage.setItem(F,re),localStorage.removeItem(ae),p(),!0):!1}function E(B,w){if(!d&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),w.preventDefault(),!1;if(d&&!g(w,r+"-original-name"))return w.preventDefault(),!1;const T=document.getElementById(r+"-backup-list-form");if(T){const F=T.elements.namedItem("btn-edit"),le=localStorage.getItem(r.toLowerCase());if(!F||!le)return!1;const ae=localStorage.getItem(F.value);if(!ae)return!1;d&&localStorage.setItem(u,le),localStorage.setItem(r,ae),l(2,t="Backup restored"),l(3,c="info"),p()}return!0}function U(B){const w=document.getElementById(r+"-new-backup-name");if(!w||!g(B,r+"-new-backup-name")){B.preventDefault();return}const T=localStorage.getItem(r.toLowerCase());T&&(localStorage.setItem(w.value.toLowerCase(),T),l(2,t="Backup created"),l(3,c="info"),p(),w.value="")}function D(B){B.preventDefault();let w=document.getElementById(`${r}-upload-backup`);if(!w||!w.files||!w.files[0]){l(2,t="Please select a file"),l(3,c="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const T=new FileReader;T.onload=F=>{if(!T.result){l(2,t="Upload failed"),l(3,c="error");return}let le=T.result,ae=JSON.parse(le);if(!vt(ae)){l(2,t="Invalid backup file."),l(3,c="error");return}localStorage.setItem(r,le),l(2,t="Backup restored"),l(3,c="info");let re=document.getElementById(`${r}-upload-backup`);re&&(re.value=""),p()},T.readAsText(w.files[0])}function y(B){const w=document.getElementById("backup-modal");if(!w)return;const T=document.getElementById(`${r}-backup-list-form`);T&&T.querySelectorAll('input[name="btn-edit"]:checked').length===0||(w.showModal(),B.preventDefault())}function V(B,w){const T=document.getElementById("rename-modal");if(!T)return;const F=document.getElementById(r+"-rename-backup");F&&(F.placeholder=w);const le=document.getElementById(r+"-rename-hidden");le&&(le.value=w,T.showModal(),B.preventDefault())}function j(B,w){const T=document.getElementById(r+"-rename-backup");T&&(T.placeholder="")}function M(B,w){return B.preventDefault(),window.confirm("Delete backup '"+w+"'?")?(l(2,t="Backup deleted"),l(3,c="error"),localStorage.removeItem(w),p(),!0):!1}const R=B=>g(B,r+"-new-backup-name"),C=(B,w)=>M(w,B.name),L=(B,w)=>ht(B.name),J=(B,w)=>V(w,B.name),te=B=>D(B);function A(){d=this.checked,l(5,d)}function ne(){u=this.value,l(4,u)}const x=B=>g(B,r+"-original-name"),Y=B=>g(B,r+"-rename-backup");function O(){v=this.value,l(6,v)}function H(B){t=B,l(2,t)}function Q(B){t=B,l(2,t)}return n.$$set=B=>{"key"in B&&l(0,r=B.key),"backups"in B&&l(1,a=B.backups)},[r,a,t,c,u,d,v,g,_,E,U,D,y,V,j,M,R,C,L,J,te,A,ne,x,Y,O,H,Q]}class $t extends $e{constructor(e){super(),Ae(this,e,Pt,Lt,Me,{key:0,backups:1},null,[-1,-1])}}function At(n){let e;return{c(){e=W("off")},l(l){e=q(l,"off")},m(l,s){N(l,e,s)},d(l){l&&i(e)}}}function Mt(n){let e;return{c(){e=W("on")},l(l){e=q(l,"on")},m(l,s){N(l,e,s)},d(l){l&&i(e)}}}function Ft(n){let e,l,s,r;return{c(){e=m("button"),l=W("Turn on"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var t=k(e);l=q(t,"Turn on"),t.forEach(i),this.h()},h(){o(e,"class","btn btn-primary svelte-vgvckc")},m(a,t){N(a,e,t),f(e,l),s||(r=X(e,"click",n[8]),s=!0)},p:Se,d(a){a&&i(e),s=!1,r()}}}function zt(n){let e,l,s,r;return{c(){e=m("button"),l=W("Turn off"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var t=k(e);l=q(t,"Turn off"),t.forEach(i),this.h()},h(){o(e,"class","btn btn-primary svelte-vgvckc")},m(a,t){N(a,e,t),f(e,l),s||(r=X(e,"click",n[9]),s=!0)},p:Se,d(a){a&&i(e),s=!1,r()}}}function ut(n){let e,l,s,r;const a=[qt,Wt],t=[];function c(u,d){return u[2]!=null?0:1}return e=c(n),l=t[e]=a[e](n),{c(){l.c(),s=ye()},l(u){l.l(u),s=ye()},m(u,d){t[e].m(u,d),N(u,s,d),r=!0},p(u,d){let v=e;e=c(u),e===v?t[e].p(u,d):(Fe(),se(t[v],1,1,()=>{t[v]=null}),ze(),l=t[e],l?l.p(u,d):(l=t[e]=a[e](u),l.c()),Z(l,1),l.m(s.parentNode,s))},i(u){r||(Z(l),r=!0)},o(u){se(l),r=!1},d(u){t[e].d(u),u&&i(s)}}}function Wt(n){let e,l,s;function r(t){n[12](t)}let a={};return n[1]!==void 0&&(a.message=n[1]),e=new je({props:a}),We.push(()=>qe(e,"message",r,n[1])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};!l&&c&2&&(l=!0,u.message=t[1],He(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function qt(n){let e,l,s;function r(t){n[11](t)}let a={alert_style:n[2]};return n[1]!==void 0&&(a.message=n[1]),e=new je({props:a}),We.push(()=>qe(e,"message",r,n[1])),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};c&4&&(u.alert_style=t[2]),!l&&c&2&&(l=!0,u.message=t[1],He(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Ht(n){let e,l,s,r,a,t,c,u,d,v,p,g,_,E,U,D,y,V,j,M,R,C,L,J,te,A,ne,x,Y,O,H,Q,B,w,T,F,le;function ae(I,G){return I[0]===!0?Mt:At}let re=ae(n),ue=re(n);function ge(I,G){return I[0]?zt:Ft}let ie=ge(n),oe=ie(n),z=n[1]&&ut(n);return{c(){e=m("h2"),l=W("Words"),s=P(),r=m("div"),a=m("div"),t=m("div"),c=m("button"),u=W("Find new definitions"),d=P(),v=m("button"),p=W("Refresh all defintions"),g=P(),_=m("button"),E=W("Clear definitions"),U=P(),D=m("div"),y=m("button"),V=W("Restore defaults"),j=P(),M=m("button"),R=W("Clear words"),C=P(),L=m("h2"),J=W("Dictionary Lookup"),te=P(),A=m("div"),ne=m("div"),x=m("p"),Y=W("Automatic dictionary lookup is: "),O=m("b"),ue.c(),H=P(),Q=m("div"),oe.c(),B=P(),z&&z.c(),w=ye(),this.h()},l(I){e=b(I,"H2",{class:!0,id:!0});var G=k(e);l=q(G,"Words"),G.forEach(i),s=$(I),r=b(I,"DIV",{class:!0});var ce=k(r);a=b(ce,"DIV",{class:!0});var ve=k(a);t=b(ve,"DIV",{class:!0});var de=k(t);c=b(de,"BUTTON",{type:!0,class:!0});var we=k(c);u=q(we,"Find new definitions"),we.forEach(i),d=$(de),v=b(de,"BUTTON",{type:!0,class:!0});var Te=k(v);p=q(Te,"Refresh all defintions"),Te.forEach(i),g=$(de),_=b(de,"BUTTON",{type:!0,class:!0});var K=k(_);E=q(K,"Clear definitions"),K.forEach(i),de.forEach(i),U=$(ve),D=b(ve,"DIV",{class:!0});var h=k(D);y=b(h,"BUTTON",{type:!0,class:!0});var S=k(y);V=q(S,"Restore defaults"),S.forEach(i),j=$(h),M=b(h,"BUTTON",{type:!0,class:!0});var ee=k(M);R=q(ee,"Clear words"),ee.forEach(i),h.forEach(i),ve.forEach(i),ce.forEach(i),C=$(I),L=b(I,"H2",{class:!0,id:!0});var fe=k(L);J=q(fe,"Dictionary Lookup"),fe.forEach(i),te=$(I),A=b(I,"DIV",{class:!0});var De=k(A);ne=b(De,"DIV",{});var Ee=k(ne);x=b(Ee,"P",{class:!0});var he=k(x);Y=q(he,"Automatic dictionary lookup is: "),O=b(he,"B",{});var Ne=k(O);ue.l(Ne),Ne.forEach(i),he.forEach(i),H=$(Ee),Q=b(Ee,"DIV",{class:!0});var Ie=k(Q);oe.l(Ie),Ie.forEach(i),Ee.forEach(i),De.forEach(i),B=$(I),z&&z.l(I),w=ye(),this.h()},h(){o(e,"class","options-group-title"),o(e,"id","options"),o(c,"type","button"),o(c,"class","btn btn-primary svelte-vgvckc"),o(v,"type","button"),o(v,"class","btn btn-primary svelte-vgvckc"),o(_,"type","button"),o(_,"class","btn btn-primary svelte-vgvckc"),o(t,"class","options-subgroup svelte-vgvckc"),o(y,"type","button"),o(y,"class","btn btn-danger svelte-vgvckc"),o(M,"type","button"),o(M,"class","btn btn-danger svelte-vgvckc"),o(D,"class","option-section options-subgroup svelte-vgvckc"),o(a,"class","option-section options-group-cols svelte-vgvckc"),o(r,"class","options-group"),o(L,"class","options-group-title"),o(L,"id","dictionary-lookup"),o(x,"class","svelte-vgvckc"),o(Q,"class","toggle-autodefs svelte-vgvckc"),o(A,"class","options-group svelte-vgvckc")},m(I,G){N(I,e,G),f(e,l),N(I,s,G),N(I,r,G),f(r,a),f(a,t),f(t,c),f(c,u),f(t,d),f(t,v),f(v,p),f(t,g),f(t,_),f(_,E),f(a,U),f(a,D),f(D,y),f(y,V),f(D,j),f(D,M),f(M,R),N(I,C,G),N(I,L,G),f(L,J),N(I,te,G),N(I,A,G),f(A,ne),f(ne,x),f(x,Y),f(x,O),ue.m(O,null),f(ne,H),f(ne,Q),oe.m(Q,null),N(I,B,G),z&&z.m(I,G),N(I,w,G),T=!0,F||(le=[X(c,"click",n[7]),X(v,"click",n[6]),X(_,"click",n[5]),X(y,"click",n[3]),X(M,"click",n[4])],F=!0)},p(I,[G]){re!==(re=ae(I))&&(ue.d(1),ue=re(I),ue&&(ue.c(),ue.m(O,null))),ie===(ie=ge(I))&&oe?oe.p(I,G):(oe.d(1),oe=ie(I),oe&&(oe.c(),oe.m(Q,null))),I[1]?z?(z.p(I,G),G&2&&Z(z,1)):(z=ut(I),z.c(),Z(z,1),z.m(w.parentNode,w)):z&&(Fe(),se(z,1,1,()=>{z=null}),ze())},i(I){T||(Z(z),T=!0)},o(I){se(z),T=!1},d(I){I&&i(e),I&&i(s),I&&i(r),I&&i(C),I&&i(L),I&&i(te),I&&i(A),ue.d(),oe.d(),I&&i(B),z&&z.d(I),I&&i(w),F=!1,Ce(le)}}}function jt(n,e,l){const s=it();let{key:r}=e,{autodefs:a}=e,t,c;function u(y){if(!window.confirm("This will replace the current word list with the defaults.  Continue?"))return;const V=kt(r);Be(V),Ue(y),s("refreshlist",!0)}function d(y){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const V=yt(r);Be(V),Ue(y),s("refreshlist",!0)}function v(y){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;let V=ke(r);gt(V),Be(V),Ue(y)}function p(y){function V(L,J){return L.dict_def=J.dict_def,!0}if(!r)return;let j=ke(r);if(!window.confirm(`Refresh all ${j.words.length} words?

This will overwrite existing definitions.`))return;let M=0,R=[],C=j.words.map(async L=>{try{const J=await xe.default.lookup(L.word);J?(L.dict_def=J,M+=1):R.push(L.word)}finally{L.cache=et(L),tt(j,L,V)}});Promise.allSettled(C).then(()=>{R.length==0?(l(1,t=`Updated ${M} words`),l(2,c="info")):(l(2,c="error"),l(1,t=`Failed to update ${R.length} words.  ${R}`)),Be(j),Ue(y)})}function g(y){function V(L,J){return L.dict_def=J.dict_def,!0}if(!r||!window.confirm("Lookup definitions for words without definitions?"))return;let j=ke(r),M=0,R=[],C=j.words.filter(L=>L.dict_def===void 0).map(async L=>{try{const J=await xe.default.lookup(L.word);J?(L.dict_def=J,M+=1):R.push(L.word)}finally{L.cache=et(L),tt(j,L,V)}});Promise.allSettled(C).then(()=>{R.length==0?(l(1,t=`Updated ${M} words`),l(2,c="info")):(l(2,c="error"),l(1,t=`Failed to update ${R.length} words.<br>${R}`)),Be(j),Ue(y)})}function _(){let y=ke(r);y.auto_defs=!0,Be(y),s("refreshlist",!0)}function E(){let y=ke(r);y.auto_defs=!1,Be(y),s("refreshlist",!0)}function U(y){t=y,l(1,t)}function D(y){t=y,l(1,t)}return n.$$set=y=>{"key"in y&&l(10,r=y.key),"autodefs"in y&&l(0,a=y.autodefs)},[a,t,c,u,d,v,p,g,_,E,r,U,D]}class Gt extends $e{constructor(e){super(),Ae(this,e,jt,Ht,Me,{key:10,autodefs:0})}}function Jt(n){let e,l,s,r,a,t,c,u,d,v;return e=new wt({props:{current:"options"}}),c=new $t({props:{backups:n[1],key:"words"}}),c.$on("refreshlist",n[2]),d=new Gt({props:{key:"words",autodefs:n[0].auto_defs}}),d.$on("refreshlist",n[2]),{c(){_e(e.$$.fragment),l=P(),s=m("h1"),r=W("Options"),a=P(),t=m("div"),_e(c.$$.fragment),u=P(),_e(d.$$.fragment),this.h()},l(p){pe(e.$$.fragment,p),l=$(p),s=b(p,"H1",{});var g=k(s);r=q(g,"Options"),g.forEach(i),a=$(p),t=b(p,"DIV",{class:!0});var _=k(t);pe(c.$$.fragment,_),u=$(_),pe(d.$$.fragment,_),_.forEach(i),this.h()},h(){o(t,"class","options-page")},m(p,g){me(e,p,g),N(p,l,g),N(p,s,g),f(s,r),N(p,a,g),N(p,t,g),me(c,t,null),f(t,u),me(d,t,null),v=!0},p(p,[g]){const _={};g&2&&(_.backups=p[1]),c.$set(_);const E={};g&1&&(E.autodefs=p[0].auto_defs),d.$set(E)},i(p){v||(Z(e.$$.fragment,p),Z(c.$$.fragment,p),Z(d.$$.fragment,p),v=!0)},o(p){se(e.$$.fragment,p),se(c.$$.fragment,p),se(d.$$.fragment,p),v=!1},d(p){be(e,p),p&&i(l),p&&i(s),p&&i(a),p&&i(t),be(c),be(d)}}}function Kt(n,e,l){let s=ke("words"),r=[];function a(){l(1,r=[]);for(let c=0;c<localStorage.length;c++){const u=localStorage.key(c);if(u)if(u!=="words"){let d=ke(u);r.push({name:u,key:c,size:d.words.length})}else r.unshift({name:u,key:c,size:s.words.length})}}a();function t(c){l(0,s=ke("words")),a()}return[s,r,t]}class xt extends $e{constructor(e){super(),Ae(this,e,Kt,Jt,Me,{})}}export{xt as default};
