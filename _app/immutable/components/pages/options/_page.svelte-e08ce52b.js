import{S as ye,i as Ee,s as Ie,C as rt,k as v,a as R,q as W,l as h,m as E,c as L,r as z,h as f,n as u,b as j,G as m,M as G,_ as ot,D as at,E as ut,F as it,u as ge,f as H,t as J,P as _e,w as ne,e as ie,x as re,y as oe,X as ft,g as Be,d as Te,z as ae,L as we,$ as ct,J as De,K as je,O as Ne,B as Se}from"../../../chunks/index-e56e8534.js";import{l as Re,q as Ke,e as dt,u as _t,d as Ve,A as Xe,o as Qe,n as Ye}from"../../../chunks/words-d2f0d323.js";import{A as Ue}from"../../../chunks/Alert-392b790a.js";import{N as mt}from"../../../chunks/Nav-6346eff5.js";function pt(n){let e,l,s,r,o,t,c,a,d,k,p,b,i;const I=n[9].default,g=rt(I,n,n[8],null);return{c(){e=v("dialog"),l=v("div"),s=v("form"),g&&g.c(),r=R(),o=v("div"),t=v("button"),c=W(n[0]),a=R(),d=v("button"),k=W(n[1]),this.h()},l(w){e=h(w,"DIALOG",{class:!0,id:!0});var D=E(e);l=h(D,"DIV",{class:!0});var V=E(l);s=h(V,"FORM",{method:!0});var O=E(s);g&&g.l(O),r=L(O),o=h(O,"DIV",{class:!0});var B=E(o);t=h(B,"BUTTON",{type:!0,class:!0});var N=E(t);c=z(N,n[0]),N.forEach(f),a=L(B),d=h(B,"BUTTON",{type:!0,class:!0});var U=E(d);k=z(U,n[1]),U.forEach(f),B.forEach(f),O.forEach(f),V.forEach(f),D.forEach(f),this.h()},h(){u(t,"type","submit"),u(t,"class","btn btn-primary"),u(d,"type","button"),u(d,"class","btn btn-secondary"),u(o,"class","dialog-controls svelte-153o6vl"),u(s,"method","dialog"),u(l,"class","modal-wrapper svelte-153o6vl"),u(e,"class","modal svelte-153o6vl"),u(e,"id",n[2])},m(w,D){j(w,e,D),m(e,l),m(l,s),g&&g.m(s,null),m(s,r),m(s,o),m(o,t),m(t,c),m(o,a),m(o,d),m(d,k),p=!0,b||(i=[G(d,"click",n[3]),G(s,"submit",n[5]),G(e,"click",ot(n[3])),G(e,"close",n[4])],b=!0)},p(w,[D]){g&&g.p&&(!p||D&256)&&at(g,I,w,w[8],p?it(I,w[8],D,null):ut(w[8]),null),(!p||D&1)&&ge(c,w[0]),(!p||D&2)&&ge(k,w[1]),(!p||D&4)&&u(e,"id",w[2])},i(w){p||(H(g,w),p=!0)},o(w){J(g,w),p=!1},d(w){w&&f(e),g&&g.d(w),b=!1,_e(i)}}}function Ze(n){n.querySelectorAll("form").forEach(e=>{e.reset()})}function bt(n,e,l){let{$$slots:s={},$$scope:r}=e,{onClose:o=()=>{}}=e,{onSubmit:t}=e,{submit_text:c="Submit"}=e,{cancel_text:a="Cancel"}=e,{id:d}=e;function k(i){const I=document.getElementById(d);I&&(o(I,i),Ze(I),I.close())}function p(i){const I=document.getElementById(d);I&&(o(I,i),Ze(I))}function b(i){const I=document.getElementById(d);if(!I){i.preventDefault();return}t(I,i)?I.close():i.preventDefault()}return n.$$set=i=>{"onClose"in i&&l(6,o=i.onClose),"onSubmit"in i&&l(7,t=i.onSubmit),"submit_text"in i&&l(0,c=i.submit_text),"cancel_text"in i&&l(1,a=i.cancel_text),"id"in i&&l(2,d=i.id),"$$scope"in i&&l(8,r=i.$$scope)},[c,a,d,k,p,b,o,t,r,s]}class xe extends ye{constructor(e){super(),Ee(this,e,bt,pt,Ie,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function et(n,e,l){const s=n.slice();return s[30]=e[l],s}function vt(n){let e,l;return{c(){e=v("button"),l=v("i"),this.h()},l(s){e=h(s,"BUTTON",{type:!0,class:!0});var r=E(e);l=h(r,"I",{class:!0}),E(l).forEach(f),r.forEach(f),this.h()},h(){u(l,"class","fa-solid fa-xmark"),u(e,"type","button"),u(e,"class","remove-btn svelte-1ngf0jw"),e.disabled=!0},m(s,r){j(s,e,r),m(e,l)},p:Se,d(s){s&&f(e)}}}function ht(n){let e,l,s,r;function o(...t){return n[17](n[30],...t)}return{c(){e=v("button"),l=v("i"),this.h()},l(t){e=h(t,"BUTTON",{type:!0,class:!0,title:!0});var c=E(e);l=h(c,"I",{class:!0}),E(l).forEach(f),c.forEach(f),this.h()},h(){u(l,"class","fa-solid fa-xmark"),u(e,"type","button"),u(e,"class","remove-btn svelte-1ngf0jw"),u(e,"title","Delete backup")},m(t,c){j(t,e,c),m(e,l),s||(r=G(e,"click",o),s=!0)},p(t,c){n=t},d(t){t&&f(e),s=!1,r()}}}function kt(n){let e,l,s,r;return{c(){e=v("button"),l=v("i"),s=R(),r=v("input"),this.h()},l(o){e=h(o,"BUTTON",{type:!0,class:!0});var t=E(e);l=h(t,"I",{class:!0}),E(l).forEach(f),t.forEach(f),s=L(o),r=h(o,"INPUT",{type:!0,class:!0}),this.h()},h(){u(l,"class","fa-solid fa-pen"),u(e,"type","button"),e.disabled=!0,u(e,"class","btn rename-btn svelte-1ngf0jw"),u(r,"type","radio"),u(r,"class","btn-edit-current svelte-1ngf0jw"),r.disabled=!0},m(o,t){j(o,e,t),m(e,l),j(o,s,t),j(o,r,t)},p:Se,d(o){o&&f(e),o&&f(s),o&&f(r)}}}function gt(n){let e,l,s,r,o,t,c,a,d,k;function p(...b){return n[19](n[30],...b)}return{c(){e=v("button"),l=v("i"),o=R(),t=v("input"),this.h()},l(b){e=h(b,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var i=E(e);l=h(i,"I",{class:!0}),E(l).forEach(f),i.forEach(f),o=L(b),t=h(b,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){u(l,"class","fa-solid fa-pen"),u(e,"type","submit"),u(e,"id",s=n[0]+"-backup-rename-"+n[30].name),u(e,"title","Rename"),e.value=r=n[30].name,u(e,"class","btn rename-btn svelte-1ngf0jw"),u(t,"type","radio"),u(t,"name","btn-edit"),u(t,"class","btn-edit svelte-1ngf0jw"),u(t,"title","Select this backup for restore"),u(t,"id",c=n[0]+"-restore-"+n[30].key),t.required=!0,t.value=a=n[30].name},m(b,i){j(b,e,i),m(e,l),j(b,o,i),j(b,t,i),d||(k=G(e,"click",p),d=!0)},p(b,i){n=b,i[0]&3&&s!==(s=n[0]+"-backup-rename-"+n[30].name)&&u(e,"id",s),i[0]&2&&r!==(r=n[30].name)&&(e.value=r),i[0]&3&&c!==(c=n[0]+"-restore-"+n[30].key)&&u(t,"id",c),i[0]&2&&a!==(a=n[30].name)&&(t.value=a)},d(b){b&&f(e),b&&f(o),b&&f(t),d=!1,k()}}}function wt(n){let e=n[30].name+"",l;return{c(){l=W(e)},l(s){l=z(s,e)},m(s,r){j(s,l,r)},p(s,r){r[0]&2&&e!==(e=s[30].name+"")&&ge(l,e)},d(s){s&&f(l)}}}function yt(n){let e,l;return{c(){e=v("div"),l=W("Current"),this.h()},l(s){e=h(s,"DIV",{class:!0});var r=E(e);l=z(r,"Current"),r.forEach(f),this.h()},h(){u(e,"class","backup-current svelte-1ngf0jw")},m(s,r){j(s,e,r),m(e,l)},p:Se,d(s){s&&f(e)}}}function tt(n,e){let l,s,r,o,t,c,a,d,k,p,b,i,I,g=e[30].size+"",w,D,V,O;function B($,M){return $[30].name!=$[0]?ht:vt}let N=B(e),U=N(e);function te(...$){return e[18](e[30],...$)}function X($,M){return $[30].name!=$[0]?gt:kt}let Q=X(e),P=Q(e);function se($,M){return $[30].name==$[0]?yt:wt}let Y=se(e),F=Y(e);return{key:n,first:null,c(){l=v("div"),s=v("div"),U.c(),r=R(),o=v("button"),t=v("i"),c=R(),P.c(),a=R(),d=v("div"),k=v("label"),F.c(),b=R(),i=v("div"),I=W("("),w=W(g),D=W(" words)"),this.h()},l($){l=h($,"DIV",{class:!0});var M=E(l);s=h(M,"DIV",{class:!0});var K=E(s);U.l(K),r=L(K),o=h(K,"BUTTON",{type:!0,class:!0,title:!0});var y=E(o);t=h(y,"I",{class:!0}),E(t).forEach(f),y.forEach(f),c=L(K),P.l(K),a=L(K),d=h(K,"DIV",{class:!0});var T=E(d);k=h(T,"LABEL",{class:!0,for:!0,title:!0});var C=E(k);F.l(C),C.forEach(f),b=L(T),i=h(T,"DIV",{class:!0});var A=E(i);I=z(A,"("),w=z(A,g),D=z(A," words)"),A.forEach(f),T.forEach(f),K.forEach(f),M.forEach(f),this.h()},h(){u(t,"class","fa-solid fa-download"),u(o,"type","button"),u(o,"class","btn download-btn svelte-1ngf0jw"),u(o,"title","Download backup"),u(k,"class","backup-name-label svelte-1ngf0jw"),u(k,"for",p=e[0]+"-restore-"+e[30].key),u(k,"title","Select backup for restore"),u(i,"class","backup-length svelte-1ngf0jw"),u(d,"class","backup-name svelte-1ngf0jw"),u(s,"class","backup-content svelte-1ngf0jw"),u(l,"class","backup-entry svelte-1ngf0jw"),this.first=l},m($,M){j($,l,M),m(l,s),U.m(s,null),m(s,r),m(s,o),m(o,t),m(s,c),P.m(s,null),m(s,a),m(s,d),m(d,k),F.m(k,null),m(d,b),m(d,i),m(i,I),m(i,w),m(i,D),V||(O=G(o,"click",te),V=!0)},p($,M){e=$,N===(N=B(e))&&U?U.p(e,M):(U.d(1),U=N(e),U&&(U.c(),U.m(s,r))),Q===(Q=X(e))&&P?P.p(e,M):(P.d(1),P=Q(e),P&&(P.c(),P.m(s,a))),Y===(Y=se(e))&&F?F.p(e,M):(F.d(1),F=Y(e),F&&(F.c(),F.m(k,null))),M[0]&3&&p!==(p=e[0]+"-restore-"+e[30].key)&&u(k,"for",p),M[0]&2&&g!==(g=e[30].size+"")&&ge(w,g)},d($){$&&f(l),U.d(),P.d(),F.d(),V=!1,O()}}}function lt(n){let e,l,s,r,o;return{c(){e=W(`Backup as:
                `),l=v("input"),this.h()},l(t){e=z(t,`Backup as:
                `),l=h(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){u(l,"id",s=n[0]+"-original-name"),u(l,"name","save-as"),u(l,"type","text"),u(l,"class","original form-control svelte-1ngf0jw"),u(l,"placeholder","new name"),l.required=!0},m(t,c){j(t,e,c),j(t,l,c),we(l,n[4]),r||(o=[G(l,"input",n[22]),G(l,"blur",n[23])],r=!0)},p(t,c){c[0]&1&&s!==(s=t[0]+"-original-name")&&u(l,"id",s),c[0]&16&&l.value!==t[4]&&we(l,t[4])},d(t){t&&f(e),t&&f(l),r=!1,_e(o)}}}function Et(n){let e,l,s,r,o,t,c,a,d,k,p,b,i=n[5]&&lt(n);return{c(){e=v("div"),l=v("div"),s=v("input"),o=R(),t=v("label"),c=W("Backup current list"),d=R(),k=v("div"),i&&i.c(),this.h()},l(I){e=h(I,"DIV",{class:!0});var g=E(e);l=h(g,"DIV",{class:!0});var w=E(l);s=h(w,"INPUT",{type:!0,id:!0}),o=L(w),t=h(w,"LABEL",{for:!0});var D=E(t);c=z(D,"Backup current list"),D.forEach(f),w.forEach(f),d=L(g),k=h(g,"DIV",{});var V=E(k);i&&i.l(V),V.forEach(f),g.forEach(f),this.h()},h(){u(s,"type","checkbox"),u(s,"id",r=n[0]+"-rename-current"),u(t,"for",a=n[0]+"-rename-current"),u(l,"class","dialog-title svelte-1ngf0jw"),u(e,"class","original-name svelte-1ngf0jw")},m(I,g){j(I,e,g),m(e,l),m(l,s),s.checked=n[5],m(l,o),m(l,t),m(t,c),m(e,d),m(e,k),i&&i.m(k,null),p||(b=G(s,"change",n[21]),p=!0)},p(I,g){g[0]&1&&r!==(r=I[0]+"-rename-current")&&u(s,"id",r),g[0]&32&&(s.checked=I[5]),g[0]&1&&a!==(a=I[0]+"-rename-current")&&u(t,"for",a),I[5]?i?i.p(I,g):(i=lt(I),i.c(),i.m(k,null)):i&&(i.d(1),i=null)},d(I){I&&f(e),i&&i.d(),p=!1,b()}}}function It(n){let e,l,s,r,o,t,c;return{c(){e=v("input"),s=R(),r=v("input"),this.h()},l(a){e=h(a,"INPUT",{type:!0,id:!0,class:!0}),s=L(a),r=h(a,"INPUT",{type:!0,id:!0}),this.h()},h(){u(e,"type","text"),u(e,"id",l=n[0]+"-rename-backup"),u(e,"class","form-control"),u(r,"type","hidden"),u(r,"id",o=n[0]+"-rename-hidden")},m(a,d){j(a,e,d),we(e,n[6]),j(a,s,d),j(a,r,d),t||(c=[G(e,"blur",n[24]),G(e,"input",n[25])],t=!0)},p(a,d){d[0]&1&&l!==(l=a[0]+"-rename-backup")&&u(e,"id",l),d[0]&64&&e.value!==a[6]&&we(e,a[6]),d[0]&1&&o!==(o=a[0]+"-rename-hidden")&&u(r,"id",o)},d(a){a&&f(e),a&&f(s),a&&f(r),t=!1,_e(c)}}}function st(n){let e,l,s,r;const o=[Tt,Bt],t=[];function c(a,d){return a[3]!=null?0:1}return e=c(n),l=t[e]=o[e](n),{c(){l.c(),s=ie()},l(a){l.l(a),s=ie()},m(a,d){t[e].m(a,d),j(a,s,d),r=!0},p(a,d){let k=e;e=c(a),e===k?t[e].p(a,d):(Be(),J(t[k],1,1,()=>{t[k]=null}),Te(),l=t[e],l?l.p(a,d):(l=t[e]=o[e](a),l.c()),H(l,1),l.m(s.parentNode,s))},i(a){r||(H(l),r=!0)},o(a){J(l),r=!1},d(a){t[e].d(a),a&&f(s)}}}function Bt(n){let e,l,s;function r(t){n[27](t)}let o={};return n[2]!==void 0&&(o.message=n[2]),e=new Ue({props:o}),De.push(()=>je(e,"message",r,n[2])),{c(){ne(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};!l&&c[0]&4&&(l=!0,a.message=t[2],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Tt(n){let e,l,s;function r(t){n[26](t)}let o={alert_style:n[3]};return n[2]!==void 0&&(o.message=n[2]),e=new Ue({props:o}),De.push(()=>je(e,"message",r,n[2])),{c(){ne(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};c[0]&8&&(a.alert_style=t[3]),!l&&c[0]&4&&(l=!0,a.message=t[2],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Dt(n){let e,l,s,r,o,t,c,a,d,k,p,b,i,I,g,w,D,V=[],O=new Map,B,N,U,te,X,Q,P,se,Y,F,$,M,K,y,T,C,A,Z,ee,x,me,ue,pe,ce,fe,Ce,Le,be=n[1];const $e=_=>_[30].key;for(let _=0;_<be.length;_+=1){let S=et(n,be,_),le=$e(S);O.set(le,V[_]=tt(le,S))}x=new xe({props:{id:"backup-modal",onSubmit:n[9],submit_text:"Restore",$$slots:{default:[Et]},$$scope:{ctx:n}}}),ue=new xe({props:{id:"rename-modal",onSubmit:n[8],onClose:n[14],submit_text:"Rename",$$slots:{default:[It]},$$scope:{ctx:n}}});let q=n[2]&&st(n);return{c(){e=v("h2"),l=W("Create Backup"),s=R(),r=v("div"),o=v("form"),t=v("div"),c=v("input"),d=R(),k=v("button"),p=W("Create Backup"),b=R(),i=v("h2"),I=W("Backups"),g=R(),w=v("div"),D=v("form");for(let _=0;_<V.length;_+=1)V[_].c();B=R(),N=v("div"),U=v("button"),te=W("Restore"),Q=R(),P=v("h2"),se=W("Upload Backup"),Y=R(),F=v("div"),$=v("form"),M=v("div"),K=v("div"),y=v("input"),C=R(),A=v("button"),Z=W("Restore Backup"),ee=R(),ne(x.$$.fragment),me=R(),ne(ue.$$.fragment),pe=R(),q&&q.c(),ce=ie(),this.h()},l(_){e=h(_,"H2",{class:!0});var S=E(e);l=z(S,"Create Backup"),S.forEach(f),s=L(_),r=h(_,"DIV",{class:!0});var le=E(r);o=h(le,"FORM",{});var de=E(o);t=h(de,"DIV",{class:!0});var ve=E(t);c=h(ve,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),d=L(ve),k=h(ve,"BUTTON",{class:!0});var Pe=E(k);p=z(Pe,"Create Backup"),Pe.forEach(f),ve.forEach(f),de.forEach(f),le.forEach(f),b=L(_),i=h(_,"H2",{class:!0});var Me=E(i);I=z(Me,"Backups"),Me.forEach(f),g=L(_),w=h(_,"DIV",{class:!0});var Ae=E(w);D=h(Ae,"FORM",{id:!0});var he=E(D);for(let Oe=0;Oe<V.length;Oe+=1)V[Oe].l(he);B=L(he),N=h(he,"DIV",{class:!0});var Fe=E(N);U=h(Fe,"BUTTON",{type:!0,class:!0,name:!0});var qe=E(U);te=z(qe,"Restore"),qe.forEach(f),Fe.forEach(f),he.forEach(f),Ae.forEach(f),Q=L(_),P=h(_,"H2",{class:!0});var We=E(P);se=z(We,"Upload Backup"),We.forEach(f),Y=L(_),F=h(_,"DIV",{class:!0});var ze=E(F);$=h(ze,"FORM",{});var He=E($);M=h(He,"DIV",{class:!0});var ke=E(M);K=h(ke,"DIV",{class:!0});var Ge=E(K);y=h(Ge,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),Ge.forEach(f),C=L(ke),A=h(ke,"BUTTON",{class:!0});var Je=E(A);Z=z(Je,"Restore Backup"),Je.forEach(f),ke.forEach(f),He.forEach(f),ze.forEach(f),ee=L(_),re(x.$$.fragment,_),me=L(_),re(ue.$$.fragment,_),pe=L(_),q&&q.l(_),ce=ie(),this.h()},h(){u(e,"class","options-group-title"),u(c,"id",a=n[0]+"-new-backup-name"),u(c,"type","text"),u(c,"class","new-backup-name form-control svelte-1ngf0jw"),u(c,"placeholder","new name"),u(k,"class","create-backup btn btn-primary svelte-1ngf0jw"),u(t,"class","new-backup svelte-1ngf0jw"),u(r,"class","options-group"),u(i,"class","options-group-title"),u(U,"type","button"),u(U,"class","btn btn-danger"),u(U,"name","backups_action"),U.value="restore",u(N,"class","backup-submit svelte-1ngf0jw"),u(D,"id",X=n[0]+"-backup-list-form"),u(w,"class","options-group"),u(P,"class","options-group-title"),u(y,"id",T=n[0]+"-upload-backup"),u(y,"class","upload-backup form-control svelte-1ngf0jw"),u(y,"type","file"),u(y,"accept",".json,application/json"),u(K,"class","upload-backup-container"),u(A,"class","btn btn-danger upload-backup-btn svelte-1ngf0jw"),u(M,"class","new-backup svelte-1ngf0jw"),u(F,"class","options-group")},m(_,S){j(_,e,S),m(e,l),j(_,s,S),j(_,r,S),m(r,o),m(o,t),m(t,c),m(t,d),m(t,k),m(k,p),j(_,b,S),j(_,i,S),m(i,I),j(_,g,S),j(_,w,S),m(w,D);for(let le=0;le<V.length;le+=1)V[le].m(D,null);m(D,B),m(D,N),m(N,U),m(U,te),j(_,Q,S),j(_,P,S),m(P,se),j(_,Y,S),j(_,F,S),m(F,$),m($,M),m(M,K),m(K,y),m(M,C),m(M,A),m(A,Z),j(_,ee,S),oe(x,_,S),j(_,me,S),oe(ue,_,S),j(_,pe,S),q&&q.m(_,S),j(_,ce,S),fe=!0,Ce||(Le=[G(c,"blur",n[16]),G(o,"submit",n[10]),G(U,"click",n[12]),G($,"submit",n[20])],Ce=!0)},p(_,S){(!fe||S[0]&1&&a!==(a=_[0]+"-new-backup-name"))&&u(c,"id",a),S[0]&40963&&(be=_[1],V=ft(V,S,$e,1,_,be,O,D,ct,tt,B,et)),(!fe||S[0]&1&&X!==(X=_[0]+"-backup-list-form"))&&u(D,"id",X),(!fe||S[0]&1&&T!==(T=_[0]+"-upload-backup"))&&u(y,"id",T);const le={};S[0]&49|S[1]&4&&(le.$$scope={dirty:S,ctx:_}),x.$set(le);const de={};S[0]&65|S[1]&4&&(de.$$scope={dirty:S,ctx:_}),ue.$set(de),_[2]?q?(q.p(_,S),S[0]&4&&H(q,1)):(q=st(_),q.c(),H(q,1),q.m(ce.parentNode,ce)):q&&(Be(),J(q,1,1,()=>{q=null}),Te())},i(_){fe||(H(x.$$.fragment,_),H(ue.$$.fragment,_),H(q),fe=!0)},o(_){J(x.$$.fragment,_),J(ue.$$.fragment,_),J(q),fe=!1},d(_){_&&f(e),_&&f(s),_&&f(r),_&&f(b),_&&f(i),_&&f(g),_&&f(w);for(let S=0;S<V.length;S+=1)V[S].d();_&&f(Q),_&&f(P),_&&f(Y),_&&f(F),_&&f(ee),ae(x,_),_&&f(me),ae(ue,_),_&&f(pe),q&&q.d(_),_&&f(ce),Ce=!1,_e(Le)}}}function jt(n,e,l){let{key:s}=e,r=[],o,t,c="",a=!0,d="";function k(){for(let y=0;y<localStorage.length;y++){const T=localStorage.key(y);if(T){let C=Re(T);r.push({name:T,key:y,size:C.words.length})}}}k();function p(){l(1,r=[]),k(),l(1,r)}function b(y,T){const C=document.getElementById(T);if(!C)return!1;if(C.value!=""){C.setCustomValidity("");{const A=localStorage.getItem(C.value.toLowerCase());if(C.value.toLowerCase()==s.toLowerCase())C.setCustomValidity(`'${s}' is a reserved name`);else if(A!=null)C.setCustomValidity("Backup exists");else return!0}}return!1}function i(y,T){if(!b(T,s+"-rename-backup"))return console.log("invalid name:"+d),T.preventDefault(),!1;const C=document.getElementById(s+"-rename-hidden"),A=d.toLowerCase(),Z=localStorage.getItem(A);if(!C||!C.value||!d||Z!=null)return!1;const ee=C.value.toLowerCase(),x=localStorage.getItem(ee);return x?(localStorage.setItem(A,x),localStorage.removeItem(ee),p(),!0):!1}function I(y,T){if(!a&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),T.preventDefault(),!1;if(a&&!b(T,s+"-original-name"))return T.preventDefault(),!1;const C=document.getElementById(s+"-backup-list-form");if(C){const A=C.elements.namedItem("btn-edit"),Z=localStorage.getItem(s.toLowerCase());if(!A||!Z)return!1;const ee=localStorage.getItem(A.value);if(!ee)return!1;a&&localStorage.setItem(c,Z),localStorage.setItem(s,ee),l(2,o="Backup restored"),l(3,t="info"),p()}return!0}function g(y){const T=document.getElementById(s+"-new-backup-name");if(!T||!b(y,s+"-new-backup-name")){y.preventDefault();return}const C=localStorage.getItem(s.toLowerCase());C&&(localStorage.setItem(T.value.toLowerCase(),C),l(2,o="Backup created"),l(3,t="info"),p(),T.value="")}function w(y){y.preventDefault();let T=document.getElementById(`${s}-upload-backup`);if(!T||!T.files||!T.files[0]){l(2,o="Please select a file"),l(3,t="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const C=new FileReader;C.onload=A=>{if(!C.result){l(2,o="Upload failed"),l(3,t="error");return}let Z=C.result,ee=JSON.parse(Z);if(console.log(Ke(ee)),!Ke(ee)){l(2,o="Invalid backup file."),l(3,t="error");return}localStorage.setItem(s,Z),l(2,o="Backup restored"),l(3,t="info");let x=document.getElementById(`${s}-upload-backup`);x&&(x.value=""),p()},C.readAsText(T.files[0])}function D(y){const T=document.getElementById("backup-modal");if(!T)return;const C=document.getElementById(`${s}-backup-list-form`);C&&C.querySelectorAll('input[name="btn-edit"]:checked').length===0||(T.showModal(),y.preventDefault())}function V(y,T){const C=document.getElementById("rename-modal");if(!C)return;const A=document.getElementById(s+"-rename-backup");A&&(A.placeholder=T);const Z=document.getElementById(s+"-rename-hidden");Z&&(Z.value=T,C.showModal(),y.preventDefault())}function O(y,T){const C=document.getElementById(s+"-rename-backup");C&&(C.placeholder="")}function B(y,T){return y.preventDefault(),window.confirm("Delete backup '"+T+"'?")?(l(2,o="Backup deleted"),l(3,t="error"),localStorage.removeItem(T),p(),!0):!1}const N=y=>b(y,s+"-new-backup-name"),U=(y,T)=>B(T,y.name),te=(y,T)=>dt(y.name),X=(y,T)=>V(T,y.name),Q=y=>w(y);function P(){a=this.checked,l(5,a)}function se(){c=this.value,l(4,c)}const Y=y=>b(y,s+"-original-name"),F=y=>b(y,s+"-rename-backup");function $(){d=this.value,l(6,d)}function M(y){o=y,l(2,o)}function K(y){o=y,l(2,o)}return n.$$set=y=>{"key"in y&&l(0,s=y.key)},[s,r,o,t,c,a,d,b,i,I,g,w,D,V,O,B,N,U,te,X,Q,P,se,Y,F,$,M,K]}class Nt extends ye{constructor(e){super(),Ee(this,e,jt,Dt,Ie,{key:0},null,[-1,-1])}}function nt(n){let e,l,s,r;const o=[Ut,St],t=[];function c(a,d){return a[2]!=null?0:1}return e=c(n),l=t[e]=o[e](n),{c(){l.c(),s=ie()},l(a){l.l(a),s=ie()},m(a,d){t[e].m(a,d),j(a,s,d),r=!0},p(a,d){let k=e;e=c(a),e===k?t[e].p(a,d):(Be(),J(t[k],1,1,()=>{t[k]=null}),Te(),l=t[e],l?l.p(a,d):(l=t[e]=o[e](a),l.c()),H(l,1),l.m(s.parentNode,s))},i(a){r||(H(l),r=!0)},o(a){J(l),r=!1},d(a){t[e].d(a),a&&f(s)}}}function St(n){let e,l,s;function r(t){n[9](t)}let o={};return n[1]!==void 0&&(o.message=n[1]),e=new Ue({props:o}),De.push(()=>je(e,"message",r,n[1])),{c(){ne(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};!l&&c&2&&(l=!0,a.message=t[1],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ut(n){let e,l,s;function r(t){n[8](t)}let o={alert_style:n[2]};return n[1]!==void 0&&(o.message=n[1]),e=new Ue({props:o}),De.push(()=>je(e,"message",r,n[1])),{c(){ne(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};c&4&&(a.alert_style=t[2]),!l&&c&2&&(l=!0,a.message=t[1],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ct(n){let e,l,s,r,o,t,c,a,d,k,p,b,i,I,g,w,D,V,O,B=n[1]&&nt(n);return{c(){e=v("legend"),l=W("Options"),s=R(),r=v("div"),o=v("div"),t=v("button"),c=W("Find new definitions"),a=R(),d=v("button"),k=W("Refresh all defintions"),p=R(),b=v("div"),i=v("button"),I=W("Clear words"),g=R(),B&&B.c(),w=ie(),this.h()},l(N){e=h(N,"LEGEND",{class:!0});var U=E(e);l=z(U,"Options"),U.forEach(f),s=L(N),r=h(N,"DIV",{class:!0});var te=E(r);o=h(te,"DIV",{class:!0});var X=E(o);t=h(X,"BUTTON",{type:!0,class:!0});var Q=E(t);c=z(Q,"Find new definitions"),Q.forEach(f),a=L(X),d=h(X,"BUTTON",{type:!0,class:!0});var P=E(d);k=z(P,"Refresh all defintions"),P.forEach(f),X.forEach(f),p=L(te),b=h(te,"DIV",{class:!0});var se=E(b);i=h(se,"BUTTON",{type:!0,class:!0});var Y=E(i);I=z(Y,"Clear words"),Y.forEach(f),se.forEach(f),te.forEach(f),g=L(N),B&&B.l(N),w=ie(),this.h()},h(){u(e,"class","options-group-title"),u(t,"type","button"),u(t,"class","btn btn-primary svelte-8jh6el"),u(d,"type","button"),u(d,"class","btn btn-primary svelte-8jh6el"),u(o,"class","options-subgroup svelte-8jh6el"),u(i,"type","button"),u(i,"class","btn btn-danger svelte-8jh6el"),u(b,"class","options-subgroup svelte-8jh6el"),u(r,"class","options-group options-group-cols svelte-8jh6el")},m(N,U){j(N,e,U),m(e,l),j(N,s,U),j(N,r,U),m(r,o),m(o,t),m(t,c),m(o,a),m(o,d),m(d,k),m(r,p),m(r,b),m(b,i),m(i,I),j(N,g,U),B&&B.m(N,U),j(N,w,U),D=!0,V||(O=[G(t,"click",n[6]),G(d,"click",n[7]),G(i,"click",n[3])],V=!0)},p(N,[U]){N[1]?B?(B.p(N,U),U&2&&H(B,1)):(B=nt(N),B.c(),H(B,1),B.m(w.parentNode,w)):B&&(Be(),J(B,1,1,()=>{B=null}),Te())},i(N){D||(H(B),D=!0)},o(N){J(B),D=!1},d(N){N&&f(e),N&&f(s),N&&f(r),N&&f(g),B&&B.d(N),N&&f(w),V=!1,_e(O)}}}function Ot(n,e,l){let{key:s}=e,r,o;function t(){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const i=_t(s);Ve(i)}function c(i){function I(O,B){return O.dict_def=B.dict_def,!0}if(!i)return;let g=Re(i);if(!window.confirm(`Refresh all ${g.words.length} words?

This will overwrite existing definitions.`))return;let w=0,D=[],V=g.words.map(async O=>{try{const B=await Xe.default.lookup(O.word);B?(O.dict_def=B,w+=1):D.push(O.word)}finally{O.cache=Qe(O),Ye(g,O,I)}});Promise.allSettled(V).then(()=>{D.length==0?(l(1,r=`Updated ${w} words`),l(2,o="info")):(l(2,o="error"),l(1,r=`Failed to update ${D.length} words.  ${D}`)),Ve(g)})}function a(i){function I(O,B){return O.dict_def=B.dict_def,!0}if(!i||!window.confirm("Lookup definitions for words without definitions?"))return;let g=Re(i),w=0,D=[],V=g.words.filter(O=>O.dict_def===void 0).map(async O=>{try{const B=await Xe.default.lookup(O.word);B?(O.dict_def=B,w+=1):D.push(O.word)}finally{O.cache=Qe(O),Ye(g,O,I)}});Promise.allSettled(V).then(()=>{D.length==0?(l(1,r=`Updated ${w} words`),l(2,o="info")):(l(2,o="error"),l(1,r=`Failed to update ${D.length} words.<br>${D}`)),Ve(g)})}const d=()=>a(s),k=()=>c(s);function p(i){r=i,l(1,r)}function b(i){r=i,l(1,r)}return n.$$set=i=>{"key"in i&&l(0,s=i.key)},[s,r,o,t,c,a,d,k,p,b]}class Vt extends ye{constructor(e){super(),Ee(this,e,Ot,Ct,Ie,{key:0})}}function Rt(n){let e,l,s,r,o,t,c,a,d,k;return e=new mt({props:{current:"options"}}),c=new Nt({props:{key:"words"}}),d=new Vt({props:{key:"words"}}),{c(){ne(e.$$.fragment),l=R(),s=v("h1"),r=W("Options"),o=R(),t=v("div"),ne(c.$$.fragment),a=R(),ne(d.$$.fragment),this.h()},l(p){re(e.$$.fragment,p),l=L(p),s=h(p,"H1",{});var b=E(s);r=z(b,"Options"),b.forEach(f),o=L(p),t=h(p,"DIV",{class:!0});var i=E(t);re(c.$$.fragment,i),a=L(i),re(d.$$.fragment,i),i.forEach(f),this.h()},h(){u(t,"class","options-page")},m(p,b){oe(e,p,b),j(p,l,b),j(p,s,b),m(s,r),j(p,o,b),j(p,t,b),oe(c,t,null),m(t,a),oe(d,t,null),k=!0},p:Se,i(p){k||(H(e.$$.fragment,p),H(c.$$.fragment,p),H(d.$$.fragment,p),k=!0)},o(p){J(e.$$.fragment,p),J(c.$$.fragment,p),J(d.$$.fragment,p),k=!1},d(p){ae(e,p),p&&f(l),p&&f(s),p&&f(o),p&&f(t),ae(c),ae(d)}}}class At extends ye{constructor(e){super(),Ee(this,e,null,Rt,Ie,{})}}export{At as default};
