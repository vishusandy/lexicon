import{S as oe,i as re,s as ue,C as Be,k,a as O,q as z,l as g,m as B,c as U,r as W,h as m,n,b as V,G as v,M as P,_ as De,D as Se,E as Ce,F as Ne,u as me,f as H,t as J,P as ee,w as Q,x as X,y as Z,Y as Te,z as x,L as se,$ as $e,B as ae}from"../../../chunks/index-cee4d27d.js";import{p as Ve,c as Le}from"../../../chunks/words-8389f65f.js";import{N as Re}from"../../../chunks/Nav-a840a3dd.js";function Oe(r){let e,l,t,u,i,a,f,o,s,E,C,w,d;const b=r[9].default,h=Be(b,r,r[8],null);return{c(){e=k("dialog"),l=k("div"),t=k("form"),h&&h.c(),u=O(),i=k("div"),a=k("button"),f=z(r[0]),o=O(),s=k("button"),E=z(r[1]),this.h()},l(y){e=g(y,"DIALOG",{class:!0,id:!0});var D=B(e);l=g(D,"DIV",{class:!0});var L=B(l);t=g(L,"FORM",{method:!0});var $=B(t);h&&h.l($),u=U($),i=g($,"DIV",{class:!0});var N=B(i);a=g(N,"BUTTON",{type:!0,class:!0});var Y=B(a);f=W(Y,r[0]),Y.forEach(m),o=U(N),s=g(N,"BUTTON",{type:!0,class:!0});var G=B(s);E=W(G,r[1]),G.forEach(m),N.forEach(m),$.forEach(m),L.forEach(m),D.forEach(m),this.h()},h(){n(a,"type","submit"),n(a,"class","btn btn-primary"),n(s,"type","button"),n(s,"class","btn btn-secondary"),n(i,"class","dialog-controls svelte-153o6vl"),n(t,"method","dialog"),n(l,"class","modal-wrapper svelte-153o6vl"),n(e,"class","modal svelte-153o6vl"),n(e,"id",r[2])},m(y,D){V(y,e,D),v(e,l),v(l,t),h&&h.m(t,null),v(t,u),v(t,i),v(i,a),v(a,f),v(i,o),v(i,s),v(s,E),C=!0,w||(d=[P(s,"click",r[3]),P(t,"submit",r[5]),P(e,"click",De(r[3])),P(e,"close",r[4])],w=!0)},p(y,[D]){h&&h.p&&(!C||D&256)&&Se(h,b,y,y[8],C?Ne(b,y[8],D,null):Ce(y[8]),null),(!C||D&1)&&me(f,y[0]),(!C||D&2)&&me(E,y[1]),(!C||D&4)&&n(e,"id",y[2])},i(y){C||(H(h,y),C=!0)},o(y){J(h,y),C=!1},d(y){y&&m(e),h&&h.d(y),w=!1,ee(d)}}}function ge(r){r.querySelectorAll("form").forEach(e=>{e.reset()})}function Ue(r,e,l){let{$$slots:t={},$$scope:u}=e,{onClose:i=()=>{}}=e,{onSubmit:a}=e,{submit_text:f="Submit"}=e,{cancel_text:o="Cancel"}=e,{id:s}=e;function E(d){const b=document.getElementById(s);b&&(i(b,d),ge(b),b.close())}function C(d){const b=document.getElementById(s);b&&(i(b,d),ge(b))}function w(d){const b=document.getElementById(s);if(!b){d.preventDefault();return}a(b,d)?b.close():d.preventDefault()}return r.$$set=d=>{"onClose"in d&&l(6,i=d.onClose),"onSubmit"in d&&l(7,a=d.onSubmit),"submit_text"in d&&l(0,f=d.submit_text),"cancel_text"in d&&l(1,o=d.cancel_text),"id"in d&&l(2,s=d.id),"$$scope"in d&&l(8,u=d.$$scope)},[f,o,s,E,C,w,i,a,u,t]}class Ee extends oe{constructor(e){super(),re(this,e,Ue,Oe,ue,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function ye(r,e,l){const t=r.slice();return t[22]=e[l],t}function Ie(r,e){let l,t,u,i,a,f,o,s,E,C,w,d,b,h,y,D,L=e[22].name+"",$,N,Y,G;function j(..._){return e[13](e[22],..._)}function q(..._){return e[14](e[22],..._)}return{key:r,first:null,c(){l=k("div"),t=k("div"),u=k("button"),i=k("i"),a=O(),f=k("button"),o=k("i"),C=O(),w=k("input"),h=O(),y=k("div"),D=k("label"),$=z(L),this.h()},l(_){l=g(_,"DIV",{class:!0});var p=B(l);t=g(p,"DIV",{class:!0});var I=B(t);u=g(I,"BUTTON",{type:!0,class:!0});var T=B(u);i=g(T,"I",{class:!0}),B(i).forEach(m),T.forEach(m),a=U(I),f=g(I,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var M=B(f);o=g(M,"I",{class:!0}),B(o).forEach(m),M.forEach(m),C=U(I),w=g(I,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),h=U(I),y=g(I,"DIV",{class:!0});var R=B(y);D=g(R,"LABEL",{class:!0,for:!0,title:!0});var A=B(D);$=W(A,L),A.forEach(m),R.forEach(m),I.forEach(m),p.forEach(m),this.h()},h(){n(i,"class","fa-solid fa-xmark"),n(u,"type","button"),n(u,"class","remove-btn svelte-evvm9o"),n(o,"class","fa-solid fa-pen"),n(f,"type","submit"),n(f,"id",s=e[0]+"-backup-rename-"+e[22].name),n(f,"title","Rename backup"),f.value=E=e[22].name,n(f,"class","btn rename-btn svelte-evvm9o"),n(w,"type","radio"),n(w,"name","btn-edit"),n(w,"class","btn-edit svelte-evvm9o"),n(w,"title","Select backup for restore"),n(w,"id",d=e[0]+"-restore-"+e[22].key),w.required=!0,w.value=b=e[22].name,n(D,"class","backup-name-label svelte-evvm9o"),n(D,"for",N=e[0]+"-restore-"+e[22].key),n(D,"title","Select backup for restore"),n(y,"class","backup-name svelte-evvm9o"),n(t,"class","backup-content svelte-evvm9o"),n(l,"class","backup-entry svelte-evvm9o"),this.first=l},m(_,p){V(_,l,p),v(l,t),v(t,u),v(u,i),v(t,a),v(t,f),v(f,o),v(t,C),v(t,w),v(t,h),v(t,y),v(y,D),v(D,$),Y||(G=[P(u,"click",j),P(f,"click",q)],Y=!0)},p(_,p){e=_,p&3&&s!==(s=e[0]+"-backup-rename-"+e[22].name)&&n(f,"id",s),p&2&&E!==(E=e[22].name)&&(f.value=E),p&3&&d!==(d=e[0]+"-restore-"+e[22].key)&&n(w,"id",d),p&2&&b!==(b=e[22].name)&&(w.value=b),p&2&&L!==(L=e[22].name+"")&&me($,L),p&3&&N!==(N=e[0]+"-restore-"+e[22].key)&&n(D,"for",N)},d(_){_&&m(l),Y=!1,ee(G)}}}function we(r){let e,l,t,u,i;return{c(){e=z(`Backup as:
                `),l=k("input"),this.h()},l(a){e=W(a,`Backup as:
                `),l=g(a,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){n(l,"id",t=r[0]+"-original-name"),n(l,"name","save-as"),n(l,"type","text"),n(l,"class","original form-control svelte-evvm9o"),n(l,"placeholder","new name"),l.required=!0},m(a,f){V(a,e,f),V(a,l,f),se(l,r[2]),u||(i=[P(l,"input",r[16]),P(l,"blur",r[17])],u=!0)},p(a,f){f&1&&t!==(t=a[0]+"-original-name")&&n(l,"id",t),f&4&&l.value!==a[2]&&se(l,a[2])},d(a){a&&m(e),a&&m(l),u=!1,ee(i)}}}function Me(r){let e,l,t,u,i,a,f,o,s,E,C,w,d=r[3]&&we(r);return{c(){e=k("div"),l=k("div"),t=k("input"),i=O(),a=k("label"),f=z("Backup current list"),s=O(),E=k("div"),d&&d.c(),this.h()},l(b){e=g(b,"DIV",{class:!0});var h=B(e);l=g(h,"DIV",{class:!0});var y=B(l);t=g(y,"INPUT",{type:!0,id:!0}),i=U(y),a=g(y,"LABEL",{for:!0});var D=B(a);f=W(D,"Backup current list"),D.forEach(m),y.forEach(m),s=U(h),E=g(h,"DIV",{});var L=B(E);d&&d.l(L),L.forEach(m),h.forEach(m),this.h()},h(){n(t,"type","checkbox"),n(t,"id",u=r[0]+"-rename-current"),n(a,"for",o=r[0]+"-rename-current"),n(l,"class","dialog-title svelte-evvm9o"),n(e,"class","original-name svelte-evvm9o")},m(b,h){V(b,e,h),v(e,l),v(l,t),t.checked=r[3],v(l,i),v(l,a),v(a,f),v(e,s),v(e,E),d&&d.m(E,null),C||(w=P(t,"change",r[15]),C=!0)},p(b,h){h&1&&u!==(u=b[0]+"-rename-current")&&n(t,"id",u),h&8&&(t.checked=b[3]),h&1&&o!==(o=b[0]+"-rename-current")&&n(a,"for",o),b[3]?d?d.p(b,h):(d=we(b),d.c(),d.m(E,null)):d&&(d.d(1),d=null)},d(b){b&&m(e),d&&d.d(),C=!1,w()}}}function Pe(r){let e,l,t,u,i,a,f;return{c(){e=k("input"),t=O(),u=k("input"),this.h()},l(o){e=g(o,"INPUT",{type:!0,id:!0,class:!0}),t=U(o),u=g(o,"INPUT",{type:!0,id:!0}),this.h()},h(){n(e,"type","text"),n(e,"id",l=r[0]+"-rename-backup"),n(e,"class","form-control"),n(u,"type","hidden"),n(u,"id",i=r[0]+"-rename-hidden")},m(o,s){V(o,e,s),se(e,r[4]),V(o,t,s),V(o,u,s),a||(f=[P(e,"blur",r[18]),P(e,"input",r[19])],a=!0)},p(o,s){s&1&&l!==(l=o[0]+"-rename-backup")&&n(e,"id",l),s&16&&e.value!==o[4]&&se(e,o[4]),s&1&&i!==(i=o[0]+"-rename-hidden")&&n(u,"id",i)},d(o){o&&m(e),o&&m(t),o&&m(u),a=!1,ee(f)}}}function qe(r){let e,l,t,u,i,a,f,o,s,E,C,w,d,b,h,y,D,L,$,N=[],Y=new Map,G,j,q,_,p,I,T,M,R,A,ie,de,te=r[1];const ve=c=>c[22].key;for(let c=0;c<te.length;c+=1){let S=ye(r,te,c),F=ve(S);Y.set(F,N[c]=Ie(F,S))}return T=new Ee({props:{id:"backup-modal",onSubmit:r[7],submit_text:"Restore",$$slots:{default:[Me]},$$scope:{ctx:r}}}),R=new Ee({props:{id:"rename-modal",onSubmit:r[6],onClose:r[10],submit_text:"Rename",$$slots:{default:[Pe]},$$scope:{ctx:r}}}),{c(){e=k("legend"),l=z("New Backup"),t=O(),u=k("div"),i=k("form"),a=k("div"),f=k("div"),o=z(`Backup name:
                `),s=k("input"),C=O(),w=k("button"),d=z("Create Backup"),b=O(),h=k("legend"),y=z("Restore Backup"),D=O(),L=k("div"),$=k("form");for(let c=0;c<N.length;c+=1)N[c].c();G=O(),j=k("div"),q=k("button"),_=z("Restore"),I=O(),Q(T.$$.fragment),M=O(),Q(R.$$.fragment),this.h()},l(c){e=g(c,"LEGEND",{class:!0});var S=B(e);l=W(S,"New Backup"),S.forEach(m),t=U(c),u=g(c,"DIV",{class:!0});var F=B(u);i=g(F,"FORM",{});var K=B(i);a=g(K,"DIV",{class:!0});var le=B(a);f=g(le,"DIV",{});var ce=B(f);o=W(ce,`Backup name:
                `),s=g(ce,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),ce.forEach(m),C=U(le),w=g(le,"BUTTON",{class:!0});var pe=B(w);d=W(pe,"Create Backup"),pe.forEach(m),le.forEach(m),K.forEach(m),F.forEach(m),b=U(c),h=g(c,"LEGEND",{class:!0});var _e=B(h);y=W(_e,"Restore Backup"),_e.forEach(m),D=U(c),L=g(c,"DIV",{class:!0});var be=B(L);$=g(be,"FORM",{id:!0});var ne=B($);for(let fe=0;fe<N.length;fe+=1)N[fe].l(ne);G=U(ne),j=g(ne,"DIV",{class:!0});var he=B(j);q=g(he,"BUTTON",{type:!0,class:!0,name:!0});var ke=B(q);_=W(ke,"Restore"),ke.forEach(m),he.forEach(m),ne.forEach(m),be.forEach(m),I=U(c),X(T.$$.fragment,c),M=U(c),X(R.$$.fragment,c),this.h()},h(){n(e,"class","options-group-title"),n(s,"id",E=r[0]+"-new-backup-name"),n(s,"type","text"),n(s,"class","new-backup-name form-control svelte-evvm9o"),n(s,"placeholder","new name"),n(w,"class","btn btn-primary"),n(a,"class","new-backup svelte-evvm9o"),n(u,"class","options-group"),n(h,"class","options-group-title"),n(q,"type","button"),n(q,"class","btn btn btn-danger"),n(q,"name","backups_action"),q.value="restore",n(j,"class","backup-submit svelte-evvm9o"),n($,"id",p=r[0]+"-backup-list-form"),n(L,"class","options-group")},m(c,S){V(c,e,S),v(e,l),V(c,t,S),V(c,u,S),v(u,i),v(i,a),v(a,f),v(f,o),v(f,s),v(a,C),v(a,w),v(w,d),V(c,b,S),V(c,h,S),v(h,y),V(c,D,S),V(c,L,S),v(L,$);for(let F=0;F<N.length;F+=1)N[F].m($,null);v($,G),v($,j),v(j,q),v(q,_),V(c,I,S),Z(T,c,S),V(c,M,S),Z(R,c,S),A=!0,ie||(de=[P(s,"blur",r[12]),P(i,"submit",r[8]),P(q,"click",Ge)],ie=!0)},p(c,[S]){(!A||S&1&&E!==(E=c[0]+"-new-backup-name"))&&n(s,"id",E),S&2563&&(te=c[1],N=Te(N,S,ve,1,c,te,Y,$,$e,Ie,G,ye)),(!A||S&1&&p!==(p=c[0]+"-backup-list-form"))&&n($,"id",p);const F={};S&33554445&&(F.$$scope={dirty:S,ctx:c}),T.$set(F);const K={};S&33554449&&(K.$$scope={dirty:S,ctx:c}),R.$set(K)},i(c){A||(H(T.$$.fragment,c),H(R.$$.fragment,c),A=!0)},o(c){J(T.$$.fragment,c),J(R.$$.fragment,c),A=!1},d(c){c&&m(e),c&&m(t),c&&m(u),c&&m(b),c&&m(h),c&&m(D),c&&m(L);for(let S=0;S<N.length;S+=1)N[S].d();c&&m(I),x(T,c),c&&m(M),x(R,c),ie=!1,ee(de)}}}function Ge(r){const e=document.getElementById("backup-modal");e&&(e.showModal(),r.preventDefault())}function Ae(r,e,l){let{key:t}=e,u=[],i="",a=!0,f="";function o(){for(let _=0;_<localStorage.length;_++){const p=localStorage.key(_);p&&p!=t&&u.push({name:p,key:_})}}o();function s(){l(1,u=[]),o(),l(1,u)}function E(_,p){const I=document.getElementById(p);if(!I)return console.log("could not find id: "+p),!1;if(I.value!=""){I.setCustomValidity("");{const T=localStorage.getItem(I.value.toLowerCase());if(I.value.toLowerCase()==t.toLowerCase())I.setCustomValidity(`'${t}' is a reserved name`);else if(T!=null)I.setCustomValidity("Backup exists");else return!0}}return!1}function C(_,p){if(!E(p,t+"-rename-backup"))return console.log("invalid name:"+f),p.preventDefault(),!1;const I=document.getElementById(t+"-rename-hidden"),T=f.toLowerCase(),M=localStorage.getItem(T);if(!I||!I.value||!f||M!=null)return!1;const R=I.value.toLowerCase(),A=localStorage.getItem(R);return A?(console.log("renaming "+R+" to "+T),localStorage.setItem(T,A),localStorage.removeItem(R),s(),!0):!1}function w(_,p){if(!a&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),p.preventDefault(),!1;if(a&&!E(p,t+"-original-name"))return p.preventDefault(),!1;const I=document.getElementById(t+"-backup-list-form");if(I){const T=I.elements.namedItem("btn-edit"),M=localStorage.getItem(t.toLowerCase());if(!T||!M)return!1;const R=localStorage.getItem(T.value);if(!R)return!1;a&&localStorage.setItem(i,M),localStorage.setItem(t,R),s()}return!0}function d(_){const p=document.getElementById(t+"-new-backup-name");if(!p||!E(_,t+"-new-backup-name")){_.preventDefault();return}const I=localStorage.getItem(t.toLowerCase());I&&(localStorage.setItem(p.value.toLowerCase(),I),s(),p.value="")}function b(_,p){const I=document.getElementById("rename-modal");if(!I)return;const T=document.getElementById(t+"-rename-backup");T&&(T.placeholder=p);const M=document.getElementById(t+"-rename-hidden");M&&(M.value=p,I.showModal(),_.preventDefault())}function h(_,p){const I=document.getElementById(t+"-rename-backup");I&&(I.placeholder="")}function y(_,p){return _.preventDefault(),window.confirm("Delete backup '"+p+"'?")?(localStorage.removeItem(p),s(),!0):!1}const D=_=>E(_,t+"-new-backup-name"),L=(_,p)=>y(p,_.name),$=(_,p)=>b(p,_.name);function N(){a=this.checked,l(3,a)}function Y(){i=this.value,l(2,i)}const G=_=>E(_,t+"-original-name"),j=_=>E(_,t+"-rename-backup");function q(){f=this.value,l(4,f)}return r.$$set=_=>{"key"in _&&l(0,t=_.key)},[t,u,i,a,f,E,C,w,d,b,h,y,D,L,$,N,Y,G,j,q]}class Fe extends oe{constructor(e){super(),re(this,e,Ae,qe,ue,{key:0})}}function ze(r){let e,l,t,u,i,a,f,o;return{c(){e=k("legend"),l=z("Options"),t=O(),u=k("div"),i=k("button"),a=z("Clear words"),this.h()},l(s){e=g(s,"LEGEND",{class:!0});var E=B(e);l=W(E,"Options"),E.forEach(m),t=U(s),u=g(s,"DIV",{class:!0});var C=B(u);i=g(C,"BUTTON",{type:!0,class:!0});var w=B(i);a=W(w,"Clear words"),w.forEach(m),C.forEach(m),this.h()},h(){n(e,"class","options-group-title"),n(i,"type","button"),n(i,"class","btn btn-danger"),n(u,"class","options-group")},m(s,E){V(s,e,E),v(e,l),V(s,t,E),V(s,u,E),v(u,i),v(i,a),f||(o=P(i,"click",r[0]),f=!0)},p:ae,i:ae,o:ae,d(s){s&&m(e),s&&m(t),s&&m(u),f=!1,o()}}}function We(r,e,l){let{key:t}=e;function u(){if(!window.confirm("This will clear all words in your word list.  Continue?"))return;const i=Ve(t);Le(i)}return r.$$set=i=>{"key"in i&&l(1,t=i.key)},[u,t]}class Ye extends oe{constructor(e){super(),re(this,e,We,ze,ue,{key:1})}}function je(r){let e,l,t,u,i,a,f;return e=new Re({props:{current:"options"}}),u=new Fe({props:{key:"words"}}),a=new Ye({props:{key:"words"}}),{c(){Q(e.$$.fragment),l=O(),t=k("div"),Q(u.$$.fragment),i=O(),Q(a.$$.fragment),this.h()},l(o){X(e.$$.fragment,o),l=U(o),t=g(o,"DIV",{class:!0});var s=B(t);X(u.$$.fragment,s),i=U(s),X(a.$$.fragment,s),s.forEach(m),this.h()},h(){n(t,"class","options-page")},m(o,s){Z(e,o,s),V(o,l,s),V(o,t,s),Z(u,t,null),v(t,i),Z(a,t,null),f=!0},p:ae,i(o){f||(H(e.$$.fragment,o),H(u.$$.fragment,o),H(a.$$.fragment,o),f=!0)},o(o){J(e.$$.fragment,o),J(u.$$.fragment,o),J(a.$$.fragment,o),f=!1},d(o){x(e,o),o&&m(l),o&&m(t),x(u),x(a)}}}class Qe extends oe{constructor(e){super(),re(this,e,null,je,ue,{})}}export{Qe as default};
