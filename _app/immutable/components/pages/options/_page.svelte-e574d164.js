import{S as we,i as Ee,s as Ie,C as nt,k as v,a as L,q as j,l as k,m as E,c as $,r as z,h as f,n as u,b as S,G as m,M as G,_ as ot,D as at,E as ut,F as it,u as ge,f as H,t as J,P as _e,w as re,e as ie,x as ne,y as oe,X as ft,g as Be,d as Te,z as ae,L as ye,$ as ct,J as De,K as Se,O as Ne,B as Ue}from"../../../chunks/index-e56e8534.js";import{l as Le,q as Ke,e as dt,u as _t,d as Re,A as Xe,o as Qe,n as Ye}from"../../../chunks/words-d2f0d323.js";import{A as Ce}from"../../../chunks/Alert-392b790a.js";import{N as mt}from"../../../chunks/Nav-6346eff5.js";function pt(r){let e,l,s,n,o,t,c,a,d,h,p,b,i;const I=r[9].default,g=nt(I,r,r[8],null);return{c(){e=v("dialog"),l=v("div"),s=v("form"),g&&g.c(),n=L(),o=v("div"),t=v("button"),c=j(r[0]),a=L(),d=v("button"),h=j(r[1]),this.h()},l(y){e=k(y,"DIALOG",{class:!0,id:!0});var D=E(e);l=k(D,"DIV",{class:!0});var R=E(l);s=k(R,"FORM",{method:!0});var V=E(s);g&&g.l(V),n=$(V),o=k(V,"DIV",{class:!0});var B=E(o);t=k(B,"BUTTON",{type:!0,class:!0});var N=E(t);c=z(N,r[0]),N.forEach(f),a=$(B),d=k(B,"BUTTON",{type:!0,class:!0});var C=E(d);h=z(C,r[1]),C.forEach(f),B.forEach(f),V.forEach(f),R.forEach(f),D.forEach(f),this.h()},h(){u(t,"type","submit"),u(t,"class","btn btn-primary"),u(d,"type","button"),u(d,"class","btn btn-secondary"),u(o,"class","dialog-controls svelte-153o6vl"),u(s,"method","dialog"),u(l,"class","modal-wrapper svelte-153o6vl"),u(e,"class","modal svelte-153o6vl"),u(e,"id",r[2])},m(y,D){S(y,e,D),m(e,l),m(l,s),g&&g.m(s,null),m(s,n),m(s,o),m(o,t),m(t,c),m(o,a),m(o,d),m(d,h),p=!0,b||(i=[G(d,"click",r[3]),G(s,"submit",r[5]),G(e,"click",ot(r[3])),G(e,"close",r[4])],b=!0)},p(y,[D]){g&&g.p&&(!p||D&256)&&at(g,I,y,y[8],p?it(I,y[8],D,null):ut(y[8]),null),(!p||D&1)&&ge(c,y[0]),(!p||D&2)&&ge(h,y[1]),(!p||D&4)&&u(e,"id",y[2])},i(y){p||(H(g,y),p=!0)},o(y){J(g,y),p=!1},d(y){y&&f(e),g&&g.d(y),b=!1,_e(i)}}}function Ze(r){r.querySelectorAll("form").forEach(e=>{e.reset()})}function bt(r,e,l){let{$$slots:s={},$$scope:n}=e,{onClose:o=()=>{}}=e,{onSubmit:t}=e,{submit_text:c="Submit"}=e,{cancel_text:a="Cancel"}=e,{id:d}=e;function h(i){const I=document.getElementById(d);I&&(o(I,i),Ze(I),I.close())}function p(i){const I=document.getElementById(d);I&&(o(I,i),Ze(I))}function b(i){const I=document.getElementById(d);if(!I){i.preventDefault();return}t(I,i)?I.close():i.preventDefault()}return r.$$set=i=>{"onClose"in i&&l(6,o=i.onClose),"onSubmit"in i&&l(7,t=i.onSubmit),"submit_text"in i&&l(0,c=i.submit_text),"cancel_text"in i&&l(1,a=i.cancel_text),"id"in i&&l(2,d=i.id),"$$scope"in i&&l(8,n=i.$$scope)},[c,a,d,h,p,b,o,t,n,s]}class xe extends we{constructor(e){super(),Ee(this,e,bt,pt,Ie,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function et(r,e,l){const s=r.slice();return s[30]=e[l],s}function vt(r){let e,l;return{c(){e=v("button"),l=v("i"),this.h()},l(s){e=k(s,"BUTTON",{type:!0,class:!0});var n=E(e);l=k(n,"I",{class:!0}),E(l).forEach(f),n.forEach(f),this.h()},h(){u(l,"class","fa-solid fa-xmark"),u(e,"type","button"),u(e,"class","remove-btn svelte-19k391v"),e.disabled=!0},m(s,n){S(s,e,n),m(e,l)},p:Ue,d(s){s&&f(e)}}}function kt(r){let e,l,s,n;function o(...t){return r[17](r[30],...t)}return{c(){e=v("button"),l=v("i"),this.h()},l(t){e=k(t,"BUTTON",{type:!0,class:!0,title:!0});var c=E(e);l=k(c,"I",{class:!0}),E(l).forEach(f),c.forEach(f),this.h()},h(){u(l,"class","fa-solid fa-xmark"),u(e,"type","button"),u(e,"class","remove-btn svelte-19k391v"),u(e,"title","Delete backup")},m(t,c){S(t,e,c),m(e,l),s||(n=G(e,"click",o),s=!0)},p(t,c){r=t},d(t){t&&f(e),s=!1,n()}}}function ht(r){let e,l,s,n;return{c(){e=v("button"),l=v("i"),s=L(),n=v("input"),this.h()},l(o){e=k(o,"BUTTON",{type:!0,class:!0});var t=E(e);l=k(t,"I",{class:!0}),E(l).forEach(f),t.forEach(f),s=$(o),n=k(o,"INPUT",{type:!0,class:!0}),this.h()},h(){u(l,"class","fa-solid fa-pen"),u(e,"type","button"),e.disabled=!0,u(e,"class","btn rename-btn svelte-19k391v"),u(n,"type","radio"),u(n,"class","btn-edit-current svelte-19k391v"),n.disabled=!0},m(o,t){S(o,e,t),m(e,l),S(o,s,t),S(o,n,t)},p:Ue,d(o){o&&f(e),o&&f(s),o&&f(n)}}}function gt(r){let e,l,s,n,o,t,c,a,d,h;function p(...b){return r[19](r[30],...b)}return{c(){e=v("button"),l=v("i"),o=L(),t=v("input"),this.h()},l(b){e=k(b,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var i=E(e);l=k(i,"I",{class:!0}),E(l).forEach(f),i.forEach(f),o=$(b),t=k(b,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){u(l,"class","fa-solid fa-pen"),u(e,"type","submit"),u(e,"id",s=r[0]+"-backup-rename-"+r[30].name),u(e,"title","Rename"),e.value=n=r[30].name,u(e,"class","btn rename-btn svelte-19k391v"),u(t,"type","radio"),u(t,"name","btn-edit"),u(t,"class","btn-edit svelte-19k391v"),u(t,"title","Select this backup for restore"),u(t,"id",c=r[0]+"-restore-"+r[30].key),t.required=!0,t.value=a=r[30].name},m(b,i){S(b,e,i),m(e,l),S(b,o,i),S(b,t,i),d||(h=G(e,"click",p),d=!0)},p(b,i){r=b,i[0]&3&&s!==(s=r[0]+"-backup-rename-"+r[30].name)&&u(e,"id",s),i[0]&2&&n!==(n=r[30].name)&&(e.value=n),i[0]&3&&c!==(c=r[0]+"-restore-"+r[30].key)&&u(t,"id",c),i[0]&2&&a!==(a=r[30].name)&&(t.value=a)},d(b){b&&f(e),b&&f(o),b&&f(t),d=!1,h()}}}function yt(r){let e=r[30].name+"",l;return{c(){l=j(e)},l(s){l=z(s,e)},m(s,n){S(s,l,n)},p(s,n){n[0]&2&&e!==(e=s[30].name+"")&&ge(l,e)},d(s){s&&f(l)}}}function wt(r){let e,l;return{c(){e=v("div"),l=j("Current"),this.h()},l(s){e=k(s,"DIV",{class:!0});var n=E(e);l=z(n,"Current"),n.forEach(f),this.h()},h(){u(e,"class","backup-current svelte-19k391v")},m(s,n){S(s,e,n),m(e,l)},p:Ue,d(s){s&&f(e)}}}function tt(r,e){let l,s,n,o,t,c,a,d,h,p,b,i,I,g=e[30].size+"",y,D,R,V;function B(P,A){return P[30].name!=P[0]?kt:vt}let N=B(e),C=N(e);function te(...P){return e[18](e[30],...P)}function X(P,A){return P[30].name!=P[0]?gt:ht}let Q=X(e),M=Q(e);function se(P,A){return P[30].name==P[0]?wt:yt}let Y=se(e),q=Y(e);return{key:r,first:null,c(){l=v("div"),s=v("div"),C.c(),n=L(),o=v("button"),t=v("i"),c=L(),M.c(),a=L(),d=v("div"),h=v("label"),q.c(),b=L(),i=v("div"),I=j("("),y=j(g),D=j(" words)"),this.h()},l(P){l=k(P,"DIV",{class:!0});var A=E(l);s=k(A,"DIV",{class:!0});var K=E(s);C.l(K),n=$(K),o=k(K,"BUTTON",{type:!0,class:!0,title:!0});var w=E(o);t=k(w,"I",{class:!0}),E(t).forEach(f),w.forEach(f),c=$(K),M.l(K),a=$(K),d=k(K,"DIV",{class:!0});var T=E(d);h=k(T,"LABEL",{class:!0,for:!0,title:!0});var O=E(h);q.l(O),O.forEach(f),b=$(T),i=k(T,"DIV",{class:!0});var F=E(i);I=z(F,"("),y=z(F,g),D=z(F," words)"),F.forEach(f),T.forEach(f),K.forEach(f),A.forEach(f),this.h()},h(){u(t,"class","fa-solid fa-download"),u(o,"type","button"),u(o,"class","btn download-btn svelte-19k391v"),u(o,"title","Download backup"),u(h,"class","backup-name-label svelte-19k391v"),u(h,"for",p=e[0]+"-restore-"+e[30].key),u(h,"title","Select backup for restore"),u(i,"class","backup-length svelte-19k391v"),u(d,"class","backup-name svelte-19k391v"),u(s,"class","backup-content svelte-19k391v"),u(l,"class","backup-entry svelte-19k391v"),this.first=l},m(P,A){S(P,l,A),m(l,s),C.m(s,null),m(s,n),m(s,o),m(o,t),m(s,c),M.m(s,null),m(s,a),m(s,d),m(d,h),q.m(h,null),m(d,b),m(d,i),m(i,I),m(i,y),m(i,D),R||(V=G(o,"click",te),R=!0)},p(P,A){e=P,N===(N=B(e))&&C?C.p(e,A):(C.d(1),C=N(e),C&&(C.c(),C.m(s,n))),Q===(Q=X(e))&&M?M.p(e,A):(M.d(1),M=Q(e),M&&(M.c(),M.m(s,a))),Y===(Y=se(e))&&q?q.p(e,A):(q.d(1),q=Y(e),q&&(q.c(),q.m(h,null))),A[0]&3&&p!==(p=e[0]+"-restore-"+e[30].key)&&u(h,"for",p),A[0]&2&&g!==(g=e[30].size+"")&&ge(y,g)},d(P){P&&f(l),C.d(),M.d(),q.d(),R=!1,V()}}}function lt(r){let e,l,s,n,o;return{c(){e=j(`Backup as:
                `),l=v("input"),this.h()},l(t){e=z(t,`Backup as:
                `),l=k(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){u(l,"id",s=r[0]+"-original-name"),u(l,"name","save-as"),u(l,"type","text"),u(l,"class","original form-control svelte-19k391v"),u(l,"placeholder","new name"),l.required=!0},m(t,c){S(t,e,c),S(t,l,c),ye(l,r[4]),n||(o=[G(l,"input",r[22]),G(l,"blur",r[23])],n=!0)},p(t,c){c[0]&1&&s!==(s=t[0]+"-original-name")&&u(l,"id",s),c[0]&16&&l.value!==t[4]&&ye(l,t[4])},d(t){t&&f(e),t&&f(l),n=!1,_e(o)}}}function Et(r){let e,l,s,n,o,t,c,a,d,h,p,b,i=r[5]&&lt(r);return{c(){e=v("div"),l=v("div"),s=v("input"),o=L(),t=v("label"),c=j("Backup current list"),d=L(),h=v("div"),i&&i.c(),this.h()},l(I){e=k(I,"DIV",{class:!0});var g=E(e);l=k(g,"DIV",{class:!0});var y=E(l);s=k(y,"INPUT",{type:!0,id:!0}),o=$(y),t=k(y,"LABEL",{for:!0});var D=E(t);c=z(D,"Backup current list"),D.forEach(f),y.forEach(f),d=$(g),h=k(g,"DIV",{});var R=E(h);i&&i.l(R),R.forEach(f),g.forEach(f),this.h()},h(){u(s,"type","checkbox"),u(s,"id",n=r[0]+"-rename-current"),u(t,"for",a=r[0]+"-rename-current"),u(l,"class","dialog-title svelte-19k391v"),u(e,"class","original-name svelte-19k391v")},m(I,g){S(I,e,g),m(e,l),m(l,s),s.checked=r[5],m(l,o),m(l,t),m(t,c),m(e,d),m(e,h),i&&i.m(h,null),p||(b=G(s,"change",r[21]),p=!0)},p(I,g){g[0]&1&&n!==(n=I[0]+"-rename-current")&&u(s,"id",n),g[0]&32&&(s.checked=I[5]),g[0]&1&&a!==(a=I[0]+"-rename-current")&&u(t,"for",a),I[5]?i?i.p(I,g):(i=lt(I),i.c(),i.m(h,null)):i&&(i.d(1),i=null)},d(I){I&&f(e),i&&i.d(),p=!1,b()}}}function It(r){let e,l,s,n,o,t,c;return{c(){e=v("input"),s=L(),n=v("input"),this.h()},l(a){e=k(a,"INPUT",{type:!0,id:!0,class:!0}),s=$(a),n=k(a,"INPUT",{type:!0,id:!0}),this.h()},h(){u(e,"type","text"),u(e,"id",l=r[0]+"-rename-backup"),u(e,"class","form-control"),u(n,"type","hidden"),u(n,"id",o=r[0]+"-rename-hidden")},m(a,d){S(a,e,d),ye(e,r[6]),S(a,s,d),S(a,n,d),t||(c=[G(e,"blur",r[24]),G(e,"input",r[25])],t=!0)},p(a,d){d[0]&1&&l!==(l=a[0]+"-rename-backup")&&u(e,"id",l),d[0]&64&&e.value!==a[6]&&ye(e,a[6]),d[0]&1&&o!==(o=a[0]+"-rename-hidden")&&u(n,"id",o)},d(a){a&&f(e),a&&f(s),a&&f(n),t=!1,_e(c)}}}function st(r){let e,l,s,n;const o=[Tt,Bt],t=[];function c(a,d){return a[3]!=null?0:1}return e=c(r),l=t[e]=o[e](r),{c(){l.c(),s=ie()},l(a){l.l(a),s=ie()},m(a,d){t[e].m(a,d),S(a,s,d),n=!0},p(a,d){let h=e;e=c(a),e===h?t[e].p(a,d):(Be(),J(t[h],1,1,()=>{t[h]=null}),Te(),l=t[e],l?l.p(a,d):(l=t[e]=o[e](a),l.c()),H(l,1),l.m(s.parentNode,s))},i(a){n||(H(l),n=!0)},o(a){J(l),n=!1},d(a){t[e].d(a),a&&f(s)}}}function Bt(r){let e,l,s;function n(t){r[27](t)}let o={};return r[2]!==void 0&&(o.message=r[2]),e=new Ce({props:o}),De.push(()=>Se(e,"message",n,r[2])),{c(){re(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};!l&&c[0]&4&&(l=!0,a.message=t[2],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Tt(r){let e,l,s;function n(t){r[26](t)}let o={alert_style:r[3]};return r[2]!==void 0&&(o.message=r[2]),e=new Ce({props:o}),De.push(()=>Se(e,"message",n,r[2])),{c(){re(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};c[0]&8&&(a.alert_style=t[3]),!l&&c[0]&4&&(l=!0,a.message=t[2],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Dt(r){let e,l,s,n,o,t,c,a,d,h,p,b,i,I,g,y,D,R=[],V=new Map,B,N,C,te,X,Q,M,se,Y,q,P,A,K,w,T,O,F,Z,ee,x,me,ue,pe,ce,fe,Oe,$e,be=r[1];const Pe=_=>_[30].key;for(let _=0;_<be.length;_+=1){let U=et(r,be,_),le=Pe(U);V.set(le,R[_]=tt(le,U))}x=new xe({props:{id:"backup-modal",onSubmit:r[9],submit_text:"Restore",$$slots:{default:[Et]},$$scope:{ctx:r}}}),ue=new xe({props:{id:"rename-modal",onSubmit:r[8],onClose:r[14],submit_text:"Rename",$$slots:{default:[It]},$$scope:{ctx:r}}});let W=r[2]&&st(r);return{c(){e=v("h2"),l=j("Save Backup"),s=L(),n=v("div"),o=v("form"),t=v("div"),c=v("input"),d=L(),h=v("button"),p=j("Create Backup"),b=L(),i=v("h2"),I=j("Saved Backups"),g=L(),y=v("div"),D=v("form");for(let _=0;_<R.length;_+=1)R[_].c();B=L(),N=v("div"),C=v("button"),te=j("Restore"),Q=L(),M=v("h2"),se=j("Upload Backup"),Y=L(),q=v("div"),P=v("form"),A=v("div"),K=v("div"),w=v("input"),O=L(),F=v("button"),Z=j("Restore Backup"),ee=L(),re(x.$$.fragment),me=L(),re(ue.$$.fragment),pe=L(),W&&W.c(),ce=ie(),this.h()},l(_){e=k(_,"H2",{class:!0});var U=E(e);l=z(U,"Save Backup"),U.forEach(f),s=$(_),n=k(_,"DIV",{class:!0});var le=E(n);o=k(le,"FORM",{});var de=E(o);t=k(de,"DIV",{class:!0});var ve=E(t);c=k(ve,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),d=$(ve),h=k(ve,"BUTTON",{class:!0});var Me=E(h);p=z(Me,"Create Backup"),Me.forEach(f),ve.forEach(f),de.forEach(f),le.forEach(f),b=$(_),i=k(_,"H2",{class:!0});var Ae=E(i);I=z(Ae,"Saved Backups"),Ae.forEach(f),g=$(_),y=k(_,"DIV",{class:!0});var Fe=E(y);D=k(Fe,"FORM",{id:!0});var ke=E(D);for(let Ve=0;Ve<R.length;Ve+=1)R[Ve].l(ke);B=$(ke),N=k(ke,"DIV",{class:!0});var qe=E(N);C=k(qe,"BUTTON",{type:!0,class:!0,name:!0});var We=E(C);te=z(We,"Restore"),We.forEach(f),qe.forEach(f),ke.forEach(f),Fe.forEach(f),Q=$(_),M=k(_,"H2",{class:!0});var je=E(M);se=z(je,"Upload Backup"),je.forEach(f),Y=$(_),q=k(_,"DIV",{class:!0});var ze=E(q);P=k(ze,"FORM",{});var He=E(P);A=k(He,"DIV",{class:!0});var he=E(A);K=k(he,"DIV",{class:!0});var Ge=E(K);w=k(Ge,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),Ge.forEach(f),O=$(he),F=k(he,"BUTTON",{class:!0});var Je=E(F);Z=z(Je,"Restore Backup"),Je.forEach(f),he.forEach(f),He.forEach(f),ze.forEach(f),ee=$(_),ne(x.$$.fragment,_),me=$(_),ne(ue.$$.fragment,_),pe=$(_),W&&W.l(_),ce=ie(),this.h()},h(){u(e,"class","options-group-title"),u(c,"id",a=r[0]+"-new-backup-name"),u(c,"type","text"),u(c,"class","new-backup-name form-control svelte-19k391v"),u(c,"placeholder","new name"),u(h,"class","btn btn-primary"),u(t,"class","new-backup svelte-19k391v"),u(n,"class","options-group"),u(i,"class","options-group-title"),u(C,"type","button"),u(C,"class","btn btn btn-danger"),u(C,"name","backups_action"),C.value="restore",u(N,"class","backup-submit svelte-19k391v"),u(D,"id",X=r[0]+"-backup-list-form"),u(y,"class","options-group"),u(M,"class","options-group-title"),u(w,"id",T=r[0]+"-upload-backup"),u(w,"class","upload-backup form-control svelte-19k391v"),u(w,"type","file"),u(w,"accept",".json,application/json"),u(K,"class","upload-backup-container"),u(F,"class","btn btn-danger upload-backup-btn svelte-19k391v"),u(A,"class","new-backup svelte-19k391v"),u(q,"class","options-group")},m(_,U){S(_,e,U),m(e,l),S(_,s,U),S(_,n,U),m(n,o),m(o,t),m(t,c),m(t,d),m(t,h),m(h,p),S(_,b,U),S(_,i,U),m(i,I),S(_,g,U),S(_,y,U),m(y,D);for(let le=0;le<R.length;le+=1)R[le].m(D,null);m(D,B),m(D,N),m(N,C),m(C,te),S(_,Q,U),S(_,M,U),m(M,se),S(_,Y,U),S(_,q,U),m(q,P),m(P,A),m(A,K),m(K,w),m(A,O),m(A,F),m(F,Z),S(_,ee,U),oe(x,_,U),S(_,me,U),oe(ue,_,U),S(_,pe,U),W&&W.m(_,U),S(_,ce,U),fe=!0,Oe||($e=[G(c,"blur",r[16]),G(o,"submit",r[10]),G(C,"click",r[12]),G(P,"submit",r[20])],Oe=!0)},p(_,U){(!fe||U[0]&1&&a!==(a=_[0]+"-new-backup-name"))&&u(c,"id",a),U[0]&40963&&(be=_[1],R=ft(R,U,Pe,1,_,be,V,D,ct,tt,B,et)),(!fe||U[0]&1&&X!==(X=_[0]+"-backup-list-form"))&&u(D,"id",X),(!fe||U[0]&1&&T!==(T=_[0]+"-upload-backup"))&&u(w,"id",T);const le={};U[0]&49|U[1]&4&&(le.$$scope={dirty:U,ctx:_}),x.$set(le);const de={};U[0]&65|U[1]&4&&(de.$$scope={dirty:U,ctx:_}),ue.$set(de),_[2]?W?(W.p(_,U),U[0]&4&&H(W,1)):(W=st(_),W.c(),H(W,1),W.m(ce.parentNode,ce)):W&&(Be(),J(W,1,1,()=>{W=null}),Te())},i(_){fe||(H(x.$$.fragment,_),H(ue.$$.fragment,_),H(W),fe=!0)},o(_){J(x.$$.fragment,_),J(ue.$$.fragment,_),J(W),fe=!1},d(_){_&&f(e),_&&f(s),_&&f(n),_&&f(b),_&&f(i),_&&f(g),_&&f(y);for(let U=0;U<R.length;U+=1)R[U].d();_&&f(Q),_&&f(M),_&&f(Y),_&&f(q),_&&f(ee),ae(x,_),_&&f(me),ae(ue,_),_&&f(pe),W&&W.d(_),_&&f(ce),Oe=!1,_e($e)}}}function St(r,e,l){let{key:s}=e,n=[],o,t,c="",a=!0,d="";function h(){for(let w=0;w<localStorage.length;w++){const T=localStorage.key(w);if(T){let O=Le(T);n.push({name:T,key:w,size:O.words.length})}}}h();function p(){l(1,n=[]),h(),l(1,n)}function b(w,T){const O=document.getElementById(T);if(!O)return!1;if(O.value!=""){O.setCustomValidity("");{const F=localStorage.getItem(O.value.toLowerCase());if(O.value.toLowerCase()==s.toLowerCase())O.setCustomValidity(`'${s}' is a reserved name`);else if(F!=null)O.setCustomValidity("Backup exists");else return!0}}return!1}function i(w,T){if(!b(T,s+"-rename-backup"))return console.log("invalid name:"+d),T.preventDefault(),!1;const O=document.getElementById(s+"-rename-hidden"),F=d.toLowerCase(),Z=localStorage.getItem(F);if(!O||!O.value||!d||Z!=null)return!1;const ee=O.value.toLowerCase(),x=localStorage.getItem(ee);return x?(localStorage.setItem(F,x),localStorage.removeItem(ee),p(),!0):!1}function I(w,T){if(!a&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),T.preventDefault(),!1;if(a&&!b(T,s+"-original-name"))return T.preventDefault(),!1;const O=document.getElementById(s+"-backup-list-form");if(O){const F=O.elements.namedItem("btn-edit"),Z=localStorage.getItem(s.toLowerCase());if(!F||!Z)return!1;const ee=localStorage.getItem(F.value);if(!ee)return!1;a&&localStorage.setItem(c,Z),localStorage.setItem(s,ee),l(2,o="Backup restored"),l(3,t="info"),p()}return!0}function g(w){const T=document.getElementById(s+"-new-backup-name");if(!T||!b(w,s+"-new-backup-name")){w.preventDefault();return}const O=localStorage.getItem(s.toLowerCase());O&&(localStorage.setItem(T.value.toLowerCase(),O),l(2,o="Backup created"),l(3,t="info"),p(),T.value="")}function y(w){w.preventDefault();let T=document.getElementById(`${s}-upload-backup`);if(!T||!T.files||!T.files[0]){l(2,o="Please select a file"),l(3,t="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const O=new FileReader;O.onload=F=>{if(!O.result){l(2,o="Upload failed"),l(3,t="error");return}let Z=O.result,ee=JSON.parse(Z);if(console.log(Ke(ee)),!Ke(ee)){l(2,o="Invalid backup file."),l(3,t="error");return}localStorage.setItem(s,Z),l(2,o="Backup restored"),l(3,t="info");let x=document.getElementById(`${s}-upload-backup`);x&&(x.value=""),p()},O.readAsText(T.files[0])}function D(w){const T=document.getElementById("backup-modal");if(!T)return;const O=document.getElementById(`${s}-backup-list-form`);O&&O.querySelectorAll('input[name="btn-edit"]:checked').length===0||(T.showModal(),w.preventDefault())}function R(w,T){const O=document.getElementById("rename-modal");if(!O)return;const F=document.getElementById(s+"-rename-backup");F&&(F.placeholder=T);const Z=document.getElementById(s+"-rename-hidden");Z&&(Z.value=T,O.showModal(),w.preventDefault())}function V(w,T){const O=document.getElementById(s+"-rename-backup");O&&(O.placeholder="")}function B(w,T){return w.preventDefault(),window.confirm("Delete backup '"+T+"'?")?(l(2,o="Backup deleted"),l(3,t="error"),localStorage.removeItem(T),p(),!0):!1}const N=w=>b(w,s+"-new-backup-name"),C=(w,T)=>B(T,w.name),te=(w,T)=>dt(w.name),X=(w,T)=>R(T,w.name),Q=w=>y(w);function M(){a=this.checked,l(5,a)}function se(){c=this.value,l(4,c)}const Y=w=>b(w,s+"-original-name"),q=w=>b(w,s+"-rename-backup");function P(){d=this.value,l(6,d)}function A(w){o=w,l(2,o)}function K(w){o=w,l(2,o)}return r.$$set=w=>{"key"in w&&l(0,s=w.key)},[s,n,o,t,c,a,d,b,i,I,g,y,D,R,V,B,N,C,te,X,Q,M,se,Y,q,P,A,K]}class Nt extends we{constructor(e){super(),Ee(this,e,St,Dt,Ie,{key:0},null,[-1,-1])}}function rt(r){let e,l,s,n;const o=[Ct,Ut],t=[];function c(a,d){return a[2]!=null?0:1}return e=c(r),l=t[e]=o[e](r),{c(){l.c(),s=ie()},l(a){l.l(a),s=ie()},m(a,d){t[e].m(a,d),S(a,s,d),n=!0},p(a,d){let h=e;e=c(a),e===h?t[e].p(a,d):(Be(),J(t[h],1,1,()=>{t[h]=null}),Te(),l=t[e],l?l.p(a,d):(l=t[e]=o[e](a),l.c()),H(l,1),l.m(s.parentNode,s))},i(a){n||(H(l),n=!0)},o(a){J(l),n=!1},d(a){t[e].d(a),a&&f(s)}}}function Ut(r){let e,l,s;function n(t){r[9](t)}let o={};return r[1]!==void 0&&(o.message=r[1]),e=new Ce({props:o}),De.push(()=>Se(e,"message",n,r[1])),{c(){re(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};!l&&c&2&&(l=!0,a.message=t[1],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ct(r){let e,l,s;function n(t){r[8](t)}let o={alert_style:r[2]};return r[1]!==void 0&&(o.message=r[1]),e=new Ce({props:o}),De.push(()=>Se(e,"message",n,r[1])),{c(){re(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,c){oe(e,t,c),s=!0},p(t,c){const a={};c&4&&(a.alert_style=t[2]),!l&&c&2&&(l=!0,a.message=t[1],Ne(()=>l=!1)),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ot(r){let e,l,s,n,o,t,c,a,d,h,p,b,i,I,g,y,D,R,V,B=r[1]&&rt(r);return{c(){e=v("legend"),l=j("Options"),s=L(),n=v("div"),o=v("div"),t=v("button"),c=j("Find new definitions"),a=L(),d=v("button"),h=j("Refresh all defintions"),p=L(),b=v("div"),i=v("button"),I=j("Clear words"),g=L(),B&&B.c(),y=ie(),this.h()},l(N){e=k(N,"LEGEND",{class:!0});var C=E(e);l=z(C,"Options"),C.forEach(f),s=$(N),n=k(N,"DIV",{class:!0});var te=E(n);o=k(te,"DIV",{class:!0});var X=E(o);t=k(X,"BUTTON",{type:!0,class:!0});var Q=E(t);c=z(Q,"Find new definitions"),Q.forEach(f),a=$(X),d=k(X,"BUTTON",{type:!0,class:!0});var M=E(d);h=z(M,"Refresh all defintions"),M.forEach(f),X.forEach(f),p=$(te),b=k(te,"DIV",{class:!0});var se=E(b);i=k(se,"BUTTON",{type:!0,class:!0});var Y=E(i);I=z(Y,"Clear words"),Y.forEach(f),se.forEach(f),te.forEach(f),g=$(N),B&&B.l(N),y=ie(),this.h()},h(){u(e,"class","options-group-title"),u(t,"type","button"),u(t,"class","btn btn-primary svelte-mbbubh"),u(d,"type","button"),u(d,"class","btn btn-primary svelte-mbbubh"),u(o,"class","options-subgroup svelte-mbbubh"),u(i,"type","button"),u(i,"class","btn btn-danger svelte-mbbubh"),u(b,"class","options-subgroup svelte-mbbubh"),u(n,"class","options-group options-group-cols svelte-mbbubh")},m(N,C){S(N,e,C),m(e,l),S(N,s,C),S(N,n,C),m(n,o),m(o,t),m(t,c),m(o,a),m(o,d),m(d,h),m(n,p),m(n,b),m(b,i),m(i,I),S(N,g,C),B&&B.m(N,C),S(N,y,C),D=!0,R||(V=[G(t,"click",r[6]),G(d,"click",r[7]),G(i,"click",r[3])],R=!0)},p(N,[C]){N[1]?B?(B.p(N,C),C&2&&H(B,1)):(B=rt(N),B.c(),H(B,1),B.m(y.parentNode,y)):B&&(Be(),J(B,1,1,()=>{B=null}),Te())},i(N){D||(H(B),D=!0)},o(N){J(B),D=!1},d(N){N&&f(e),N&&f(s),N&&f(n),N&&f(g),B&&B.d(N),N&&f(y),R=!1,_e(V)}}}function Vt(r,e,l){let{key:s}=e,n,o;function t(){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const i=_t(s);Re(i)}function c(i){function I(V,B){return V.dict_def=B.dict_def,!0}if(!i)return;let g=Le(i);if(!window.confirm(`Refresh all ${g.words.length} words?

This will overwrite existing definitions.`))return;let y=0,D=[],R=g.words.map(async V=>{try{const B=await Xe.default.lookup(V.word);B?(V.dict_def=B,y+=1):D.push(V.word)}finally{V.cache=Qe(V),Ye(g,V,I)}});Promise.allSettled(R).then(()=>{D.length==0?(l(1,n=`Updated ${y} words`),l(2,o="info")):(l(2,o="error"),l(1,n=`Failed to update ${D.length} words.  ${D}`)),Re(g)})}function a(i){function I(V,B){return V.dict_def=B.dict_def,!0}if(!i||!window.confirm("Lookup definitions for words without definitions?"))return;let g=Le(i),y=0,D=[],R=g.words.filter(V=>V.dict_def===void 0).map(async V=>{try{const B=await Xe.default.lookup(V.word);B?(V.dict_def=B,y+=1):D.push(V.word)}finally{V.cache=Qe(V),Ye(g,V,I)}});Promise.allSettled(R).then(()=>{D.length==0?(l(1,n=`Updated ${y} words`),l(2,o="info")):(l(2,o="error"),l(1,n=`Failed to update ${D.length} words.<br>${D}`)),Re(g)})}const d=()=>a(s),h=()=>c(s);function p(i){n=i,l(1,n)}function b(i){n=i,l(1,n)}return r.$$set=i=>{"key"in i&&l(0,s=i.key)},[s,n,o,t,c,a,d,h,p,b]}class Rt extends we{constructor(e){super(),Ee(this,e,Vt,Ot,Ie,{key:0})}}function Lt(r){let e,l,s,n,o,t,c,a,d,h;return e=new mt({props:{current:"options"}}),c=new Nt({props:{key:"words"}}),d=new Rt({props:{key:"words"}}),{c(){re(e.$$.fragment),l=L(),s=v("h1"),n=j("Options"),o=L(),t=v("div"),re(c.$$.fragment),a=L(),re(d.$$.fragment),this.h()},l(p){ne(e.$$.fragment,p),l=$(p),s=k(p,"H1",{});var b=E(s);n=z(b,"Options"),b.forEach(f),o=$(p),t=k(p,"DIV",{class:!0});var i=E(t);ne(c.$$.fragment,i),a=$(i),ne(d.$$.fragment,i),i.forEach(f),this.h()},h(){u(t,"class","options-page")},m(p,b){oe(e,p,b),S(p,l,b),S(p,s,b),m(s,n),S(p,o,b),S(p,t,b),oe(c,t,null),m(t,a),oe(d,t,null),h=!0},p:Ue,i(p){h||(H(e.$$.fragment,p),H(c.$$.fragment,p),H(d.$$.fragment,p),h=!0)},o(p){J(e.$$.fragment,p),J(c.$$.fragment,p),J(d.$$.fragment,p),h=!1},d(p){ae(e,p),p&&f(l),p&&f(s),p&&f(o),p&&f(t),ae(c),ae(d)}}}class Ft extends we{constructor(e){super(),Ee(this,e,null,Lt,Ie,{})}}export{Ft as default};
