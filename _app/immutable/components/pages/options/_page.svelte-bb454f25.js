import{S as Ee,i as Ie,s as Be,C as ut,k as b,a as V,q as W,l as v,m as E,c as L,r as j,h as i,n as u,b as N,G as m,M as X,_ as it,D as ft,E as ct,F as dt,u as ye,f as K,t as Q,P as _e,w as se,e as ie,x as ne,y as re,X as _t,g as De,d as Te,z as oe,L as we,$ as mt,J as Ne,K as Se,O as Ue,B as qe}from"../../../chunks/index-e56e8534.js";import{l as $e,q as Ye,e as pt,u as bt,d as Pe,A as Ze,o as xe,n as et}from"../../../chunks/words-d2f0d323.js";import{A as Ce}from"../../../chunks/Alert-392b790a.js";import{N as vt}from"../../../chunks/Nav-6346eff5.js";function kt(n){let e,l,s,r,o,t,d,a,c,k,p,h,f;const w=n[9].default,g=ut(w,n,n[8],null);return{c(){e=b("dialog"),l=b("div"),s=b("form"),g&&g.c(),r=V(),o=b("div"),t=b("button"),d=W(n[0]),a=V(),c=b("button"),k=W(n[1]),this.h()},l(B){e=v(B,"DIALOG",{class:!0,id:!0});var S=E(e);l=v(S,"DIV",{class:!0});var R=E(l);s=v(R,"FORM",{method:!0});var D=E(s);g&&g.l(D),r=L(D),o=v(D,"DIV",{class:!0});var C=E(o);t=v(C,"BUTTON",{type:!0,class:!0});var O=E(t);d=j(O,n[0]),O.forEach(i),a=L(C),c=v(C,"BUTTON",{type:!0,class:!0});var I=E(c);k=j(I,n[1]),I.forEach(i),C.forEach(i),D.forEach(i),R.forEach(i),S.forEach(i),this.h()},h(){u(t,"type","submit"),u(t,"class","btn btn-primary"),u(c,"type","button"),u(c,"class","btn btn-secondary"),u(o,"class","dialog-controls svelte-153o6vl"),u(s,"method","dialog"),u(l,"class","modal-wrapper svelte-153o6vl"),u(e,"class","modal svelte-153o6vl"),u(e,"id",n[2])},m(B,S){N(B,e,S),m(e,l),m(l,s),g&&g.m(s,null),m(s,r),m(s,o),m(o,t),m(t,d),m(o,a),m(o,c),m(c,k),p=!0,h||(f=[X(c,"click",n[3]),X(s,"submit",n[5]),X(e,"click",it(n[3])),X(e,"close",n[4])],h=!0)},p(B,[S]){g&&g.p&&(!p||S&256)&&ft(g,w,B,B[8],p?dt(w,B[8],S,null):ct(B[8]),null),(!p||S&1)&&ye(d,B[0]),(!p||S&2)&&ye(k,B[1]),(!p||S&4)&&u(e,"id",B[2])},i(B){p||(K(g,B),p=!0)},o(B){Q(g,B),p=!1},d(B){B&&i(e),g&&g.d(B),h=!1,_e(f)}}}function tt(n){n.querySelectorAll("form").forEach(e=>{e.reset()})}function ht(n,e,l){let{$$slots:s={},$$scope:r}=e,{onClose:o=()=>{}}=e,{onSubmit:t}=e,{submit_text:d="Submit"}=e,{cancel_text:a="Cancel"}=e,{id:c}=e;function k(f){const w=document.getElementById(c);w&&(o(w,f),tt(w),w.close())}function p(f){const w=document.getElementById(c);w&&(o(w,f),tt(w))}function h(f){const w=document.getElementById(c);if(!w){f.preventDefault();return}t(w,f)?w.close():f.preventDefault()}return n.$$set=f=>{"onClose"in f&&l(6,o=f.onClose),"onSubmit"in f&&l(7,t=f.onSubmit),"submit_text"in f&&l(0,d=f.submit_text),"cancel_text"in f&&l(1,a=f.cancel_text),"id"in f&&l(2,c=f.id),"$$scope"in f&&l(8,r=f.$$scope)},[d,a,c,k,p,h,o,t,r,s]}class lt extends Ee{constructor(e){super(),Ie(this,e,ht,kt,Be,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function st(n,e,l){const s=n.slice();return s[29]=e[l],s}function gt(n){let e,l;return{c(){e=b("button"),l=b("i"),this.h()},l(s){e=v(s,"BUTTON",{type:!0,class:!0});var r=E(e);l=v(r,"I",{class:!0}),E(l).forEach(i),r.forEach(i),this.h()},h(){u(l,"class","fa-solid fa-xmark"),u(e,"type","button"),u(e,"class","remove-btn svelte-1qug46v"),e.disabled=!0},m(s,r){N(s,e,r),m(e,l)},p:qe,d(s){s&&i(e)}}}function yt(n){let e,l,s,r;function o(...t){return n[16](n[29],...t)}return{c(){e=b("button"),l=b("i"),this.h()},l(t){e=v(t,"BUTTON",{type:!0,class:!0,title:!0});var d=E(e);l=v(d,"I",{class:!0}),E(l).forEach(i),d.forEach(i),this.h()},h(){u(l,"class","fa-solid fa-xmark"),u(e,"type","button"),u(e,"class","remove-btn svelte-1qug46v"),u(e,"title","Delete backup")},m(t,d){N(t,e,d),m(e,l),s||(r=X(e,"click",o),s=!0)},p(t,d){n=t},d(t){t&&i(e),s=!1,r()}}}function wt(n){let e,l,s,r;return{c(){e=b("button"),l=b("i"),s=V(),r=b("input"),this.h()},l(o){e=v(o,"BUTTON",{type:!0,class:!0});var t=E(e);l=v(t,"I",{class:!0}),E(l).forEach(i),t.forEach(i),s=L(o),r=v(o,"INPUT",{type:!0,class:!0}),this.h()},h(){u(l,"class","fa-solid fa-pen"),u(e,"type","button"),e.disabled=!0,u(e,"class","btn rename-btn svelte-1qug46v"),u(r,"type","radio"),u(r,"class","btn-edit-current svelte-1qug46v"),r.disabled=!0},m(o,t){N(o,e,t),m(e,l),N(o,s,t),N(o,r,t)},p:qe,d(o){o&&i(e),o&&i(s),o&&i(r)}}}function Et(n){let e,l,s,r,o,t,d,a,c,k;function p(...h){return n[18](n[29],...h)}return{c(){e=b("button"),l=b("i"),o=V(),t=b("input"),this.h()},l(h){e=v(h,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var f=E(e);l=v(f,"I",{class:!0}),E(l).forEach(i),f.forEach(i),o=L(h),t=v(h,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){u(l,"class","fa-solid fa-pen"),u(e,"type","submit"),u(e,"id",s=n[0]+"-backup-rename-"+n[29].name),u(e,"title","Rename"),e.value=r=n[29].name,u(e,"class","btn rename-btn svelte-1qug46v"),u(t,"type","radio"),u(t,"name","btn-edit"),u(t,"class","btn-edit svelte-1qug46v"),u(t,"title","Select this backup for restore"),u(t,"id",d=n[0]+"-restore-"+n[29].key),t.required=!0,t.value=a=n[29].name},m(h,f){N(h,e,f),m(e,l),N(h,o,f),N(h,t,f),c||(k=X(e,"click",p),c=!0)},p(h,f){n=h,f[0]&3&&s!==(s=n[0]+"-backup-rename-"+n[29].name)&&u(e,"id",s),f[0]&2&&r!==(r=n[29].name)&&(e.value=r),f[0]&3&&d!==(d=n[0]+"-restore-"+n[29].key)&&u(t,"id",d),f[0]&2&&a!==(a=n[29].name)&&(t.value=a)},d(h){h&&i(e),h&&i(o),h&&i(t),c=!1,k()}}}function It(n){let e=n[29].name+"",l;return{c(){l=W(e)},l(s){l=j(s,e)},m(s,r){N(s,l,r)},p(s,r){r[0]&2&&e!==(e=s[29].name+"")&&ye(l,e)},d(s){s&&i(l)}}}function Bt(n){let e,l;return{c(){e=b("div"),l=W("Current"),this.h()},l(s){e=v(s,"DIV",{class:!0});var r=E(e);l=j(r,"Current"),r.forEach(i),this.h()},h(){u(e,"class","backup-current svelte-1qug46v")},m(s,r){N(s,e,r),m(e,l)},p:qe,d(s){s&&i(e)}}}function nt(n,e){let l,s,r,o,t,d,a,c,k,p,h,f,w,g=e[29].size+"",B,S,R,D;function C(P,M){return P[29].name!=P[0]?yt:gt}let O=C(e),I=O(e);function $(...P){return e[17](e[29],...P)}function F(P,M){return P[29].name!=P[0]?Et:wt}let Z=F(e),G=Z(e);function x(P,M){return P[29].name==P[0]?Bt:It}let Y=x(e),z=Y(e);return{key:n,first:null,c(){l=b("div"),s=b("div"),I.c(),r=V(),o=b("button"),t=b("i"),d=V(),G.c(),a=V(),c=b("div"),k=b("label"),z.c(),h=V(),f=b("div"),w=W("("),B=W(g),S=W(" words)"),this.h()},l(P){l=v(P,"DIV",{class:!0});var M=E(l);s=v(M,"DIV",{class:!0});var y=E(s);I.l(y),r=L(y),o=v(y,"BUTTON",{type:!0,class:!0,title:!0});var T=E(o);t=v(T,"I",{class:!0}),E(t).forEach(i),T.forEach(i),d=L(y),G.l(y),a=L(y),c=v(y,"DIV",{class:!0});var U=E(c);k=v(U,"LABEL",{class:!0,for:!0,title:!0});var A=E(k);z.l(A),A.forEach(i),h=L(U),f=v(U,"DIV",{class:!0});var J=E(f);w=j(J,"("),B=j(J,g),S=j(J," words)"),J.forEach(i),U.forEach(i),y.forEach(i),M.forEach(i),this.h()},h(){u(t,"class","fa-solid fa-download"),u(o,"type","button"),u(o,"class","btn download-btn svelte-1qug46v"),u(o,"title","Download backup"),u(k,"class","backup-name-label svelte-1qug46v"),u(k,"for",p=e[0]+"-restore-"+e[29].key),u(k,"title","Select backup for restore"),u(f,"class","backup-length svelte-1qug46v"),u(c,"class","backup-name svelte-1qug46v"),u(s,"class","backup-content svelte-1qug46v"),u(l,"class","backup-entry svelte-1qug46v"),this.first=l},m(P,M){N(P,l,M),m(l,s),I.m(s,null),m(s,r),m(s,o),m(o,t),m(s,d),G.m(s,null),m(s,a),m(s,c),m(c,k),z.m(k,null),m(c,h),m(c,f),m(f,w),m(f,B),m(f,S),R||(D=X(o,"click",$),R=!0)},p(P,M){e=P,O===(O=C(e))&&I?I.p(e,M):(I.d(1),I=O(e),I&&(I.c(),I.m(s,r))),Z===(Z=F(e))&&G?G.p(e,M):(G.d(1),G=Z(e),G&&(G.c(),G.m(s,a))),Y===(Y=x(e))&&z?z.p(e,M):(z.d(1),z=Y(e),z&&(z.c(),z.m(k,null))),M[0]&3&&p!==(p=e[0]+"-restore-"+e[29].key)&&u(k,"for",p),M[0]&2&&g!==(g=e[29].size+"")&&ye(B,g)},d(P){P&&i(l),I.d(),G.d(),z.d(),R=!1,D()}}}function rt(n){let e,l,s,r,o;return{c(){e=W(`Backup as:
                `),l=b("input"),this.h()},l(t){e=j(t,`Backup as:
                `),l=v(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){u(l,"id",s=n[0]+"-original-name"),u(l,"name","save-as"),u(l,"type","text"),u(l,"class","original form-control svelte-1qug46v"),u(l,"placeholder","new name"),l.required=!0},m(t,d){N(t,e,d),N(t,l,d),we(l,n[4]),r||(o=[X(l,"input",n[21]),X(l,"blur",n[22])],r=!0)},p(t,d){d[0]&1&&s!==(s=t[0]+"-original-name")&&u(l,"id",s),d[0]&16&&l.value!==t[4]&&we(l,t[4])},d(t){t&&i(e),t&&i(l),r=!1,_e(o)}}}function Dt(n){let e,l,s,r,o,t,d,a,c,k,p,h,f=n[5]&&rt(n);return{c(){e=b("div"),l=b("div"),s=b("input"),o=V(),t=b("label"),d=W("Backup current list"),c=V(),k=b("div"),f&&f.c(),this.h()},l(w){e=v(w,"DIV",{class:!0});var g=E(e);l=v(g,"DIV",{class:!0});var B=E(l);s=v(B,"INPUT",{type:!0,id:!0}),o=L(B),t=v(B,"LABEL",{for:!0});var S=E(t);d=j(S,"Backup current list"),S.forEach(i),B.forEach(i),c=L(g),k=v(g,"DIV",{});var R=E(k);f&&f.l(R),R.forEach(i),g.forEach(i),this.h()},h(){u(s,"type","checkbox"),u(s,"id",r=n[0]+"-rename-current"),u(t,"for",a=n[0]+"-rename-current"),u(l,"class","dialog-title svelte-1qug46v"),u(e,"class","original-name svelte-1qug46v")},m(w,g){N(w,e,g),m(e,l),m(l,s),s.checked=n[5],m(l,o),m(l,t),m(t,d),m(e,c),m(e,k),f&&f.m(k,null),p||(h=X(s,"change",n[20]),p=!0)},p(w,g){g[0]&1&&r!==(r=w[0]+"-rename-current")&&u(s,"id",r),g[0]&32&&(s.checked=w[5]),g[0]&1&&a!==(a=w[0]+"-rename-current")&&u(t,"for",a),w[5]?f?f.p(w,g):(f=rt(w),f.c(),f.m(k,null)):f&&(f.d(1),f=null)},d(w){w&&i(e),f&&f.d(),p=!1,h()}}}function Tt(n){let e,l,s,r,o,t,d;return{c(){e=b("input"),s=V(),r=b("input"),this.h()},l(a){e=v(a,"INPUT",{type:!0,id:!0,class:!0}),s=L(a),r=v(a,"INPUT",{type:!0,id:!0}),this.h()},h(){u(e,"type","text"),u(e,"id",l=n[0]+"-rename-backup"),u(e,"class","form-control"),u(r,"type","hidden"),u(r,"id",o=n[0]+"-rename-hidden")},m(a,c){N(a,e,c),we(e,n[6]),N(a,s,c),N(a,r,c),t||(d=[X(e,"blur",n[23]),X(e,"input",n[24])],t=!0)},p(a,c){c[0]&1&&l!==(l=a[0]+"-rename-backup")&&u(e,"id",l),c[0]&64&&e.value!==a[6]&&we(e,a[6]),c[0]&1&&o!==(o=a[0]+"-rename-hidden")&&u(r,"id",o)},d(a){a&&i(e),a&&i(s),a&&i(r),t=!1,_e(d)}}}function ot(n){let e,l,s,r;const o=[St,Nt],t=[];function d(a,c){return a[3]!=null?0:1}return e=d(n),l=t[e]=o[e](n),{c(){l.c(),s=ie()},l(a){l.l(a),s=ie()},m(a,c){t[e].m(a,c),N(a,s,c),r=!0},p(a,c){let k=e;e=d(a),e===k?t[e].p(a,c):(De(),Q(t[k],1,1,()=>{t[k]=null}),Te(),l=t[e],l?l.p(a,c):(l=t[e]=o[e](a),l.c()),K(l,1),l.m(s.parentNode,s))},i(a){r||(K(l),r=!0)},o(a){Q(l),r=!1},d(a){t[e].d(a),a&&i(s)}}}function Nt(n){let e,l,s;function r(t){n[26](t)}let o={};return n[2]!==void 0&&(o.message=n[2]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[2])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};!l&&d[0]&4&&(l=!0,a.message=t[2],Ue(()=>l=!1)),e.$set(a)},i(t){s||(K(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function St(n){let e,l,s;function r(t){n[25](t)}let o={alert_style:n[3]};return n[2]!==void 0&&(o.message=n[2]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[2])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};d[0]&8&&(a.alert_style=t[3]),!l&&d[0]&4&&(l=!0,a.message=t[2],Ue(()=>l=!1)),e.$set(a)},i(t){s||(K(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function Ut(n){let e,l,s,r,o,t,d,a,c,k,p,h,f,w,g,B,S,R,D,C=[],O=new Map,I,$,F,Z,G,x,Y,z,P,M,y,T,U,A,J,ee,te,Oe,me,ae,pe,ue,be,ce,fe,Ve,Me,ve=n[1];const Ae=_=>_[29].key;for(let _=0;_<ve.length;_+=1){let q=st(n,ve,_),le=Ae(q);O.set(le,C[_]=nt(le,q))}ae=new lt({props:{id:"backup-modal",onSubmit:n[9],submit_text:"Restore",$$slots:{default:[Dt]},$$scope:{ctx:n}}}),ue=new lt({props:{id:"rename-modal",onSubmit:n[8],onClose:n[13],submit_text:"Rename",$$slots:{default:[Tt]},$$scope:{ctx:n}}});let H=n[2]&&ot(n);return{c(){e=b("legend"),l=W("Save Backup"),s=V(),r=b("div"),o=b("form"),t=b("div"),d=b("div"),a=W(`Backup name:
                `),c=b("input"),p=V(),h=b("button"),f=W("Create Backup"),w=V(),g=b("legend"),B=W("Saved Backups"),S=V(),R=b("div"),D=b("form");for(let _=0;_<C.length;_+=1)C[_].c();I=V(),$=b("div"),F=b("button"),Z=W("Restore"),x=V(),Y=b("legend"),z=W("Upload Backup"),P=V(),M=b("div"),y=b("form"),T=b("div"),U=b("div"),A=b("input"),ee=V(),te=b("button"),Oe=W("Restore Backup"),me=V(),se(ae.$$.fragment),pe=V(),se(ue.$$.fragment),be=V(),H&&H.c(),ce=ie(),this.h()},l(_){e=v(_,"LEGEND",{class:!0});var q=E(e);l=j(q,"Save Backup"),q.forEach(i),s=L(_),r=v(_,"DIV",{class:!0});var le=E(r);o=v(le,"FORM",{});var de=E(o);t=v(de,"DIV",{class:!0});var ke=E(t);d=v(ke,"DIV",{});var Le=E(d);a=j(Le,`Backup name:
                `),c=v(Le,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),Le.forEach(i),p=L(ke),h=v(ke,"BUTTON",{class:!0});var Fe=E(h);f=j(Fe,"Create Backup"),Fe.forEach(i),ke.forEach(i),de.forEach(i),le.forEach(i),w=L(_),g=v(_,"LEGEND",{class:!0});var Ge=E(g);B=j(Ge,"Saved Backups"),Ge.forEach(i),S=L(_),R=v(_,"DIV",{class:!0});var We=E(R);D=v(We,"FORM",{id:!0});var he=E(D);for(let Re=0;Re<C.length;Re+=1)C[Re].l(he);I=L(he),$=v(he,"DIV",{class:!0});var je=E($);F=v(je,"BUTTON",{type:!0,class:!0,name:!0});var ze=E(F);Z=j(ze,"Restore"),ze.forEach(i),je.forEach(i),he.forEach(i),We.forEach(i),x=L(_),Y=v(_,"LEGEND",{class:!0});var Je=E(Y);z=j(Je,"Upload Backup"),Je.forEach(i),P=L(_),M=v(_,"DIV",{class:!0});var He=E(M);y=v(He,"FORM",{});var Ke=E(y);T=v(Ke,"DIV",{class:!0});var ge=E(T);U=v(ge,"DIV",{class:!0});var Xe=E(U);A=v(Xe,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),Xe.forEach(i),ee=L(ge),te=v(ge,"BUTTON",{class:!0});var Qe=E(te);Oe=j(Qe,"Restore Backup"),Qe.forEach(i),ge.forEach(i),Ke.forEach(i),He.forEach(i),me=L(_),ne(ae.$$.fragment,_),pe=L(_),ne(ue.$$.fragment,_),be=L(_),H&&H.l(_),ce=ie(),this.h()},h(){u(e,"class","options-group-title"),u(c,"id",k=n[0]+"-new-backup-name"),u(c,"type","text"),u(c,"class","new-backup-name form-control svelte-1qug46v"),u(c,"placeholder","new name"),u(h,"class","btn btn-primary"),u(t,"class","new-backup svelte-1qug46v"),u(r,"class","options-group"),u(g,"class","options-group-title"),u(F,"type","button"),u(F,"class","btn btn btn-danger"),u(F,"name","backups_action"),F.value="restore",u($,"class","backup-submit svelte-1qug46v"),u(D,"id",G=n[0]+"-backup-list-form"),u(R,"class","options-group"),u(Y,"class","options-group-title"),u(A,"id",J=n[0]+"-upload-backup"),u(A,"class","upload-backup form-control svelte-1qug46v"),u(A,"type","file"),u(A,"accept",".json,application/json"),u(U,"class","upload-backup-container"),u(te,"class","btn btn-danger upload-backup-btn svelte-1qug46v"),u(T,"class","new-backup svelte-1qug46v"),u(M,"class","options-group")},m(_,q){N(_,e,q),m(e,l),N(_,s,q),N(_,r,q),m(r,o),m(o,t),m(t,d),m(d,a),m(d,c),m(t,p),m(t,h),m(h,f),N(_,w,q),N(_,g,q),m(g,B),N(_,S,q),N(_,R,q),m(R,D);for(let le=0;le<C.length;le+=1)C[le].m(D,null);m(D,I),m(D,$),m($,F),m(F,Z),N(_,x,q),N(_,Y,q),m(Y,z),N(_,P,q),N(_,M,q),m(M,y),m(y,T),m(T,U),m(U,A),m(T,ee),m(T,te),m(te,Oe),N(_,me,q),re(ae,_,q),N(_,pe,q),re(ue,_,q),N(_,be,q),H&&H.m(_,q),N(_,ce,q),fe=!0,Ve||(Me=[X(c,"blur",n[15]),X(o,"submit",n[10]),X(F,"click",qt),X(y,"submit",n[19])],Ve=!0)},p(_,q){(!fe||q[0]&1&&k!==(k=_[0]+"-new-backup-name"))&&u(c,"id",k),q[0]&20483&&(ve=_[1],C=_t(C,q,Ae,1,_,ve,O,D,mt,nt,I,st)),(!fe||q[0]&1&&G!==(G=_[0]+"-backup-list-form"))&&u(D,"id",G),(!fe||q[0]&1&&J!==(J=_[0]+"-upload-backup"))&&u(A,"id",J);const le={};q[0]&49|q[1]&2&&(le.$$scope={dirty:q,ctx:_}),ae.$set(le);const de={};q[0]&65|q[1]&2&&(de.$$scope={dirty:q,ctx:_}),ue.$set(de),_[2]?H?(H.p(_,q),q[0]&4&&K(H,1)):(H=ot(_),H.c(),K(H,1),H.m(ce.parentNode,ce)):H&&(De(),Q(H,1,1,()=>{H=null}),Te())},i(_){fe||(K(ae.$$.fragment,_),K(ue.$$.fragment,_),K(H),fe=!0)},o(_){Q(ae.$$.fragment,_),Q(ue.$$.fragment,_),Q(H),fe=!1},d(_){_&&i(e),_&&i(s),_&&i(r),_&&i(w),_&&i(g),_&&i(S),_&&i(R);for(let q=0;q<C.length;q+=1)C[q].d();_&&i(x),_&&i(Y),_&&i(P),_&&i(M),_&&i(me),oe(ae,_),_&&i(pe),oe(ue,_),_&&i(be),H&&H.d(_),_&&i(ce),Ve=!1,_e(Me)}}}function qt(n){const e=document.getElementById("backup-modal");e&&(e.showModal(),n.preventDefault())}function Ct(n,e,l){let{key:s}=e,r=[],o,t,d="",a=!0,c="";function k(){for(let y=0;y<localStorage.length;y++){const T=localStorage.key(y);if(T){let U=$e(T);r.push({name:T,key:y,size:U.words.length})}}}k();function p(){l(1,r=[]),k(),l(1,r)}function h(y,T){const U=document.getElementById(T);if(!U)return!1;if(U.value!=""){U.setCustomValidity("");{const A=localStorage.getItem(U.value.toLowerCase());if(U.value.toLowerCase()==s.toLowerCase())U.setCustomValidity(`'${s}' is a reserved name`);else if(A!=null)U.setCustomValidity("Backup exists");else return!0}}return!1}function f(y,T){if(!h(T,s+"-rename-backup"))return console.log("invalid name:"+c),T.preventDefault(),!1;const U=document.getElementById(s+"-rename-hidden"),A=c.toLowerCase(),J=localStorage.getItem(A);if(!U||!U.value||!c||J!=null)return!1;const ee=U.value.toLowerCase(),te=localStorage.getItem(ee);return te?(localStorage.setItem(A,te),localStorage.removeItem(ee),p(),!0):!1}function w(y,T){if(!a&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),T.preventDefault(),!1;if(a&&!h(T,s+"-original-name"))return T.preventDefault(),!1;const U=document.getElementById(s+"-backup-list-form");if(U){const A=U.elements.namedItem("btn-edit"),J=localStorage.getItem(s.toLowerCase());if(!A||!J)return!1;const ee=localStorage.getItem(A.value);if(!ee)return!1;a&&localStorage.setItem(d,J),localStorage.setItem(s,ee),l(2,o="Backup restored"),l(3,t="info"),p()}return!0}function g(y){const T=document.getElementById(s+"-new-backup-name");if(!T||!h(y,s+"-new-backup-name")){y.preventDefault();return}const U=localStorage.getItem(s.toLowerCase());U&&(localStorage.setItem(T.value.toLowerCase(),U),l(2,o="Backup created"),l(3,t="info"),p(),T.value="")}function B(y){y.preventDefault();let T=document.getElementById(`${s}-upload-backup`);if(!T||!T.files||!T.files[0]){l(2,o="Please select a file"),l(3,t="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const U=new FileReader;U.onload=A=>{if(!U.result){l(2,o="Upload failed"),l(3,t="error");return}let J=U.result,ee=JSON.parse(J);if(console.log(Ye(ee)),!Ye(ee)){l(2,o="Invalid backup file."),l(3,t="error");return}localStorage.setItem(s,J),l(2,o="Backup restored"),l(3,t="info");let te=document.getElementById(`${s}-upload-backup`);te&&(te.value=""),p()},U.readAsText(T.files[0])}function S(y,T){const U=document.getElementById("rename-modal");if(!U)return;const A=document.getElementById(s+"-rename-backup");A&&(A.placeholder=T);const J=document.getElementById(s+"-rename-hidden");J&&(J.value=T,U.showModal(),y.preventDefault())}function R(y,T){const U=document.getElementById(s+"-rename-backup");U&&(U.placeholder="")}function D(y,T){return y.preventDefault(),window.confirm("Delete backup '"+T+"'?")?(l(2,o="Backup deleted"),l(3,t="error"),localStorage.removeItem(T),p(),!0):!1}const C=y=>h(y,s+"-new-backup-name"),O=(y,T)=>D(T,y.name),I=(y,T)=>pt(y.name),$=(y,T)=>S(T,y.name),F=y=>B(y);function Z(){a=this.checked,l(5,a)}function G(){d=this.value,l(4,d)}const x=y=>h(y,s+"-original-name"),Y=y=>h(y,s+"-rename-backup");function z(){c=this.value,l(6,c)}function P(y){o=y,l(2,o)}function M(y){o=y,l(2,o)}return n.$$set=y=>{"key"in y&&l(0,s=y.key)},[s,r,o,t,d,a,c,h,f,w,g,B,S,R,D,C,O,I,$,F,Z,G,x,Y,z,P,M]}class Ot extends Ee{constructor(e){super(),Ie(this,e,Ct,Ut,Be,{key:0},null,[-1,-1])}}function at(n){let e,l,s,r;const o=[Lt,Vt],t=[];function d(a,c){return a[2]!=null?0:1}return e=d(n),l=t[e]=o[e](n),{c(){l.c(),s=ie()},l(a){l.l(a),s=ie()},m(a,c){t[e].m(a,c),N(a,s,c),r=!0},p(a,c){let k=e;e=d(a),e===k?t[e].p(a,c):(De(),Q(t[k],1,1,()=>{t[k]=null}),Te(),l=t[e],l?l.p(a,c):(l=t[e]=o[e](a),l.c()),K(l,1),l.m(s.parentNode,s))},i(a){r||(K(l),r=!0)},o(a){Q(l),r=!1},d(a){t[e].d(a),a&&i(s)}}}function Vt(n){let e,l,s;function r(t){n[9](t)}let o={};return n[1]!==void 0&&(o.message=n[1]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[1])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};!l&&d&2&&(l=!0,a.message=t[1],Ue(()=>l=!1)),e.$set(a)},i(t){s||(K(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function Lt(n){let e,l,s;function r(t){n[8](t)}let o={alert_style:n[2]};return n[1]!==void 0&&(o.message=n[1]),e=new Ce({props:o}),Ne.push(()=>Se(e,"message",r,n[1])),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,d){re(e,t,d),s=!0},p(t,d){const a={};d&4&&(a.alert_style=t[2]),!l&&d&2&&(l=!0,a.message=t[1],Ue(()=>l=!1)),e.$set(a)},i(t){s||(K(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){oe(e,t)}}}function Rt(n){let e,l,s,r,o,t,d,a,c,k,p,h,f,w,g,B,S,R,D,C,O=n[1]&&at(n);return{c(){e=b("legend"),l=W("Options"),s=V(),r=b("div"),o=b("div"),t=b("button"),d=W("Find new definitions"),a=V(),c=b("div"),k=b("button"),p=W("Refresh all defintions"),h=V(),f=b("div"),w=b("button"),g=W("Clear words"),B=V(),O&&O.c(),S=ie(),this.h()},l(I){e=v(I,"LEGEND",{class:!0});var $=E(e);l=j($,"Options"),$.forEach(i),s=L(I),r=v(I,"DIV",{class:!0});var F=E(r);o=v(F,"DIV",{class:!0});var Z=E(o);t=v(Z,"BUTTON",{type:!0,class:!0});var G=E(t);d=j(G,"Find new definitions"),G.forEach(i),Z.forEach(i),a=L(F),c=v(F,"DIV",{class:!0});var x=E(c);k=v(x,"BUTTON",{type:!0,class:!0});var Y=E(k);p=j(Y,"Refresh all defintions"),Y.forEach(i),x.forEach(i),h=L(F),f=v(F,"DIV",{class:!0});var z=E(f);w=v(z,"BUTTON",{type:!0,class:!0});var P=E(w);g=j(P,"Clear words"),P.forEach(i),z.forEach(i),F.forEach(i),B=L(I),O&&O.l(I),S=ie(),this.h()},h(){u(e,"class","options-group-title"),u(t,"type","button"),u(t,"class","btn btn-primary"),u(o,"class","option-item svelte-vbnsn7"),u(k,"type","button"),u(k,"class","btn btn-primary"),u(c,"class","option-item svelte-vbnsn7"),u(w,"type","button"),u(w,"class","btn btn-danger"),u(f,"class","option-item svelte-vbnsn7"),u(r,"class","options-group")},m(I,$){N(I,e,$),m(e,l),N(I,s,$),N(I,r,$),m(r,o),m(o,t),m(t,d),m(r,a),m(r,c),m(c,k),m(k,p),m(r,h),m(r,f),m(f,w),m(w,g),N(I,B,$),O&&O.m(I,$),N(I,S,$),R=!0,D||(C=[X(t,"click",n[6]),X(k,"click",n[7]),X(w,"click",n[3])],D=!0)},p(I,[$]){I[1]?O?(O.p(I,$),$&2&&K(O,1)):(O=at(I),O.c(),K(O,1),O.m(S.parentNode,S)):O&&(De(),Q(O,1,1,()=>{O=null}),Te())},i(I){R||(K(O),R=!0)},o(I){Q(O),R=!1},d(I){I&&i(e),I&&i(s),I&&i(r),I&&i(B),O&&O.d(I),I&&i(S),D=!1,_e(C)}}}function Pt(n,e,l){let{key:s}=e,r,o;function t(){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const f=bt(s);Pe(f)}function d(f){function w(D,C){return D.dict_def=C.dict_def,!0}if(!f)return;let g=$e(f);if(!window.confirm(`Refresh all ${g.words.length} words?

This will overwrite existing definitions.`))return;let B=0,S=[],R=g.words.map(async D=>{try{const C=await Ze.default.lookup(D.word);C?(D.dict_def=C,B+=1):S.push(D.word)}finally{D.cache=xe(D),et(g,D,w)}});Promise.allSettled(R).then(()=>{S.length==0?(l(1,r=`Updated ${B} words`),l(2,o="info")):(l(2,o="error"),l(1,r=`Failed to update ${S.length} words.  ${S}`)),Pe(g)})}function a(f){function w(D,C){return D.dict_def=C.dict_def,!0}if(!f||!window.confirm("Lookup definitions for words without definitions?"))return;let g=$e(f),B=0,S=[],R=g.words.filter(D=>D.dict_def===void 0).map(async D=>{try{const C=await Ze.default.lookup(D.word);C?(D.dict_def=C,B+=1):S.push(D.word)}finally{D.cache=xe(D),et(g,D,w)}});Promise.allSettled(R).then(()=>{S.length==0?(l(1,r=`Updated ${B} words`),l(2,o="info")):(l(2,o="error"),l(1,r=`Failed to update ${S.length} words.<br>${S}`)),Pe(g)})}const c=()=>a(s),k=()=>d(s);function p(f){r=f,l(1,r)}function h(f){r=f,l(1,r)}return n.$$set=f=>{"key"in f&&l(0,s=f.key)},[s,r,o,t,d,a,c,k,p,h]}class $t extends Ee{constructor(e){super(),Ie(this,e,Pt,Rt,Be,{key:0})}}function Mt(n){let e,l,s,r,o,t,d,a,c,k;return e=new vt({props:{current:"options"}}),d=new Ot({props:{key:"words"}}),c=new $t({props:{key:"words"}}),{c(){se(e.$$.fragment),l=V(),s=b("h1"),r=W("Options"),o=V(),t=b("div"),se(d.$$.fragment),a=V(),se(c.$$.fragment),this.h()},l(p){ne(e.$$.fragment,p),l=L(p),s=v(p,"H1",{});var h=E(s);r=j(h,"Options"),h.forEach(i),o=L(p),t=v(p,"DIV",{class:!0});var f=E(t);ne(d.$$.fragment,f),a=L(f),ne(c.$$.fragment,f),f.forEach(i),this.h()},h(){u(t,"class","options-page")},m(p,h){re(e,p,h),N(p,l,h),N(p,s,h),m(s,r),N(p,o,h),N(p,t,h),re(d,t,null),m(t,a),re(c,t,null),k=!0},p:qe,i(p){k||(K(e.$$.fragment,p),K(d.$$.fragment,p),K(c.$$.fragment,p),k=!0)},o(p){Q(e.$$.fragment,p),Q(d.$$.fragment,p),Q(c.$$.fragment,p),k=!1},d(p){oe(e,p),p&&i(l),p&&i(s),p&&i(o),p&&i(t),oe(d),oe(c)}}}class jt extends Ee{constructor(e){super(),Ie(this,e,null,Mt,Be,{})}}export{jt as default};
