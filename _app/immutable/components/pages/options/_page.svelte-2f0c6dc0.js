import{S as Pe,i as $e,s as Ae,C as ct,k as m,a as L,q as z,l as b,m as k,c as P,r as W,h as i,n as o,b as j,G as f,M as X,_ as ft,D as dt,E as pt,F as _t,u as Re,f as Z,t as se,P as Ue,w as pe,e as ge,x as _e,y as me,X as mt,g as Me,d as Fe,z as be,R as it,L as Le,$ as bt,J as ze,K as We,O as qe,B as Ce}from"../../../chunks/index-e56e8534.js";import{q as ht,f as vt,u as kt,d as Be,v as Ne,x as gt,l as ke,y as yt,A as xe,o as et,n as tt}from"../../../chunks/words-9970dd32.js";import{A as He}from"../../../chunks/Alert-392b790a.js";import{N as wt}from"../../../chunks/Nav-34f01931.js";function Et(r){let e,l,s,n,a,t,c,u,d,h,_,y,p;const E=r[9].default,N=ct(E,r,r[8],null);return{c(){e=m("dialog"),l=m("div"),s=m("form"),N&&N.c(),n=L(),a=m("div"),t=m("button"),c=z(r[0]),u=L(),d=m("button"),h=z(r[1]),this.h()},l(D){e=b(D,"DIALOG",{class:!0,id:!0});var g=k(e);l=b(g,"DIV",{class:!0});var O=k(l);s=b(O,"FORM",{method:!0});var H=k(s);N&&N.l(H),n=P(H),a=b(H,"DIV",{class:!0});var A=k(a);t=b(A,"BUTTON",{type:!0,class:!0});var V=k(t);c=W(V,r[0]),V.forEach(i),u=P(A),d=b(A,"BUTTON",{type:!0,class:!0});var U=k(d);h=W(U,r[1]),U.forEach(i),A.forEach(i),H.forEach(i),O.forEach(i),g.forEach(i),this.h()},h(){o(t,"type","submit"),o(t,"class","btn btn-primary"),o(d,"type","button"),o(d,"class","btn btn-secondary"),o(a,"class","dialog-controls svelte-1d7zp56"),o(s,"method","dialog"),o(l,"class","modal-wrapper svelte-1d7zp56"),o(e,"class","modal svelte-1d7zp56"),o(e,"id",r[2])},m(D,g){j(D,e,g),f(e,l),f(l,s),N&&N.m(s,null),f(s,n),f(s,a),f(a,t),f(t,c),f(a,u),f(a,d),f(d,h),_=!0,y||(p=[X(d,"click",r[3]),X(s,"submit",r[5]),X(e,"click",ft(r[3])),X(e,"close",r[4])],y=!0)},p(D,[g]){N&&N.p&&(!_||g&256)&&dt(N,E,D,D[8],_?_t(E,D[8],g,null):pt(D[8]),null),(!_||g&1)&&Re(c,D[0]),(!_||g&2)&&Re(h,D[1]),(!_||g&4)&&o(e,"id",D[2])},i(D){_||(Z(N,D),_=!0)},o(D){se(N,D),_=!1},d(D){D&&i(e),N&&N.d(D),y=!1,Ue(p)}}}function lt(r){r.querySelectorAll("form").forEach(e=>{e.reset()})}function It(r,e,l){let{$$slots:s={},$$scope:n}=e,{onClose:a=()=>{}}=e,{onSubmit:t}=e,{submit_text:c="Submit"}=e,{cancel_text:u="Cancel"}=e,{id:d}=e;function h(p){const E=document.getElementById(d);E&&(a(E,p),lt(E),E.close())}function _(p){const E=document.getElementById(d);E&&(a(E,p),lt(E))}function y(p){const E=document.getElementById(d);if(!E){p.preventDefault();return}t(E,p)?E.close():p.preventDefault()}return r.$$set=p=>{"onClose"in p&&l(6,a=p.onClose),"onSubmit"in p&&l(7,t=p.onSubmit),"submit_text"in p&&l(0,c=p.submit_text),"cancel_text"in p&&l(1,u=p.cancel_text),"id"in p&&l(2,d=p.id),"$$scope"in p&&l(8,n=p.$$scope)},[c,u,d,h,_,y,a,t,n,s]}class st extends Pe{constructor(e){super(),$e(this,e,It,Et,Ae,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function nt(r,e,l){const s=r.slice();return s[30]=e[l],s}function Bt(r){let e,l;return{c(){e=m("button"),l=m("i"),this.h()},l(s){e=b(s,"BUTTON",{type:!0,class:!0});var n=k(e);l=b(n,"I",{class:!0}),k(l).forEach(i),n.forEach(i),this.h()},h(){o(l,"class","fa-solid fa-xmark"),o(e,"type","button"),o(e,"class","remove-btn svelte-jkpnhg"),e.disabled=!0},m(s,n){j(s,e,n),f(e,l)},p:Ce,d(s){s&&i(e)}}}function Tt(r){let e,l,s,n;function a(...t){return r[17](r[30],...t)}return{c(){e=m("button"),l=m("i"),this.h()},l(t){e=b(t,"BUTTON",{type:!0,class:!0,title:!0});var c=k(e);l=b(c,"I",{class:!0}),k(l).forEach(i),c.forEach(i),this.h()},h(){o(l,"class","fa-solid fa-xmark"),o(e,"type","button"),o(e,"class","remove-btn svelte-jkpnhg"),o(e,"title","Delete backup")},m(t,c){j(t,e,c),f(e,l),s||(n=X(e,"click",a),s=!0)},p(t,c){r=t},d(t){t&&i(e),s=!1,n()}}}function Dt(r){let e,l,s,n;return{c(){e=m("button"),l=m("i"),s=L(),n=m("input"),this.h()},l(a){e=b(a,"BUTTON",{type:!0,class:!0});var t=k(e);l=b(t,"I",{class:!0}),k(l).forEach(i),t.forEach(i),s=P(a),n=b(a,"INPUT",{type:!0,class:!0}),this.h()},h(){o(l,"class","fa-solid fa-pen"),o(e,"type","button"),e.disabled=!0,o(e,"class","btn rename-btn svelte-jkpnhg"),o(n,"type","radio"),o(n,"class","btn-edit-current svelte-jkpnhg"),n.disabled=!0},m(a,t){j(a,e,t),f(e,l),j(a,s,t),j(a,n,t)},p:Ce,d(a){a&&i(e),a&&i(s),a&&i(n)}}}function jt(r){let e,l,s,n,a,t,c,u,d,h;function _(...y){return r[19](r[30],...y)}return{c(){e=m("button"),l=m("i"),a=L(),t=m("input"),this.h()},l(y){e=b(y,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var p=k(e);l=b(p,"I",{class:!0}),k(l).forEach(i),p.forEach(i),a=P(y),t=b(y,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){o(l,"class","fa-solid fa-pen"),o(e,"type","submit"),o(e,"id",s=r[0]+"-backup-rename-"+r[30].name),o(e,"title","Rename"),e.value=n=r[30].name,o(e,"class","btn rename-btn svelte-jkpnhg"),o(t,"type","radio"),o(t,"name","btn-edit"),o(t,"class","btn-edit svelte-jkpnhg"),o(t,"title","Select this backup for restore"),o(t,"id",c=r[0]+"-restore-"+r[30].key),t.required=!0,t.value=u=r[30].name},m(y,p){j(y,e,p),f(e,l),j(y,a,p),j(y,t,p),d||(h=X(e,"click",_),d=!0)},p(y,p){r=y,p[0]&3&&s!==(s=r[0]+"-backup-rename-"+r[30].name)&&o(e,"id",s),p[0]&2&&n!==(n=r[30].name)&&(e.value=n),p[0]&3&&c!==(c=r[0]+"-restore-"+r[30].key)&&o(t,"id",c),p[0]&2&&u!==(u=r[30].name)&&(t.value=u)},d(y){y&&i(e),y&&i(a),y&&i(t),d=!1,h()}}}function Nt(r){let e=r[30].name+"",l;return{c(){l=z(e)},l(s){l=W(s,e)},m(s,n){j(s,l,n)},p(s,n){n[0]&2&&e!==(e=s[30].name+"")&&Re(l,e)},d(s){s&&i(l)}}}function Ut(r){let e,l;return{c(){e=m("div"),l=z("Current"),this.h()},l(s){e=b(s,"DIV",{class:!0});var n=k(e);l=W(n,"Current"),n.forEach(i),this.h()},h(){o(e,"class","backup-current svelte-jkpnhg")},m(s,n){j(s,e,n),f(e,l)},p:Ce,d(s){s&&i(e)}}}function rt(r,e){let l,s,n,a,t,c,u,d,h,_,y,p,E,N=e[30].size+"",D,g,O,H;function A(S,q){return S[30].name!=S[0]?Tt:Bt}let V=A(e),U=V(e);function R(...S){return e[18](e[30],...S)}function J(S,q){return S[30].name!=S[0]?jt:Dt}let te=J(e),$=te(e);function re(S,q){return S[30].name==S[0]?Ut:Nt}let x=re(e),Y=x(e);return{key:r,first:null,c(){l=m("div"),s=m("div"),U.c(),n=L(),a=m("button"),t=m("i"),c=L(),$.c(),u=L(),d=m("div"),h=m("label"),Y.c(),y=L(),p=m("div"),E=z("("),D=z(N),g=z(" words)"),this.h()},l(S){l=b(S,"DIV",{class:!0});var q=k(l);s=b(q,"DIV",{class:!0});var Q=k(s);U.l(Q),n=P(Q),a=b(Q,"BUTTON",{type:!0,class:!0,title:!0});var B=k(a);t=b(B,"I",{class:!0}),k(t).forEach(i),B.forEach(i),c=P(Q),$.l(Q),u=P(Q),d=b(Q,"DIV",{class:!0});var w=k(d);h=b(w,"LABEL",{class:!0,for:!0,title:!0});var T=k(h);Y.l(T),T.forEach(i),y=P(w),p=b(w,"DIV",{class:!0});var M=k(p);E=W(M,"("),D=W(M,N),g=W(M," words)"),M.forEach(i),w.forEach(i),Q.forEach(i),q.forEach(i),this.h()},h(){o(t,"class","fa-solid fa-download"),o(a,"type","button"),o(a,"class","btn download-btn svelte-jkpnhg"),o(a,"title","Download backup"),o(h,"class","backup-name-label svelte-jkpnhg"),o(h,"for",_=e[0]+"-restore-"+e[30].key),o(h,"title","Select backup for restore"),o(p,"class","backup-length svelte-jkpnhg"),o(d,"class","backup-name svelte-jkpnhg"),o(s,"class","backup-content svelte-jkpnhg"),o(l,"class","backup-entry svelte-jkpnhg"),this.first=l},m(S,q){j(S,l,q),f(l,s),U.m(s,null),f(s,n),f(s,a),f(a,t),f(s,c),$.m(s,null),f(s,u),f(s,d),f(d,h),Y.m(h,null),f(d,y),f(d,p),f(p,E),f(p,D),f(p,g),O||(H=X(a,"click",R),O=!0)},p(S,q){e=S,V===(V=A(e))&&U?U.p(e,q):(U.d(1),U=V(e),U&&(U.c(),U.m(s,n))),te===(te=J(e))&&$?$.p(e,q):($.d(1),$=te(e),$&&($.c(),$.m(s,u))),x===(x=re(e))&&Y?Y.p(e,q):(Y.d(1),Y=x(e),Y&&(Y.c(),Y.m(h,null))),q[0]&3&&_!==(_=e[0]+"-restore-"+e[30].key)&&o(h,"for",_),q[0]&2&&N!==(N=e[30].size+"")&&Re(D,N)},d(S){S&&i(l),U.d(),$.d(),Y.d(),O=!1,H()}}}function ot(r){let e,l,s,n,a;return{c(){e=z(`Backup as:
                `),l=m("input"),this.h()},l(t){e=W(t,`Backup as:
                `),l=b(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){o(l,"id",s=r[0]+"-original-name"),o(l,"name","save-as"),o(l,"type","text"),o(l,"class","original form-control svelte-jkpnhg"),o(l,"placeholder","new name"),l.required=!0},m(t,c){j(t,e,c),j(t,l,c),Le(l,r[4]),n||(a=[X(l,"input",r[22]),X(l,"blur",r[23])],n=!0)},p(t,c){c[0]&1&&s!==(s=t[0]+"-original-name")&&o(l,"id",s),c[0]&16&&l.value!==t[4]&&Le(l,t[4])},d(t){t&&i(e),t&&i(l),n=!1,Ue(a)}}}function Ct(r){let e,l,s,n,a,t,c,u,d,h,_,y,p=r[5]&&ot(r);return{c(){e=m("div"),l=m("div"),s=m("input"),a=L(),t=m("label"),c=z("Backup current list"),d=L(),h=m("div"),p&&p.c(),this.h()},l(E){e=b(E,"DIV",{class:!0});var N=k(e);l=b(N,"DIV",{class:!0});var D=k(l);s=b(D,"INPUT",{type:!0,id:!0}),a=P(D),t=b(D,"LABEL",{for:!0});var g=k(t);c=W(g,"Backup current list"),g.forEach(i),D.forEach(i),d=P(N),h=b(N,"DIV",{});var O=k(h);p&&p.l(O),O.forEach(i),N.forEach(i),this.h()},h(){o(s,"type","checkbox"),o(s,"id",n=r[0]+"-rename-current"),o(t,"for",u=r[0]+"-rename-current"),o(l,"class","dialog-title svelte-jkpnhg"),o(e,"class","original-name svelte-jkpnhg")},m(E,N){j(E,e,N),f(e,l),f(l,s),s.checked=r[5],f(l,a),f(l,t),f(t,c),f(e,d),f(e,h),p&&p.m(h,null),_||(y=X(s,"change",r[21]),_=!0)},p(E,N){N[0]&1&&n!==(n=E[0]+"-rename-current")&&o(s,"id",n),N[0]&32&&(s.checked=E[5]),N[0]&1&&u!==(u=E[0]+"-rename-current")&&o(t,"for",u),E[5]?p?p.p(E,N):(p=ot(E),p.c(),p.m(h,null)):p&&(p.d(1),p=null)},d(E){E&&i(e),p&&p.d(),_=!1,y()}}}function St(r){let e,l,s,n,a,t,c;return{c(){e=m("input"),s=L(),n=m("input"),this.h()},l(u){e=b(u,"INPUT",{type:!0,id:!0,class:!0}),s=P(u),n=b(u,"INPUT",{type:!0,id:!0}),this.h()},h(){o(e,"type","text"),o(e,"id",l=r[0]+"-rename-backup"),o(e,"class","form-control"),o(n,"type","hidden"),o(n,"id",a=r[0]+"-rename-hidden")},m(u,d){j(u,e,d),Le(e,r[6]),j(u,s,d),j(u,n,d),t||(c=[X(e,"blur",r[24]),X(e,"input",r[25])],t=!0)},p(u,d){d[0]&1&&l!==(l=u[0]+"-rename-backup")&&o(e,"id",l),d[0]&64&&e.value!==u[6]&&Le(e,u[6]),d[0]&1&&a!==(a=u[0]+"-rename-hidden")&&o(n,"id",a)},d(u){u&&i(e),u&&i(s),u&&i(n),t=!1,Ue(c)}}}function at(r){let e,l,s,n;const a=[Vt,Ot],t=[];function c(u,d){return u[3]!=null?0:1}return e=c(r),l=t[e]=a[e](r),{c(){l.c(),s=ge()},l(u){l.l(u),s=ge()},m(u,d){t[e].m(u,d),j(u,s,d),n=!0},p(u,d){let h=e;e=c(u),e===h?t[e].p(u,d):(Me(),se(t[h],1,1,()=>{t[h]=null}),Fe(),l=t[e],l?l.p(u,d):(l=t[e]=a[e](u),l.c()),Z(l,1),l.m(s.parentNode,s))},i(u){n||(Z(l),n=!0)},o(u){se(l),n=!1},d(u){t[e].d(u),u&&i(s)}}}function Ot(r){let e,l,s;function n(t){r[27](t)}let a={};return r[2]!==void 0&&(a.message=r[2]),e=new He({props:a}),ze.push(()=>We(e,"message",n,r[2])),{c(){pe(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};!l&&c[0]&4&&(l=!0,u.message=t[2],qe(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Vt(r){let e,l,s;function n(t){r[26](t)}let a={alert_style:r[3]};return r[2]!==void 0&&(a.message=r[2]),e=new He({props:a}),ze.push(()=>We(e,"message",n,r[2])),{c(){pe(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};c[0]&8&&(u.alert_style=t[3]),!l&&c[0]&4&&(l=!0,u.message=t[2],qe(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Rt(r){let e,l,s,n,a,t,c,u,d,h,_,y,p,E,N,D,g,O,H,A,V,U=[],R=new Map,J,te,$,re,x,Y,S,q,Q,B,w,T,M,le,ae,ne,ue,ye,ie,oe,F,I,G,ce,he,de,we=r[1];const Te=v=>v[30].key;for(let v=0;v<we.length;v+=1){let C=nt(r,we,v),ee=Te(C);R.set(ee,U[v]=rt(ee,C))}ie=new st({props:{id:"backup-modal",onSubmit:r[9],submit_text:"Restore",$$slots:{default:[Ct]},$$scope:{ctx:r}}}),F=new st({props:{id:"rename-modal",onSubmit:r[8],onClose:r[14],submit_text:"Rename",$$slots:{default:[St]},$$scope:{ctx:r}}});let K=r[2]&&at(r);return{c(){e=m("h2"),l=z("Backups"),s=L(),n=m("div"),a=m("div"),t=m("h3"),c=z("Create Backup"),u=L(),d=m("form"),h=m("div"),_=m("input"),p=L(),E=m("button"),N=z("Create Backup"),D=L(),g=m("div"),O=m("h3"),H=z("Restore Backup"),A=L(),V=m("form");for(let v=0;v<U.length;v+=1)U[v].c();J=L(),te=m("div"),$=m("button"),re=z("Restore"),Y=L(),S=m("div"),q=m("h3"),Q=z("Upload Backup"),B=L(),w=m("form"),T=m("div"),M=m("input"),ae=L(),ne=m("button"),ue=z("Restore Backup"),ye=L(),pe(ie.$$.fragment),oe=L(),pe(F.$$.fragment),I=L(),K&&K.c(),G=ge(),this.h()},l(v){e=b(v,"H2",{class:!0,id:!0});var C=k(e);l=W(C,"Backups"),C.forEach(i),s=P(v),n=b(v,"DIV",{class:!0});var ee=k(n);a=b(ee,"DIV",{class:!0});var fe=k(a);t=b(fe,"H3",{class:!0,id:!0});var De=k(t);c=W(De,"Create Backup"),De.forEach(i),u=P(fe),d=b(fe,"FORM",{class:!0});var Ee=k(d);h=b(Ee,"DIV",{class:!0});var ve=k(h);_=b(ve,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),p=P(ve),E=b(ve,"BUTTON",{class:!0});var je=k(E);N=W(je,"Create Backup"),je.forEach(i),ve.forEach(i),Ee.forEach(i),fe.forEach(i),D=P(ee),g=b(ee,"DIV",{class:!0});var Ie=k(g);O=b(Ie,"H3",{class:!0,id:!0});var Je=k(O);H=W(Je,"Restore Backup"),Je.forEach(i),A=P(Ie),V=b(Ie,"FORM",{id:!0,class:!0});var Se=k(V);for(let Ge=0;Ge<U.length;Ge+=1)U[Ge].l(Se);J=P(Se),te=b(Se,"DIV",{class:!0});var Ke=k(te);$=b(Ke,"BUTTON",{type:!0,class:!0,name:!0});var Xe=k($);re=W(Xe,"Restore"),Xe.forEach(i),Ke.forEach(i),Se.forEach(i),Ie.forEach(i),Y=P(ee),S=b(ee,"DIV",{class:!0});var Oe=k(S);q=b(Oe,"H3",{class:!0,id:!0});var Qe=k(q);Q=W(Qe,"Upload Backup"),Qe.forEach(i),B=P(Oe),w=b(Oe,"FORM",{class:!0});var Ye=k(w);T=b(Ye,"DIV",{class:!0});var Ve=k(T);M=b(Ve,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),ae=P(Ve),ne=b(Ve,"BUTTON",{class:!0});var Ze=k(ne);ue=W(Ze,"Restore Backup"),Ze.forEach(i),Ve.forEach(i),Ye.forEach(i),Oe.forEach(i),ee.forEach(i),ye=P(v),_e(ie.$$.fragment,v),oe=P(v),_e(F.$$.fragment,v),I=P(v),K&&K.l(v),G=ge(),this.h()},h(){o(e,"class","options-group-title"),o(e,"id","create-backup"),o(t,"class","options-group-title svelte-jkpnhg"),o(t,"id","create-backup"),o(_,"id",y=r[0]+"-new-backup-name"),o(_,"type","text"),o(_,"class","new-backup-name form-control svelte-jkpnhg"),o(_,"placeholder","new name"),o(E,"class","create-backup btn btn-primary svelte-jkpnhg"),o(h,"class","new-backup svelte-jkpnhg"),o(d,"class","svelte-jkpnhg"),o(a,"class","backup-group svelte-jkpnhg"),o(O,"class","options-group-title svelte-jkpnhg"),o(O,"id","backups"),o($,"type","button"),o($,"class","btn btn-danger"),o($,"name","backups_action"),$.value="restore",o(te,"class","backup-submit svelte-jkpnhg"),o(V,"id",x=r[0]+"-backup-list-form"),o(V,"class","svelte-jkpnhg"),o(g,"class","backup-group svelte-jkpnhg"),o(q,"class","options-group-title svelte-jkpnhg"),o(q,"id","upload-backup"),o(M,"id",le=r[0]+"-upload-backup"),o(M,"class","upload-backup form-control svelte-jkpnhg"),o(M,"type","file"),o(M,"accept",".json,application/json"),o(ne,"class","btn btn-danger upload-backup-btn svelte-jkpnhg"),o(T,"class","new-backup svelte-jkpnhg"),o(w,"class","svelte-jkpnhg"),o(S,"class","backup-group svelte-jkpnhg"),o(n,"class","options-group")},m(v,C){j(v,e,C),f(e,l),j(v,s,C),j(v,n,C),f(n,a),f(a,t),f(t,c),f(a,u),f(a,d),f(d,h),f(h,_),f(h,p),f(h,E),f(E,N),f(n,D),f(n,g),f(g,O),f(O,H),f(g,A),f(g,V);for(let ee=0;ee<U.length;ee+=1)U[ee].m(V,null);f(V,J),f(V,te),f(te,$),f($,re),f(n,Y),f(n,S),f(S,q),f(q,Q),f(S,B),f(S,w),f(w,T),f(T,M),f(T,ae),f(T,ne),f(ne,ue),j(v,ye,C),me(ie,v,C),j(v,oe,C),me(F,v,C),j(v,I,C),K&&K.m(v,C),j(v,G,C),ce=!0,he||(de=[X(_,"blur",r[16]),X(d,"submit",r[10]),X($,"click",r[12]),X(w,"submit",r[20])],he=!0)},p(v,C){(!ce||C[0]&1&&y!==(y=v[0]+"-new-backup-name"))&&o(_,"id",y),C[0]&40963&&(we=v[1],U=mt(U,C,Te,1,v,we,R,V,bt,rt,J,nt)),(!ce||C[0]&1&&x!==(x=v[0]+"-backup-list-form"))&&o(V,"id",x),(!ce||C[0]&1&&le!==(le=v[0]+"-upload-backup"))&&o(M,"id",le);const ee={};C[0]&49|C[1]&4&&(ee.$$scope={dirty:C,ctx:v}),ie.$set(ee);const fe={};C[0]&65|C[1]&4&&(fe.$$scope={dirty:C,ctx:v}),F.$set(fe),v[2]?K?(K.p(v,C),C[0]&4&&Z(K,1)):(K=at(v),K.c(),Z(K,1),K.m(G.parentNode,G)):K&&(Me(),se(K,1,1,()=>{K=null}),Fe())},i(v){ce||(Z(ie.$$.fragment,v),Z(F.$$.fragment,v),Z(K),ce=!0)},o(v){se(ie.$$.fragment,v),se(F.$$.fragment,v),se(K),ce=!1},d(v){v&&i(e),v&&i(s),v&&i(n);for(let C=0;C<U.length;C+=1)U[C].d();v&&i(ye),be(ie,v),v&&i(oe),be(F,v),v&&i(I),K&&K.d(v),v&&i(G),he=!1,Ue(de)}}}function Lt(r,e,l){const s=it();let{key:n}=e,{backups:a}=e,t,c,u="",d=!0,h="";function _(){s("refreshlist",!0)}function y(B,w){const T=document.getElementById(w);if(!T)return!1;if(T.value!=""){T.setCustomValidity("");{const M=localStorage.getItem(T.value.toLowerCase());if(T.value.toLowerCase()==n.toLowerCase())T.setCustomValidity(`'${n}' is a reserved name`);else if(M!=null)T.setCustomValidity("Backup exists");else return!0}}return!1}function p(B,w){if(!y(w,n+"-rename-backup"))return console.log("invalid name:"+h),w.preventDefault(),!1;const T=document.getElementById(n+"-rename-hidden"),M=h.toLowerCase(),le=localStorage.getItem(M);if(!T||!T.value||!h||le!=null)return!1;const ae=T.value.toLowerCase(),ne=localStorage.getItem(ae);return ne?(localStorage.setItem(M,ne),localStorage.removeItem(ae),_(),!0):!1}function E(B,w){if(!d&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),w.preventDefault(),!1;if(d&&!y(w,n+"-original-name"))return w.preventDefault(),!1;const T=document.getElementById(n+"-backup-list-form");if(T){const M=T.elements.namedItem("btn-edit"),le=localStorage.getItem(n.toLowerCase());if(!M||!le)return!1;const ae=localStorage.getItem(M.value);if(!ae)return!1;d&&localStorage.setItem(u,le),localStorage.setItem(n,ae),l(2,t="Backup restored"),l(3,c="info"),_()}return!0}function N(B){const w=document.getElementById(n+"-new-backup-name");if(!w||!y(B,n+"-new-backup-name")){B.preventDefault();return}const T=localStorage.getItem(n.toLowerCase());T&&(localStorage.setItem(w.value.toLowerCase(),T),l(2,t="Backup created"),l(3,c="info"),_(),w.value="")}function D(B){B.preventDefault();let w=document.getElementById(`${n}-upload-backup`);if(!w||!w.files||!w.files[0]){l(2,t="Please select a file"),l(3,c="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const T=new FileReader;T.onload=M=>{if(!T.result){l(2,t="Upload failed"),l(3,c="error");return}let le=T.result,ae=JSON.parse(le);if(!ht(ae)){l(2,t="Invalid backup file."),l(3,c="error");return}localStorage.setItem(n,le),l(2,t="Backup restored"),l(3,c="info");let ne=document.getElementById(`${n}-upload-backup`);ne&&(ne.value=""),_()},T.readAsText(w.files[0])}function g(B){const w=document.getElementById("backup-modal");if(!w)return;const T=document.getElementById(`${n}-backup-list-form`);T&&T.querySelectorAll('input[name="btn-edit"]:checked').length===0||(w.showModal(),B.preventDefault())}function O(B,w){const T=document.getElementById("rename-modal");if(!T)return;const M=document.getElementById(n+"-rename-backup");M&&(M.placeholder=w);const le=document.getElementById(n+"-rename-hidden");le&&(le.value=w,T.showModal(),B.preventDefault())}function H(B,w){const T=document.getElementById(n+"-rename-backup");T&&(T.placeholder="")}function A(B,w){return B.preventDefault(),window.confirm("Delete backup '"+w+"'?")?(l(2,t="Backup deleted"),l(3,c="error"),localStorage.removeItem(w),_(),!0):!1}const V=B=>y(B,n+"-new-backup-name"),U=(B,w)=>A(w,B.name),R=(B,w)=>vt(B.name),J=(B,w)=>O(w,B.name),te=B=>D(B);function $(){d=this.checked,l(5,d)}function re(){u=this.value,l(4,u)}const x=B=>y(B,n+"-original-name"),Y=B=>y(B,n+"-rename-backup");function S(){h=this.value,l(6,h)}function q(B){t=B,l(2,t)}function Q(B){t=B,l(2,t)}return r.$$set=B=>{"key"in B&&l(0,n=B.key),"backups"in B&&l(1,a=B.backups)},[n,a,t,c,u,d,h,y,p,E,N,D,g,O,H,A,V,U,R,J,te,$,re,x,Y,S,q,Q]}class Pt extends Pe{constructor(e){super(),$e(this,e,Lt,Rt,Ae,{key:0,backups:1},null,[-1,-1])}}function $t(r){let e;return{c(){e=z("off")},l(l){e=W(l,"off")},m(l,s){j(l,e,s)},d(l){l&&i(e)}}}function At(r){let e;return{c(){e=z("on")},l(l){e=W(l,"on")},m(l,s){j(l,e,s)},d(l){l&&i(e)}}}function Mt(r){let e,l,s,n;return{c(){e=m("button"),l=z("Turn on"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var t=k(e);l=W(t,"Turn on"),t.forEach(i),this.h()},h(){o(e,"class","btn btn-primary svelte-vgvckc")},m(a,t){j(a,e,t),f(e,l),s||(n=X(e,"click",r[8]),s=!0)},p:Ce,d(a){a&&i(e),s=!1,n()}}}function Ft(r){let e,l,s,n;return{c(){e=m("button"),l=z("Turn off"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var t=k(e);l=W(t,"Turn off"),t.forEach(i),this.h()},h(){o(e,"class","btn btn-primary svelte-vgvckc")},m(a,t){j(a,e,t),f(e,l),s||(n=X(e,"click",r[9]),s=!0)},p:Ce,d(a){a&&i(e),s=!1,n()}}}function ut(r){let e,l,s,n;const a=[Wt,zt],t=[];function c(u,d){return u[2]!=null?0:1}return e=c(r),l=t[e]=a[e](r),{c(){l.c(),s=ge()},l(u){l.l(u),s=ge()},m(u,d){t[e].m(u,d),j(u,s,d),n=!0},p(u,d){let h=e;e=c(u),e===h?t[e].p(u,d):(Me(),se(t[h],1,1,()=>{t[h]=null}),Fe(),l=t[e],l?l.p(u,d):(l=t[e]=a[e](u),l.c()),Z(l,1),l.m(s.parentNode,s))},i(u){n||(Z(l),n=!0)},o(u){se(l),n=!1},d(u){t[e].d(u),u&&i(s)}}}function zt(r){let e,l,s;function n(t){r[12](t)}let a={};return r[1]!==void 0&&(a.message=r[1]),e=new He({props:a}),ze.push(()=>We(e,"message",n,r[1])),{c(){pe(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};!l&&c&2&&(l=!0,u.message=t[1],qe(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function Wt(r){let e,l,s;function n(t){r[11](t)}let a={alert_style:r[2]};return r[1]!==void 0&&(a.message=r[1]),e=new He({props:a}),ze.push(()=>We(e,"message",n,r[1])),{c(){pe(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,c){me(e,t,c),s=!0},p(t,c){const u={};c&4&&(u.alert_style=t[2]),!l&&c&2&&(l=!0,u.message=t[1],qe(()=>l=!1)),e.$set(u)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){se(e.$$.fragment,t),s=!1},d(t){be(e,t)}}}function qt(r){let e,l,s,n,a,t,c,u,d,h,_,y,p,E,N,D,g,O,H,A,V,U,R,J,te,$,re,x,Y,S,q,Q,B,w,T,M,le;function ae(I,G){return I[0]===!0?At:$t}let ne=ae(r),ue=ne(r);function ye(I,G){return I[0]?Ft:Mt}let ie=ye(r),oe=ie(r),F=r[1]&&ut(r);return{c(){e=m("h2"),l=z("Words"),s=L(),n=m("div"),a=m("div"),t=m("div"),c=m("button"),u=z("Find new definitions"),d=L(),h=m("button"),_=z("Refresh all defintions"),y=L(),p=m("button"),E=z("Clear definitions"),N=L(),D=m("div"),g=m("button"),O=z("Restore defaults"),H=L(),A=m("button"),V=z("Clear words"),U=L(),R=m("h2"),J=z("Dictionary Lookup"),te=L(),$=m("div"),re=m("div"),x=m("p"),Y=z("Automatic dictionary lookup is: "),S=m("b"),ue.c(),q=L(),Q=m("div"),oe.c(),B=L(),F&&F.c(),w=ge(),this.h()},l(I){e=b(I,"H2",{class:!0,id:!0});var G=k(e);l=W(G,"Words"),G.forEach(i),s=P(I),n=b(I,"DIV",{class:!0});var ce=k(n);a=b(ce,"DIV",{class:!0});var he=k(a);t=b(he,"DIV",{class:!0});var de=k(t);c=b(de,"BUTTON",{type:!0,class:!0});var we=k(c);u=W(we,"Find new definitions"),we.forEach(i),d=P(de),h=b(de,"BUTTON",{type:!0,class:!0});var Te=k(h);_=W(Te,"Refresh all defintions"),Te.forEach(i),y=P(de),p=b(de,"BUTTON",{type:!0,class:!0});var K=k(p);E=W(K,"Clear definitions"),K.forEach(i),de.forEach(i),N=P(he),D=b(he,"DIV",{class:!0});var v=k(D);g=b(v,"BUTTON",{type:!0,class:!0});var C=k(g);O=W(C,"Restore defaults"),C.forEach(i),H=P(v),A=b(v,"BUTTON",{type:!0,class:!0});var ee=k(A);V=W(ee,"Clear words"),ee.forEach(i),v.forEach(i),he.forEach(i),ce.forEach(i),U=P(I),R=b(I,"H2",{class:!0,id:!0});var fe=k(R);J=W(fe,"Dictionary Lookup"),fe.forEach(i),te=P(I),$=b(I,"DIV",{class:!0});var De=k($);re=b(De,"DIV",{});var Ee=k(re);x=b(Ee,"P",{class:!0});var ve=k(x);Y=W(ve,"Automatic dictionary lookup is: "),S=b(ve,"B",{});var je=k(S);ue.l(je),je.forEach(i),ve.forEach(i),q=P(Ee),Q=b(Ee,"DIV",{class:!0});var Ie=k(Q);oe.l(Ie),Ie.forEach(i),Ee.forEach(i),De.forEach(i),B=P(I),F&&F.l(I),w=ge(),this.h()},h(){o(e,"class","options-group-title"),o(e,"id","options"),o(c,"type","button"),o(c,"class","btn btn-primary svelte-vgvckc"),o(h,"type","button"),o(h,"class","btn btn-primary svelte-vgvckc"),o(p,"type","button"),o(p,"class","btn btn-primary svelte-vgvckc"),o(t,"class","options-subgroup svelte-vgvckc"),o(g,"type","button"),o(g,"class","btn btn-danger svelte-vgvckc"),o(A,"type","button"),o(A,"class","btn btn-danger svelte-vgvckc"),o(D,"class","option-section options-subgroup svelte-vgvckc"),o(a,"class","option-section options-group-cols svelte-vgvckc"),o(n,"class","options-group"),o(R,"class","options-group-title"),o(R,"id","dictionary-lookup"),o(x,"class","svelte-vgvckc"),o(Q,"class","toggle-autodefs svelte-vgvckc"),o($,"class","options-group svelte-vgvckc")},m(I,G){j(I,e,G),f(e,l),j(I,s,G),j(I,n,G),f(n,a),f(a,t),f(t,c),f(c,u),f(t,d),f(t,h),f(h,_),f(t,y),f(t,p),f(p,E),f(a,N),f(a,D),f(D,g),f(g,O),f(D,H),f(D,A),f(A,V),j(I,U,G),j(I,R,G),f(R,J),j(I,te,G),j(I,$,G),f($,re),f(re,x),f(x,Y),f(x,S),ue.m(S,null),f(re,q),f(re,Q),oe.m(Q,null),j(I,B,G),F&&F.m(I,G),j(I,w,G),T=!0,M||(le=[X(c,"click",r[7]),X(h,"click",r[6]),X(p,"click",r[5]),X(g,"click",r[3]),X(A,"click",r[4])],M=!0)},p(I,[G]){ne!==(ne=ae(I))&&(ue.d(1),ue=ne(I),ue&&(ue.c(),ue.m(S,null))),ie===(ie=ye(I))&&oe?oe.p(I,G):(oe.d(1),oe=ie(I),oe&&(oe.c(),oe.m(Q,null))),I[1]?F?(F.p(I,G),G&2&&Z(F,1)):(F=ut(I),F.c(),Z(F,1),F.m(w.parentNode,w)):F&&(Me(),se(F,1,1,()=>{F=null}),Fe())},i(I){T||(Z(F),T=!0)},o(I){se(F),T=!1},d(I){I&&i(e),I&&i(s),I&&i(n),I&&i(U),I&&i(R),I&&i(te),I&&i($),ue.d(),oe.d(),I&&i(B),F&&F.d(I),I&&i(w),M=!1,Ue(le)}}}function Ht(r,e,l){const s=it();let{key:n}=e,{autodefs:a}=e,t,c;function u(g){if(!window.confirm("This will replace the current word list with the defaults.  Continue?"))return;const O=kt(n);Be(O),Ne(g),s("refreshlist",!0)}function d(g){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const O=gt(n);Be(O),Ne(g),s("refreshlist",!0)}function h(g){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;let O=ke(n);yt(O),Be(O),Ne(g)}function _(g){function O(R,J){return R.dict_def=J.dict_def,!0}if(!n)return;let H=ke(n);if(!window.confirm(`Refresh all ${H.words.length} words?

This will overwrite existing definitions.`))return;let A=0,V=[],U=H.words.map(async R=>{try{const J=await xe.default.lookup(R.word);J?(R.dict_def=J,A+=1):V.push(R.word)}finally{R.cache=et(R),tt(H,R,O)}});Promise.allSettled(U).then(()=>{V.length==0?(l(1,t=`Updated ${A} words`),l(2,c="info")):(l(2,c="error"),l(1,t=`Failed to update ${V.length} words.  ${V}`)),Be(H),Ne(g)})}function y(g){function O(R,J){return R.dict_def=J.dict_def,!0}if(!n||!window.confirm("Lookup definitions for words without definitions?"))return;let H=ke(n),A=0,V=[],U=H.words.filter(R=>R.dict_def===void 0).map(async R=>{try{const J=await xe.default.lookup(R.word);J?(R.dict_def=J,A+=1):V.push(R.word)}finally{R.cache=et(R),tt(H,R,O)}});Promise.allSettled(U).then(()=>{V.length==0?(l(1,t=`Updated ${A} words`),l(2,c="info")):(l(2,c="error"),l(1,t=`Failed to update ${V.length} words.<br>${V}`)),Be(H),Ne(g)})}function p(){let g=ke(n);g.auto_defs=!0,Be(g),s("refreshlist",!0)}function E(){let g=ke(n);g.auto_defs=!1,Be(g),s("refreshlist",!0)}function N(g){t=g,l(1,t)}function D(g){t=g,l(1,t)}return r.$$set=g=>{"key"in g&&l(10,n=g.key),"autodefs"in g&&l(0,a=g.autodefs)},[a,t,c,u,d,h,_,y,p,E,n,N,D]}class Gt extends Pe{constructor(e){super(),$e(this,e,Ht,qt,Ae,{key:10,autodefs:0})}}function Jt(r){let e,l,s,n,a,t,c,u,d,h;return e=new wt({props:{current:"options"}}),c=new Pt({props:{backups:r[1],key:"words"}}),c.$on("refreshlist",r[2]),d=new Gt({props:{key:"words",autodefs:r[0].auto_defs}}),d.$on("refreshlist",r[2]),{c(){pe(e.$$.fragment),l=L(),s=m("h1"),n=z("Options"),a=L(),t=m("div"),pe(c.$$.fragment),u=L(),pe(d.$$.fragment),this.h()},l(_){_e(e.$$.fragment,_),l=P(_),s=b(_,"H1",{});var y=k(s);n=W(y,"Options"),y.forEach(i),a=P(_),t=b(_,"DIV",{class:!0});var p=k(t);_e(c.$$.fragment,p),u=P(p),_e(d.$$.fragment,p),p.forEach(i),this.h()},h(){o(t,"class","options-page")},m(_,y){me(e,_,y),j(_,l,y),j(_,s,y),f(s,n),j(_,a,y),j(_,t,y),me(c,t,null),f(t,u),me(d,t,null),h=!0},p(_,[y]){const p={};y&2&&(p.backups=_[1]),c.$set(p);const E={};y&1&&(E.autodefs=_[0].auto_defs),d.$set(E)},i(_){h||(Z(e.$$.fragment,_),Z(c.$$.fragment,_),Z(d.$$.fragment,_),h=!0)},o(_){se(e.$$.fragment,_),se(c.$$.fragment,_),se(d.$$.fragment,_),h=!1},d(_){be(e,_),_&&i(l),_&&i(s),_&&i(a),_&&i(t),be(c),be(d)}}}function Kt(r,e,l){let s=ke("words"),n=[];function a(){l(1,n=[]);for(let c=0;c<localStorage.length;c++){const u=localStorage.key(c);if(u)if(u!=="words"){let d=ke(u);n.push({name:u,key:c,size:d.words.length})}else n.unshift({name:u,key:c,size:s.words.length})}}a();function t(c){l(0,s=ke("words")),a()}return[s,n,t]}class xt extends Pe{constructor(e){super(),$e(this,e,Kt,Jt,Ae,{})}}export{xt as default};
