import{S as Ne,i as Ue,s as Se,C as ot,k as b,a as P,q as H,l as v,m as E,c as z,r as J,h as u,n as i,b as B,G as p,M as Y,_ as at,D as ut,E as it,F as ft,u as Te,f as Z,t as x,P as we,w as ue,e as de,x as ie,y as fe,X as ct,g as Ce,d as Oe,z as ce,R as rt,L as De,$ as dt,J as je,K as Ve,O as Re,B as ye}from"../../../chunks/index-e56e8534.js";import{q as Ke,e as _t,u as pt,d as ge,l as me,A as Xe,o as Qe,n as Ye}from"../../../chunks/words-00315205.js";import{A as Le}from"../../../chunks/Alert-392b790a.js";import{N as mt}from"../../../chunks/Nav-7c0a439a.js";function bt(r){let e,l,s,n,o,t,f,a,_,h,m,w,c;const I=r[9].default,U=ot(I,r,r[8],null);return{c(){e=b("dialog"),l=b("div"),s=b("form"),U&&U.c(),n=P(),o=b("div"),t=b("button"),f=H(r[0]),a=P(),_=b("button"),h=H(r[1]),this.h()},l(T){e=v(T,"DIALOG",{class:!0,id:!0});var k=E(e);l=v(k,"DIV",{class:!0});var L=E(l);s=v(L,"FORM",{method:!0});var q=E(s);U&&U.l(q),n=z(q),o=v(q,"DIV",{class:!0});var M=E(o);t=v(M,"BUTTON",{type:!0,class:!0});var O=E(t);f=J(O,r[0]),O.forEach(u),a=z(M),_=v(M,"BUTTON",{type:!0,class:!0});var C=E(_);h=J(C,r[1]),C.forEach(u),M.forEach(u),q.forEach(u),L.forEach(u),k.forEach(u),this.h()},h(){i(t,"type","submit"),i(t,"class","btn btn-primary"),i(_,"type","button"),i(_,"class","btn btn-secondary"),i(o,"class","dialog-controls svelte-153o6vl"),i(s,"method","dialog"),i(l,"class","modal-wrapper svelte-153o6vl"),i(e,"class","modal svelte-153o6vl"),i(e,"id",r[2])},m(T,k){B(T,e,k),p(e,l),p(l,s),U&&U.m(s,null),p(s,n),p(s,o),p(o,t),p(t,f),p(o,a),p(o,_),p(_,h),m=!0,w||(c=[Y(_,"click",r[3]),Y(s,"submit",r[5]),Y(e,"click",at(r[3])),Y(e,"close",r[4])],w=!0)},p(T,[k]){U&&U.p&&(!m||k&256)&&ut(U,I,T,T[8],m?ft(I,T[8],k,null):it(T[8]),null),(!m||k&1)&&Te(f,T[0]),(!m||k&2)&&Te(h,T[1]),(!m||k&4)&&i(e,"id",T[2])},i(T){m||(Z(U,T),m=!0)},o(T){x(U,T),m=!1},d(T){T&&u(e),U&&U.d(T),w=!1,we(c)}}}function Ze(r){r.querySelectorAll("form").forEach(e=>{e.reset()})}function vt(r,e,l){let{$$slots:s={},$$scope:n}=e,{onClose:o=()=>{}}=e,{onSubmit:t}=e,{submit_text:f="Submit"}=e,{cancel_text:a="Cancel"}=e,{id:_}=e;function h(c){const I=document.getElementById(_);I&&(o(I,c),Ze(I),I.close())}function m(c){const I=document.getElementById(_);I&&(o(I,c),Ze(I))}function w(c){const I=document.getElementById(_);if(!I){c.preventDefault();return}t(I,c)?I.close():c.preventDefault()}return r.$$set=c=>{"onClose"in c&&l(6,o=c.onClose),"onSubmit"in c&&l(7,t=c.onSubmit),"submit_text"in c&&l(0,f=c.submit_text),"cancel_text"in c&&l(1,a=c.cancel_text),"id"in c&&l(2,_=c.id),"$$scope"in c&&l(8,n=c.$$scope)},[f,a,_,h,m,w,o,t,n,s]}class xe extends Ne{constructor(e){super(),Ue(this,e,vt,bt,Se,{onClose:6,onSubmit:7,submit_text:0,cancel_text:1,id:2})}}function et(r,e,l){const s=r.slice();return s[30]=e[l],s}function ht(r){let e,l;return{c(){e=b("button"),l=b("i"),this.h()},l(s){e=v(s,"BUTTON",{type:!0,class:!0});var n=E(e);l=v(n,"I",{class:!0}),E(l).forEach(u),n.forEach(u),this.h()},h(){i(l,"class","fa-solid fa-xmark"),i(e,"type","button"),i(e,"class","remove-btn svelte-1ngf0jw"),e.disabled=!0},m(s,n){B(s,e,n),p(e,l)},p:ye,d(s){s&&u(e)}}}function kt(r){let e,l,s,n;function o(...t){return r[17](r[30],...t)}return{c(){e=b("button"),l=b("i"),this.h()},l(t){e=v(t,"BUTTON",{type:!0,class:!0,title:!0});var f=E(e);l=v(f,"I",{class:!0}),E(l).forEach(u),f.forEach(u),this.h()},h(){i(l,"class","fa-solid fa-xmark"),i(e,"type","button"),i(e,"class","remove-btn svelte-1ngf0jw"),i(e,"title","Delete backup")},m(t,f){B(t,e,f),p(e,l),s||(n=Y(e,"click",o),s=!0)},p(t,f){r=t},d(t){t&&u(e),s=!1,n()}}}function gt(r){let e,l,s,n;return{c(){e=b("button"),l=b("i"),s=P(),n=b("input"),this.h()},l(o){e=v(o,"BUTTON",{type:!0,class:!0});var t=E(e);l=v(t,"I",{class:!0}),E(l).forEach(u),t.forEach(u),s=z(o),n=v(o,"INPUT",{type:!0,class:!0}),this.h()},h(){i(l,"class","fa-solid fa-pen"),i(e,"type","button"),e.disabled=!0,i(e,"class","btn rename-btn svelte-1ngf0jw"),i(n,"type","radio"),i(n,"class","btn-edit-current svelte-1ngf0jw"),n.disabled=!0},m(o,t){B(o,e,t),p(e,l),B(o,s,t),B(o,n,t)},p:ye,d(o){o&&u(e),o&&u(s),o&&u(n)}}}function wt(r){let e,l,s,n,o,t,f,a,_,h;function m(...w){return r[19](r[30],...w)}return{c(){e=b("button"),l=b("i"),o=P(),t=b("input"),this.h()},l(w){e=v(w,"BUTTON",{type:!0,id:!0,title:!0,class:!0});var c=E(e);l=v(c,"I",{class:!0}),E(l).forEach(u),c.forEach(u),o=z(w),t=v(w,"INPUT",{type:!0,name:!0,class:!0,title:!0,id:!0}),this.h()},h(){i(l,"class","fa-solid fa-pen"),i(e,"type","submit"),i(e,"id",s=r[0]+"-backup-rename-"+r[30].name),i(e,"title","Rename"),e.value=n=r[30].name,i(e,"class","btn rename-btn svelte-1ngf0jw"),i(t,"type","radio"),i(t,"name","btn-edit"),i(t,"class","btn-edit svelte-1ngf0jw"),i(t,"title","Select this backup for restore"),i(t,"id",f=r[0]+"-restore-"+r[30].key),t.required=!0,t.value=a=r[30].name},m(w,c){B(w,e,c),p(e,l),B(w,o,c),B(w,t,c),_||(h=Y(e,"click",m),_=!0)},p(w,c){r=w,c[0]&3&&s!==(s=r[0]+"-backup-rename-"+r[30].name)&&i(e,"id",s),c[0]&2&&n!==(n=r[30].name)&&(e.value=n),c[0]&3&&f!==(f=r[0]+"-restore-"+r[30].key)&&i(t,"id",f),c[0]&2&&a!==(a=r[30].name)&&(t.value=a)},d(w){w&&u(e),w&&u(o),w&&u(t),_=!1,h()}}}function yt(r){let e=r[30].name+"",l;return{c(){l=H(e)},l(s){l=J(s,e)},m(s,n){B(s,l,n)},p(s,n){n[0]&2&&e!==(e=s[30].name+"")&&Te(l,e)},d(s){s&&u(l)}}}function Et(r){let e,l;return{c(){e=b("div"),l=H("Current"),this.h()},l(s){e=v(s,"DIV",{class:!0});var n=E(e);l=J(n,"Current"),n.forEach(u),this.h()},h(){i(e,"class","backup-current svelte-1ngf0jw")},m(s,n){B(s,e,n),p(e,l)},p:ye,d(s){s&&u(e)}}}function tt(r,e){let l,s,n,o,t,f,a,_,h,m,w,c,I,U=e[30].size+"",T,k,L,q;function M(A,F){return A[30].name!=A[0]?kt:ht}let O=M(e),C=O(e);function $(...A){return e[18](e[30],...A)}function W(A,F){return A[30].name!=A[0]?wt:gt}let te=W(e),G=te(e);function le(A,F){return A[30].name==A[0]?Et:yt}let ee=le(e),K=ee(e);return{key:r,first:null,c(){l=b("div"),s=b("div"),C.c(),n=P(),o=b("button"),t=b("i"),f=P(),G.c(),a=P(),_=b("div"),h=b("label"),K.c(),w=P(),c=b("div"),I=H("("),T=H(U),k=H(" words)"),this.h()},l(A){l=v(A,"DIV",{class:!0});var F=E(l);s=v(F,"DIV",{class:!0});var Q=E(s);C.l(Q),n=z(Q),o=v(Q,"BUTTON",{type:!0,class:!0,title:!0});var y=E(o);t=v(y,"I",{class:!0}),E(t).forEach(u),y.forEach(u),f=z(Q),G.l(Q),a=z(Q),_=v(Q,"DIV",{class:!0});var D=E(_);h=v(D,"LABEL",{class:!0,for:!0,title:!0});var S=E(h);K.l(S),S.forEach(u),w=z(D),c=v(D,"DIV",{class:!0});var j=E(c);I=J(j,"("),T=J(j,U),k=J(j," words)"),j.forEach(u),D.forEach(u),Q.forEach(u),F.forEach(u),this.h()},h(){i(t,"class","fa-solid fa-download"),i(o,"type","button"),i(o,"class","btn download-btn svelte-1ngf0jw"),i(o,"title","Download backup"),i(h,"class","backup-name-label svelte-1ngf0jw"),i(h,"for",m=e[0]+"-restore-"+e[30].key),i(h,"title","Select backup for restore"),i(c,"class","backup-length svelte-1ngf0jw"),i(_,"class","backup-name svelte-1ngf0jw"),i(s,"class","backup-content svelte-1ngf0jw"),i(l,"class","backup-entry svelte-1ngf0jw"),this.first=l},m(A,F){B(A,l,F),p(l,s),C.m(s,null),p(s,n),p(s,o),p(o,t),p(s,f),G.m(s,null),p(s,a),p(s,_),p(_,h),K.m(h,null),p(_,w),p(_,c),p(c,I),p(c,T),p(c,k),L||(q=Y(o,"click",$),L=!0)},p(A,F){e=A,O===(O=M(e))&&C?C.p(e,F):(C.d(1),C=O(e),C&&(C.c(),C.m(s,n))),te===(te=W(e))&&G?G.p(e,F):(G.d(1),G=te(e),G&&(G.c(),G.m(s,a))),ee===(ee=le(e))&&K?K.p(e,F):(K.d(1),K=ee(e),K&&(K.c(),K.m(h,null))),F[0]&3&&m!==(m=e[0]+"-restore-"+e[30].key)&&i(h,"for",m),F[0]&2&&U!==(U=e[30].size+"")&&Te(T,U)},d(A){A&&u(l),C.d(),G.d(),K.d(),L=!1,q()}}}function lt(r){let e,l,s,n,o;return{c(){e=H(`Backup as:
                `),l=b("input"),this.h()},l(t){e=J(t,`Backup as:
                `),l=v(t,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){i(l,"id",s=r[0]+"-original-name"),i(l,"name","save-as"),i(l,"type","text"),i(l,"class","original form-control svelte-1ngf0jw"),i(l,"placeholder","new name"),l.required=!0},m(t,f){B(t,e,f),B(t,l,f),De(l,r[4]),n||(o=[Y(l,"input",r[22]),Y(l,"blur",r[23])],n=!0)},p(t,f){f[0]&1&&s!==(s=t[0]+"-original-name")&&i(l,"id",s),f[0]&16&&l.value!==t[4]&&De(l,t[4])},d(t){t&&u(e),t&&u(l),n=!1,we(o)}}}function It(r){let e,l,s,n,o,t,f,a,_,h,m,w,c=r[5]&&lt(r);return{c(){e=b("div"),l=b("div"),s=b("input"),o=P(),t=b("label"),f=H("Backup current list"),_=P(),h=b("div"),c&&c.c(),this.h()},l(I){e=v(I,"DIV",{class:!0});var U=E(e);l=v(U,"DIV",{class:!0});var T=E(l);s=v(T,"INPUT",{type:!0,id:!0}),o=z(T),t=v(T,"LABEL",{for:!0});var k=E(t);f=J(k,"Backup current list"),k.forEach(u),T.forEach(u),_=z(U),h=v(U,"DIV",{});var L=E(h);c&&c.l(L),L.forEach(u),U.forEach(u),this.h()},h(){i(s,"type","checkbox"),i(s,"id",n=r[0]+"-rename-current"),i(t,"for",a=r[0]+"-rename-current"),i(l,"class","dialog-title svelte-1ngf0jw"),i(e,"class","original-name svelte-1ngf0jw")},m(I,U){B(I,e,U),p(e,l),p(l,s),s.checked=r[5],p(l,o),p(l,t),p(t,f),p(e,_),p(e,h),c&&c.m(h,null),m||(w=Y(s,"change",r[21]),m=!0)},p(I,U){U[0]&1&&n!==(n=I[0]+"-rename-current")&&i(s,"id",n),U[0]&32&&(s.checked=I[5]),U[0]&1&&a!==(a=I[0]+"-rename-current")&&i(t,"for",a),I[5]?c?c.p(I,U):(c=lt(I),c.c(),c.m(h,null)):c&&(c.d(1),c=null)},d(I){I&&u(e),c&&c.d(),m=!1,w()}}}function Bt(r){let e,l,s,n,o,t,f;return{c(){e=b("input"),s=P(),n=b("input"),this.h()},l(a){e=v(a,"INPUT",{type:!0,id:!0,class:!0}),s=z(a),n=v(a,"INPUT",{type:!0,id:!0}),this.h()},h(){i(e,"type","text"),i(e,"id",l=r[0]+"-rename-backup"),i(e,"class","form-control"),i(n,"type","hidden"),i(n,"id",o=r[0]+"-rename-hidden")},m(a,_){B(a,e,_),De(e,r[6]),B(a,s,_),B(a,n,_),t||(f=[Y(e,"blur",r[24]),Y(e,"input",r[25])],t=!0)},p(a,_){_[0]&1&&l!==(l=a[0]+"-rename-backup")&&i(e,"id",l),_[0]&64&&e.value!==a[6]&&De(e,a[6]),_[0]&1&&o!==(o=a[0]+"-rename-hidden")&&i(n,"id",o)},d(a){a&&u(e),a&&u(s),a&&u(n),t=!1,we(f)}}}function st(r){let e,l,s,n;const o=[Dt,Tt],t=[];function f(a,_){return a[3]!=null?0:1}return e=f(r),l=t[e]=o[e](r),{c(){l.c(),s=de()},l(a){l.l(a),s=de()},m(a,_){t[e].m(a,_),B(a,s,_),n=!0},p(a,_){let h=e;e=f(a),e===h?t[e].p(a,_):(Ce(),x(t[h],1,1,()=>{t[h]=null}),Oe(),l=t[e],l?l.p(a,_):(l=t[e]=o[e](a),l.c()),Z(l,1),l.m(s.parentNode,s))},i(a){n||(Z(l),n=!0)},o(a){x(l),n=!1},d(a){t[e].d(a),a&&u(s)}}}function Tt(r){let e,l,s;function n(t){r[27](t)}let o={};return r[2]!==void 0&&(o.message=r[2]),e=new Le({props:o}),je.push(()=>Ve(e,"message",n,r[2])),{c(){ue(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,f){fe(e,t,f),s=!0},p(t,f){const a={};!l&&f[0]&4&&(l=!0,a.message=t[2],Re(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function Dt(r){let e,l,s;function n(t){r[26](t)}let o={alert_style:r[3]};return r[2]!==void 0&&(o.message=r[2]),e=new Le({props:o}),je.push(()=>Ve(e,"message",n,r[2])),{c(){ue(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,f){fe(e,t,f),s=!0},p(t,f){const a={};f[0]&8&&(a.alert_style=t[3]),!l&&f[0]&4&&(l=!0,a.message=t[2],Re(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function Nt(r){let e,l,s,n,o,t,f,a,_,h,m,w,c,I,U,T,k,L=[],q=new Map,M,O,C,$,W,te,G,le,ee,K,A,F,Q,y,D,S,j,V,g,R,_e,se,oe,ae,re,be,ve,pe=r[1];const he=d=>d[30].key;for(let d=0;d<pe.length;d+=1){let N=et(r,pe,d),ne=he(N);q.set(ne,L[d]=tt(ne,N))}R=new xe({props:{id:"backup-modal",onSubmit:r[9],submit_text:"Restore",$$slots:{default:[It]},$$scope:{ctx:r}}}),se=new xe({props:{id:"rename-modal",onSubmit:r[8],onClose:r[14],submit_text:"Rename",$$slots:{default:[Bt]},$$scope:{ctx:r}}});let X=r[2]&&st(r);return{c(){e=b("h2"),l=H("Create Backup"),s=P(),n=b("div"),o=b("form"),t=b("div"),f=b("input"),_=P(),h=b("button"),m=H("Create Backup"),w=P(),c=b("h2"),I=H("Backups"),U=P(),T=b("div"),k=b("form");for(let d=0;d<L.length;d+=1)L[d].c();M=P(),O=b("div"),C=b("button"),$=H("Restore"),te=P(),G=b("h2"),le=H("Upload Backup"),ee=P(),K=b("div"),A=b("form"),F=b("div"),Q=b("div"),y=b("input"),S=P(),j=b("button"),V=H("Restore Backup"),g=P(),ue(R.$$.fragment),_e=P(),ue(se.$$.fragment),oe=P(),X&&X.c(),ae=de(),this.h()},l(d){e=v(d,"H2",{class:!0});var N=E(e);l=J(N,"Create Backup"),N.forEach(u),s=z(d),n=v(d,"DIV",{class:!0});var ne=E(n);o=v(ne,"FORM",{});var ke=E(o);t=v(ke,"DIV",{class:!0});var Ee=E(t);f=v(Ee,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),_=z(Ee),h=v(Ee,"BUTTON",{class:!0});var ze=E(h);m=J(ze,"Create Backup"),ze.forEach(u),Ee.forEach(u),ke.forEach(u),ne.forEach(u),w=z(d),c=v(d,"H2",{class:!0});var $e=E(c);I=J($e,"Backups"),$e.forEach(u),U=z(d),T=v(d,"DIV",{class:!0});var Ae=E(T);k=v(Ae,"FORM",{id:!0});var Ie=E(k);for(let Pe=0;Pe<L.length;Pe+=1)L[Pe].l(Ie);M=z(Ie),O=v(Ie,"DIV",{class:!0});var Me=E(O);C=v(Me,"BUTTON",{type:!0,class:!0,name:!0});var Fe=E(C);$=J(Fe,"Restore"),Fe.forEach(u),Me.forEach(u),Ie.forEach(u),Ae.forEach(u),te=z(d),G=v(d,"H2",{class:!0});var qe=E(G);le=J(qe,"Upload Backup"),qe.forEach(u),ee=z(d),K=v(d,"DIV",{class:!0});var We=E(K);A=v(We,"FORM",{});var Ge=E(A);F=v(Ge,"DIV",{class:!0});var Be=E(F);Q=v(Be,"DIV",{class:!0});var He=E(Q);y=v(He,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),He.forEach(u),S=z(Be),j=v(Be,"BUTTON",{class:!0});var Je=E(j);V=J(Je,"Restore Backup"),Je.forEach(u),Be.forEach(u),Ge.forEach(u),We.forEach(u),g=z(d),ie(R.$$.fragment,d),_e=z(d),ie(se.$$.fragment,d),oe=z(d),X&&X.l(d),ae=de(),this.h()},h(){i(e,"class","options-group-title"),i(f,"id",a=r[0]+"-new-backup-name"),i(f,"type","text"),i(f,"class","new-backup-name form-control svelte-1ngf0jw"),i(f,"placeholder","new name"),i(h,"class","create-backup btn btn-primary svelte-1ngf0jw"),i(t,"class","new-backup svelte-1ngf0jw"),i(n,"class","options-group"),i(c,"class","options-group-title"),i(C,"type","button"),i(C,"class","btn btn-danger"),i(C,"name","backups_action"),C.value="restore",i(O,"class","backup-submit svelte-1ngf0jw"),i(k,"id",W=r[0]+"-backup-list-form"),i(T,"class","options-group"),i(G,"class","options-group-title"),i(y,"id",D=r[0]+"-upload-backup"),i(y,"class","upload-backup form-control svelte-1ngf0jw"),i(y,"type","file"),i(y,"accept",".json,application/json"),i(Q,"class","upload-backup-container"),i(j,"class","btn btn-danger upload-backup-btn svelte-1ngf0jw"),i(F,"class","new-backup svelte-1ngf0jw"),i(K,"class","options-group")},m(d,N){B(d,e,N),p(e,l),B(d,s,N),B(d,n,N),p(n,o),p(o,t),p(t,f),p(t,_),p(t,h),p(h,m),B(d,w,N),B(d,c,N),p(c,I),B(d,U,N),B(d,T,N),p(T,k);for(let ne=0;ne<L.length;ne+=1)L[ne].m(k,null);p(k,M),p(k,O),p(O,C),p(C,$),B(d,te,N),B(d,G,N),p(G,le),B(d,ee,N),B(d,K,N),p(K,A),p(A,F),p(F,Q),p(Q,y),p(F,S),p(F,j),p(j,V),B(d,g,N),fe(R,d,N),B(d,_e,N),fe(se,d,N),B(d,oe,N),X&&X.m(d,N),B(d,ae,N),re=!0,be||(ve=[Y(f,"blur",r[16]),Y(o,"submit",r[10]),Y(C,"click",r[12]),Y(A,"submit",r[20])],be=!0)},p(d,N){(!re||N[0]&1&&a!==(a=d[0]+"-new-backup-name"))&&i(f,"id",a),N[0]&40963&&(pe=d[1],L=ct(L,N,he,1,d,pe,q,k,dt,tt,M,et)),(!re||N[0]&1&&W!==(W=d[0]+"-backup-list-form"))&&i(k,"id",W),(!re||N[0]&1&&D!==(D=d[0]+"-upload-backup"))&&i(y,"id",D);const ne={};N[0]&49|N[1]&4&&(ne.$$scope={dirty:N,ctx:d}),R.$set(ne);const ke={};N[0]&65|N[1]&4&&(ke.$$scope={dirty:N,ctx:d}),se.$set(ke),d[2]?X?(X.p(d,N),N[0]&4&&Z(X,1)):(X=st(d),X.c(),Z(X,1),X.m(ae.parentNode,ae)):X&&(Ce(),x(X,1,1,()=>{X=null}),Oe())},i(d){re||(Z(R.$$.fragment,d),Z(se.$$.fragment,d),Z(X),re=!0)},o(d){x(R.$$.fragment,d),x(se.$$.fragment,d),x(X),re=!1},d(d){d&&u(e),d&&u(s),d&&u(n),d&&u(w),d&&u(c),d&&u(U),d&&u(T);for(let N=0;N<L.length;N+=1)L[N].d();d&&u(te),d&&u(G),d&&u(ee),d&&u(K),d&&u(g),ce(R,d),d&&u(_e),ce(se,d),d&&u(oe),X&&X.d(d),d&&u(ae),be=!1,we(ve)}}}function Ut(r,e,l){const s=rt();let{key:n}=e,{backups:o}=e,t,f,a="",_=!0,h="";function m(){s("refreshlist",!0)}function w(y,D){const S=document.getElementById(D);if(!S)return!1;if(S.value!=""){S.setCustomValidity("");{const j=localStorage.getItem(S.value.toLowerCase());if(S.value.toLowerCase()==n.toLowerCase())S.setCustomValidity(`'${n}' is a reserved name`);else if(j!=null)S.setCustomValidity("Backup exists");else return!0}}return!1}function c(y,D){if(!w(D,n+"-rename-backup"))return console.log("invalid name:"+h),D.preventDefault(),!1;const S=document.getElementById(n+"-rename-hidden"),j=h.toLowerCase(),V=localStorage.getItem(j);if(!S||!S.value||!h||V!=null)return!1;const g=S.value.toLowerCase(),R=localStorage.getItem(g);return R?(localStorage.setItem(j,R),localStorage.removeItem(g),m(),!0):!1}function I(y,D){if(!_&&!window.confirm("This will erase the current word list, continue?"))return console.log("cancelling"),D.preventDefault(),!1;if(_&&!w(D,n+"-original-name"))return D.preventDefault(),!1;const S=document.getElementById(n+"-backup-list-form");if(S){const j=S.elements.namedItem("btn-edit"),V=localStorage.getItem(n.toLowerCase());if(!j||!V)return!1;const g=localStorage.getItem(j.value);if(!g)return!1;_&&localStorage.setItem(a,V),localStorage.setItem(n,g),l(2,t="Backup restored"),l(3,f="info"),m()}return!0}function U(y){const D=document.getElementById(n+"-new-backup-name");if(!D||!w(y,n+"-new-backup-name")){y.preventDefault();return}const S=localStorage.getItem(n.toLowerCase());S&&(localStorage.setItem(D.value.toLowerCase(),S),l(2,t="Backup created"),l(3,f="info"),m(),D.value="")}function T(y){y.preventDefault();let D=document.getElementById(`${n}-upload-backup`);if(!D||!D.files||!D.files[0]){l(2,t="Please select a file"),l(3,f="error");return}if(!window.confirm("This will overwrite the current word list, continue?"))return;const S=new FileReader;S.onload=j=>{if(!S.result){l(2,t="Upload failed"),l(3,f="error");return}let V=S.result,g=JSON.parse(V);if(console.log(Ke(g)),!Ke(g)){l(2,t="Invalid backup file."),l(3,f="error");return}localStorage.setItem(n,V),l(2,t="Backup restored"),l(3,f="info");let R=document.getElementById(`${n}-upload-backup`);R&&(R.value=""),m()},S.readAsText(D.files[0])}function k(y){const D=document.getElementById("backup-modal");if(!D)return;const S=document.getElementById(`${n}-backup-list-form`);S&&S.querySelectorAll('input[name="btn-edit"]:checked').length===0||(D.showModal(),y.preventDefault())}function L(y,D){const S=document.getElementById("rename-modal");if(!S)return;const j=document.getElementById(n+"-rename-backup");j&&(j.placeholder=D);const V=document.getElementById(n+"-rename-hidden");V&&(V.value=D,S.showModal(),y.preventDefault())}function q(y,D){const S=document.getElementById(n+"-rename-backup");S&&(S.placeholder="")}function M(y,D){return y.preventDefault(),window.confirm("Delete backup '"+D+"'?")?(l(2,t="Backup deleted"),l(3,f="error"),localStorage.removeItem(D),m(),!0):!1}const O=y=>w(y,n+"-new-backup-name"),C=(y,D)=>M(D,y.name),$=(y,D)=>_t(y.name),W=(y,D)=>L(D,y.name),te=y=>T(y);function G(){_=this.checked,l(5,_)}function le(){a=this.value,l(4,a)}const ee=y=>w(y,n+"-original-name"),K=y=>w(y,n+"-rename-backup");function A(){h=this.value,l(6,h)}function F(y){t=y,l(2,t)}function Q(y){t=y,l(2,t)}return r.$$set=y=>{"key"in y&&l(0,n=y.key),"backups"in y&&l(1,o=y.backups)},[n,o,t,f,a,_,h,w,c,I,U,T,k,L,q,M,O,C,$,W,te,G,le,ee,K,A,F,Q]}class St extends Ne{constructor(e){super(),Ue(this,e,Ut,Nt,Se,{key:0,backups:1},null,[-1,-1])}}function Ct(r){let e;return{c(){e=H("off")},l(l){e=J(l,"off")},m(l,s){B(l,e,s)},d(l){l&&u(e)}}}function Ot(r){let e;return{c(){e=H("on")},l(l){e=J(l,"on")},m(l,s){B(l,e,s)},d(l){l&&u(e)}}}function jt(r){let e,l,s,n;return{c(){e=b("button"),l=H("Turn on"),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var t=E(e);l=J(t,"Turn on"),t.forEach(u),this.h()},h(){i(e,"class","btn btn-primary svelte-1blvzo7")},m(o,t){B(o,e,t),p(e,l),s||(n=Y(e,"click",r[7]),s=!0)},p:ye,d(o){o&&u(e),s=!1,n()}}}function Vt(r){let e,l,s,n;return{c(){e=b("button"),l=H("Turn off"),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var t=E(e);l=J(t,"Turn off"),t.forEach(u),this.h()},h(){i(e,"class","btn btn-primary svelte-1blvzo7")},m(o,t){B(o,e,t),p(e,l),s||(n=Y(e,"click",r[8]),s=!0)},p:ye,d(o){o&&u(e),s=!1,n()}}}function nt(r){let e,l,s,n;const o=[Lt,Rt],t=[];function f(a,_){return a[3]!=null?0:1}return e=f(r),l=t[e]=o[e](r),{c(){l.c(),s=de()},l(a){l.l(a),s=de()},m(a,_){t[e].m(a,_),B(a,s,_),n=!0},p(a,_){let h=e;e=f(a),e===h?t[e].p(a,_):(Ce(),x(t[h],1,1,()=>{t[h]=null}),Oe(),l=t[e],l?l.p(a,_):(l=t[e]=o[e](a),l.c()),Z(l,1),l.m(s.parentNode,s))},i(a){n||(Z(l),n=!0)},o(a){x(l),n=!1},d(a){t[e].d(a),a&&u(s)}}}function Rt(r){let e,l,s;function n(t){r[12](t)}let o={};return r[2]!==void 0&&(o.message=r[2]),e=new Le({props:o}),je.push(()=>Ve(e,"message",n,r[2])),{c(){ue(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,f){fe(e,t,f),s=!0},p(t,f){const a={};!l&&f&4&&(l=!0,a.message=t[2],Re(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function Lt(r){let e,l,s;function n(t){r[11](t)}let o={alert_style:r[3]};return r[2]!==void 0&&(o.message=r[2]),e=new Le({props:o}),je.push(()=>Ve(e,"message",n,r[2])),{c(){ue(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,f){fe(e,t,f),s=!0},p(t,f){const a={};f&8&&(a.alert_style=t[3]),!l&&f&4&&(l=!0,a.message=t[2],Re(()=>l=!1)),e.$set(a)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function Pt(r){let e,l,s,n,o,t,f,a,_,h,m,w,c,I,U,T,k,L,q,M,O,C,$,W,te,G,le,ee,K,A;function F(g,R){return g[1]===!0?Ot:Ct}let Q=F(r),y=Q(r);function D(g,R){return g[1]?Vt:jt}let S=D(r),j=S(r),V=r[2]&&nt(r);return{c(){e=b("legend"),l=H("Options"),s=P(),n=b("div"),o=b("div"),t=b("div"),f=b("button"),a=H("Find new definitions"),_=P(),h=b("button"),m=H("Refresh all defintions"),w=P(),c=b("div"),I=b("button"),U=H("Clear words"),T=P(),k=b("legend"),L=H("Dictionary Lookup"),q=P(),M=b("div"),O=b("div"),C=b("p"),$=H("Automatic dictionary lookup is: "),W=b("b"),y.c(),te=P(),j.c(),G=P(),V&&V.c(),le=de(),this.h()},l(g){e=v(g,"LEGEND",{class:!0});var R=E(e);l=J(R,"Options"),R.forEach(u),s=z(g),n=v(g,"DIV",{class:!0});var _e=E(n);o=v(_e,"DIV",{class:!0});var se=E(o);t=v(se,"DIV",{class:!0});var oe=E(t);f=v(oe,"BUTTON",{type:!0,class:!0});var ae=E(f);a=J(ae,"Find new definitions"),ae.forEach(u),_=z(oe),h=v(oe,"BUTTON",{type:!0,class:!0});var re=E(h);m=J(re,"Refresh all defintions"),re.forEach(u),oe.forEach(u),w=z(se),c=v(se,"DIV",{class:!0});var be=E(c);I=v(be,"BUTTON",{type:!0,class:!0});var ve=E(I);U=J(ve,"Clear words"),ve.forEach(u),be.forEach(u),se.forEach(u),_e.forEach(u),T=z(g),k=v(g,"LEGEND",{class:!0});var pe=E(k);L=J(pe,"Dictionary Lookup"),pe.forEach(u),q=z(g),M=v(g,"DIV",{class:!0});var he=E(M);O=v(he,"DIV",{});var X=E(O);C=v(X,"P",{class:!0});var d=E(C);$=J(d,"Automatic dictionary lookup is: "),W=v(d,"B",{});var N=E(W);y.l(N),N.forEach(u),d.forEach(u),te=z(X),j.l(X),X.forEach(u),he.forEach(u),G=z(g),V&&V.l(g),le=de(),this.h()},h(){i(e,"class","options-group-title"),i(f,"type","button"),i(f,"class","btn btn-primary svelte-1blvzo7"),i(h,"type","button"),i(h,"class","btn btn-primary svelte-1blvzo7"),i(t,"class","options-subgroup svelte-1blvzo7"),i(I,"type","button"),i(I,"class","btn btn-danger svelte-1blvzo7"),i(c,"class","option-section options-subgroup svelte-1blvzo7"),i(o,"class","option-section options-group-cols svelte-1blvzo7"),i(n,"class","options-group"),i(k,"class","options-group-title"),i(C,"class","svelte-1blvzo7"),i(M,"class","options-group svelte-1blvzo7")},m(g,R){B(g,e,R),p(e,l),B(g,s,R),B(g,n,R),p(n,o),p(o,t),p(t,f),p(f,a),p(t,_),p(t,h),p(h,m),p(o,w),p(o,c),p(c,I),p(I,U),B(g,T,R),B(g,k,R),p(k,L),B(g,q,R),B(g,M,R),p(M,O),p(O,C),p(C,$),p(C,W),y.m(W,null),p(O,te),j.m(O,null),B(g,G,R),V&&V.m(g,R),B(g,le,R),ee=!0,K||(A=[Y(f,"click",r[9]),Y(h,"click",r[10]),Y(I,"click",r[4])],K=!0)},p(g,[R]){Q!==(Q=F(g))&&(y.d(1),y=Q(g),y&&(y.c(),y.m(W,null))),S===(S=D(g))&&j?j.p(g,R):(j.d(1),j=S(g),j&&(j.c(),j.m(O,null))),g[2]?V?(V.p(g,R),R&4&&Z(V,1)):(V=nt(g),V.c(),Z(V,1),V.m(le.parentNode,le)):V&&(Ce(),x(V,1,1,()=>{V=null}),Oe())},i(g){ee||(Z(V),ee=!0)},o(g){x(V),ee=!1},d(g){g&&u(e),g&&u(s),g&&u(n),g&&u(T),g&&u(k),g&&u(q),g&&u(M),y.d(),j.d(),g&&u(G),V&&V.d(g),g&&u(le),K=!1,we(A)}}}function zt(r,e,l){const s=rt();let{key:n}=e,{autodefs:o}=e,t,f;function a(){if(!window.confirm("This will clear all words in your current word list.  Continue?"))return;const k=pt(n);ge(k)}function _(k){function L($,W){return $.dict_def=W.dict_def,!0}if(!k)return;let q=me(k);if(!window.confirm(`Refresh all ${q.words.length} words?

This will overwrite existing definitions.`))return;let M=0,O=[],C=q.words.map(async $=>{try{const W=await Xe.default.lookup($.word);W?($.dict_def=W,M+=1):O.push($.word)}finally{$.cache=Qe($),Ye(q,$,L)}});Promise.allSettled(C).then(()=>{O.length==0?(l(2,t=`Updated ${M} words`),l(3,f="info")):(l(3,f="error"),l(2,t=`Failed to update ${O.length} words.  ${O}`)),ge(q)})}function h(k){function L($,W){return $.dict_def=W.dict_def,!0}if(!k||!window.confirm("Lookup definitions for words without definitions?"))return;let q=me(k),M=0,O=[],C=q.words.filter($=>$.dict_def===void 0).map(async $=>{try{const W=await Xe.default.lookup($.word);W?($.dict_def=W,M+=1):O.push($.word)}finally{$.cache=Qe($),Ye(q,$,L)}});Promise.allSettled(C).then(()=>{O.length==0?(l(2,t=`Updated ${M} words`),l(3,f="info")):(l(3,f="error"),l(2,t=`Failed to update ${O.length} words.<br>${O}`)),ge(q)})}function m(){let k=me(n);k.auto_defs=!0,ge(k),s("refreshlist",!0)}function w(){let k=me(n);k.auto_defs=!1,ge(k),s("refreshlist",!0)}const c=()=>h(n),I=()=>_(n);function U(k){t=k,l(2,t)}function T(k){t=k,l(2,t)}return r.$$set=k=>{"key"in k&&l(0,n=k.key),"autodefs"in k&&l(1,o=k.autodefs)},[n,o,t,f,a,_,h,m,w,c,I,U,T]}class $t extends Ne{constructor(e){super(),Ue(this,e,zt,Pt,Se,{key:0,autodefs:1})}}function At(r){let e,l,s,n,o,t,f,a,_,h;return e=new mt({props:{current:"options"}}),f=new St({props:{backups:r[1],key:"words"}}),f.$on("refreshlist",r[2]),_=new $t({props:{key:"words",autodefs:r[0].auto_defs}}),_.$on("refreshlist",r[2]),{c(){ue(e.$$.fragment),l=P(),s=b("h1"),n=H("Options"),o=P(),t=b("div"),ue(f.$$.fragment),a=P(),ue(_.$$.fragment),this.h()},l(m){ie(e.$$.fragment,m),l=z(m),s=v(m,"H1",{});var w=E(s);n=J(w,"Options"),w.forEach(u),o=z(m),t=v(m,"DIV",{class:!0});var c=E(t);ie(f.$$.fragment,c),a=z(c),ie(_.$$.fragment,c),c.forEach(u),this.h()},h(){i(t,"class","options-page")},m(m,w){fe(e,m,w),B(m,l,w),B(m,s,w),p(s,n),B(m,o,w),B(m,t,w),fe(f,t,null),p(t,a),fe(_,t,null),h=!0},p(m,[w]){const c={};w&2&&(c.backups=m[1]),f.$set(c);const I={};w&1&&(I.autodefs=m[0].auto_defs),_.$set(I)},i(m){h||(Z(e.$$.fragment,m),Z(f.$$.fragment,m),Z(_.$$.fragment,m),h=!0)},o(m){x(e.$$.fragment,m),x(f.$$.fragment,m),x(_.$$.fragment,m),h=!1},d(m){ce(e,m),m&&u(l),m&&u(s),m&&u(o),m&&u(t),ce(f),ce(_)}}}function Mt(r,e,l){let s=me("words"),n=[];function o(){l(1,n=[]);for(let f=0;f<localStorage.length;f++){const a=localStorage.key(f);if(a)if(a!=="words"){let _=me(a);n.push({name:a,key:f,size:_.words.length})}else n.unshift({name:a,key:f,size:s.words.length})}}o();function t(f){l(0,s=me("words")),o()}return[s,n,t]}class Ht extends Ne{constructor(e){super(),Ue(this,e,Mt,At,Se,{})}}export{Ht as default};
